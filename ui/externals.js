!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cytoscape=t():e.cytoscape=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}([function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(3),o=i?i.navigator:null,a=i?i.document:null,s=r(""),l=r({}),u=r(function(){}),c="undefined"==typeof HTMLElement?"undefined":r(HTMLElement),h=function(e){return e&&e.instanceString&&d.fn(e.instanceString)?e.instanceString():null},d={defined:function(e){return null!=e},string:function(e){return null!=e&&(void 0===e?"undefined":r(e))==s},fn:function(e){return null!=e&&(void 0===e?"undefined":r(e))===u},array:function(e){return Array.isArray?Array.isArray(e):null!=e&&e instanceof Array},plainObject:function(e){return null!=e&&(void 0===e?"undefined":r(e))===l&&!d.array(e)&&e.constructor===Object},object:function(e){return null!=e&&(void 0===e?"undefined":r(e))===l},number:function(e){return null!=e&&(void 0===e?"undefined":r(e))===r(1)&&!isNaN(e)},integer:function(e){return d.number(e)&&Math.floor(e)===e},bool:function(e){return null!=e&&(void 0===e?"undefined":r(e))===r(!0)},htmlElement:function(e){return"undefined"===c?void 0:null!=e&&e instanceof HTMLElement},elementOrCollection:function(e){return d.element(e)||d.collection(e)},element:function(e){return"collection"===h(e)&&e._private.single},collection:function(e){return"collection"===h(e)&&!e._private.single},core:function(e){return"core"===h(e)},style:function(e){return"style"===h(e)},stylesheet:function(e){return"stylesheet"===h(e)},event:function(e){return"event"===h(e)},thread:function(e){return"thread"===h(e)},fabric:function(e){return"fabric"===h(e)},emptyString:function(e){return void 0===e||null===e||!(""!==e&&!e.match(/^\s+$/))},nonemptyString:function(e){return!(!e||!d.string(e)||""===e||e.match(/^\s+$/))},domElement:function(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement},boundingBox:function(e){return d.plainObject(e)&&d.number(e.x1)&&d.number(e.x2)&&d.number(e.y1)&&d.number(e.y2)},promise:function(e){return d.object(e)&&d.fn(e.then)},touch:function(){return i&&("ontouchstart"in i||i.DocumentTouch&&a instanceof DocumentTouch)},gecko:function(){return i&&("undefined"!=typeof InstallTrigger||"MozAppearance"in a.documentElement.style)},webkit:function(){return i&&("undefined"!=typeof webkitURL||"WebkitAppearance"in a.documentElement.style)},chromium:function(){return i&&"undefined"!=typeof chrome},khtml:function(){return o&&o.vendor.match(/kde/i)},khtmlEtc:function(){return d.khtml()||d.webkit()||d.chromium()},ms:function(){return o&&o.userAgent.match(/msie|trident|edge/i)},windows:function(){return o&&o.appVersion.match(/Win/i)},mac:function(){return o&&o.appVersion.match(/Mac/i)},linux:function(){return o&&o.appVersion.match(/Linux/i)},unix:function(){return o&&o.appVersion.match(/X11/i)}};e.exports=d},function(e,t,n){"use strict";var r=n(0),i=n(2),o={MAX_INT:Number.MAX_SAFE_INTEGER||9007199254740991,trueify:function(){return!0},falsify:function(){return!1},zeroify:function(){return 0},noop:function(){},error:function(e){console.error?(console.error.apply(console,arguments),console.trace&&console.trace()):(console.log.apply(console,arguments),console.trace&&console.trace())},clone:function(e){return this.extend({},e)},copy:function(e){return null==e?e:r.array(e)?e.slice():r.plainObject(e)?this.clone(e):e},copyArray:function(e){return e.slice()},clonePosition:function(e){return{x:e.x,y:e.y}},uuid:function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t}};o.makeBoundingBox=i.makeBoundingBox.bind(i),o._staticEmptyObject={},o.staticEmptyObject=function(){return o._staticEmptyObject},o.extend=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,n=1;n<t.length;n++){var r=t[n];if(null!=r)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];e[a]=r[a]}}return e},o.assign=o.extend,o.default=function(e,t){return void 0===e?t:e},o.removeFromArray=function(e,t,n){for(var r=e.length;r>=0&&(e[r]!==t||(e.splice(r,1),n));r--);},o.clearArray=function(e){e.splice(0,e.length)},o.push=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.push(r)}},o.getPrefixedProperty=function(e,t,n){return n&&(t=this.prependCamel(n,t)),e[t]},o.setPrefixedProperty=function(e,t,n,r){n&&(t=this.prependCamel(n,t)),e[t]=r},[n(21),n(22),{memoize:n(13)},n(23),n(24),n(25),n(27)].forEach(function(e){o.extend(o,e)}),e.exports=o},function(e,t,n){"use strict";var r={arePositionsSame:function(e,t){return e.x===t.x&&e.y===t.y},copyPosition:function(e){return{x:e.x,y:e.y}},modelToRenderedPosition:function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},renderedToModelPosition:function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},array2point:function(e){return{x:e[0],y:e[1]}},deg2rad:function(e){return Math.PI*e/180},getAngleFromDisp:function(e,t){return Math.atan2(t,e)-Math.PI/2}};r.log2=Math.log2||function(e){return Math.log(e)/Math.log(2)},r.signum=function(e){return e>0?1:e<0?-1:0},r.dist=function(e,t){return Math.sqrt(r.sqdist(e,t))},r.sqdist=function(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},r.qbezierAt=function(e,t,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*n},r.qbezierPtAt=function(e,t,n,i){return{x:r.qbezierAt(e.x,t.x,n.x,i),y:r.qbezierAt(e.y,t.y,n.y,i)}},r.lineAt=function(e,t,n,i){var o=t.x-e.x,a=t.y-e.y,s=r.dist(e,t),l=o/s,u=a/s;return n=null==n?0:n,i=null!=i?i:n*s,{x:e.x+l*i,y:e.y+u*i}},r.lineAtDist=function(e,t,n){return r.lineAt(e,t,void 0,n)},r.triangleAngle=function(e,t,n){var i=r.dist(t,n),o=r.dist(e,n),a=r.dist(e,t);return Math.acos((i*i+o*o-a*a)/(2*i*o))},r.bound=function(e,t,n){return Math.max(e,Math.min(n,t))},r.makeBoundingBox=function(e){if(null==e)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},r.updateBoundingBox=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},r.expandBoundingBoxByPoint=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},r.expandBoundingBox=function(e,t){return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},r.boundingBoxesIntersect=function(e,t){return!(e.x1>t.x2)&&(!(t.x1>e.x2)&&(!(e.x2<t.x1)&&(!(t.x2<e.x1)&&(!(e.y2<t.y1)&&(!(t.y2<e.y1)&&(!(e.y1>t.y2)&&!(t.y1>e.y2)))))))},r.inBoundingBox=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},r.pointInBoundingBox=function(e,t){return this.inBoundingBox(e,t.x,t.y)},r.boundingBoxInBoundingBox=function(e,t){return r.inBoundingBox(e,t.x1,t.y1)&&r.inBoundingBox(e,t.x2,t.y2)},r.roundRectangleIntersectLine=function(e,t,n,r,i,o,a){var s=this.getRoundRectangleRadius(i,o),l=i/2,u=o/2,c=void 0,h=n-l+s-a,d=r-u-a,p=n+l-s+a,f=d;if((c=this.finiteLinesIntersect(e,t,n,r,h,d,p,f,!1)).length>0)return c;var v=n+l+a,g=r-u+s-a,y=v,m=r+u-s+a;if((c=this.finiteLinesIntersect(e,t,n,r,v,g,y,m,!1)).length>0)return c;var x=n-l+s-a,b=r+u+a,w=n+l-s+a,E=b;if((c=this.finiteLinesIntersect(e,t,n,r,x,b,w,E,!1)).length>0)return c;var _=n-l-a,k=r-u+s-a,P=_,S=r+u-s+a;if((c=this.finiteLinesIntersect(e,t,n,r,_,k,P,S,!1)).length>0)return c;var C=void 0,T=n-l+s,D=r-u+s;if((C=this.intersectLineCircle(e,t,n,r,T,D,s+a)).length>0&&C[0]<=T&&C[1]<=D)return[C[0],C[1]];var M=n+l-s,I=r-u+s;if((C=this.intersectLineCircle(e,t,n,r,M,I,s+a)).length>0&&C[0]>=M&&C[1]<=I)return[C[0],C[1]];var N=n+l-s,L=r+u-s;if((C=this.intersectLineCircle(e,t,n,r,N,L,s+a)).length>0&&C[0]>=N&&C[1]>=L)return[C[0],C[1]];var A=n-l+s,B=r+u-s;return(C=this.intersectLineCircle(e,t,n,r,A,B,s+a)).length>0&&C[0]<=A&&C[1]>=B?[C[0],C[1]]:[]},r.inLineVicinity=function(e,t,n,r,i,o,a){var s=a,l=Math.min(n,i),u=Math.max(n,i),c=Math.min(r,o),h=Math.max(r,o);return l-s<=e&&e<=u+s&&c-s<=t&&t<=h+s},r.inBezierVicinity=function(e,t,n,r,i,o,a,s,l){var u=Math.min(n,a,i)-l,c=Math.max(n,a,i)+l,h=Math.min(r,s,o)-l,d=Math.max(r,s,o)+l;return!(e<u||e>c||t<h||t>d)},r.solveQuadratic=function(e,t,n,r){var i=t*t-4*e*(n-=r);if(i<0)return[];var o=Math.sqrt(i),a=2*e;return[(-t+o)/a,(-t-o)/a]},r.solveCubic=function(e,t,n,r,i){var o,a=void 0,s=void 0,l=void 0,u=void 0,c=void 0,h=void 0,d=void 0;return s=-27*(r/=e)+(t/=e)*(9*(n/=e)-t*t*2),o=(a=(3*n-t*t)/9)*a*a+(s/=54)*s,i[1]=0,h=t/3,o>0?(u=(u=s+Math.sqrt(o))<0?-Math.pow(-u,1/3):Math.pow(u,1/3),c=(c=s-Math.sqrt(o))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-h+u+c,h+=(u+c)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-c+u)/2,i[3]=h,void(i[5]=-h)):(i[5]=i[3]=0,0===o?(d=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=2*d-h,void(i[4]=i[2]=-(d+h))):(l=(a=-a)*a*a,l=Math.acos(s/Math.sqrt(l)),d=2*Math.sqrt(a),i[0]=-h+d*Math.cos(l/3),i[2]=-h+d*Math.cos((l+2*Math.PI)/3),void(i[4]=-h+d*Math.cos((l+4*Math.PI)/3))))},r.sqdistToQuadraticBezier=function(e,t,n,r,i,o,a,s){var l=1*n*n-4*n*i+2*n*a+4*i*i-4*i*a+a*a+r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s,u=9*n*i-3*n*n-3*n*a-6*i*i+3*i*a+9*r*o-3*r*r-3*r*s-6*o*o+3*o*s,c=3*n*n-6*n*i+n*a-n*e+2*i*i+2*i*e-a*e+3*r*r-6*r*o+r*s-r*t+2*o*o+2*o*t-s*t,h=1*n*i-n*n+n*e-i*e+r*o-r*r+r*t-o*t,d=[];this.solveCubic(l,u,c,h,d);for(var p=[],f=0;f<6;f+=2)Math.abs(d[f+1])<1e-7&&d[f]>=0&&d[f]<=1&&p.push(d[f]);p.push(1),p.push(0);for(var v=-1,g=void 0,y=void 0,m=void 0,x=0;x<p.length;x++)g=Math.pow(1-p[x],2)*n+2*(1-p[x])*p[x]*i+p[x]*p[x]*a,y=Math.pow(1-p[x],2)*r+2*(1-p[x])*p[x]*o+p[x]*p[x]*s,m=Math.pow(g-e,2)+Math.pow(y-t,2),v>=0?m<v&&(v=m):v=m;return v},r.sqdistToFiniteLine=function(e,t,n,r,i,o){var a=[e-n,t-r],s=[i-n,o-r],l=s[0]*s[0]+s[1]*s[1],u=a[0]*a[0]+a[1]*a[1],c=a[0]*s[0]+a[1]*s[1],h=c*c/l;return c<0?u:h>l?(e-i)*(e-i)+(t-o)*(t-o):u-h},r.pointInsidePolygonPoints=function(e,t,n){for(var r=void 0,i=void 0,o=void 0,a=void 0,s=0,l=0;l<n.length/2;l++)if(r=n[2*l],i=n[2*l+1],l+1<n.length/2?(o=n[2*(l+1)],a=n[2*(l+1)+1]):(o=n[2*(l+1-n.length/2)],a=n[2*(l+1-n.length/2)+1]),r==e&&o==e);else{if(!(r>=e&&e>=o||r<=e&&e<=o))continue;(e-r)/(o-r)*(a-i)+i>t&&s++}return s%2!=0},r.pointInsidePolygon=function(e,t,n,i,o,a,s,l,u){var c=new Array(n.length),h=void 0;null!=l[0]?(h=Math.atan(l[1]/l[0]),l[0]<0?h+=Math.PI/2:h=-h-Math.PI/2):h=l;for(var d=Math.cos(-h),p=Math.sin(-h),f=0;f<c.length/2;f++)c[2*f]=a/2*(n[2*f]*d-n[2*f+1]*p),c[2*f+1]=s/2*(n[2*f+1]*d+n[2*f]*p),c[2*f]+=i,c[2*f+1]+=o;var v=void 0;if(u>0){var g=this.expandPolygon(c,-u);v=this.joinLines(g)}else v=c;return r.pointInsidePolygonPoints(e,t,v)},r.joinLines=function(e){for(var t=new Array(e.length/2),n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=void 0,c=0;c<e.length/4;c++){n=e[4*c],r=e[4*c+1],i=e[4*c+2],o=e[4*c+3],c<e.length/4-1?(a=e[4*(c+1)],s=e[4*(c+1)+1],l=e[4*(c+1)+2],u=e[4*(c+1)+3]):(a=e[0],s=e[1],l=e[2],u=e[3]);var h=this.finiteLinesIntersect(n,r,i,o,a,s,l,u,!0);t[2*c]=h[0],t[2*c+1]=h[1]}return t},r.expandPolygon=function(e,t){for(var n=new Array(2*e.length),r=void 0,i=void 0,o=void 0,a=void 0,s=0;s<e.length/2;s++){r=e[2*s],i=e[2*s+1],s<e.length/2-1?(o=e[2*(s+1)],a=e[2*(s+1)+1]):(o=e[0],a=e[1]);var l=a-i,u=-(o-r),c=Math.sqrt(l*l+u*u),h=l/c,d=u/c;n[4*s]=r+h*t,n[4*s+1]=i+d*t,n[4*s+2]=o+h*t,n[4*s+3]=a+d*t}return n},r.intersectLineEllipse=function(e,t,n,r,i,o){var a=n-e,s=r-t;a/=i,s/=o;var l=Math.sqrt(a*a+s*s),u=l-1;if(u<0)return[];var c=u/l;return[(n-e)*c+e,(r-t)*c+t]},r.checkInEllipse=function(e,t,n,r,i,o,a){return e-=i,t-=o,(e/=n/2+a)*e+(t/=r/2+a)*t<=1},r.intersectLineCircle=function(e,t,n,r,i,o,a){var s=[n-e,r-t],l=[e-i,t-o],u=s[0]*s[0]+s[1]*s[1],c=2*(l[0]*s[0]+l[1]*s[1]),h=c*c-4*u*(l[0]*l[0]+l[1]*l[1]-a*a);if(h<0)return[];var d=(-c+Math.sqrt(h))/(2*u),p=(-c-Math.sqrt(h))/(2*u),f=Math.min(d,p),v=Math.max(d,p),g=[];if(f>=0&&f<=1&&g.push(f),v>=0&&v<=1&&g.push(v),0===g.length)return[];var y=g[0]*s[0]+e,m=g[0]*s[1]+t;return g.length>1?g[0]==g[1]?[y,m]:[y,m,g[1]*s[0]+e,g[1]*s[1]+t]:[y,m]},r.findCircleNearPoint=function(e,t,n,r,i){var o=r-e,a=i-t,s=Math.sqrt(o*o+a*a);return[e+o/s*n,t+a/s*n]},r.findMaxSqDistanceToOrigin=function(e){for(var t=1e-6,n=void 0,r=0;r<e.length/2;r++)(n=e[2*r]*e[2*r]+e[2*r+1]*e[2*r+1])>t&&(t=n);return t},r.midOfThree=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},r.finiteLinesIntersect=function(e,t,n,r,i,o,a,s,l){var u=e-i,c=n-e,h=a-i,d=t-o,p=r-t,f=s-o,v=h*d-f*u,g=c*d-p*u,y=f*c-h*p;if(0!==y){var m=v/y,x=g/y;return-.001<=m&&m<=1.001&&-.001<=x&&x<=1.001?[e+m*c,t+m*p]:l?[e+m*c,t+m*p]:[]}return 0===v||0===g?this.midOfThree(e,n,a)===a?[a,s]:this.midOfThree(e,n,i)===i?[i,o]:this.midOfThree(i,a,n)===n?[n,r]:[]:[]},r.polygonIntersectLine=function(e,t,n,i,o,a,s,l){var u=[],c=void 0,h=new Array(n.length),d=!0;5===arguments.length&&(d=!1);var p=void 0;if(d){for(var f=0;f<h.length/2;f++)h[2*f]=n[2*f]*a+i,h[2*f+1]=n[2*f+1]*s+o;if(l>0){var v=r.expandPolygon(h,-l);p=r.joinLines(v)}else p=h}else p=n;for(var g=void 0,y=void 0,m=void 0,x=void 0,b=0;b<p.length/2;b++)g=p[2*b],y=p[2*b+1],b<p.length/2-1?(m=p[2*(b+1)],x=p[2*(b+1)+1]):(m=p[0],x=p[1]),0!==(c=this.finiteLinesIntersect(e,t,i,o,g,y,m,x)).length&&u.push(c[0],c[1]);return u},r.shortenIntersection=function(e,t,n){var r=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=(i-n)/i;return o<0&&(o=1e-5),[t[0]+o*r[0],t[1]+o*r[1]]},r.generateUnitNgonPointsFitToSquare=function(e,t){var n=r.generateUnitNgonPoints(e,t);return n=r.fitPolygonToSquare(n)},r.fitPolygonToSquare=function(e){for(var t=void 0,n=void 0,r=e.length/2,i=1/0,o=1/0,a=-1/0,s=-1/0,l=0;l<r;l++)t=e[2*l],n=e[2*l+1],i=Math.min(i,t),a=Math.max(a,t),o=Math.min(o,n),s=Math.max(s,n);for(var u=2/(a-i),c=2/(s-o),h=0;h<r;h++)t=e[2*h]=e[2*h]*u,n=e[2*h+1]=e[2*h+1]*c,i=Math.min(i,t),a=Math.max(a,t),o=Math.min(o,n),s=Math.max(s,n);if(o<-1)for(var d=0;d<r;d++)n=e[2*d+1]=e[2*d+1]+(-1-o);return e},r.generateUnitNgonPoints=function(e,t){var n=1/e*2*Math.PI,r=e%2==0?Math.PI/2+n/2:Math.PI/2;r+=t;for(var i=new Array(2*e),o=void 0,a=0;a<e;a++)o=a*n+r,i[2*a]=Math.cos(o),i[2*a+1]=Math.sin(-o);return i},r.getRoundRectangleRadius=function(e,t){return Math.min(e/4,t/4,8)},r.getCutRectangleCornerLength=function(){return 8},r.bezierPtsToQuadCoeff=function(e,t,n){return[e-2*t+n,2*(t-e),e]},r.getBarrelCurveConstants=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},e.exports=r},function(e,t,n){"use strict";e.exports="undefined"==typeof window?null:window},function(e,t,n){"use strict";var r=n(1),i={};[n(44),n(46),n(47)].forEach(function(e){r.assign(i,e)}),e.exports=i},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function e(t){if(!(this instanceof e))return new e(t);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};i.prototype={fulfill:function(e){return o(this,1,"fulfillValue",e)},reject:function(e){return o(this,2,"rejectReason",e)},then:function(e,t){var n=new i;return this.onFulfilled.push(l(e,n,"fulfill")),this.onRejected.push(l(t,n,"reject")),a(this),n.proxy}};var o=function(e,t,n,r){return 0===e.state&&(e.state=t,e[n]=r,a(e)),e},a=function(e){1===e.state?s(e,"onFulfilled",e.fulfillValue):2===e.state&&s(e,"onRejected",e.rejectReason)},s=function(e,t,n){if(0!==e[t].length){var r=e[t];e[t]=[];var i=function(){for(var e=0;e<r.length;e++)r[e](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},l=function(e,t,n){return function(r){if("function"!=typeof e)t[n].call(t,r);else{var i;try{i=e(r)}catch(e){return void t.reject(e)}u(t,i)}}},u=function e(t,n){if(t!==n&&t.proxy!==n){var i;if("object"===(void 0===n?"undefined":r(n))&&null!==n||"function"==typeof n)try{i=n.then}catch(e){return void t.reject(e)}if("function"!=typeof i)t.fulfill(n);else{var o=!1;try{i.call(n,function(r){o||(o=!0,r===n?t.reject(new TypeError("circular thenable chain")):e(t,r))},function(e){o||(o=!0,t.reject(e))})}catch(e){o||t.reject(e)}}}else t.reject(new TypeError("cannot resolve promise with itself"))};i.all=function(e){return new i(function(t,n){for(var r=new Array(e.length),i=0,o=function(n,o){r[n]=o,++i===e.length&&t(r)},a=0;a<e.length;a++)!function(t){var r=e[t];null!=r&&null!=r.then?r.then(function(e){o(t,e)},function(e){n(e)}):o(t,r)}(a)})},i.resolve=function(e){return new i(function(t,n){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},e.exports="undefined"!=typeof Promise?Promise:i},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(10),a=function(e){if(this._private={selectorText:e,invalid:!0},null==e||r.string(e)&&e.match(/^\s*$/))this.length=0;else if("*"===e||"edge"===e||"node"===e)this[0]=o(),this[0].group="*"===e?e:e+"s",this[0].groupOnly=!0,this[0].length=1,this._private.invalid=!1,this.length=1;else if(r.elementOrCollection(e)){var t=e.collection();this[0]=o(),this[0].collection=t,this[0].length=1,this.length=1}else if(r.fn(e))this[0]=o(),this[0].filter=e,this[0].length=1,this.length=1;else{if(!r.string(e))return void i.error("A selector must be created from a string; found ",e);if(!this.parse(e))return}this._private.invalid=!1},s=a.prototype;s.valid=function(){return!this._private.invalid},s.invalid=function(){return this._private.invalid},s.text=function(){return this._private.selectorText},s.size=function(){return this.length},s.eq=function(e){return this[e]},s.sameText=function(e){return this.text()===e.text()},s.toString=s.selector=function(){if(null!=this._private.toStringCache)return this._private.toStringCache;var e=void 0,t="",n=function(e){return null==e?"":e},i=function(e){return r.string(e)?'"'+e+'"':n(e)},o=function(e){return" "+e+" "},a=function t(r){var a="",s=void 0;r.subject===r&&(a+="$");var l=n(r.group);for(a+=l.substring(0,l.length-1),s=0;s<r.data.length;s++){var u=r.data[s];u.value?a+="["+u.field+o(n(u.operator))+i(u.value)+"]":a+="["+n(u.operator)+u.field+"]"}for(s=0;s<r.meta.length;s++){var c=r.meta[s];a+="[["+c.field+o(n(c.operator))+i(c.value)+"]]"}for(s=0;s<r.colonSelectors.length;s++)a+=r.colonSelectors[e];for(s=0;s<r.ids.length;s++)a+="#"+r.ids[e];for(s=0;s<r.classes.length;s++)a+="."+r.classes[s];if(null!=r.source&&null!=r.target&&(a=t(r.source)+" -> "+t(r.target)),null!=r.connectedNodes){var h=r.connectedNodes;a=t(h[0])+" <-> "+t(h[1])}return null!=r.parent&&(a=t(r.parent)+" > "+a),null!=r.ancestor&&(a=t(r.ancestor)+" "+a),null!=r.child&&(a+=" > "+t(r.child)),null!=r.descendant&&(a+=" "+t(r.descendant)),a};for(e=0;e<this.length;e++){t+=a(this[e]),this.length>1&&e<this.length-1&&(t+=", ")}return this._private.toStringCache=t,t},[n(50),n(53)].forEach(function(e){return i.assign(s,e)}),e.exports=a},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(28),a=n(8),s=n(14),l=function(e,t,n){for(var i=null!=n?n:r.uuid();e.hasElementWithId(i);)i=r.uuid();return i},u=function(e,t,n){if(void 0!==e&&i.core(e)){var u=new o,c=!1;if(t){if(t.length>0&&i.plainObject(t[0])&&!i.element(t[0])){c=!0;for(var h=[],d=new a,p=0,f=t.length;p<f;p++){var v=t[p];null==v.data&&(v.data={});var g=v.data;if(null==g.id)g.id=l(e,v);else if(e.hasElementWithId(g.id)||d.has(g.id))continue;var y=new s(e,v,!1);h.push(y),d.add(g.id)}t=h}}else t=[];this.length=0;for(var m=0,x=t.length;m<x;m++){var b=t[m];if(null!=b){var w=b._private.data.id;(null==n||n.unique&&!u.has(w))&&(u.set(w,{index:this.length,ele:b}),this[this.length]=b,this.length++)}}this._private={cy:e,map:u},c&&this.restore()}else r.error("A collection must have a reference to the core")},c=s.prototype=u.prototype;c.instanceString=function(){return"collection"},c.spawn=function(e,t,n){return i.core(e)||(n=t,t=e,e=this.cy()),new u(e,t,n)},c.spawnSelf=function(){return this.spawn(this)},c.cy=function(){return this._private.cy},c.renderer=function(){return this._private.cy.renderer()},c.element=function(){return this[0]},c.collection=function(){return i.collection(this)?this:new u(this._private.cy,[this])},c.unique=function(){return new u(this._private.cy,this,{unique:!0})},c.hasElementWithId=function(e){return this._private.map.has(e)},c.getElementById=function(e){var t=this._private.cy,n=this._private.map.get(e);return n?n.ele:new u(t)},c.$id=c.getElementById,c.poolIndex=function(){var e=this._private.cy._private.elements,t=this._private.data.id;return e._private.map.get(t).index},c.json=function(e){var t=this.element(),n=this.cy();if(null==t&&e)return this;if(null!=t){var o=t._private;if(i.plainObject(e)){n.startBatch(),e.data&&t.data(e.data),e.position&&t.position(e.position);var a=function(n,r,i){var a=e[n];null!=a&&a!==o[n]&&(a?t[r]():t[i]())};return a("removed","remove","restore"),a("selected","select","unselect"),a("selectable","selectify","unselectify"),a("locked","lock","unlock"),a("grabbable","grabify","ungrabify"),null!=e.classes&&t.classes(e.classes),n.endBatch(),this}if(void 0===e){var s={data:r.copy(o.data),position:r.copy(o.position),group:o.group,removed:o.removed,selected:o.selected,selectable:o.selectable,locked:o.locked,grabbable:o.grabbable,classes:null};s.classes="";var l=0;return o.classes.forEach(function(e){return s.classes+=0==l++?e:" "+e}),s}}},c.jsons=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t].json();e.push(n)}return e},c.clone=function(){for(var e=this.cy(),t=[],n=0;n<this.length;n++){var r=this[n].json(),i=new s(e,r,!1);t.push(i)}return new u(e,t)},c.copy=c.clone,c.restore=function(e){var t=this.cy(),n=t._private;void 0===e&&(e=!0);for(var a=[],s=[],c=void 0,h=0,d=this.length;h<d;h++){var p=this[h];p.removed()&&(p.isNode()?a.push(p):s.push(p))}c=a.concat(s);var f=void 0,v=function(){c.splice(f,1),f--};for(f=0;f<c.length;f++){var g=c[f],y=g._private,m=y.data;if(g.clearTraversalCache(),void 0===m.id)m.id=l(t,g);else if(i.number(m.id))m.id=""+m.id;else{if(i.emptyString(m.id)||!i.string(m.id)){r.error("Can not create element with invalid string ID `"+m.id+"`"),v();continue}if(t.hasElementWithId(m.id)){r.error("Can not create second element with ID `"+m.id+"`"),v();continue}}var x=m.id;if(g.isNode()){var b=y.position;null==b.x&&(b.x=0),null==b.y&&(b.y=0)}if(g.isEdge()){for(var w=g,E=["source","target"],_=E.length,k=!1,P=0;P<_;P++){var S=E[P],C=m[S];i.number(C)&&(C=m[S]=""+m[S]),null==C||""===C?(r.error("Can not create edge `"+x+"` with unspecified "+S),k=!0):t.hasElementWithId(C)||(r.error("Can not create edge `"+x+"` with nonexistant "+S+" `"+C+"`"),k=!0)}if(k){v();continue}var T=t.getElementById(m.source),D=t.getElementById(m.target);T._private.edges.push(w),D._private.edges.push(w),w._private.source=T,w._private.target=D}y.map=new o,y.map.set(x,{ele:g,index:0}),y.removed=!1,t.addToPool(g)}for(var M=0;M<a.length;M++){var I=a[M],N=I._private.data;i.number(N.parent)&&(N.parent=""+N.parent);var L=N.parent;if(null!=L){var A=t.getElementById(L);if(A.empty())N.parent=void 0;else{for(var B=!1,O=A;!O.empty();){if(I.same(O)){B=!0,N.parent=void 0;break}O=O.parent()}B||(A[0]._private.children.push(I),I._private.parent=A[0],n.hasCompoundNodes=!0)}}}if(c.length>0){for(var z=new u(t,c),R=0;R<z.length;R++){var V=z[R];V.isNode()||(V.parallelEdges().clearTraversalCache(),V.source().clearTraversalCache(),V.target().clearTraversalCache())}(n.hasCompoundNodes?t.collection().merge(z).merge(z.connectedNodes()).merge(z.parent()):z).dirtyCompoundBoundsCache().updateStyle(e),e?z.emitAndNotify("add"):z.emit("add")}return this},c.removed=function(){var e=this[0];return e&&e._private.removed},c.inside=function(){var e=this[0];return e&&!e._private.removed},c.remove=function(e){var t=[],n=[],i={},o=this._private.cy;function a(e){var t=i[e.id()];e.removed()||t||(i[e.id()]=!0,e.isNode()?(n.push(e),function(e){for(var t=e._private.edges,n=0;n<t.length;n++)a(t[n])}(e),function(e){for(var t=e._private.children,n=0;n<t.length;n++)a(t[n])}(e)):n.unshift(e))}void 0===e&&(e=!0);for(var s=0,l=this.length;s<l;s++){a(this[s])}function c(e,t){var n=e._private.edges;r.removeFromArray(n,t),e.clearTraversalCache()}var h=[];function d(e,t){t=t[0];var n=(e=e[0])._private.children,i=e.id();r.removeFromArray(n,t),h.ids[i]||(h.ids[i]=!0,h.push(e))}h.ids={},this.dirtyCompoundBoundsCache(),o.removeFromPool(n);for(var p=0;p<n.length;p++){var f=n[p];if(f._private.removed=!0,t.push(f),f.isEdge()){var v=f.source()[0],g=f.target()[0];c(v,f),c(g,f),f.parallelEdges().clearTraversalCache()}else{var y=f.parent();0!==y.length&&d(y,f)}}var m=o._private.elements;o._private.hasCompoundNodes=!1;for(var x=0;x<m.length;x++){if(m[x].isParent()){o._private.hasCompoundNodes=!0;break}}var b=new u(this.cy(),t);b.size()>0&&(e&&this.cy().notify({type:"remove",eles:b}),b.emit("remove"));for(var w=0;w<h.length;w++){var E=h[w];E.removed()||E.updateStyle()}return new u(o,t)},c.move=function(e){var t=this._private.cy;if(void 0!==e.source||void 0!==e.target){var n=e.source,r=e.target,i=t.hasElementWithId(n),o=t.hasElementWithId(r);if(i||o){var a=this.jsons();this.remove();for(var s=0;s<a.length;s++){var l=a[s],u=this[s];"edges"===l.group&&(i&&(l.data.source=n),o&&(l.data.target=r),l.scratch=u._private.scratch)}return t.add(a)}}else if(void 0!==e.parent){var c=e.parent;if(null===c||t.hasElementWithId(c)){var h=this.jsons(),d=this.descendants(),p=d.union(d.union(this).connectedEdges()).jsons();this.remove();for(var f=0;f<h.length;f++){var v=h[f],g=this[f];"nodes"===v.group&&(v.data.parent=null===c?void 0:c,v.scratch=g._private.scratch)}return t.add(h.concat(p))}}return this},[n(29),n(43),n(48),n(49),n(54),n(55),n(56),n(57),n(62),n(63),n(64),n(7),n(65),n(66),n(67),n(68),n(69)].forEach(function(e){r.extend(c,e)}),e.exports=u},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();"function"==typeof Symbol&&Symbol.iterator;var i=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._obj=Object.create(null),null!=t){var n=void 0;n=null!=t.instanceString&&t.instanceString()===this.instanceString()?t.toArray():t;for(var r=0;r<n.length;r++)this.add(n[r])}}return r(e,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(e){this._obj[e]=1}},{key:"delete",value:function(e){this._obj[e]=0}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(e){return 1===this._obj[e]}},{key:"toArray",value:function(){var e=this;return Object.keys(this._obj).filter(function(t){return e.has(t)})}},{key:"forEach",value:function(e,t){return this.toArray().forEach(e,t)}},{key:"size",get:function(){return this.toArray().length}}]),e}();e.exports=i},function(e,t,n){"use strict";e.exports=n(32)},function(e,t,n){"use strict";e.exports=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}}},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(16),a=/^([^.]+)(\.(?:[^.]+))?$/,s={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},eventFields:function(){return{}},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:void 0};function l(e){r.assign(this,s,e),this.listeners=[],this.emitting=0}var u=l.prototype,c=function(e,t,n,o,s,l,u){i.fn(o)&&(s=o,o=null),u&&(l=null==l?u:r.assign({},l,u));for(var c=n.split(/\s+/),h=0;h<c.length;h++){var d=c[h];if(!i.emptyString(d)){var p=d.match(a);if(p)if(!1===t(e,d,p[1],p[2]?p[2]:null,o,s,l))break}}},h=function(e,t){return new o(t.type,r.assign(t,e.eventFields(e.context)))};u.on=u.addListener=function(e,t,n,r,o){return c(this,function(e,t,n,r,o,a,s){i.fn(a)&&e.listeners.push({event:t,callback:a,type:n,namespace:r,qualifier:o,conf:s})},e,t,n,r,o),this},u.one=function(e,t,n,r){return this.on(e,t,n,r,{one:!0})},u.removeListener=u.off=function(e,t,n,i){var o=this;0!==this.emitting&&(this.listeners=r.copyArray(this.listeners));for(var a=this.listeners,s=function(r){var s=a[r];c(o,function(e,t,n,i,o,l){if(s.type===n&&(!i||s.namespace===i)&&(!o||e.qualifierCompare(s.qualifier,o))&&(!l||s.callback===l))return a.splice(r,1),!1},e,t,n,i)},l=a.length-1;l>=0;l--)s(l);return this},u.emit=u.trigger=function(e,t,n){var o=this.listeners,s=o.length;return this.emitting++,i.array(t)||(t=[t]),function(e,t,n){if(i.event(n))t(e,n);else if(i.plainObject(n))t(e,h(e,n));else for(var r=n.split(/\s+/),o=0;o<r.length;o++){var s=r[o];if(!i.emptyString(s)){var l=s.match(a);if(l){var u=l[1],c=l[2]?l[2]:null;t(e,h(e,{type:u,namespace:c,target:e.context}))}}}}(this,function(e,i){null!=n&&(o=[{event:i.event,type:i.type,namespace:i.namespace,callback:n}],s=o.length);for(var a=function(n){var a=o[n];if(a.type===i.type&&(!a.namespace||a.namespace===i.namespace||".*"===a.namespace)&&e.eventMatches(e.context,a,i)){var s=[i];null!=t&&r.push(s,t),e.beforeEmit(e.context,a,i),a.conf&&a.conf.one&&(e.listeners=e.listeners.filter(function(e){return e!==a}));var l=e.callbackContext(e.context,a,i),u=a.callback.apply(l,s);e.afterEmit(e.context,a,i),!1===u&&(i.stopPropagation(),i.preventDefault())}},l=0;l<s;l++)a(l);e.bubble(e.context)&&!i.isPropagationStopped()&&e.parent(e.context).emit(i,t)},e),this.emitting--,this},e.exports=l},function(e,t,n){"use strict";var r=n(3),i=n(1),o=n(7),a=n(0),s=n(5),l=n(4),u=function(e){var t=this,n=(e=i.extend({},e)).container;n&&!a.htmlElement(n)&&a.htmlElement(n[0])&&(n=n[0]);var l=n?n._cyreg:null;(l=l||{})&&l.cy&&(l.cy.destroy(),l={});var u=l.readies=l.readies||[];n&&(n._cyreg=l),l.cy=t;var c=void 0!==r&&void 0!==n&&!e.headless,h=e;h.layout=i.extend({name:c?"grid":"null"},h.layout),h.renderer=i.extend({name:c?"canvas":"null"},h.renderer);var d=function(e,t,n){return void 0!==t?t:void 0!==n?n:e},p=this._private={container:n,ready:!1,options:h,elements:new o(this),listeners:[],aniEles:new o(this),scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:d(!0,h.zoomingEnabled),userZoomingEnabled:d(!0,h.userZoomingEnabled),panningEnabled:d(!0,h.panningEnabled),userPanningEnabled:d(!0,h.userPanningEnabled),boxSelectionEnabled:d(!0,h.boxSelectionEnabled),autolock:d(!1,h.autolock,h.autolockNodes),autoungrabify:d(!1,h.autoungrabify,h.autoungrabifyNodes),autounselectify:d(!1,h.autounselectify),styleEnabled:void 0===h.styleEnabled?c:h.styleEnabled,zoom:a.number(h.zoom)?h.zoom:1,pan:{x:a.plainObject(h.pan)&&a.number(h.pan.x)?h.pan.x:0,y:a.plainObject(h.pan)&&a.number(h.pan.y)?h.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1};this.createEmitter();var f=h.selectionType;p.selectionType=void 0===f||"additive"!==f&&"single"!==f?"single":f,a.number(h.minZoom)&&a.number(h.maxZoom)&&h.minZoom<h.maxZoom?(p.minZoom=h.minZoom,p.maxZoom=h.maxZoom):a.number(h.minZoom)&&void 0===h.maxZoom?p.minZoom=h.minZoom:a.number(h.maxZoom)&&void 0===h.minZoom&&(p.maxZoom=h.maxZoom);p.styleEnabled&&t.setStyle([]),t.initRenderer(i.extend({hideEdgesOnViewport:h.hideEdgesOnViewport,textureOnViewport:h.textureOnViewport,wheelSensitivity:a.number(h.wheelSensitivity)&&h.wheelSensitivity>0?h.wheelSensitivity:1,motionBlur:void 0!==h.motionBlur&&h.motionBlur,motionBlurOpacity:void 0===h.motionBlurOpacity?.05:h.motionBlurOpacity,pixelRatio:a.number(h.pixelRatio)&&h.pixelRatio>0?h.pixelRatio:void 0,desktopTapThreshold:void 0===h.desktopTapThreshold?4:h.desktopTapThreshold,touchTapThreshold:void 0===h.touchTapThreshold?8:h.touchTapThreshold},h.renderer));!function(e,t){if(e.some(a.promise))return s.all(e).then(t);t(e)}([h.style,h.elements],function(e){var n=e[0],r=e[1];p.styleEnabled&&t.style().append(n),function(e,n,r){t.notifications(!1);var o=t.mutableElements();o.length>0&&o.remove(),null!=e&&(a.plainObject(e)||a.array(e))&&t.add(e),t.one("layoutready",function(e){t.notifications(!0),t.emit(e),t.notify({type:"load",eles:t.mutableElements()}),t.one("load",n),t.emit("load")}).one("layoutstop",function(){t.one("done",r),t.emit("done")});var s=i.extend({},t._private.options.layout);s.eles=t.elements(),t.layout(s).run()}(r,function(){t.startAnimationLoop(),p.ready=!0,a.fn(h.ready)&&t.on("ready",h.ready);for(var e=0;e<u.length;e++){var n=u[e];t.on("ready",n)}l&&(l.readies=[]),t.emit("ready")},h.done)})},c=u.prototype;i.extend(c,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},isDestroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.isDestroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return"null"===this._private.options.renderer.name},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container},options:function(){return i.copy(this._private.options)},json:function(e){var t=this,n=t._private,r=t.mutableElements();if(a.plainObject(e)){if(t.startBatch(),e.elements){var o={},s=function(e,n){for(var r=0;r<e.length;r++){var a=e[r],s=a.data.id,l=t.getElementById(s);o[s]=!0,0!==l.length?l.json(a):n?t.add(i.extend({group:n},a)):t.add(a)}};if(a.array(e.elements))s(e.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var c=l[u],h=e.elements[c];a.array(h)&&s(h,c)}r.stdFilter(function(e){return!o[e.id()]}).remove()}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x===n.pan.x&&e.pan.y===n.pan.y||t.pan(e.pan));for(var d=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],p=0;p<d.length;p++){var f=d[p];null!=e[f]&&t[f](e[f])}return t.endBatch(),this}if(void 0===e){var v={elements:{}};return r.forEach(function(e){var t=e.group();v.elements[t]||(v.elements[t]=[]),v.elements[t].push(e.json())}),this._private.styleEnabled&&(v.style=t.style().json()),v.zoomingEnabled=t._private.zoomingEnabled,v.userZoomingEnabled=t._private.userZoomingEnabled,v.zoom=t._private.zoom,v.minZoom=t._private.minZoom,v.maxZoom=t._private.maxZoom,v.panningEnabled=t._private.panningEnabled,v.userPanningEnabled=t._private.userPanningEnabled,v.pan=i.copy(t._private.pan),v.boxSelectionEnabled=t._private.boxSelectionEnabled,v.renderer=i.copy(t._private.options.renderer),v.hideEdgesOnViewport=t._private.options.hideEdgesOnViewport,v.textureOnViewport=t._private.options.textureOnViewport,v.wheelSensitivity=t._private.options.wheelSensitivity,v.motionBlur=t._private.options.motionBlur,v}},scratch:l.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:l.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})}),c.$id=c.getElementById,[n(70),n(71),n(79),n(80),n(81),n(82),n(83),n(84),n(85),n(94)].forEach(function(e){i.extend(c,e)}),e.exports=u},function(e,t,n){"use strict";e.exports=function(e,t){t||(t=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")});var n=function n(){var r=arguments,i=void 0,o=t.apply(this,r),a=n.cache;return(i=a[o])||(i=a[o]=e.apply(this,r)),i};return n.cache={},n}},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(8);e.exports=function(e,t,n){if(n=!(void 0!==n&&!n),void 0!==e&&void 0!==t&&i.core(e)){var a=t.group;if(null==a&&(a=t.data&&null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"===a||"edges"===a){this.length=1,this[0]=this;var s=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],removed:!0,selected:!!t.selected,selectable:void 0===t.selectable||!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:void 0===t.grabbable||!!t.grabbable,active:!1,classes:new o,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1};if(t.renderedPosition){var l=t.renderedPosition,u=e.pan(),c=e.zoom();s.position={x:(l.x-u.x)/c,y:(l.y-u.y)/c}}if(i.string(t.classes))for(var h=t.classes.split(/\s+/),d=0,p=h.length;d<p;d++){var f=h[d];f&&""!==f&&s.classes.add(f)}(t.style||t.css)&&e.style().applyBypass(this,t.style||t.css),this.createEmitter(),(void 0===n||n)&&this.restore()}else r.error("An element must be of type `nodes` or `edges`; you specified `"+a+"`")}else r.error("An element must have a core reference and parameters set")}},function(e,t,n){"use strict";var r=n(1),i=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(e,t){return r.sort.descending(e.selector,t.selector)}),o="("+i.map(function(e){return e.selector}).join("|")+")";e.exports={stateSelectors:i,stateSelectorMatches:function e(t,n){return(e.lookup=e.lookup||function(){for(var e={},t=void 0,n=0;n<i.length;n++)e[(t=i[n]).selector]=t.matches;return e}())[t](n)},stateSelectorRegex:o}},function(e,t,n){"use strict";var r=function(e,t){this.recycle(e,t)};function i(){return!1}function o(){return!0}r.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=i,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?o:i):null!=e&&e.type?t=e:this.type=e,null!=t&&(this.originalEvent=t.originalEvent,this.type=null!=t.type?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,r=this.cy.zoom(),a=this.cy.pan();this.renderedPosition={x:n.x*r+a.x,y:n.y*r+a.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=o;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=o;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()},isDefaultPrevented:i,isPropagationStopped:i,isImmediatePropagationStopped:i},e.exports=r},function(e,t,n){"use strict";var r=n(1);e.exports=function(e,t){var n=e.cy().hasCompoundNodes();function i(e){var t=e.pstyle("z-compound-depth");return"auto"===t.value?n?e.zDepth():0:"bottom"===t.value?-1:"top"===t.value?r.MAX_INT:0}var o=i(e)-i(t);if(0!==o)return o;function a(e){return"auto"===e.pstyle("z-index-compare").value&&e.isNode()?1:0}var s=a(e)-a(t);if(0!==s)return s;var l=e.pstyle("z-index").value-t.pstyle("z-index").value;return 0!==l?l:e.poolIndex()-t.poolIndex()}},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(6),a=function e(t){if(!(this instanceof e))return new e(t);r.core(t)?(this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()):i.error("A style must have a core reference")},s=a.prototype;s.instanceString=function(){return"style"},s.clear=function(){for(var e=0;e<this.length;e++)this[e]=void 0;return this.length=0,this._private.newStyle=!0,this},s.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},s.core=function(){return this._private.coreStyle},s.selector=function(e){var t="core"===e?null:new o(e),n=this.length++;return this[n]={selector:t,properties:[],mappedProperties:[],index:n},this},s.css=function(){var e=arguments;switch(e.length){case 1:for(var t=e[0],n=0;n<this.properties.length;n++){var r=this.properties[n],o=t[r.name];void 0===o&&(o=t[i.dash2camel(r.name)]),void 0!==o&&this.cssRule(r.name,o)}break;case 2:this.cssRule(e[0],e[1])}return this},s.style=s.css,s.cssRule=function(e,t){var n=this.parse(e,t);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n),!this[r].selector&&(this._private.coreStyle[n.name]=n)}return this},s.append=function(e){return r.stylesheet(e)?e.appendToStyle(this):r.array(e)?this.appendFromJson(e):r.string(e)&&this.appendFromString(e),this},a.fromJson=function(e,t){var n=new a(e);return n.fromJson(t),n},a.fromString=function(e,t){return new a(e).fromString(t)},[n(86),n(87),n(88),n(89),n(90),n(91),n(92),n(93)].forEach(function(e){i.extend(s,e)}),a.types=s.types,a.properties=s.properties,e.exports=a},function(e,t,n){"use strict";var r=n(1);e.exports={setupDequeueing:function(e){return function(){var t=this,n=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var i=r.debounce(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},e.deqRedrawThreshold),o=e.priority||r.noop;n.beforeRender(function(o,a){for(var s=r.performanceNow(),l=n.averageRedrawTime,u=n.lastRedrawTime,c=[],h=n.cy.extent(),d=n.getPixelRatio();;){var p=r.performanceNow(),f=p-s,v=p-a;if(u<1e3/60){var g=1e3/60-(o?l:0);if(v>=e.deqFastCost*g)break}else if(o){if(f>=e.deqCost*u||f>=e.deqAvgCost*l)break}else if(v>=e.deqNoDrawCost*(1e3/60))break;var y=e.deq(t,d,h);if(!(y.length>0))break;for(var m=0;m<y.length;m++)c.push(y[m])}c.length>0&&(e.onDeqd(t,c),!o&&e.shouldRedraw(t,c,d,h)&&i())},o(t))}}}}},function(e,t,n){"use strict";var r=n(0),i=n(12),o=n(95),a=n(137),s=function(e){return void 0===e&&(e={}),r.plainObject(e)?new i(e):r.string(e)?o.apply(o,arguments):void 0};s.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(s),e.apply(null,t),this},s.version=n(138),s.stylesheet=s.Stylesheet=a,e.exports=s},function(e,t,n){"use strict";var r=n(0);e.exports={hex2tuple:function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t=void 0,n=void 0,r=void 0;return 4===e.length?(t=parseInt(e[1]+e[1],16),n=parseInt(e[2]+e[2],16),r=parseInt(e[3]+e[3],16)):(t=parseInt(e[1]+e[2],16),n=parseInt(e[3]+e[4],16),r=parseInt(e[5]+e[6],16)),[t,n,r]}},hsl2tuple:function(e){var t=void 0,n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,l=void 0;function u(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var c=new RegExp("^"+this.regex.hsla+"$").exec(e);if(c){if((n=parseInt(c[1]))<0?n=(360- -1*n%360)%360:n>360&&(n%=360),n/=360,(r=parseFloat(c[2]))<0||r>100)return;if(r/=100,(i=parseFloat(c[3]))<0||i>100)return;if(i/=100,void 0!==(o=c[4])&&((o=parseFloat(o))<0||o>1))return;if(0===r)a=s=l=Math.round(255*i);else{var h=i<.5?i*(1+r):i+r-i*r,d=2*i-h;a=Math.round(255*u(d,h,n+1/3)),s=Math.round(255*u(d,h,n)),l=Math.round(255*u(d,h,n-1/3))}t=[a,s,l,o]}return t},rgb2tuple:function(e){var t=void 0,n=new RegExp("^"+this.regex.rgba+"$").exec(e);if(n){t=[];for(var r=[],i=1;i<=3;i++){var o=n[i];if("%"===o[o.length-1]&&(r[i]=!0),o=parseFloat(o),r[i]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var a=r[1]||r[2]||r[3],s=r[1]&&r[2]&&r[3];if(a&&!s)return;var l=n[4];if(void 0!==l){if((l=parseFloat(l))<0||l>1)return;t.push(l)}}return t},colorname2tuple:function(e){return this.colors[e.toLowerCase()]},color2tuple:function(e){return(r.array(e)?e:null)||this.colorname2tuple(e)||this.hex2tuple(e)||this.rgb2tuple(e)||this.hsl2tuple(e)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}},function(e,t,n){"use strict";var r=n(0);e.exports={mapEmpty:function(e){return null==e||0===Object.keys(e).length},pushMap:function(e){var t=this.getMap(e);null==t?this.setMap(this.extend({},e,{value:[e.value]})):t.push(e.value)},setMap:function(e){for(var t=e.map,n=e.keys,i=n.length,o=0;o<i;o++){var a=n[o];r.plainObject(a)&&this.error("Tried to set map with object key"),o<n.length-1?(null==t[a]&&(t[a]={}),t=t[a]):t[a]=e.value}},getMap:function(e){for(var t=e.map,n=e.keys,i=n.length,o=0;o<i;o++){var a=n[o];if(r.plainObject(a)&&this.error("Tried to get map with object key"),null==(t=t[a]))return t}return t},deleteMap:function(e){for(var t=e.map,n=e.keys,i=n.length,o=e.keepChildren,a=0;a<i;a++){var s=n[a];if(r.plainObject(s)&&this.error("Tried to delete map with object key"),a===e.keys.length-1)if(o)for(var l=Object.keys(t),u=0;u<l.length;u++){var c=l[u];o[c]||(t[c]=void 0)}else t[s]=void 0;else t=t[s]}}}},function(e,t,n){"use strict";var r="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))";e.exports={regex:{number:r,rgba:"rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)",rgbaNoBackRefs:"rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)",hsla:"hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)",hslaNoBackRefs:"hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)",hex3:"\\#[0-9a-fA-F]{3}",hex6:"\\#[0-9a-fA-F]{6}"}}},function(e,t,n){"use strict";var r=n(13),i=n(0);e.exports={camel2dash:r(function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),dash2camel:r(function(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),prependCamel:r(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),capitalize:function(e){return i.emptyString(e)?e:e.charAt(0).toUpperCase()+e.substring(1)}}},function(e,t,n){"use strict";var r=n(3),i=r?r.performance:null,o={},a=i&&i.now?function(){return i.now()}:function(){return Date.now()},s=function(){if(r){if(r.requestAnimationFrame)return function(e){r.requestAnimationFrame(e)};if(r.mozRequestAnimationFrame)return function(e){r.mozRequestAnimationFrame(e)};if(r.webkitRequestAnimationFrame)return function(e){r.webkitRequestAnimationFrame(e)};if(r.msRequestAnimationFrame)return function(e){r.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(a())},1e3/60)}}();o.requestAnimationFrame=function(e){s(e)},o.performanceNow=a,o.debounce=n(26),o.now=function(){return Date.now()},e.exports=o},function(e,t){var n="Expected a function",r=NaN,i="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt,c="object"==typeof global&&global&&global.Object===Object&&global,h="object"==typeof self&&self&&self.Object===Object&&self,d=c||h||Function("return this")(),p=Object.prototype.toString,f=Math.max,v=Math.min,g=function(){return d.Date.now()};function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&p.call(e)==i}(e))return r;if(y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):a.test(e)?r:+e}e.exports=function(e,t,r){var i,o,a,s,l,u,c=0,h=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError(n);function x(t){var n=i,r=o;return i=o=void 0,c=t,s=e.apply(r,n)}function b(e){var n=e-u;return void 0===u||n>=t||n<0||d&&e-c>=a}function w(){var e=g();if(b(e))return E(e);l=setTimeout(w,function(e){var n=t-(e-u);return d?v(n,a-(e-c)):n}(e))}function E(e){return l=void 0,p&&i?x(e):(i=o=void 0,s)}function _(){var e=g(),n=b(e);if(i=arguments,o=this,u=e,n){if(void 0===l)return function(e){return c=e,l=setTimeout(w,t),h?x(e):s}(u);if(d)return l=setTimeout(w,t),x(u)}return void 0===l&&(l=setTimeout(w,t)),s}return t=m(t)||0,y(r)&&(h=!!r.leading,a=(d="maxWait"in r)?f(m(r.maxWait)||0,t):a,p="trailing"in r?!!r.trailing:p),_.cancel=function(){void 0!==l&&clearTimeout(l),c=0,i=u=o=l=void 0},_.flush=function(){return void 0===l?s:E(g())},_}},function(e,t,n){"use strict";function r(e,t){return e<t?-1:e>t?1:0}e.exports={sort:{ascending:r,descending:function(e,t){return-1*r(e,t)}}}},function(e,t,n){"use strict";function r(){this._obj={}}var i=r.prototype;i.set=function(e,t){this._obj[e]=t},i.delete=function(e){this._obj[e]=null},i.has=function(e){return null!=this._obj[e]},i.get=function(e){return this._obj[e]},e.exports=r},function(e,t,n){"use strict";var r=n(1),i={};[n(30),n(31),n(34),n(35),n(36),n(37),n(38),n(39),n(40),n(41),n(42)].forEach(function(e){r.extend(i,e)}),e.exports=i},function(e,t,n){"use strict";var r=n(0),i=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,n,i){var o;r.plainObject(t)&&!r.elementOrCollection(t)&&(t=(o=t).roots||o.root,n=o.visit,i=o.directed),i=2!==arguments.length||r.fn(n)?i:n,n=r.fn(n)?n:function(){};for(var a,s=this._private.cy,l=t=r.string(t)?this.filter(t):t,u=[],c=[],h={},d={},p={},f=0,v=this.nodes(),g=this.edges(),y=0;y<l.length;y++)l[y].isNode()&&(u.unshift(l[y]),e.bfs&&(p[l[y].id()]=!0,c.push(l[y])),d[l[y].id()]=0);for(;0!==u.length;){l=e.bfs?u.shift():u.pop();if(e.dfs){if(p[l.id()])continue;p[l.id()]=!0,c.push(l)}var m,x=d[l.id()],b=h[l.id()],w=null==b?void 0:b.connectedNodes().not(l)[0];if(!0===(m=n(l,b,w,f++,x))){a=l;break}if(!1===m)break;var E=l.connectedEdges(i?function(e){return e.data("source")===l.id()}:void 0).intersect(g);for(y=0;y<E.length;y++){var _=E[y],k=_.connectedNodes(function(e){return e.id()!==l.id()}).intersect(v);0===k.length||p[k.id()]||(k=k[0],u.push(k),e.bfs&&(p[k.id()]=!0,c.push(k)),h[k.id()]=_,d[k.id()]=d[l.id()]+1)}}var P=[];for(y=0;y<c.length;y++){var S=c[y],C=h[S.id()];C&&P.push(C),P.push(S)}return{path:s.collection(P,{unique:!0}),found:s.collection(a)}}},o={breadthFirstSearch:i({bfs:!0}),depthFirstSearch:i({dfs:!0})};o.bfs=o.breadthFirstSearch,o.dfs=o.depthFirstSearch,e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(9),o={dijkstra:function(e,t,n){var o;r.plainObject(e)&&!r.elementOrCollection(e)&&(e=(o=e).root,t=o.weight,n=o.directed);var a=this._private.cy;t=r.fn(t)?t:function(){return 1};for(var s=r.string(e)?this.filter(e)[0]:e[0],l={},u={},c={},h=this.edges().filter(function(e){return!e.isLoop()}),d=this.nodes(),p=function(e){return l[e.id()]},f=function(e,t){l[e.id()]=t,v.updateItem(e)},v=new i(function(e,t){return p(e)-p(t)}),g=0;g<d.length;g++){var y=d[g];l[y.id()]=y.same(s)?0:1/0,v.push(y)}for(var m=function(e,r){for(var i,o=(n?e.edgesTo(r):e.edgesWith(r)).intersect(h),a=1/0,s=0;s<o.length;s++){var l=o[s],u=t(l);(u<a||!i)&&(a=u,i=l)}return{edge:i,dist:a}};v.size()>0;){var x=v.pop(),b=p(x),w=x.id();if(c[w]=b,b!==1/0){var E=x.neighborhood().intersect(d);for(g=0;g<E.length;g++){var _=E[g],k=_.id(),P=m(x,_),S=b+P.dist;S<p(_)&&(f(_,S),u[k]={node:x,edge:P.edge})}}}return{distanceTo:function(e){var t=r.string(e)?d.filter(e)[0]:e[0];return c[t.id()]},pathTo:function(e){var t=r.string(e)?d.filter(e)[0]:e[0],n=[],i=t;if(t.length>0)for(n.unshift(t);u[i.id()];){var o=u[i.id()];n.unshift(o.edge),n.unshift(o.node),i=o.node}return a.collection(n)}}}};e.exports=o},function(e,t,n){e.exports=n(33)},function(e,t,n){var r,i,o;(function(){var n,a,s,l,u,c,h,d,p,f,v,g,y,m,x;s=Math.floor,f=Math.min,a=function(e,t){return e<t?-1:e>t?1:0},p=function(e,t,n,r,i){var o;if(null==n&&(n=0),null==i&&(i=a),n<0)throw new Error("lo must be non-negative");for(null==r&&(r=e.length);n<r;)i(t,e[o=s((n+r)/2)])<0?r=o:n=o+1;return[].splice.apply(e,[n,n-n].concat(t)),t},c=function(e,t,n){return null==n&&(n=a),e.push(t),m(e,0,e.length-1,n)},u=function(e,t){var n,r;return null==t&&(t=a),n=e.pop(),e.length?(r=e[0],e[0]=n,x(e,0,t)):r=n,r},d=function(e,t,n){var r;return null==n&&(n=a),r=e[0],e[0]=t,x(e,0,n),r},h=function(e,t,n){var r;return null==n&&(n=a),e.length&&n(e[0],t)<0&&(t=(r=[e[0],t])[0],e[0]=r[1],x(e,0,n)),t},l=function(e,t){var n,r,i,o,l,u;for(null==t&&(t=a),l=[],r=0,i=(o=function(){u=[];for(var t=0,n=s(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)u.push(t);return u}.apply(this).reverse()).length;r<i;r++)n=o[r],l.push(x(e,n,t));return l},y=function(e,t,n){var r;if(null==n&&(n=a),-1!==(r=e.indexOf(t)))return m(e,0,r,n),x(e,r,n)},v=function(e,t,n){var r,i,o,s,u;if(null==n&&(n=a),!(i=e.slice(0,t)).length)return i;for(l(i,n),o=0,s=(u=e.slice(t)).length;o<s;o++)r=u[o],h(i,r,n);return i.sort(n).reverse()},g=function(e,t,n){var r,i,o,s,c,h,d,v,g;if(null==n&&(n=a),10*t<=e.length){if(!(o=e.slice(0,t).sort(n)).length)return o;for(i=o[o.length-1],s=0,h=(d=e.slice(t)).length;s<h;s++)n(r=d[s],i)<0&&(p(o,r,0,null,n),o.pop(),i=o[o.length-1]);return o}for(l(e,n),g=[],c=0,v=f(t,e.length);0<=v?c<v:c>v;0<=v?++c:--c)g.push(u(e,n));return g},m=function(e,t,n,r){var i,o,s;for(null==r&&(r=a),i=e[n];n>t&&r(i,o=e[s=n-1>>1])<0;)e[n]=o,n=s;return e[n]=i},x=function(e,t,n){var r,i,o,s,l;for(null==n&&(n=a),i=e.length,l=t,o=e[t],r=2*t+1;r<i;)(s=r+1)<i&&!(n(e[r],e[s])<0)&&(r=s),e[t]=e[r],r=2*(t=r)+1;return e[t]=o,m(e,l,t,n)},n=function(){function e(e){this.cmp=null!=e?e:a,this.nodes=[]}return e.push=c,e.pop=u,e.replace=d,e.pushpop=h,e.heapify=l,e.updateItem=y,e.nlargest=v,e.nsmallest=g,e.prototype.push=function(e){return c(this.nodes,e,this.cmp)},e.prototype.pop=function(){return u(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return d(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return h(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return l(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return y(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),i=[],void 0===(o="function"==typeof(r=function(){return n})?r.apply(t,i):r)||(e.exports=o)}).call(this)},function(e,t,n){"use strict";var r=n(0),i={kruskal:function(e){var t=this.cy();function n(e){for(var t=0;t<o.length;t++){var n=o[t];if(n.anySame(e))return{eles:n,index:t}}}e=r.fn(e)?e:function(){return 1};for(var i=t.collection(t,[]),o=[],a=this.nodes(),s=0;s<a.length;s++)o.push(a[s].collection());var l=this.edges().toArray().sort(function(t,n){return e(t)-e(n)});for(s=0;s<l.length;s++){var u=l[s],c=u.source()[0],h=u.target()[0],d=n(c),p=n(h);d.index!==p.index&&(i=i.add(u),o[d.index]=d.eles.add(p.eles),o.splice(p.index,1))}return a.add(i)}};e.exports=i},function(e,t,n){"use strict";var r=n(0),i={aStar:function(e){e=e||{};var t=function e(t,n,r,o){if(t==n)return o.unshift(i.getElementById(n)),o;if(n in r){var a=r[n],s=v[n];return o.unshift(i.getElementById(s)),o.unshift(i.getElementById(n)),e(t,a,r,o)}},n=function(e,t){if(0!==e.length){for(var n=0,r=t[e[0]],i=1;i<e.length;i++){var o=t[e[i]];o<r&&(r=o,n=i)}return n}},i=this._private.cy;if(null!=e&&null!=e.root){var o=r.string(e.root)?this.filter(e.root)[0]:e.root[0];if(null!=e.goal){var a=r.string(e.goal)?this.filter(e.goal)[0]:e.goal[0];if(null!=e.heuristic&&r.fn(e.heuristic))var s=e.heuristic;else s=function(){return 0};if(null!=e.weight&&r.fn(e.weight))var l=e.weight;else l=function(e){return 1};if(null!=e.directed)var u=e.directed;else u=!1;var c=o.id(),h=a.id(),d=[],p=[c],f={},v={},g={},y={};g[c]=0,y[c]=s(o);for(var m=0;p.length>0;){var x=n(p,y),b=i.getElementById(p[x]),w=b.id();if(m++,w==h){var E=t(c,h,f,[]);return{found:!0,distance:g[w],path:this.spawn(E),steps:m}}d.push(w),p.splice(x,1);for(var _=b._private.edges,k=0;k<_.length;k++){var P=_[k];if(this.hasElementWithId(P.id())&&(!u||P.data("source")===w)){var S=P.source(),C=P.target(),T=S.id()!==w?S:C,D=T.id();if(this.hasElementWithId(D)&&-1==d.indexOf(D)){var M=g[w]+l(P);-1!=p.indexOf(D)?M<g[D]&&(g[D]=M,y[D]=M+s(T),f[D]=w):(g[D]=M,y[D]=M+s(T),p.push(D),f[D]=w,v[D]=P.id())}}}}return{found:!1,distance:void 0,path:void 0,steps:m}}}}};e.exports=i},function(e,t,n){"use strict";var r=n(0),i={floydWarshall:function(e){e=e||{};var t=this.cy();if(null!=e.weight&&r.fn(e.weight))var n=e.weight;else n=function(e){return 1};if(null!=e.directed)var i=e.directed;else i=!1;for(var o=this.edges().stdFilter(function(e){return!e.isLoop()}),a=this.nodes(),s=a.length,l={},u=0;u<s;u++)l[a[u].id()]=u;var c=[];for(u=0;u<s;u++){for(var h=new Array(s),d=0;d<s;d++)h[d]=u==d?0:1/0;c.push(h)}var p=[],f=[],v=function(e){for(var t=0;t<s;t++){for(var n=new Array(s),r=0;r<s;r++)n[r]=void 0;e.push(n)}};v(p),v(f);for(u=0;u<o.length;u++){var g=l[o[u].source().id()],y=l[o[u].target().id()],m=n(o[u]);c[g][y]>m&&(c[g][y]=m,p[g][y]=y,f[g][y]=o[u])}if(!i)for(u=0;u<o.length;u++){g=l[o[u].target().id()],y=l[o[u].source().id()],m=n(o[u]);c[g][y]>m&&(c[g][y]=m,p[g][y]=y,f[g][y]=o[u])}for(var x=0;x<s;x++)for(u=0;u<s;u++)for(d=0;d<s;d++)c[u][x]+c[x][d]<c[u][d]&&(c[u][d]=c[u][x]+c[x][d],p[u][d]=p[u][x]);var b=[];for(u=0;u<s;u++)b.push(a[u].id());return{distance:function(e,n){if(r.string(e))var i=t.filter(e)[0].id();else i=e.id();if(r.string(n))var o=t.filter(n)[0].id();else o=n.id();return c[l[i]][l[o]]},path:function(e,n){if(r.string(e))var i=t.filter(e)[0].id();else i=e.id();if(r.string(n))var o=t.filter(n)[0].id();else o=n.id();var a=function(e,n,r,i,o){if(e===n)return t.getElementById(i[e]);if(void 0!==r[e][n]){for(var a=[t.getElementById(i[e])],s=e;e!==n;){s=e,e=r[e][n];var l=o[s][e];a.push(l),a.push(t.getElementById(i[e]))}return a}}(l[i],l[o],p,b,f);return t.collection(a)}}}};e.exports=i},function(e,t,n){"use strict";var r=n(0),i=n(1),o={bellmanFord:function(e){var t=this;if(null!=(e=e||{}).weight&&r.fn(e.weight))var n=e.weight;else n=function(e){return 1};if(null!=e.directed)var o=e.directed;else o=!1;if(null!=e.root){if(r.string(e.root))var a=this.filter(e.root)[0];else a=e.root[0];for(var s=this._private.cy,l=this.edges().stdFilter(function(e){return!e.isLoop()}),u=this.nodes(),c=u.length,h={},d=0;d<c;d++)h[u[d].id()]=d;var p=[],f=[],v=[];for(d=0;d<c;d++)u[d].id()===a.id()?p[d]=0:p[d]=1/0,f[d]=void 0;var g=!1;for(d=1;d<c;d++){g=!1;for(var y=0;y<l.length;y++){var m,x=h[l[y].source().id()],b=h[l[y].target().id()],w=n(l[y]);if((m=p[x]+w)<p[b]&&(p[b]=m,f[b]=x,v[b]=l[y],g=!0),!o)(m=p[b]+w)<p[x]&&(p[x]=m,f[x]=b,v[x]=l[y],g=!0)}if(!g)break}if(g)for(y=0;y<l.length;y++){x=h[l[y].source().id()],b=h[l[y].target().id()],w=n(l[y]);if(p[x]+w<p[b])return i.error("Graph contains a negative weight cycle for Bellman-Ford"),{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}var E=[];for(d=0;d<c;d++)E.push(u[d].id());return{distanceTo:function(e){if(r.string(e))var t=s.filter(e)[0].id();else t=e.id();return p[h[t]]},pathTo:function(e){if(r.string(e))var n=s.filter(e)[0].id();else n=e.id();var i=function(e,t,n,r,i,o){for(;;){if(i.push(s.getElementById(r[n])),i.push(o[n]),t===n)return i;var a=e[n];if(void 0===a)return;n=a}}(f,h[a.id()],h[n],E,[],v);return null!=i&&i.reverse(),t.spawn(i)},hasNegativeWeightCycle:!1}}}};e.exports=o},function(e,t,n){"use strict";var r=n(1),i={kargerStein:function(e){e=e||{};var t=function e(t,n,r,i){return r<=i?n:e(t,function(e,t,n){for(var r=n[e],i=r[1],o=r[2],a=t[i],s=t[o],l=n.filter(function(e){return!(t[e[1]]===a&&t[e[2]]===s||t[e[1]]===s&&t[e[2]]===a)}),u=0;u<l.length;u++){var c=l[u];c[1]===s?(l[u]=c.slice(0),l[u][1]=a):c[2]===s&&(l[u]=c.slice(0),l[u][2]=a)}for(u=0;u<t.length;u++)t[u]===s&&(t[u]=a);return l}(Math.floor(Math.random()*n.length),t,n),r-1,i)},n=this._private.cy,i=this.edges().stdFilter(function(e){return!e.isLoop()}),o=this.nodes(),a=o.length,s=i.length,l=Math.ceil(Math.pow(Math.log(a)/Math.LN2,2)),u=Math.floor(a/Math.sqrt(2));if(!(a<2)){for(var c={},h=0;h<a;h++)c[o[h].id()]=h;var d=[];for(h=0;h<s;h++){var p=i[h];d.push([h,c[p.source().id()],c[p.target().id()]])}var f,v=1/0,g=[];for(h=0;h<a;h++)g.push(h);for(var y=0;y<=l;y++){var m=g.slice(0),x=t(m,d,a,u),b=m.slice(0),w=t(m,x,u,2),E=t(b,x,u,2);w.length<=E.length&&w.length<v?(v=w.length,f=[w,m]):E.length<=w.length&&E.length<v&&(v=E.length,f=[E,b])}var _=f[0].map(function(e){return i[e[0]]}),k=[],P=[],S=f[1][0];for(h=0;h<f[1].length;h++){f[1][h]===S?k.push(o[h]):P.push(o[h])}return{cut:this.spawn(n,_),partition1:this.spawn(k),partition2:this.spawn(P)}}r.error("At least 2 nodes are required for Karger-Stein algorithm")}};e.exports=i},function(e,t,n){"use strict";var r=n(0),i={pageRank:function(e){var t=function(e){for(var t=e.length,n=0,r=0;r<t;r++)n+=e[r];for(r=0;r<t;r++)e[r]=e[r]/n};if(null!=(e=e||{})&&null!=e.dampingFactor)var n=e.dampingFactor;else n=.8;if(null!=e&&null!=e.precision)var i=e.precision;else i=1e-6;if(null!=e&&null!=e.iterations)var o=e.iterations;else o=200;if(null!=e&&null!=e.weight&&r.fn(e.weight))var a=e.weight;else a=function(e){return 1};for(var s=this._private.cy,l=this.edges().stdFilter(function(e){return!e.isLoop()}),u=this.nodes(),c=u.length,h=l.length,d={},p=0;p<c;p++)d[u[p].id()]=p;var f=[],v=[],g=(1-n)/c;for(p=0;p<c;p++){for(var y=[],m=0;m<c;m++)y.push(0);f.push(y),v.push(0)}for(p=0;p<h;p++){var x=l[p],b=d[x.source().id()],w=d[x.target().id()],E=a(x);f[w][b]+=E,v[b]+=E}var _=1/c+g;for(m=0;m<c;m++)if(0===v[m])for(p=0;p<c;p++)f[p][m]=_;else for(p=0;p<c;p++)f[p][m]=f[p][m]/v[m]+g;var k,P=[],S=[];for(p=0;p<c;p++)P.push(1),S.push(0);for(var C=0;C<o;C++){var T=S.slice(0);for(p=0;p<c;p++)for(m=0;m<c;m++)T[p]+=f[p][m]*P[m];t(T),k=P,P=T;var D=0;for(p=0;p<c;p++)D+=Math.pow(k[p]-P[p],2);if(D<i)break}return{rank:function(e){if(r.string(e))var t=s.filter(e)[0].id();else t=e.id();return P[d[t]]}}}};e.exports=i},function(e,t,n){"use strict";var r=n(0),i=n(1),o={degreeCentralityNormalized:function(e){e=e||{};var t=this.cy();if(null!=e.directed)var n=e.directed;else n=!1;var o=this.nodes(),a=o.length;if(n){var s={},l={},u=0,c=0;for(p=0;p<a;p++){f=o[p],v=this.degreeCentrality(i.extend({},e,{root:f}));u<v.indegree&&(u=v.indegree),c<v.outdegree&&(c=v.outdegree),s[f.id()]=v.indegree,l[f.id()]=v.outdegree}return{indegree:function(e){if(0==u)return 0;if(r.string(e))e=t.filter(e)[0].id();else e=e.id();return s[e]/u},outdegree:function(e){if(0==c)return 0;if(r.string(e))e=t.filter(e)[0].id();else e=e.id();return l[e]/c}}}for(var h={},d=0,p=0;p<a;p++){var f=o[p],v=this.degreeCentrality(i.extend({},e,{root:f}));d<v.degree&&(d=v.degree),h[f.id()]=v.degree}return{degree:function(e){if(0==d)return 0;if(r.string(e))e=t.filter(e)[0].id();else e=e.id();return h[e]/d}}},degreeCentrality:function(e){if(null!=(e=e||{})&&null!=e.root){var t=r.string(e.root)?this.filter(e.root)[0]:e.root[0];if(null!=e.weight&&r.fn(e.weight))var n=e.weight;else n=function(e){return 1};if(null!=e.directed)var i=e.directed;else i=!1;if(null!=e.alpha&&r.number(e.alpha))var o=e.alpha;else o=0;if(i){var a=t.connectedEdges('edge[target = "'+t.id()+'"]').intersection(this),s=t.connectedEdges('edge[source = "'+t.id()+'"]').intersection(this),l=a.length,u=s.length,c=0,h=0;for(v=0;v<a.length;v++){c+=n(a[v])}for(v=0;v<s.length;v++){h+=n(s[v])}return{indegree:Math.pow(l,1-o)*Math.pow(c,o),outdegree:Math.pow(u,1-o)*Math.pow(h,o)}}for(var d=t.connectedEdges().intersection(this),p=d.length,f=0,v=0;v<d.length;v++){f+=n(d[v])}return{degree:Math.pow(p,1-o)*Math.pow(f,o)}}}};o.dc=o.degreeCentrality,o.dcn=o.degreeCentralityNormalised=o.degreeCentralityNormalized,e.exports=o},function(e,t,n){"use strict";var r=n(0),i={closenessCentralityNormalized:function(e){e=e||{};var t=this.cy(),n=e.harmonic;void 0===n&&(n=!0);for(var i={},o=0,a=this.nodes(),s=this.floydWarshall({weight:e.weight,directed:e.directed}),l=0;l<a.length;l++){for(var u=0,c=0;c<a.length;c++)if(l!=c){var h=s.distance(a[l],a[c]);u+=n?1/h:h}n||(u=1/u),o<u&&(o=u),i[a[l].id()]=u}return{closeness:function(e){if(0==o)return 0;if(r.string(e))e=t.filter(e)[0].id();else e=e.id();return i[e]/o}}},closenessCentrality:function(e){if(null!=(e=e||{}).root){if(r.string(e.root))var t=this.filter(e.root)[0];else t=e.root[0];if(null!=e.weight&&r.fn(e.weight))var n=e.weight;else n=function(){return 1};if(null!=e.directed&&r.bool(e.directed))var i=e.directed;else i=!1;var o=e.harmonic;void 0===o&&(o=!0);for(var a=this.dijkstra({root:t,weight:n,directed:i}),s=0,l=this.nodes(),u=0;u<l.length;u++)if(l[u].id()!=t.id()){var c=a.distanceTo(l[u]);s+=o?1/c:c}return o?s:1/s}}};i.cc=i.closenessCentrality,i.ccn=i.closenessCentralityNormalised=i.closenessCentralityNormalized,e.exports=i},function(e,t,n){"use strict";var r=n(0),i=n(9),o={betweennessCentrality:function(e){var t,n;e=e||{},r.fn(e.weight)?(n=e.weight,t=!0):t=!1;for(var o=null!=e.directed&&e.directed,a=this._private.cy,s=this.nodes(),l={},u={},c=0,h=function(e,t){u[e]=t,t>c&&(c=t)},d=function(e){return u[e]},p=0;p<s.length;p++){l[w=(E=s[p]).id()]=o?E.outgoers().nodes():E.openNeighborhood().nodes(),h(w,0)}for(var f=0;f<s.length;f++){var v=s[f].id(),g=[],y={},m={},x={},b=new i(function(e,t){return x[e]-x[t]});for(p=0;p<s.length;p++){var w;y[w=s[p].id()]=[],m[w]=0,x[w]=1/0}for(m[v]=1,x[v]=0,b.push(v);!b.empty();){var E=b.pop();if(g.push(E),t)for(var _=0;_<l[E].length;_++){var k=l[E][_],P=a.getElementById(E),S=n(P.edgesTo(k).length>0?P.edgesTo(k)[0]:k.edgesTo(P)[0]);k=k.id(),x[k]>x[E]+S&&(x[k]=x[E]+S,b.nodes.indexOf(k)<0?b.push(k):b.updateItem(k),m[k]=0,y[k]=[]),x[k]==x[E]+S&&(m[k]=m[k]+m[E],y[k].push(E))}else for(_=0;_<l[E].length;_++){k=l[E][_].id();x[k]==1/0&&(b.push(k),x[k]=x[E]+1),x[k]==x[E]+1&&(m[k]=m[k]+m[E],y[k].push(E))}}var C={};for(p=0;p<s.length;p++)C[s[p].id()]=0;for(;g.length>0;)for(k=g.pop(),_=0;_<y[k].length;_++){C[E=y[k][_]]=C[E]+m[E]/m[k]*(1+C[k]),k!=s[f].id()&&h(k,d(k)+C[k])}}var T={betweenness:function(e){if(r.string(e))e=a.filter(e).id();else e=e.id();return d(e)},betweennessNormalized:function(e){if(0==c)return 0;if(r.string(e))e=a.filter(e).id();else e=e.id();return d(e)/c}};return T.betweennessNormalised=T.betweennessNormalized,T}};o.bc=o.betweennessCentrality,e.exports=o},function(e,t,n){"use strict";var r=n(4),i={animate:r.animate(),animation:r.animation(),animated:r.animated(),clearQueue:r.clearQueue(),delay:r.delay(),delayAnimation:r.delayAnimation(),stop:r.stop()};e.exports=i},function(e,t,n){"use strict";var r=n(1),i=n(45),o=n(2),a=n(0),s={animated:function(){return function(){var e=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;var t=e[0];return t?t._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var e=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var t=0;t<e.length;t++){e[t]._private.animation.queue=[]}return this}},delay:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(){return function(e,t){var n=void 0!==this.length,s=n?this:[this],l=this._private.cy||this,u=!n,c=!u;if(!l.styleEnabled())return this;var h=l.style();if(e=r.assign({},e,t),0===Object.keys(e).length)return new i(s[0],e);switch(void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}if(c&&(e.style=h.getPropsList(e.style||e.css),e.css=void 0),c&&null!=e.renderedPosition){var d=e.renderedPosition,p=l.pan(),f=l.zoom();e.position=o.renderedToModelPosition(d,f,p)}if(u&&null!=e.panBy){var v=e.panBy,g=l.pan();e.pan={x:g.x+v.x,y:g.y+v.y}}var y=e.center||e.centre;if(u&&null!=y){var m=l.getCenterPan(y.eles,e.zoom);null!=m&&(e.pan=m)}if(u&&null!=e.fit){var x=e.fit,b=l.getFitViewport(x.eles||x.boundingBox,x.padding);null!=b&&(e.pan=b.pan,e.zoom=b.zoom)}if(u&&a.plainObject(e.zoom)){var w=l.getZoomedViewport(e.zoom);null!=w&&(w.zoomed&&(e.zoom=w.zoom),w.panned&&(e.pan=w.pan))}return new i(s[0],e)}},animate:function(){return function(e,t){var n=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;t&&(e=r.extend({},e,t));for(var i=0;i<n.length;i++){var o=n[i],a=o.animated()&&(void 0===e.queue||e.queue);o.animation(e,a?{queue:!0}:void 0).play()}return this}},stop:function(){return function(e,t){var n=void 0!==this.length?this:[this],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){for(var o=n[i]._private,a=o.animation.current,s=0;s<a.length;s++){var l=a[s]._private;t&&(l.duration=0)}e&&(o.animation.queue=[]),t||(o.animation.current=[])}return r.notify({eles:this,type:"draw"}),this}}};e.exports=s},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(5),a=function(e,t,n){var o=this._private=r.extend({duration:1e3},t,n);o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&i.fn(o.complete)&&o.completes.push(o.complete),this.length=1,this[0]=this},s=a.prototype;r.extend(s,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t=e.target._private.animation;(e.queue?t.queue:t.current).push(this),i.elementOrCollection(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return void 0===e?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(t,n){var r=e[t];null!=r&&(e[t]=e[n],e[n]=r)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var r=0;r<e.style.length;r++){var i=e.style[r],o=i.name,a=e.startStyle[o];e.startStyle[o]=i,e.style[r]=a}return t&&this.play(),this},promise:function(e){var t=this._private,n=void 0;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new o(function(e,t){n.push(function(){e()})})}}),s.complete=s.completed,e.exports=a},function(e,t,n){"use strict";var r=n(1),i=n(0),o={data:function(e){return e=r.extend({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(e){},beforeSet:function(e,t){},onSet:function(e){},canSet:function(e){return!0}},e),function(t,n){var r=e,o=void 0!==this.length,a=o?this:[this],s=o?this[0]:this;if(i.string(t)){if(r.allowGetting&&void 0===n){var l=void 0;return s&&(r.beforeGet(s),l=s._private[r.field][t]),l}if(r.allowSetting&&void 0!==n&&!r.immutableKeys[t]){var u=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,n);r.beforeSet(this,u);for(var c=0,h=a.length;c<h;c++){var d=a[c];r.canSet(d)&&(d._private[r.field][t]=n)}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}}else if(r.allowSetting&&i.plainObject(t)){var p=t,f=void 0,v=void 0,g=Object.keys(p);r.beforeSet(this,p);for(var y=0;y<g.length;y++){if(v=p[f=g[y]],!r.immutableKeys[f])for(var m=0;m<a.length;m++){var x=a[m];r.canSet(x)&&(x._private[r.field][f]=v)}}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&i.fn(t)){var b=t;this.on(r.bindingEvent,b)}else if(r.allowGetting&&void 0===t){var w=void 0;return s&&(r.beforeGet(s),w=s._private[r.field]),w}return this}},removeData:function(e){return e=r.extend({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},e),function(t){var n=e,r=void 0!==this.length?this:[this];if(i.string(t)){for(var o=t.split(/\s+/),a=o.length,s=0;s<a;s++){var l=o[s];if(!i.emptyString(l))if(!n.immutableKeys[l])for(var u=0,c=r.length;u<c;u++)r[u]._private[n.field][l]=void 0}n.triggerEvent&&this[n.triggerFnName](n.event)}else if(void 0===t){for(var h=0,d=r.length;h<d;h++)for(var p=r[h]._private[n.field],f=Object.keys(p),v=0;v<f.length;v++){var g=f[v];!n.immutableKeys[g]&&(p[g]=void 0)}n.triggerEvent&&this[n.triggerFnName](n.event)}return this}}};e.exports=o},function(e,t,n){"use strict";var r=n(5),i={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(e,t){var n=this,i=Array.prototype.slice.call(arguments,0);return new r(function(e,t){var r=i.concat([function(t){n.off.apply(n,o),e(t)}]),o=r.concat([]);n.on.apply(n,r)})}}};e.exports=i},function(e,t,n){"use strict";var r=n(8),i={classes:function(e){e=(e||"").match(/\S+/g)||[];for(var t=this,n=[],i=new r(e),o=function(e){var o=t[e],a=o._private,s=a.classes,l=!1;i.forEach(function(e){s.has(e)||(l=!0)}),l||s.forEach(function(e){i.has(e)||(l=!0)}),l&&(a.classes=new r(i),n.push(o))},a=0;a<t.length;a++)o(a);return n.length>0&&this.spawn(n).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes.has(e)},toggleClass:function(e,t){for(var n=e.match(/\S+/g)||[],r=[],i=0,o=this.length;i<o;i++)for(var a=this[i],s=!1,l=0;l<n.length;l++){var u=n[l],c=a._private.classes,h=c.has(u);t||void 0===t&&!h?(c.add(u),h||s||(r.push(a),s=!0)):(c.delete(u),h&&!s&&(r.push(a),s=!0))}return r.length>0&&this.spawn(r).updateStyle().emit("class"),this},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(null==t)t=250;else if(0===t)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};e.exports=i},function(e,t,n){"use strict";n(0);var r=n(6),i={allAre:function(e){var t=new r(e);return this.every(function(e){return t.matches(e)})},is:function(e){var t=new r(e);return this.some(function(e){return t.matches(e)})},some:function(e,t){for(var n=0;n<this.length;n++){if(t?e.apply(t,[this[n],n,this]):e(this[n],n,this))return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){if(!(t?e.apply(t,[this[n],n,this]):e(this[n],n,this)))return!1}return!0},same:function(e){return e=this.cy().collection(e),this.length===e.length&&this.every(function(t){return e.hasElementWithId(t.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(e){return t.hasElementWithId(e.id())})},contains:function(e){var t=this;return(e=this.cy().collection(e)).every(function(e){return t.hasElementWithId(e.id())})}};i.allAreNeighbours=i.allAreNeighbors,i.has=i.contains,e.exports=i},function(e,t,n){"use strict";var r=n(1),i=n(51),o=n(10),a=function(e){for(var t=void 0,n=void 0,r=void 0,o=0;o<i.length;o++){var a=i[o],s=a.name,l=e.match(a.regexObj);if(null!=l){n=l,t=a,r=s;var u=l[0];e=e.substring(u.length);break}}return{expr:t,match:n,name:r,remaining:e}};e.exports={parse:function(e){var t=this._private.selectorText=e,n=this[0]=o();for(this.length=1,t=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e}(t);;){var i=a(t);if(null==i.expr)return r.error("The selector `"+e+"`is invalid"),!1;var s=i.match.slice(1),l=i.expr.populate(this,n,s);if(!1===l)return!1;if(null!=l&&(n=l),(t=i.remaining).match(/^\s*$/))break}for(var u=0;u<this.length;u++){var c=this[u];if(null!=c.subject){for(;c.subject!==c;)if(null!=c.parent){var h=c.parent,d=c;d.parent=null,h.child=d,c=h}else{if(null==c.ancestor)return c.source||c.target||c.connectedNodes?(r.error("The selector `"+this.text()+"` can not contain a subject selector that applies to the source or target of an edge selector"),!1):(r.error("When adjusting references for the selector `"+this.text()+"`, neither parent nor ancestor was found"),!1);var p=c.ancestor,f=c;f.ancestor=null,p.descendant=f,c=p}this[u]=c.subject}}return!0}}},function(e,t,n){"use strict";var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(15).stateSelectorRegex,o=n(52),a=n(1),s=n(10),l=function(e){return e.replace(new RegExp("\\\\("+o.metaChar+")","g"),function(e,t){return t})},u=function(e,t,n){t===e[e.length-1]&&(e[e.length-1]=n)},c=[{name:"group",query:!0,regex:"("+o.group+")",populate:function(e,t,n){var i=r(n,1)[0];t.group="*"===i?i:i+"s"}},{name:"state",query:!0,regex:i,populate:function(e,t,n){var i=r(n,1)[0];t.colonSelectors.push(i)}},{name:"id",query:!0,regex:"\\#("+o.id+")",populate:function(e,t,n){var i=r(n,1)[0];t.ids.push(l(i))}},{name:"className",query:!0,regex:"\\.("+o.className+")",populate:function(e,t,n){var i=r(n,1)[0];t.classes.push(l(i))}},{name:"dataExists",query:!0,regex:"\\[\\s*("+o.variable+")\\s*\\]",populate:function(e,t,n){var i=r(n,1)[0];t.data.push({field:l(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+o.variable+")\\s*("+o.comparatorOp+")\\s*("+o.value+")\\s*\\]",populate:function(e,t,n){var i=r(n,3),a=i[0],s=i[1],u=i[2];u=null!=new RegExp("^"+o.string+"$").exec(u)?u.substring(1,u.length-1):parseFloat(u),t.data.push({field:l(a),operator:s,value:u})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+o.boolOp+")\\s*("+o.variable+")\\s*\\]",populate:function(e,t,n){var i=r(n,2),o=i[0],a=i[1];t.data.push({field:l(a),operator:o})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+o.meta+")\\s*("+o.comparatorOp+")\\s*("+o.number+")\\s*\\]\\]",populate:function(e,t,n){var i=r(n,3),o=i[0],a=i[1],s=i[2];t.meta.push({field:l(o),operator:a,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:o.separator,populate:function(e){var t=e[e.length++]=s();return e.currentSubject=null,t}},{name:"directedEdge",separator:!0,regex:o.directedEdge,populate:function(e,t){var n=s(),r=t,i=s();return n.group="edges",n.target=i,n.source=r,n.subject=e.currentSubject,u(e,t,n),i}},{name:"undirectedEdge",separator:!0,regex:o.undirectedEdge,populate:function(e,t){var n=s(),r=t,i=s();return n.group="edges",n.connectedNodes=[r,i],n.subject=e.currentSubject,u(e,t,n),i}},{name:"child",separator:!0,regex:o.child,populate:function(e,t){var n=s();return n.parent=t,n.subject=e.currentSubject,u(e,t,n),n}},{name:"descendant",separator:!0,regex:o.descendant,populate:function(e,t){var n=s();return n.ancestor=t,n.subject=e.currentSubject,u(e,t,n),n}},{name:"subject",modifier:!0,regex:o.subject,populate:function(e,t){if(null!=e.currentSubject&&t.subject!=t)return a.error("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t,t.subject=t,e[e.length-1].subject=t}}];c.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)}),e.exports=c},function(e,t,n){"use strict";var r={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])*"|'+"'(?:\\\\'|[^'])*'",number:n(1).regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};r.variable="(?:[\\w-]|(?:\\\\"+r.metaChar+"))+",r.value=r.string+"|"+r.number,r.className=r.variable,r.id=r.variable,function(){var e=void 0,t=void 0,n=void 0;for(e=r.comparatorOp.split("|"),n=0;n<e.length;n++)t=e[n],r.comparatorOp+="|@"+t;for(e=r.comparatorOp.split("|"),n=0;n<e.length;n++)(t=e[n]).indexOf("!")>=0||"="!==t&&(r.comparatorOp+="|\\!"+t)}(),e.exports=r},function(e,t,n){"use strict";var r=n(15).stateSelectorMatches,i=n(0),o=function(e,t){for(var n=!0,r=0;r<e[t.name].length;r++){var o=e[t.name][r],a=o.operator,s=o.value,l=o.field,u=void 0,c=t.fieldValue(l);if(null!=a&&null!=s){var h=i.string(c)||i.number(c)?""+c:"",d=""+s,p=!1;a.indexOf("@")>=0&&(h=h.toLowerCase(),d=d.toLowerCase(),a=a.replace("@",""),p=!0);var f=!1;a.indexOf("!")>=0&&(a=a.replace("!",""),f=!0),p&&(s=d.toLowerCase(),c=h.toLowerCase());var v=!1;switch(a){case"*=":u=h.indexOf(d)>=0;break;case"$=":u=h.indexOf(d,h.length-d.length)>=0;break;case"^=":u=0===h.indexOf(d);break;case"=":u=c===s;break;case">":v=!0,u=c>s;break;case">=":v=!0,u=c>=s;break;case"<":v=!0,u=c<s;break;case"<=":v=!0,u=c<=s;break;default:u=!1}!f||null==c&&v||(u=!u)}else if(null!=a)switch(a){case"?":u=!!c;break;case"!":u=!c;break;case"^":u=void 0===c}else u=void 0!==c;if(!u){n=!1;break}}return n},a=function(e,t,n){if(null!=e){var r=!1;if(!t)return!1;n=n();for(var i=0;i<n.length;i++)if(s(e,n[i])){r=!0;break}return r}return!0},s=function(e,t){if(e.groupOnly)return"*"===e.group||e.group===t.group();if(null!=e.group&&"*"!=e.group&&e.group!=t.group())return!1;var n=t.cy(),i=void 0,s=!0;for(i=0;i<e.colonSelectors.length;i++){var l=e.colonSelectors[i];if(!(s=r(l,t)))break}if(!s)return!1;var u=!0;for(i=0;i<e.ids.length;i++){var c=e.ids[i],h=t.id();if(!(u=u&&c==h))break}if(!u)return!1;var d=!0;for(i=0;i<e.classes.length;i++){var p=e.classes[i];if(!(d=d&&t.hasClass(p)))break}if(!d)return!1;if(!o(e,{name:"data",fieldValue:function(e){return t.data(e)}}))return!1;if(!o(e,{name:"meta",fieldValue:function(e){return t[e]()}}))return!1;if(null!=e.collection&&!e.collection.hasElementWithId(t.id()))return!1;if(null!=e.filter&&t.collection().some(e.filter))return!1;var f=n.hasCompoundNodes(),v=function(){return t.source()},g=function(){return t.target()};if(!a(e.parent,f,function(){return t.parent()}))return!1;if(!a(e.ancestor,f,function(){return t.parents()}))return!1;if(!a(e.child,f,function(){return t.children()}))return!1;if(!a(e.descendant,f,function(){return t.descendants()}))return!1;if(!a(e.source,!0,v))return!1;if(!a(e.target,!0,g))return!1;if(e.connectedNodes){var y=e.connectedNodes[0],m=e.connectedNodes[1];if(a(y,!0,v)&&a(m,!0,g));else if(!a(y,!0,g)||!a(m,!0,v))return!1}return!0};e.exports={matches:function(e){if(this.invalid())return!1;for(var t=0;t<this.length;t++){var n=this[t];if(s(n,e))return!0}return!1},filter:function(e){var t=this,n=e.cy();if(t.invalid())return n.collection();if(1===t.length&&1===t[0].length&&1===t[0].ids.length)return e.getElementById(t[0].ids[0]).collection();var r=function(e){for(var n=0;n<t.length;n++){var r=t[n];if(s(r,e))return!0}return!1};return null==t.text()&&(r=function(){return!0}),e.filter(r)}}},function(e,t,n){"use strict";var r=n(8),i={parent:function(e){var t=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var i=this[r]._private.parent;i&&t.push(i)}return this.spawn(t,{unique:!0}).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var i=n[r];t.push(i)}n=n.parent()}return this.spawn(t,{unique:!0}).filter(e)},commonAncestors:function(e){for(var t=void 0,n=0;n<this.length;n++){var r=this[n].parents();t=(t=t||r).intersect(r)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(e){return e.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(e){return e.isChild()}).filter(e)},children:function(e){for(var t=[],n=0;n<this.length;n++){var r=this[n];t=t.concat(r._private.children)}return this.spawn(t,{unique:!0}).filter(e)},siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length},isChildless:function(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length},isChild:function(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent},descendants:function(e){var t=[];return function e(n){for(var r=0;r<n.length;r++){var i=n[r];t.push(i),i.children().nonempty()&&e(i.children())}}(this.children()),this.spawn(t,{unique:!0}).filter(e)}};function o(e,t,n,i){for(var o=[],a=new r,s=e.cy().hasCompoundNodes(),l=0;l<e.length;l++){var u=e[l];n?o.push(u):s&&i(o,a,u)}for(;o.length>0;){var c=o.shift();t(c),a.add(c.id()),s&&i(o,a,c)}return e}function a(e,t,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var o=r[i];t.has(o.id())||e.push(o)}}function s(e,t,n){if(n.isChild()){var r=n._private.parent;t.has(r.id())||e.push(r)}}function l(e,t,n){s(e,t,n),a(e,t,n)}i.forEachDown=function(e){return o(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a)},i.forEachUp=function(e){return o(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s)},i.forEachUpAndDown=function(e){return o(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l)},i.ancestors=i.parents,e.exports=i},function(e,t,n){"use strict";var r,i=n(4),o=void 0;(o=r={data:i.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:i.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:i.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:i.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:i.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:i.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}}).attr=o.data,o.removeAttr=o.removeData,e.exports=r},function(e,t,n){"use strict";var r=n(1),i={};function o(e){return function(t){if(void 0===t&&(t=!0),0!==this.length&&this.isNode()&&!this.removed()){for(var n=0,r=this[0],i=r._private.edges,o=0;o<i.length;o++){var a=i[o];!t&&a.isLoop()||(n+=e(r,a))}return n}}}function a(e,t){return function(n){for(var r=void 0,i=this.nodes(),o=0;o<i.length;o++){var a=i[o][e](n);void 0===a||void 0!==r&&!t(a,r)||(r=a)}return r}}r.extend(i,{degree:o(function(e,t){return t.source().same(t.target())?2:1}),indegree:o(function(e,t){return t.target().same(e)?1:0}),outdegree:o(function(e,t){return t.source().same(e)?1:0})}),r.extend(i,{minDegree:a("degree",function(e,t){return e<t}),maxDegree:a("degree",function(e,t){return e>t}),minIndegree:a("indegree",function(e,t){return e<t}),maxIndegree:a("indegree",function(e,t){return e>t}),minOutdegree:a("outdegree",function(e,t){return e<t}),maxOutdegree:a("outdegree",function(e,t){return e>t})}),r.extend(i,{totalDegree:function(e){for(var t=0,n=this.nodes(),r=0;r<n.length;r++)t+=n[r].degree(e);return t}}),e.exports=i},function(e,t,n){"use strict";var r=n(1),i=n(58),o=n(59),a=n(60),s=n(61);e.exports=r.assign({},i,o,a,s)},function(e,t,n){"use strict";var r,i=n(4),o=n(0),a=n(2),s=void 0,l=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.isParent()&&!r.locked()){var i=r._private.position,o={x:t.x-i.x,y:t.y-i.y};e.children().shift(o)}}};(s=r={position:i.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:l,onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}}),silentPosition:i.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!1,validKeys:["x","y"],beforeSet:l,onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}}),positions:function(e,t){if(o.plainObject(e))t?this.silentPosition(e):this.position(e);else if(o.fn(e)){var n=e,r=this.cy();r.startBatch();for(var i=0;i<this.length;i++){var a,s=this[i];(a=n(s,i))&&(t?s.silentPosition(a):s.position(a))}r.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t){var n=void 0;if(o.plainObject(e)?n=e:o.string(e)&&o.number(t)&&((n={x:0,y:0})[e]=t),null!=n)for(var r=0;r<this.length;r++){var i=this[r],a=i.position();i.position({x:a.x+n.x,y:a.y+n.y})}return this},renderedPosition:function(e,t){var n=this[0],r=this.cy(),i=r.zoom(),s=r.pan(),l=o.plainObject(e)?e:void 0,u=void 0!==l||void 0!==t&&o.string(e);if(n&&n.isNode()){if(!u){var c=n.position();return l=a.modelToRenderedPosition(c,i,s),void 0===e?l:l[e]}for(var h=0;h<this.length;h++){var d=this[h];void 0!==t?d.position(e,(t-s[e])/i):void 0!==l&&d.position(a.renderedToModelPosition(l,i,s))}}else if(!u)return;return this},relativePosition:function(e,t){var n=this[0],r=this.cy(),i=o.plainObject(e)?e:void 0,a=void 0!==i||void 0!==t&&o.string(e),s=r.hasCompoundNodes();if(n&&n.isNode()){if(!a){var l=n.position(),u=s?n.parent():null,c=u&&u.length>0,h=c;c&&(u=u[0]);var d=h?u.position():{x:0,y:0};return i={x:l.x-d.x,y:l.y-d.y},void 0===e?i:i[e]}for(var p=0;p<this.length;p++){var f=this[p],v=s?f.parent():null,g=v&&v.length>0,y=g;g&&(v=v[0]);var m=y?v.position():{x:0,y:0};void 0!==t?f.position(e,t+m[e]):void 0!==i&&f.position({x:i.x+m.x,y:i.y+m.y})}}else if(!a)return;return this}}).modelPosition=s.point=s.position,s.modelPositions=s.points=s.positions,s.renderedPoint=s.renderedPosition,s.relativePoint=s.relativePosition,e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(2),a=void 0,s=void 0;a=s={},s.renderedBoundingBox=function(e){var t=this.boundingBox(e),n=this.cy(),r=n.zoom(),i=n.pan(),o=t.x1*r+i.x,a=t.x2*r+i.x,s=t.y1*r+i.y,l=t.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:l,w:a-o,h:l-s}},s.dirtyCompoundBoundsCache=function(){var e=this.cy();return e.styleEnabled()&&e.hasCompoundNodes()?(this.forEachUp(function(e){e._private.compoundBoundsClean=!1,e.isParent()&&e.emit("bounds")}),this):this},s.updateCompoundBounds=function(){var e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(e.batching())return this;var t=[];function n(e){if(e.isParent()){var n=e._private,r=e.children(),i="include"===e.pstyle("compound-sizing-wrt-labels").value,o={width:{val:e.pstyle("min-width").pfValue,left:e.pstyle("min-width-bias-left"),right:e.pstyle("min-width-bias-right")},height:{val:e.pstyle("min-height").pfValue,top:e.pstyle("min-height-bias-top"),bottom:e.pstyle("min-height-bias-bottom")}},a=r.boundingBox({includeLabels:i,includeOverlays:!1,useCache:!1}),s=n.position;0!==a.w&&0!==a.h||((a={w:e.pstyle("width").pfValue,h:e.pstyle("height").pfValue}).x1=s.x-a.w/2,a.x2=s.x+a.w/2,a.y1=s.y-a.h/2,a.y2=s.y+a.h/2);var l=o.width.left.value;"px"===o.width.left.units&&o.width.val>0&&(l=100*l/o.width.val);var u=o.width.right.value;"px"===o.width.right.units&&o.width.val>0&&(u=100*u/o.width.val);var c=o.height.top.value;"px"===o.height.top.units&&o.height.val>0&&(c=100*c/o.height.val);var h=o.height.bottom.value;"px"===o.height.bottom.units&&o.height.val>0&&(h=100*h/o.height.val);var d=m(o.width.val-a.w,l,u),p=d.biasDiff,f=d.biasComplementDiff,v=m(o.height.val-a.h,c,h),g=v.biasDiff,y=v.biasComplementDiff;n.autoPadding=function(e,t,n,r){if("%"!==n.units)return"px"===n.units?n.pfValue:0;switch(r){case"width":return e>0?n.pfValue*e:0;case"height":return t>0?n.pfValue*t:0;case"average":return e>0&&t>0?n.pfValue*(e+t)/2:0;case"min":return e>0&&t>0?e>t?n.pfValue*t:n.pfValue*e:0;case"max":return e>0&&t>0?e>t?n.pfValue*e:n.pfValue*t:0;default:return 0}}(a.w,a.h,e.pstyle("padding"),e.pstyle("padding-relative-to").value),n.autoWidth=Math.max(a.w,o.width.val),s.x=(-p+a.x1+a.x2+f)/2,n.autoHeight=Math.max(a.h,o.height.val),s.y=(-g+a.y1+a.y2+y)/2,t.push(e)}function m(e,t,n){var r=0,i=0,o=t+n;return e>0&&o>0&&(r=t/o*e,i=n/o*e),{biasDiff:r,biasComplementDiff:i}}}for(var r=0;r<this.length;r++){var i=this[r],o=i._private;o.compoundBoundsClean||(n(i),e._private.batchingStyle||(o.compoundBoundsClean=!0))}return this};var l=function(e){return e===1/0||e===-1/0?0:e},u=function(e,t,n,r,i){r-t!=0&&i-n!=0&&null!=t&&null!=n&&null!=r&&null!=i&&(e.x1=t<e.x1?t:e.x1,e.x2=r>e.x2?r:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2)},c=function(e,t,n){return i.getPrefixedProperty(e,t,n)},h=function(e,t,n){if(!t.cy().headless()){var r=t._private.rstyle,i=r.arrowWidth/2,o=void 0,a=void 0;"none"!==t.pstyle(n+"-arrow-shape").value&&("source"===n?(o=r.srcX,a=r.srcY):"target"===n?(o=r.tgtX,a=r.tgtY):(o=r.midX,a=r.midY),u(e,o-i,a-i,o+i,a+i))}},d=function(e,t,n){if(!t.cy().headless()){var r=void 0;r=n?n+"-":"";var i=t._private,o=i.rstyle;if(t.pstyle(r+"label").strValue){var a=t.pstyle("text-halign"),s=t.pstyle("text-valign"),l=c(o,"labelWidth",n),h=c(o,"labelHeight",n),d=c(o,"labelX",n),p=c(o,"labelY",n),f=t.pstyle(r+"text-margin-x").pfValue,v=t.pstyle(r+"text-margin-y").pfValue,g=t.isEdge(),y=t.pstyle(r+"text-rotation"),m=t.pstyle("text-outline-width").pfValue,x=t.pstyle("text-border-width").pfValue/2,b=t.pstyle("text-background-padding").pfValue,w=h+2*b,E=l+2*b,_=E/2,k=w/2,P=void 0,S=void 0,C=void 0,T=void 0;if(g)P=d-_,S=d+_,C=p-k,T=p+k;else{switch(a.value){case"left":P=d-E,S=d;break;case"center":P=d-_,S=d+_;break;case"right":P=d,S=d+E}switch(s.value){case"top":C=p-w,T=p;break;case"center":C=p-k,T=p+k;break;case"bottom":C=p,T=p+w}}var D=g&&"autorotate"===y.strValue,M=null!=y.pfValue&&0!==y.pfValue;if(D||M){var I=D?c(i.rstyle,"labelAngle",n):y.pfValue,N=Math.cos(I),L=Math.sin(I),A=function(e,t){return{x:(e-=d)*N-(t-=p)*L+d,y:e*L+t*N+p}},B=A(P,C),O=A(P,T),z=A(S,C),R=A(S,T);P=Math.min(B.x,O.x,z.x,R.x),S=Math.max(B.x,O.x,z.x,R.x),C=Math.min(B.y,O.y,z.y,R.y),T=Math.max(B.y,O.y,z.y,R.y)}P+=f-Math.max(m,x),S+=f+Math.max(m,x),C+=v-Math.max(m,x),T+=v+Math.max(m,x),u(e,P,C,S,T)}return e}},p=function(e){return e?"t":"f"},f=function(e){var t="";return t+=p(e.incudeNodes),t+=p(e.includeEdges),t+=p(e.includeLabels),t+=p(e.includeOverlays)},v=function(e,t){var n=e._private,r=void 0,i=e.cy().headless(),a=t===g?y:f(t);return t.useCache&&!i&&n.bbCache&&n.bbCache[a]?r=n.bbCache[a]:(r=function(e,t){var n=e._private.cy,r=n.styleEnabled(),i=n.headless(),a={x1:1/0,y1:1/0,x2:-1/0,y2:-1/0},s=e._private,c=r?e.pstyle("display").value:"element",p=e.isNode(),f=e.isEdge(),v=void 0,g=void 0,y=void 0,m=void 0,x=void 0,b=void 0,w="none"!==c;if(w){var E=0;r&&t.includeOverlays&&0!==e.pstyle("overlay-opacity").value&&(E=e.pstyle("overlay-padding").value);var _=0;if(r&&(_=e.pstyle("width").pfValue/2),p&&t.includeNodes){var k=e.position();x=k.x,b=k.y;var P=e.outerWidth()/2,S=e.outerHeight()/2;u(a,v=x-P-E,y=b-S-E,g=x+P+E,m=b+S+E)}else if(f&&t.includeEdges){var C=s.rstyle||{};if(r&&!i&&(v=Math.min(C.srcX,C.midX,C.tgtX),g=Math.max(C.srcX,C.midX,C.tgtX),y=Math.min(C.srcY,C.midY,C.tgtY),m=Math.max(C.srcY,C.midY,C.tgtY),u(a,v-=_,y-=_,g+=_,m+=_)),r&&!i&&"haystack"===e.pstyle("curve-style").strValue){var T=C.haystackPts||[];if(v=T[0].x,y=T[0].y,g=T[1].x,m=T[1].y,v>g){var D=v;v=g,g=D}if(y>m){var M=y;y=m,m=M}u(a,v-_,y-_,g+_,m+_)}else{for(var I=C.bezierPts||C.linePts||[],N=0;N<I.length;N++){var L=I[N];v=L.x-_,g=L.x+_,y=L.y-_,m=L.y+_,u(a,v,y,g,m)}if(0===I.length){var A=e.source().position(),B=e.target().position();if(v=A.x,g=B.x,y=A.y,m=B.y,v>g){var O=v;v=g,g=O}if(y>m){var z=y;y=m,m=z}u(a,v-=_,y-=_,g+=_,m+=_)}}}if(r&&t.includeEdges&&f&&(h(a,e,"mid-source"),h(a,e,"mid-target"),h(a,e,"source"),h(a,e,"target")),r&&"yes"===e.pstyle("ghost").value){var R=e.pstyle("ghost-offset-x").pfValue,V=e.pstyle("ghost-offset-y").pfValue;u(a,a.x1+R,a.y1+V,a.x2+R,a.y2+V)}r&&(v=a.x1,g=a.x2,y=a.y1,m=a.y2,u(a,v-E,y-E,g+E,m+E)),r&&t.includeLabels&&(d(a,e,null),f&&(d(a,e,"source"),d(a,e,"target")))}return a.x1=l(a.x1),a.y1=l(a.y1),a.x2=l(a.x2),a.y2=l(a.y2),a.w=l(a.x2-a.x1),a.h=l(a.y2-a.y1),a.w>0&&a.h>0&&w&&o.expandBoundingBox(a,1),a}(e,t),i||(n.bbCache=n.bbCache||{},n.bbCache[a]=r)),r},g={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeOverlays:!0,useCache:!0},y=f(g);function m(e){return{includeNodes:i.default(e.includeNodes,g.includeNodes),includeEdges:i.default(e.includeEdges,g.includeEdges),includeLabels:i.default(e.includeLabels,g.includeLabels),includeOverlays:i.default(e.includeOverlays,g.includeOverlays),useCache:i.default(e.useCache,g.useCache)}}s.boundingBox=function(e){if(1===this.length&&this[0]._private.bbCache&&(void 0===e||void 0===e.useCache||!0===e.useCache))return e=void 0===e?g:m(e),v(this[0],e);var t={x1:1/0,y1:1/0,x2:-1/0,y2:-1/0},n=m(e=e||i.staticEmptyObject()),r=this.cy().styleEnabled();r&&this.recalculateRenderedStyle(n.useCache),this.updateCompoundBounds();for(var o,a,s={},c=0;c<this.length;c++){var h=this[c];if(r&&h.isEdge()&&"bezier"===h.pstyle("curve-style").strValue&&!s[h.id()]){for(var d=h.parallelEdges(),p=0;p<d.length;p++)s[d[p].id()]=!0;d.recalculateRenderedStyle(n.useCache)}o=t,a=v(h,n),u(o,a.x1,a.y1,a.x2,a.y2)}return t.x1=l(t.x1),t.y1=l(t.y1),t.x2=l(t.x2),t.y2=l(t.y2),t.w=l(t.x2-t.x1),t.h=l(t.y2-t.y1),t},s.boundingBoxAt=function(e){var t=this.nodes();if(r.plainObject(e)){var n=e;e=function(){return n}}for(var i=0;i<t.length;i++){var o=t[i],a=o._private,s=a.position,l=e.call(o,o,i);a.bbAtOldPos={x:s.x,y:s.y},l&&(s.x=l.x,s.y=l.y)}this.emit("dirty"),t.dirtyCompoundBoundsCache().updateCompoundBounds();for(var u=this.boundingBox({useCache:!1}),c=0;c<t.length;c++){var h=t[c],d=h._private,p=h._private.position,f=d.bbAtOldPos;p.x=f.x,p.y=f.y}return t.dirtyCompoundBoundsCache(),this.emit("dirty"),u},a.boundingbox=a.boundingBox,a.renderedBoundingbox=a.renderedBoundingBox,e.exports=s},function(e,t,n){"use strict";var r=n(1),i=void 0,o=void 0;i=o={};var a=function(e){e.uppercaseName=r.capitalize(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=r.capitalize(e.outerName),i[e.name]=function(){var t=this[0],n=t._private,r=n.cy._private.styleEnabled;if(t){if(!r)return 1;if(t.isParent())return t.updateCompoundBounds(),n[e.autoName]||0;var i=t.pstyle(e.name);switch(i.strValue){case"label":return t.recalculateRenderedStyle(),n.rstyle[e.labelName]||0;default:return i.pfValue}}},i["outer"+e.uppercaseName]=function(){var t=this[0],n=t._private.cy._private.styleEnabled;if(t)return n?t[e.name]()+t.pstyle("border-width").pfValue+2*t.padding():1},i["rendered"+e.uppercaseName]=function(){var t=this[0];if(t)return t[e.name]()*this.cy().zoom()},i["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t)return t[e.outerName]()*this.cy().zoom()}};a({name:"width"}),a({name:"height"}),o.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==t.autoPadding?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},e.exports=o},function(e,t,n){"use strict";var r=function(e,t){if(e.isEdge())return t(e.renderer())};e.exports={controlPoints:function(){var e=this;return r(this,function(t){return t.getControlPoints(e)})},segmentPoints:function(){var e=this;return r(this,function(t){return t.getSegmentPoints(e)})},sourceEndpoint:function(){var e=this;return r(this,function(t){return t.getSourceEndpoint(e)})},targetEndpoint:function(){var e=this;return r(this,function(t){return t.getTargetEndpoint(e)})},midpoint:function(){var e=this;return r(this,function(t){return t.getEdgeMidpoint(e)})}}},function(e,t,n){"use strict";var r=n(11),i=n(4),o=n(0),a=n(1),s=n(6),l={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return null==r||e!==n.target&&o.element(n.target)&&r.matches(n.target)},eventFields:function(e){return{cy:e.cy(),target:e}},callbackContext:function(e,t,n){return null!=t.qualifier?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},u=function(e){return o.string(e)?new s(e):e},c={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new r(a.assign({context:t},l)))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var r=0;r<this.length;r++){this[r].emitter().on(e,u(t),n)}return this},removeListener:function(e,t,n){for(var r=0;r<this.length;r++){this[r].emitter().removeListener(e,u(t),n)}return this},one:function(e,t,n){for(var r=0;r<this.length;r++){this[r].emitter().one(e,u(t),n)}return this},once:function(e,t,n){for(var r=0;r<this.length;r++){this[r].emitter().on(e,u(t),n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){this[n].emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(0!==this.length)return this.cy().notify({type:e,eles:this}),this.emit(e,t),this}};i.eventAliasesOn(c),e.exports=c},function(e,t,n){"use strict";var r=n(0),i=n(6),o={nodes:function(e){return this.filter(function(e){return e.isNode()}).filter(e)},edges:function(e){return this.filter(function(e){return e.isEdge()}).filter(e)},filter:function(e,t){if(void 0===e)return this;if(r.string(e)||r.elementOrCollection(e))return new i(e).filter(this);if(r.fn(e)){for(var n=this.spawn(),o=0;o<this.length;o++){var a=this[o];(t?e.apply(t,[a,o,this]):e(a,o,this))&&n.merge(a)}return n}return this.spawn()},not:function(e){if(e){r.string(e)&&(e=this.filter(e));for(var t=[],n=e._private.map,i=0;i<this.length;i++){var o=this[i];n.has(o.id())||t.push(o)}return this.spawn(t)}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(e){if(r.string(e)){var t=e;return this.filter(t)}for(var n=[],i=e,o=this.length<e.length,a=o?i._private.map:this._private.map,s=o?this:i,l=0;l<s.length;l++){var u=s[l]._private.data.id,c=a.get(u);c&&n.push(c.ele)}return this.spawn(n)},xor:function(e){var t=this._private.cy;r.string(e)&&(e=t.$(e));var n=[],i=e,o=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],o=i._private.data.id;t.hasElementWithId(o)||n.push(i)}};return o(this,i),o(i,this),this.spawn(n)},diff:function(e){var t=this._private.cy;r.string(e)&&(e=t.$(e));var n=[],i=[],o=[],a=e,s=function(e,t,n){for(var r=0;r<e.length;r++){var i=e[r],a=i._private.data.id;t.hasElementWithId(a)?o.push(i):n.push(i)}};return s(this,a,n),s(a,this,i),{left:this.spawn(n,{unique:!0}),right:this.spawn(i,{unique:!0}),both:this.spawn(o,{unique:!0})}},add:function(e){var t=this._private.cy;if(!e)return this;if(r.string(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=[],o=0;o<this.length;o++)i.push(this[o]);for(var a=this._private.map,s=0;s<e.length;s++){var l=!a.has(e[s].id());l&&i.push(e[s])}return this.spawn(i)},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&r.string(e)){var i=e;e=n.mutableElements().filter(i)}for(var o=t.map,a=0;a<e.length;a++){var s=e[a],l=s._private.data.id;if(!o.has(l)){var u=this.length++;this[u]=s,o.set(l,{ele:s,index:u})}else{var c=o.get(l).index;this[c]=s,o.set(l,{ele:s,index:c})}}return this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,r=t.map,i=r.get(n);if(!i)return this;var o=i.index;this[o]=void 0,r.delete(n);var a=o===this.length-1;if(this.length>1&&!a){var s=this.length-1,l=this[s],u=l._private.data.id;this[s]=void 0,this[o]=l,r.set(u,{ele:l,index:o})}return this.length--,this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&r.string(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},map:function(e,t){for(var n=[],r=0;r<this.length;r++){var i=this[r],o=t?e.apply(t,[i,r,this]):e(i,r,this);n.push(o)}return n},reduce:function(e,t){for(var n=t,r=0;r<this.length;r++)n=e(n,this[r],r,this);return n},max:function(e,t){for(var n=-1/0,r=void 0,i=0;i<this.length;i++){var o=this[i],a=t?e.apply(t,[o,i,this]):e(o,i,this);a>n&&(n=a,r=o)}return{value:n,ele:r}},min:function(e,t){for(var n=1/0,r=void 0,i=0;i<this.length;i++){var o=this[i],a=t?e.apply(t,[o,i,this]):e(o,i,this);a<n&&(n=a,r=o)}return{value:n,ele:r}}},a=o;a.u=a["|"]=a["+"]=a.union=a.or=a.add,a["\\"]=a["!"]=a["-"]=a.difference=a.relativeComplement=a.subtract=a.not,a.n=a["&"]=a["."]=a.and=a.intersection=a.intersect,a["^"]=a["(+)"]=a["(-)"]=a.symmetricDifference=a.symdiff=a.xor,a.fnFilter=a.filterFn=a.stdFilter=a.filter,a.complement=a.abscomp=a.absoluteComplement,e.exports=o},function(e,t,n){"use strict";e.exports={isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var e=this[0];if(e)return e._private.group}}},function(e,t,n){"use strict";var r=n(0),i=n(17),o=n(1),a={forEach:function(e,t){if(r.fn(e))for(var n=0;n<this.length;n++){var i=this[n];if(!1===(t?e.apply(t,[i,n,this]):e(i,n,this)))break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],r=this.length;null==t&&(t=r),null==e&&(e=0),e<0&&(e=r+e),t<0&&(t=r+t);for(var i=e;i>=0&&i<t&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!r.fn(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(i)},zDepth:function(){var e=this[0];if(e){var t=e._private;if("nodes"===t.group){var n=t.data.parent?e.parents().size():0;return e.isParent()?n:o.MAX_INT-1}var r=t.source,i=t.target,a=r.zDepth(),s=i.zDepth();return Math.max(a,s,0)}}};a.each=a.forEach,e.exports=a},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(5),a=n(2),s={layoutDimensions:function(e){if((e=i.assign({nodeDimensionsIncludeLabels:!0},e)).nodeDimensionsIncludeLabels){var t=this.boundingBox();return{w:t.w,h:t.h}}return{w:this.outerWidth(),h:this.outerHeight()}},layoutPositions:function(e,t,n){var s=this.nodes(),l=this.cy(),u=t.eles,c=function(e,t){return e.id()+"$"+t},h=i.memoize(n,c);e.emit({type:"layoutstart",layout:e}),e.animations=[];var d=t.spacingFactor&&1!==t.spacingFactor,p=function(){if(!d)return null;for(var e=a.makeBoundingBox(),t=0;t<s.length;t++){var n=s[t],r=h(n,t);a.expandBoundingBoxByPoint(e,r.x,r.y)}return e}(),f=i.memoize(function(e,n){var i=h(e,n),o=e.position();(r.number(o.x)&&r.number(o.y)||e.silentPosition({x:0,y:0}),d)&&(i=function(e,t,n){var r=t.x1+t.w/2,i=t.y1+t.h/2;return{x:r+(n.x-r)*e,y:i+(n.y-i)*e}}(Math.abs(t.spacingFactor),p,i));return null!=t.transform&&(i=t.transform(e,i)),i},c);if(t.animate){for(var v=0;v<s.length;v++){var g=s[v],y=f(g,v);if(null==t.animateFilter||t.animateFilter(g,v)){var m=g.animation({position:y,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(m),m.play()}else g.position(y)}if(t.fit){var x=l.animation({fit:{boundingBox:u.boundingBoxAt(f),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(x),x.play()}else if(void 0!==t.zoom&&void 0!==t.pan){var b=l.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(b),b.play()}e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),o.all(e.animations.map(function(e){return e.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else s.positions(f),t.fit&&l.fit(t.eles,t.padding),null!=t.zoom&&l.zoom(t.zoom),t.pan&&l.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){return this.cy().makeLayout(i.extend({},e,{eles:this}))}};s.createLayout=s.makeLayout=s.layout,e.exports=s},function(e,t,n){"use strict";var r=n(0);function i(e,t,n){var r,i=n._private,o=i.styleCache=i.styleCache||{};return null!=(r=o[e])?r:r=o[e]=t(n)}function o(e,t){return function(n){return i(e,t,n)}}function a(e,t){var n=function(e){return t.call(e)};return function(){var t=this[0];if(t)return i(e,n,t)}}var s={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),r=t.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=function(e){return e._private.styleCache={}};if(this.cy().hasCompoundNodes()){var t=void 0;(t=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(t.connectedEdges()),t.forEach(e)}else this.forEach(function(t){e(t),t.connectedEdges().forEach(e)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t._private.batchingStyle)return t._private.batchStyleEles.merge(this),this;var n=t.hasCompoundNodes(),r=t.style(),i=this;e=!(!e&&void 0!==e),n&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=r.apply(i);return o.dirtyStyleCache(),o.dirtyCompoundBoundsCache(),e?o.emitAndNotify("style"):o.emit("style"),this},updateMappers:function(e){var t=this._private.cy,n=t.style();if(e=!(!e&&void 0!==e),!t.styleEnabled())return this;var r=n.updateMappers(this);return r.dirtyStyleCache(),r.dirtyCompoundBoundsCache(),e?r.emitAndNotify("style"):r.emit("style"),this},parsedStyle:function(e){var t=this[0],n=t.cy();if(n.styleEnabled())return t?t._private.style[e]||n.style().getDefaultProperty(e):void 0},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled())return t?t.pstyle(e).units:void 0},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];return n?t.style().getRenderedStyle(n,e):void 0},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var i=n.style();if(r.plainObject(e)){var o=e;i.applyBypass(this,o,!1),this.dirtyStyleCache(),this.dirtyCompoundBoundsCache(),this.emitAndNotify("style")}else if(r.string(e)){if(void 0===t){var a=this[0];return a?i.getStylePropertyValue(a,e):void 0}i.applyBypass(this,e,t,!1),this.dirtyStyleCache(),this.dirtyCompoundBoundsCache(),this.emitAndNotify("style")}else if(void 0===e){var s=this[0];return s?i.getRawStyle(s):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=t.style();if(void 0===e)for(var r=0;r<this.length;r++){var i=this[r];n.removeAllBypasses(i,!1)}else{e=e.split(/\s+/);for(var o=0;o<this.length;o++){var a=this[o];n.removeBypasses(a,e,!1)}}return this.dirtyStyleCache(),this.dirtyCompoundBoundsCache(),this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!t)return i;var o=r.data.parent?n.parents():null;if(o)for(var a=0;a<o.length;a++){i*=o[a].pstyle("opacity").value}return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var e=this[0],t=e.cy().hasCompoundNodes();return e?t?0===e.effectiveOpacity():0===e.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function l(e,t){var n=e._private.data.parent?e.parents():null;if(n)for(var r=0;r<n.length;r++){if(!t(n[r]))return!1}return!0}function u(e){var t=e.ok,n=e.edgeOkViaNode||e.ok,r=e.parentOk||e.ok;return function(){var e=this.cy();if(!e.styleEnabled())return!0;var i=this[0],o=e.hasCompoundNodes();if(i){var a=i._private;if(!t(i))return!1;if(i.isNode())return!o||l(i,r);var s=a.source,u=a.target;return n(s)&&(!o||l(s,n))&&(s===u||n(u)&&(!o||l(u,n)))}}}var c=o("eleTakesUpSpace",function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())});s.takesUpSpace=a("takesUpSpace",u({ok:c}));var h=o("eleInteractive",function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&c(e)}),d=o("parentInteractive",function(e){return"visible"===e.pstyle("visibility").value&&c(e)});s.interactive=a("interactive",u({ok:h,parentOk:d,edgeOkViaNode:c})),s.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var p=o("eleVisible",function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&c(e)}),f=c;s.visible=a("visible",u({ok:p,edgeOkViaNode:f})),s.hidden=function(){var e=this[0];if(e)return!e.visible()},s.bypass=s.css=s.style,s.renderedCss=s.renderedStyle,s.removeBypass=s.removeCss=s.removeStyle,s.pstyle=s.parsedStyle,e.exports=s},function(e,t,n){"use strict";var r={};function i(e){return function(){var t=arguments,n=[];if(2===t.length){var r=t[0],i=t[1];this.on(e.event,r,i)}else if(1===t.length){var o=t[0];this.on(e.event,o)}else if(0===t.length){for(var a=0;a<this.length;a++){var s=this[a],l=!e.ableField||s._private[e.ableField],u=s._private[e.field]!=e.value;if(e.overrideAble){var c=e.overrideAble(s);if(void 0!==c&&(l=c,!c))return this}l&&(s._private[e.field]=e.value,u&&n.push(s))}var h=this.spawn(n);h.updateStyle(),h.emit(e.event)}return this}}function o(e){r[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var n=e.overrideField(t);if(void 0!==n)return n}return t._private[e.field]}},r[e.on]=i({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),r[e.off]=i({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}o({field:"locked",overrideField:function(e){return!!e.cy().autolock()||void 0},on:"lock",off:"unlock"}),o({field:"grabbable",overrideField:function(e){return!e.cy().autoungrabify()&&void 0},on:"grabify",off:"ungrabify"}),o({field:"selected",ableField:"selectable",overrideAble:function(e){return!e.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),o({field:"selectable",overrideField:function(e){return!e.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),r.deselect=r.unselect,r.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},o({field:"active",on:"activate",off:"unactivate"}),r.inactive=function(){var e=this[0];if(e)return!e._private.active},e.exports=r},function(e,t,n){"use strict";var r=n(1),i=n(0),o={},a=function(e,t){return function(n,r,o,a){var s=n,l=void 0;if(null==s?l="null":i.elementOrCollection(s)&&1===s.length&&(l="#"+s.id()),1===this.length&&l){var u=this[0]._private,c=u.traversalCache=u.traversalCache||{},h=c[t]=c[t]||{},d=h[l];return d||(h[l]=e.call(this,n,r,o,a))}return e.call(this,n,r,o,a)}},s=function(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode()){for(var o=!1,a=i.connectedEdges(),s=0;s<a.length;s++){var l=a[s],u=l.source(),c=l.target();if(e.noIncomingEdges&&c===i&&u!==i||e.noOutgoingEdges&&u===i&&c!==i){o=!0;break}}o||n.push(i)}}return this.spawn(n,{unique:!0}).filter(t)}},l=function(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode())for(var o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],l=s.source(),u=s.target();e.outgoing&&l===i?(n.push(s),n.push(u)):e.incoming&&u===i&&(n.push(s),n.push(l))}}return this.spawn(n,{unique:!0}).filter(t)}},u=function(e){return function(t){for(var n=this,r=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(0===o.length)break;for(var a=!1,s=0;s<o.length;s++){var l=o[s],u=l.id();i[u]||(i[u]=!0,r.push(l),a=!0)}if(!a)break;n=o}return this.spawn(r,{unique:!0}).filter(t)}};function c(e){return function(t){for(var n=[],r=0;r<this.length;r++){var i=this[r]._private[e.attr];i&&n.push(i)}return this.spawn(n,{unique:!0}).filter(t)}}function h(e){return function(t){var n=[],r=this._private.cy,o=e||{};i.string(t)&&(t=r.$(t));for(var a=0;a<t.length;a++)for(var s=t[a]._private.edges,l=0;l<s.length;l++){var u=s[l],c=u._private.data,h=this.hasElementWithId(c.source)&&t.hasElementWithId(c.target),d=t.hasElementWithId(c.source)&&this.hasElementWithId(c.target);if(h||d){if(o.thisIsSrc||o.thisIsTgt){if(o.thisIsSrc&&!h)continue;if(o.thisIsTgt&&!d)continue}n.push(u)}}return this.spawn(n,{unique:!0})}}function d(e){return e=r.extend({},{codirected:!1},e),function(t){for(var n=[],r=this.edges(),i=e,o=0;o<r.length;o++)for(var a=r[o]._private,s=a.source,l=s._private.data.id,u=a.data.target,c=s._private.edges,h=0;h<c.length;h++){var d=c[h],p=d._private.data,f=p.target,v=p.source,g=f===u&&v===l,y=l===f&&u===v;(i.codirected&&g||!i.codirected&&(g||y))&&n.push(d)}return this.spawn(n,{unique:!0}).filter(t)}}o.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},r.extend(o,{roots:s({noIncomingEdges:!0}),leaves:s({noOutgoingEdges:!0}),outgoers:a(l({outgoing:!0}),"outgoers"),successors:u({outgoing:!0}),incomers:a(l({incoming:!0}),"incomers"),predecessors:u({incoming:!0})}),r.extend(o,{neighborhood:a(function(e){for(var t=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],l=s.source(),u=s.target(),c=i===l?u:l;c.length>0&&t.push(c[0]),t.push(s[0])}return this.spawn(t,{unique:!0}).filter(e)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),o.neighbourhood=o.neighborhood,o.closedNeighbourhood=o.closedNeighborhood,o.openNeighbourhood=o.openNeighborhood,r.extend(o,{source:a(function(e){var t=this[0],n=void 0;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:a(function(e){var t=this[0],n=void 0;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:c({attr:"source"}),targets:c({attr:"target"})}),r.extend(o,{edgesWith:a(h(),"edgesWith"),edgesTo:a(h({thisIsSrc:!0}),"edgesTo")}),r.extend(o,{connectedEdges:a(function(e){for(var t=[],n=0;n<this.length;n++){var r=this[n];if(r.isNode())for(var i=r._private.edges,o=0;o<i.length;o++){var a=i[o];t.push(a)}}return this.spawn(t,{unique:!0}).filter(e)},"connectedEdges"),connectedNodes:a(function(e){for(var t=[],n=0;n<this.length;n++){var r=this[n];r.isEdge()&&(t.push(r.source()[0]),t.push(r.target()[0]))}return this.spawn(t,{unique:!0}).filter(e)},"connectedNodes"),parallelEdges:a(d(),"parallelEdges"),codirectedEdges:a(d({codirected:!0}),"codirectedEdges")}),r.extend(o,{components:function(){var e=this,t=e.cy(),n=e.spawn(),r=e.nodes().spawnSelf(),i=[],o=function(e,t){n.merge(e),r.unmerge(e),t.merge(e)};if(r.empty())return e.spawn();var a=function(){var n=t.collection();i.push(n);var a=r[0];o(a,n),e.bfs({directed:!1,roots:a,visit:function(e,t,r,i,a){o(e,n)}})};do{a()}while(r.length>0);return i.map(function(e){var t=e.connectedEdges().stdFilter(function(t){return e.anySame(t.source())&&e.anySame(t.target())});return e.union(t)})}}),e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(7),a=n(14),s={add:function(e){var t=void 0,n=this;if(r.elementOrCollection(e)){var s=e;if(s._private.cy===n)t=s.restore();else{for(var l=[],u=0;u<s.length;u++){var c=s[u];l.push(c.json())}t=new o(n,l)}}else if(r.array(e)){t=new o(n,e)}else if(r.plainObject(e)&&(r.array(e.nodes)||r.array(e.edges))){for(var h=e,d=[],p=["nodes","edges"],f=0,v=p.length;f<v;f++){var g=p[f],y=h[g];if(r.array(y))for(var m=0,x=y.length;m<x;m++){var b=i.extend({group:g},y[m]);d.push(b)}}t=new o(n,d)}else{t=new a(n,e).collection()}return t},remove:function(e){if(r.elementOrCollection(e));else if(r.string(e)){var t=e;e=this.$(t)}return e.remove()}};e.exports=s},function(e,t,n){"use strict";var r=n(4),i=n(1),o=n(72),a={animate:r.animate(),animation:r.animation(),animated:r.animated(),clearQueue:r.clearQueue(),delay:r.delay(),delayAnimation:r.delayAnimation(),stop:r.stop(),addToAnimationPool:function(e){this.styleEnabled()&&this._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,e.styleEnabled()){var t=e.renderer();t&&t.beforeRender?t.beforeRender(function(t,n){o(n,e)},t.beforeRenderPriorities.animations):function t(){e._private.animationsRunning&&i.requestAnimationFrame(function(n){o(n,e),t()})}()}}};e.exports=a},function(e,t,n){"use strict";var r=n(73),i=n(78);e.exports=function(e,t){var n=t._private.aniEles,o=[];function a(t,n){var a=t._private,s=a.animation.current,l=a.animation.queue,u=!1;if(!n&&"none"===t.pstyle("display").value){s=s.splice(0,s.length).concat(l.splice(0,l.length));for(var c=0;c<s.length;c++)s[c].stop()}if(0===s.length){var h=l.shift();h&&s.push(h)}for(var d=function(e){for(var t=e.length-1;t>=0;t--)(0,e[t])();e.splice(0,e.length)},p=s.length-1;p>=0;p--){var f=s[p],v=f._private;v.stopped?(s.splice(p,1),v.hooked=!1,v.playing=!1,v.started=!1,d(v.frames)):(v.playing||v.applying)&&(v.playing&&v.applying&&(v.applying=!1),v.started||i(t,f,e,n),r(t,f,e,n),v.applying&&(v.applying=!1),d(v.frames),f.completed()&&(s.splice(p,1),v.hooked=!1,v.playing=!1,v.started=!1,d(v.completes)),u=!0)}return n||0!==s.length||0!==l.length||o.push(t),u}for(var s=!1,l=0;l<n.length;l++){var u=a(n[l]);s=s||u}var c=a(t,!0);(s||c)&&(n.length>0?(n.dirtyCompoundBoundsCache(),t.notify({type:"draw",eles:n})):t.notify({type:"draw"})),n.unmerge(o),t.emit("step")}},function(e,t,n){"use strict";var r=n(74),i=n(77),o=n(0);function a(e,t){return null!=e&&null!=t&&(!(!o.number(e)||!o.number(t))||!(!e||!t))}e.exports=function(e,t,n,s){var l=!s,u=e._private,c=t._private,h=c.easing,d=c.startTime,p=(s?e:e.cy()).style();if(!c.easingImpl)if(null==h)c.easingImpl=r.linear;else{var f=void 0;f=o.string(h)?p.parse("transition-timing-function",h).value:h;var v=void 0,g=void 0;o.string(f)?(v=f,g=[]):(v=f[1],g=f.slice(2).map(function(e){return+e})),g.length>0?("spring"===v&&g.push(c.duration),c.easingImpl=r[v].apply(null,g)):c.easingImpl=r[v]}var y=c.easingImpl,m=void 0;if(m=0===c.duration?1:(n-d)/c.duration,c.applying&&(m=c.progress),m<0?m=0:m>1&&(m=1),null==c.delay){var x=c.startPosition,b=c.position;if(b&&l&&!e.locked()){var w=e.position();a(x.x,b.x)&&(w.x=i(x.x,b.x,m,y)),a(x.y,b.y)&&(w.y=i(x.y,b.y,m,y)),e.emit("position")}var E=c.startPan,_=c.pan,k=u.pan,P=null!=_&&s;P&&(a(E.x,_.x)&&(k.x=i(E.x,_.x,m,y)),a(E.y,_.y)&&(k.y=i(E.y,_.y,m,y)),e.emit("pan"));var S=c.startZoom,C=c.zoom,T=null!=C&&s;T&&(a(S,C)&&(u.zoom=i(S,C,m,y)),e.emit("zoom")),(P||T)&&e.emit("viewport");var D=c.style;if(D&&D.length>0&&l){for(var M=0;M<D.length;M++){var I=D[M],N=I.name,L=I,A=c.startStyle[N],B=p.properties[A.name],O=i(A,L,m,y,B);p.overrideBypass(e,N,O)}e.emit("style")}}return c.progress=m,m}},function(e,t,n){"use strict";var r=n(75),i=n(76),o=function(e,t,n,i){var o=r(e,t,n,i);return function(e,t,n){return e+(t-e)*o(n)}},a={linear:function(e,t,n){return e+(t-e)*n},ease:o(.25,.1,.25,1),"ease-in":o(.42,0,1,1),"ease-out":o(0,0,.58,1),"ease-in-out":o(.42,0,.58,1),"ease-in-sine":o(.47,0,.745,.715),"ease-out-sine":o(.39,.575,.565,1),"ease-in-out-sine":o(.445,.05,.55,.95),"ease-in-quad":o(.55,.085,.68,.53),"ease-out-quad":o(.25,.46,.45,.94),"ease-in-out-quad":o(.455,.03,.515,.955),"ease-in-cubic":o(.55,.055,.675,.19),"ease-out-cubic":o(.215,.61,.355,1),"ease-in-out-cubic":o(.645,.045,.355,1),"ease-in-quart":o(.895,.03,.685,.22),"ease-out-quart":o(.165,.84,.44,1),"ease-in-out-quart":o(.77,0,.175,1),"ease-in-quint":o(.755,.05,.855,.06),"ease-out-quint":o(.23,1,.32,1),"ease-in-out-quint":o(.86,0,.07,1),"ease-in-expo":o(.95,.05,.795,.035),"ease-out-expo":o(.19,1,.22,1),"ease-in-out-expo":o(1,0,0,1),"ease-in-circ":o(.6,.04,.98,.335),"ease-out-circ":o(.075,.82,.165,1),"ease-in-out-circ":o(.785,.135,.15,.86),spring:function(e,t,n){if(0===n)return a.linear;var r=i(e,t,n);return function(e,t,n){return e+(t-e)*r(n)}},"cubic-bezier":o};e.exports=a},function(e,t,n){"use strict";e.exports=function(e,t,n,r){var i=4,o=.001,a=1e-7,s=10,l=11,u=1/(l-1),c="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var h=0;h<4;++h)if("number"!=typeof arguments[h]||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;e=Math.min(e,1),n=Math.min(n,1),e=Math.max(e,0),n=Math.max(n,0);var d=c?new Float32Array(l):new Array(l);function p(e,t){return 1-3*t+3*e}function f(e,t){return 3*t-6*e}function v(e){return 3*e}function g(e,t,n){return((p(t,n)*e+f(t,n))*e+v(t))*e}function y(e,t,n){return 3*p(t,n)*e*e+2*f(t,n)*e+v(t)}function m(t){for(var r=0,c=1,h=l-1;c!==h&&d[c]<=t;++c)r+=u;var p=r+(t-d[--c])/(d[c+1]-d[c])*u,f=y(p,e,n);return f>=o?function(t,r){for(var o=0;o<i;++o){var a=y(r,e,n);if(0===a)return r;r-=(g(r,e,n)-t)/a}return r}(t,p):0===f?p:function(t,r,i){var o=void 0,l=void 0,u=0;do{(o=g(l=r+(i-r)/2,e,n)-t)>0?i=l:r=l}while(Math.abs(o)>a&&++u<s);return l}(t,r,r+u)}var x=!1;function b(){x=!0,e===t&&n===r||function(){for(var t=0;t<l;++t)d[t]=g(t*u,e,n)}()}var w=function(i){return x||b(),e===t&&n===r?i:0===i?0:1===i?1:g(m(i),t,r)};w.getControlPoints=function(){return[{x:e,y:t},{x:n,y:r}]};var E="generateBezier("+[e,t,n,r]+")";return w.toString=function(){return E},w}},function(e,t,n){"use strict";var r=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,r){var i={x:t.x+r.dx*n,v:t.v+r.dv*n,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)}}function n(n,r){var i={dx:n.v,dv:e(n)},o=t(n,.5*r,i),a=t(n,.5*r,o),s=t(n,r,a),l=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),u=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+l*r,n.v=n.v+u*r,n}return function e(t,r,i){var o,a={x:-1,v:0,tension:null,friction:null},s=[0],l=0,u=void 0,c=void 0;for(t=parseFloat(t)||500,r=parseFloat(r)||20,i=i||null,a.tension=t,a.friction=r,u=(o=null!==i)?(l=e(t,r))/i*.016:.016;c=n(c||a,u),s.push(1+c.x),l+=16,Math.abs(c.x)>1e-4&&Math.abs(c.v)>1e-4;);return o?function(e){return s[e*(s.length-1)|0]}:l}}();e.exports=r},function(e,t,n){"use strict";var r=n(0);function i(e,t,n,r,i){if(1===r)return n;var o=i(t,n,r);return null==e?o:((e.roundValue||e.color)&&(o=Math.round(o)),void 0!==e.min&&(o=Math.max(o,e.min)),void 0!==e.max&&(o=Math.min(o,e.max)),o)}function o(e,t){return null!=e.pfValue||null!=e.value?null==e.pfValue||null!=t&&"%"===t.type.units?e.value:e.pfValue:e}e.exports=function(e,t,n,a,s){var l=null!=s?s.type:null;n<0?n=0:n>1&&(n=1);var u=o(e,s),c=o(t,s);if(r.number(u)&&r.number(c))return i(l,u,c,n,a);if(r.array(u)&&r.array(c)){for(var h=[],d=0;d<c.length;d++){var p=u[d],f=c[d];if(null!=p&&null!=f){var v=i(l,p,f,n,a);h.push(v)}else h.push(f)}return h}}},function(e,t,n){"use strict";e.exports=function(e,t,n,r){var i=!r,o=e,a=t._private,s=r?e:e.cy(),l=s.style();if(i){var u=o.position();a.startPosition=a.startPosition||{x:u.x,y:u.y},a.startStyle=a.startStyle||l.getAnimationStartStyle(o,a.style)}if(r){var c=s._private.pan;a.startPan=a.startPan||{x:c.x,y:c.y},a.startZoom=null!=a.startZoom?a.startZoom:s._private.zoom}a.started=!0,a.startTime=n-a.progress*a.duration}},function(e,t,n){"use strict";var r=n(11),i=n(4),o=n(0),a=n(1),s=n(6),l={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,n){var r=t.qualifier;return null==r||e!==n.target&&o.element(n.target)&&r.matches(n.target)},eventFields:function(e){return{cy:e,target:e}},callbackContext:function(e,t,n){return null!=t.qualifier?n.target:e}},u=function(e){return o.string(e)?new s(e):e},c={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new r(a.assign({context:this},l))),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,u(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,u(t),n),this},one:function(e,t,n){return this.emitter().one(e,u(t),n),this},once:function(e,t,n){return this.emitter().one(e,u(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this}};i.eventAliasesOn(c),e.exports=c},function(e,t,n){"use strict";var r={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return(e=e||{}).bg=e.bg||"#fff",t.jpg(e)}};r.jpeg=r.jpg,e.exports=r},function(e,t,n){"use strict";var r=n(1),i=n(0),o={layout:function(e){if(null!=e)if(null!=e.name){var t=e.name,n=this.extension("layout",t);if(null!=n){var o=void 0;o=i.string(e.eles)?this.$(e.eles):null!=e.eles?e.eles:this.$();var a=new n(r.extend({},e,{cy:this,eles:o}));return a}r.error("Can not apply layout: No such layout `"+t+"` found; did you include its JS file?")}else r.error("A `name` must be specified to make a layout");else r.error("Layout options must be specified to make a layout")}};o.createLayout=o.makeLayout=o.layout,e.exports=o},function(e,t,n){"use strict";var r={notify:function(e){var t=this._private;if(t.batchingNotify){var n=t.batchNotifyEles,r=t.batchNotifyTypes;return e.eles&&n.merge(e.eles),void(r.ids[e.type]||(r.push(e.type),r.ids[e.type]=!0))}if(t.notificationsEnabled){var i=this.renderer();!this.isDestroyed()&&i&&i.notify(e)}},notifications:function(e){var t=this._private;if(void 0===e)return t.notificationsEnabled;t.notificationsEnabled=!!e},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchingStyle=e.batchingNotify=!0,e.batchStyleEles=this.collection(),e.batchNotifyEles=this.collection(),e.batchNotifyTypes=[],e.batchNotifyTypes.ids={}),e.batchCount++,this},endBatch:function(){var e=this._private;return e.batchCount--,0===e.batchCount&&(e.batchingStyle=!1,e.batchStyleEles.updateStyle(),e.batchingNotify=!1,this.notify({type:e.batchNotifyTypes,eles:e.batchNotifyEles})),this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],o=e[i];t.getElementById(i).data(o)}})}};e.exports=r},function(e,t,n){"use strict";var r=n(1),i={renderTo:function(e,t,n,r){return this._private.renderer.renderTo(e,t,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.invalidateSize(),this.notify({type:"resize"}),this.emit("resize"),this},initRenderer:function(e){var t=this.extension("renderer",e.name);null!=t?(this._private.renderer=new t(r.extend({},e,{cy:this})),this.notify({type:"init"})):r.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",e.name)},destroyRenderer:function(){this.notify({type:"destroy"});var e=this.container();if(e)for(e._cyreg=null;e.childNodes.length>0;)e.removeChild(e.childNodes[0]);this._private.renderer=null},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};i.invalidateDimensions=i.resize,e.exports=i},function(e,t,n){"use strict";var r=n(0),i=n(7),o={collection:function(e,t){return r.string(e)?this.$(e):r.elementOrCollection(e)?e.collection():r.array(e)?new i(this,e,t):new i(this)},nodes:function(e){var t=this.$(function(e){return e.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(e){return e.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};o.elements=o.filter=o.$,e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(18),o={style:function(e){e&&this.setStyle(e).update();return this._private.style},setStyle:function(e){var t=this._private;return r.stylesheet(e)?t.style=e.generateStyle(this):r.array(e)?t.style=i.fromJson(this,e):r.string(e)?t.style=i.fromString(this,e):t.style=i(this),t.style}};e.exports=o},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(5),a={apply:function(e){var t=this._private,n=t.cy.collection();t.newStyle&&(t.contextStyles={},t.propDiffs={},this.cleanElements(e,!0));for(var r=0;r<e.length;r++){var i=e[r],o=this.getContextMeta(i);if(!o.empty){n.merge(i);var a=this.getContextStyle(o),s=this.applyContextStyle(o,a,i);t.newStyle||this.updateTransitions(i,s.diffProps),this.updateStyleHints(i)}}return t.newStyle=!1,n},getPropertiesDiff:function(e,t){var n=this._private.propDiffs=this._private.propDiffs||{},r=e+"-"+t,i=n[r];if(i)return i;for(var o=[],a={},s=0;s<this.length;s++){var l=this[s],u="t"===e[s]!==("t"===t[s]),c=l.mappedProperties.length>0;if(u||c){var h=void 0;u&&c?h=l.properties:u?h=l.properties:c&&(h=l.mappedProperties);for(var d=0;d<h.length;d++){for(var p=h[d],f=p.name,v=!1,g=s+1;g<this.length;g++){var y=this[g];if("t"===t[g]&&(v=null!=y.properties[p.name]))break}a[f]||v||(a[f]=!0,o.push(f))}}}return n[r]=o,o},getContextMeta:function(e){var t,n="",r=e._private.styleCxtKey||"";this._private.newStyle&&(r="");for(var i=0;i<this.length;i++){var o=this[i];n+=o.selector&&o.selector.matches(e)?"t":"f"}return t=this.getPropertiesDiff(r,n),e._private.styleCxtKey=n,{key:n,diffPropNames:t,empty:0===t.length}},getContextStyle:function(e){var t=e.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[t])return n[t];for(var r={_private:{key:t}},i=0;i<this.length;i++){var o=this[i];if("t"===t[i])for(var a=0;a<o.properties.length;a++){var s=o.properties[a];r[s.name]=s}}return n[t]=r,r},applyContextStyle:function(e,t,n){for(var r=e.diffPropNames,i={},o=0;o<r.length;o++){var a=r[o],s=t[a],l=n.pstyle(a);if(!s){if(!l)continue;s=l.bypass?{name:a,deleteBypassed:!0}:{name:a,delete:!0}}if(l!==s){var u=i[a]={prev:l};this.applyParsedProperty(n,s),u.next=n.pstyle(a),u.next&&u.next.bypass&&(u.next=u.next.bypassed)}}return{diffProps:i}},updateStyleHints:function(e){var t=e._private;if(!e.removed()){var n=!1;if("nodes"===t.group)for(var r=1;r<=this.pieBackgroundN;r++){if(e.pstyle("pie-"+r+"-background-size").value>0){n=!0;break}}t.hasPie=n;var i=e.pstyle("text-transform").strValue,o=e.pstyle("label").strValue,a=e.pstyle("source-label").strValue,s=e.pstyle("target-label").strValue,l=e.pstyle("font-style").strValue,u=e.pstyle("font-size").pfValue+"px",c=e.pstyle("font-family").strValue,h=e.pstyle("font-weight").strValue,d=l+"$"+u+"$"+c+"$"+h+"$"+i+"$"+e.pstyle("text-valign").strValue+"$"+e.pstyle("text-valign").strValue+"$"+e.pstyle("text-outline-width").pfValue+"$"+e.pstyle("text-wrap").strValue+"$"+e.pstyle("text-max-width").pfValue;t.labelStyleKey=d,t.sourceLabelKey=d+"$"+a,t.targetLabelKey=d+"$"+s,t.labelKey=d+"$"+o,t.fontKey=l+"$"+h+"$"+u+"$"+c,t.styleKey=Date.now()}},applyParsedProperty:function(e,t){var n=this,o=t,a=e._private.style,s=void 0,l=n.types,u=n.properties[o.name].type,c=o.bypass,h=a[o.name],d=h&&h.bypass,p=e._private,f=function(){n.checkZOrderTrigger(e,o.name,h?h.value:null,o.value)};if("curve-style"===t.name&&"haystack"===t.value&&e.isEdge()&&(e.isLoop()||e.source().isParent()||e.target().isParent())&&(o=t=this.parse(t.name,"bezier",c)),o.delete)return a[o.name]=void 0,f(),!0;if(o.deleteBypassed)return h?!!h.bypass&&(h.bypassed=void 0,f(),!0):(f(),!0);if(o.deleteBypass)return h?!!h.bypass&&(a[o.name]=h.bypassed,f(),!0):(f(),!0);var v=function(){r.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+e.id()+"` for property `"+o.name+"` with data field `"+o.field+"`); try a `["+o.field+"]` selector to limit scope to elements with `"+o.field+"` defined")};switch(o.mapped){case l.mapData:for(var g=o.field.split("."),y=p.data,m=0;m<g.length&&y;m++){y=y[g[m]]}var x=void 0;if((x=i.number(y)?(y-o.fieldMin)/(o.fieldMax-o.fieldMin):0)<0?x=0:x>1&&(x=1),u.color){var b=o.valueMin[0],w=o.valueMax[0],E=o.valueMin[1],_=o.valueMax[1],k=o.valueMin[2],P=o.valueMax[2],S=null==o.valueMin[3]?1:o.valueMin[3],C=null==o.valueMax[3]?1:o.valueMax[3],T=[Math.round(b+(w-b)*x),Math.round(E+(_-E)*x),Math.round(k+(P-k)*x),Math.round(S+(C-S)*x)];s={bypass:o.bypass,name:o.name,value:T,strValue:"rgb("+T[0]+", "+T[1]+", "+T[2]+")"}}else{if(!u.number)return!1;var D=o.valueMin+(o.valueMax-o.valueMin)*x;s=this.parse(o.name,D,o.bypass,"mapping")}s||(s=this.parse(o.name,h.strValue,o.bypass,"mapping")),s||v(),s.mapping=o,o=s;break;case l.data:var M=o.field.split("."),I=p.data;if(I)for(var N=0;N<M.length;N++){I=I[M[N]]}if(!(s=this.parse(o.name,I,o.bypass,"mapping"))){var L=h?h.strValue:"";s=this.parse(o.name,L,o.bypass,"mapping")}s||v(),s.mapping=o,o=s;break;case l.fn:var A=(0,o.value)(e);(s=this.parse(o.name,A,o.bypass,"mapping")).mapping=o,o=s;break;case void 0:break;default:return!1}return c?(o.bypassed=d?h.bypassed:h,a[o.name]=o):d?h.bypassed=o:a[o.name]=o,f(),!0},cleanElements:function(e,t){for(var n=this.properties,r=0;r<e.length;r++){var i=e[r];if(t)for(var o=i._private.style,a=0;a<n.length;a++){var s=n[a],l=o[s.name];l&&(l.bypass?l.bypassed=null:o[s.name]=null)}else i._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateMappers:function(e){for(var t=this._private.cy.collection(),n=0;n<e.length;n++){for(var r=e[n],i=r._private.style,o=!1,a=0;a<this.properties.length;a++){var s=i[this.properties[a].name];if(s&&s.mapping){var l=s.mapping;this.applyParsedProperty(r,l),o=!0}}o&&(this.updateStyleHints(r),t.merge(r))}return t},updateTransitions:function(e,t,n){var r=this,a=e._private,s=e.pstyle("transition-property").value,l=e.pstyle("transition-duration").pfValue,u=e.pstyle("transition-delay").pfValue;if(s.length>0&&l>0){for(var c={},h=!1,d=0;d<s.length;d++){var p=s[d],f=e.pstyle(p),v=t[p];if(v){var g=v.prev,y=null!=v.next?v.next:f,m=!1,x=void 0;g&&(i.number(g.pfValue)&&i.number(y.pfValue)?(m=y.pfValue-g.pfValue,x=g.pfValue+1e-6*m):i.number(g.value)&&i.number(y.value)?(m=y.value-g.value,x=g.value+1e-6*m):i.array(g.value)&&i.array(y.value)&&(m=g.value[0]!==y.value[0]||g.value[1]!==y.value[1]||g.value[2]!==y.value[2],x=g.strValue),m&&(c[p]=y.strValue,this.applyBypass(e,p,x),h=!0))}}if(!h)return;a.transitioning=!0,new o(function(t){u>0?e.delayAnimation(u).play().promise().then(t):t()}).then(function(){return e.animation({style:c,duration:l,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(e,s),e.emitAndNotify("style"),a.transitioning=!1})}else a.transitioning&&(this.removeBypasses(e,s),e.emitAndNotify("style"),a.transitioning=!1)},checkZOrderTrigger:function(e,t,n,r){var i=this.properties[t];null==i.triggersZOrder||null!=n&&!i.triggersZOrder(n,r)||this._private.cy.notify({type:"zorder",eles:e})}};e.exports=a},function(e,t,n){"use strict";var r=n(0),i=n(1),o={applyBypass:function(e,t,n,o){var a=[];if("*"===t||"**"===t){if(void 0!==n)for(var s=0;s<this.properties.length;s++){var l=this.properties[s].name,u=this.parse(l,n,!0);u&&a.push(u)}}else if(r.string(t)){var c=this.parse(t,n,!0);c&&a.push(c)}else{if(!r.plainObject(t))return!1;var h=t;o=n;for(var d=Object.keys(h),p=0;p<d.length;p++){var f=d[p],v=(this.properties[f],h[f]);if(void 0===v&&(v=h[i.dash2camel(f)]),void 0!==v){var g=this.parse(f,v,!0);g&&a.push(g)}}}if(0===a.length)return!1;for(var y=!1,m=0;m<e.length;m++){for(var x=e[m],b={},w=void 0,E=0;E<a.length;E++){var _=a[E];if(o){var k=x.pstyle(_.name);w=b[_.name]={prev:k}}y=this.applyParsedProperty(x,_)||y,o&&(w.next=x.pstyle(_.name))}y&&this.updateStyleHints(x),o&&this.updateTransitions(x,b,!0)}return y},overrideBypass:function(e,t,n){t=i.camel2dash(t);for(var r=0;r<e.length;r++){var o=e[r],a=o._private.style[t],s=this.properties[t].type,l=s.color,u=s.mutiple;if(a&&a.bypass){var c=null!=a.pfValue?a.pfValue:a.value;a.value=n,null!=a.pfValue&&(a.pfValue=n),a.strValue=l?"rgb("+n.join(",")+")":u?n.join(" "):""+n,this.checkZOrderTrigger(o,t,c,n)}else this.applyBypass(o,t,n)}},removeAllBypasses:function(e,t){return this.removeBypasses(e,this.propertyNames,t)},removeBypasses:function(e,t,n){for(var r=0;r<e.length;r++){for(var i=e[r],o={},a=0;a<t.length;a++){var s=t[a],l=this.properties[s],u=i.pstyle(l.name);if(u&&u.bypass){var c=this.parse(s,"",!0),h=o[l.name]={prev:u};this.applyParsedProperty(i,c),h.next=i.pstyle(l.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,o,!0)}}};e.exports=o},function(e,t,n){"use strict";var r=n(3),i={getEmSizeInPixels:function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},containerCss:function(e){var t=this._private.cy.container();if(r&&t&&r.getComputedStyle)return r.getComputedStyle(t).getPropertyValue(e)}};e.exports=i},function(e,t,n){"use strict";var r=n(1),i=n(0),o={getRenderedStyle:function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},getRawStyle:function(e,t){if(e=e[0]){for(var n={},i=0;i<this.properties.length;i++){var o=this.properties[i],a=this.getStylePropertyValue(e,o.name,t);null!=a&&(n[o.name]=a,n[r.dash2camel(o.name)]=a)}return n}},getIndexedStyle:function(e,t,n,r){var i=e.pstyle(t)[n][r];return null!=i?i:e.cy().style().getDefaultProperty(t)[n][0]},getStylePropertyValue:function(e,t,n){if(e=e[0]){var r=this.properties[t];r.alias&&(r=r.pointsTo);var i=r.type,o=e.pstyle(r.name),a=e.cy().zoom();if(o){var s=o.units?i.implicitUnits||"px":null;return s?[].concat(o.pfValue).map(function(e){return e*(n?a:1)+s}).join(" "):o.strValue}}},getAnimationStartStyle:function(e,t){for(var n={},r=0;r<t.length;r++){var o=t[r].name,a=e.pstyle(o);void 0!==a&&(a=i.plainObject(a)?this.parse(o,a.strValue):this.parse(o,a)),a&&(n[o]=a)}return n},getPropsList:function(e){var t=[],n=e,i=this.properties;if(n)for(var o=Object.keys(n),a=0;a<o.length;a++){var s=o[a],l=n[s],u=i[s]||i[r.camel2dash(s)],c=this.parse(u.name,l);c&&t.push(c)}return t}};e.exports=o},function(e,t,n){"use strict";var r={appendFromJson:function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.selector,i=n.style||n.css,o=Object.keys(i);this.selector(r);for(var a=0;a<o.length;a++){var s=o[a],l=i[s];this.css(s,l)}}return this},fromJson:function(e){return this.resetToDefault(),this.appendFromJson(e),this},json:function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var n=this[t],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}e.push({selector:r?r.toString():"core",style:o})}return e}};e.exports=r},function(e,t,n){"use strict";var r=n(1),i=n(6),o={appendFromString:function(e){var t=""+e,n=void 0,o=void 0,a=void 0;function s(){t=t.length>n.length?t.substr(n.length):""}function l(){o=o.length>a.length?o.substr(a.length):""}for(t=t.replace(/[/][*](\s|.)+?[*][/]/g,"");;){if(t.match(/^\s*$/))break;var u=t.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!u){r.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+t);break}n=u[0];var c=u[1];if("core"!==c)if(new i(c)._private.invalid){r.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+c),s();continue}var h=u[2],d=!1;o=h;for(var p=[];;){if(o.match(/^\s*$/))break;var f=o.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!f){r.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),d=!0;break}a=f[0];var v=f[1],g=f[2];if(this.properties[v])this.parse(v,g)?(p.push({name:v,val:g}),l()):(r.error("Skipping property: Invalid property definition in: "+a),l());else r.error("Skipping property: Invalid property name in: "+a),l()}if(d){s();break}this.selector(c);for(var y=0;y<p.length;y++){var m=p[y];this.css(m.name,m.val)}s()}return this},fromString:function(e){return this.resetToDefault(),this.appendFromString(e),this}};e.exports=o},function(e,t,n){"use strict";var r=n(1),i=n(0),o={};!function(){var e=r.regex.number,t=r.regex.rgbaNoBackRefs,n=r.regex.hslaNoBackRefs,a=r.regex.hex3,s=r.regex.hex6,l=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},u=function(r){var i=e+"|\\w+|"+t+"|"+n+"|"+a+"|"+s;return"^"+r+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+i+")\\s*\\,\\s*("+i+")\\)$"},c=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];o.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"]},color:{color:!0},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontletiant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textBackgroundShape:{enums:["rectangle","roundrectangle"]},nodeShape:{enums:["rectangle","roundrectangle","cutrectangle","bottomroundrectangle","barrel","ellipse","triangle","square","pentagon","hexagon","concavehexagon","heptagon","octagon","tag","star","diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-cross","triangle-backcurve","half-triangle-overshot","vee","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:l("data")},layoutData:{mapping:!0,regex:l("layoutData")},scratch:{mapping:!0,regex:l("scratch")},mapData:{mapping:!0,regex:u("mapData")},mapLayoutData:{mapping:!0,regex:u("mapLayoutData")},mapScratch:{mapping:!0,regex:u("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:c,singleRegexMatchValue:!0},urls:{regexes:c,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-line"],singleEnum:!0,validate:function(e,t){switch(e.length){case 2:return"deg"!==t[0]&&"rad"!==t[0]&&"deg"!==t[1]&&"rad"!==t[1];case 1:return i.string(e[0])||"deg"===t[0]||"rad"===t[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]}};var h={zeroNonZero:function(e,t){return 0===e&&0!==t||0!==e&&0===t},anyDiff:function(e,t){return e!==t}},d=o.types,p=o.properties=[{name:"label",type:d.text},{name:"text-rotation",type:d.textRotation},{name:"text-margin-x",type:d.bidirectionalSize},{name:"text-margin-y",type:d.bidirectionalSize},{name:"source-label",type:d.text},{name:"source-text-rotation",type:d.textRotation},{name:"source-text-margin-x",type:d.bidirectionalSize},{name:"source-text-margin-y",type:d.bidirectionalSize},{name:"source-text-offset",type:d.size},{name:"target-label",type:d.text},{name:"target-text-rotation",type:d.textRotation},{name:"target-text-margin-x",type:d.bidirectionalSize},{name:"target-text-margin-y",type:d.bidirectionalSize},{name:"target-text-offset",type:d.size},{name:"text-valign",type:d.valign},{name:"text-halign",type:d.halign},{name:"color",type:d.color},{name:"text-outline-color",type:d.color},{name:"text-outline-width",type:d.size},{name:"text-outline-opacity",type:d.zeroOneNumber},{name:"text-opacity",type:d.zeroOneNumber},{name:"text-background-color",type:d.color},{name:"text-background-opacity",type:d.zeroOneNumber},{name:"text-background-padding",type:d.size},{name:"text-border-opacity",type:d.zeroOneNumber},{name:"text-border-color",type:d.color},{name:"text-border-width",type:d.size},{name:"text-border-style",type:d.borderStyle},{name:"text-background-shape",type:d.textBackgroundShape},{name:"text-transform",type:d.textTransform},{name:"text-wrap",type:d.textWrap},{name:"text-max-width",type:d.size},{name:"text-events",type:d.bool},{name:"font-family",type:d.fontFamily},{name:"font-style",type:d.fontStyle},{name:"font-weight",type:d.fontWeight},{name:"font-size",type:d.size},{name:"min-zoomed-font-size",type:d.size},{name:"events",type:d.bool},{name:"display",type:d.display,triggersZOrder:h.anyDiff},{name:"visibility",type:d.visibility,triggersZOrder:h.anyDiff},{name:"opacity",type:d.zeroOneNumber,triggersZOrder:h.zeroNonZero},{name:"z-compound-depth",type:d.zCompoundDepth,triggersZOrder:h.anyDiff},{name:"z-index-compare",type:d.zIndexCompare,triggersZOrder:h.anyDiff},{name:"z-index",type:d.nonNegativeInt,triggersZOrder:h.anyDiff},{name:"overlay-padding",type:d.size},{name:"overlay-color",type:d.color},{name:"overlay-opacity",type:d.zeroOneNumber},{name:"transition-property",type:d.propList},{name:"transition-duration",type:d.time},{name:"transition-delay",type:d.time},{name:"transition-timing-function",type:d.easing},{name:"height",type:d.nodeSize},{name:"width",type:d.nodeSize},{name:"shape",type:d.nodeShape},{name:"shape-polygon-points",type:d.polygonPointList},{name:"background-color",type:d.color},{name:"background-opacity",type:d.zeroOneNumber},{name:"background-blacken",type:d.nOneOneNumber},{name:"padding",type:d.sizeMaybePercent},{name:"padding-relative-to",type:d.paddingRelativeTo},{name:"border-color",type:d.color},{name:"border-opacity",type:d.zeroOneNumber},{name:"border-width",type:d.size},{name:"border-style",type:d.borderStyle},{name:"background-image",type:d.urls},{name:"background-image-crossorigin",type:d.bgCrossOrigin},{name:"background-image-opacity",type:d.zeroOneNumbers},{name:"background-position-x",type:d.bgPos},{name:"background-position-y",type:d.bgPos},{name:"background-width-relative-to",type:d.bgRelativeTo},{name:"background-height-relative-to",type:d.bgRelativeTo},{name:"background-repeat",type:d.bgRepeat},{name:"background-fit",type:d.bgFit},{name:"background-clip",type:d.bgClip},{name:"background-width",type:d.bgWH},{name:"background-height",type:d.bgWH},{name:"position",type:d.position},{name:"compound-sizing-wrt-labels",type:d.compoundIncludeLabels},{name:"min-width",type:d.size},{name:"min-width-bias-left",type:d.sizeMaybePercent},{name:"min-width-bias-right",type:d.sizeMaybePercent},{name:"min-height",type:d.size},{name:"min-height-bias-top",type:d.sizeMaybePercent},{name:"min-height-bias-bottom",type:d.sizeMaybePercent},{name:"line-style",type:d.lineStyle},{name:"line-color",type:d.color},{name:"curve-style",type:d.curveStyle},{name:"haystack-radius",type:d.zeroOneNumber},{name:"source-endpoint",type:d.edgeEndpoint},{name:"target-endpoint",type:d.edgeEndpoint},{name:"control-point-step-size",type:d.size},{name:"control-point-distances",type:d.bidirectionalSizes},{name:"control-point-weights",type:d.numbers},{name:"segment-distances",type:d.bidirectionalSizes},{name:"segment-weights",type:d.numbers},{name:"edge-distances",type:d.edgeDistances},{name:"arrow-scale",type:d.positiveNumber},{name:"loop-direction",type:d.angle},{name:"loop-sweep",type:d.angle},{name:"source-distance-from-node",type:d.size},{name:"target-distance-from-node",type:d.size},{name:"ghost",type:d.bool},{name:"ghost-offset-x",type:d.bidirectionalSize},{name:"ghost-offset-y",type:d.bidirectionalSize},{name:"ghost-opacity",type:d.zeroOneNumber},{name:"selection-box-color",type:d.color},{name:"selection-box-opacity",type:d.zeroOneNumber},{name:"selection-box-border-color",type:d.color},{name:"selection-box-border-width",type:d.size},{name:"active-bg-color",type:d.color},{name:"active-bg-opacity",type:d.zeroOneNumber},{name:"active-bg-size",type:d.size},{name:"outside-texture-bg-color",type:d.color},{name:"outside-texture-bg-opacity",type:d.zeroOneNumber}],f=o.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];o.pieBackgroundN=16,p.push({name:"pie-size",type:d.sizeMaybePercent});for(var v=1;v<=o.pieBackgroundN;v++)p.push({name:"pie-"+v+"-background-color",type:d.color}),p.push({name:"pie-"+v+"-background-size",type:d.percent}),p.push({name:"pie-"+v+"-background-opacity",type:d.zeroOneNumber});var g=o.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:d.arrowShape},{name:"arrow-color",type:d.color},{name:"arrow-fill",type:d.arrowFill}].forEach(function(e){g.forEach(function(t){var n=t+"-"+e.name,r=e.type;p.push({name:n,type:r})})},{}),o.propertyNames=p.map(function(e){return e.name});for(var y=0;y<p.length;y++){var m=p[y];p[m.name]=m}for(var x=0;x<f.length;x++){var b=f[x],w=p[b.pointsTo],E={name:b.name,alias:!0,pointsTo:w};p.push(E),p[b.name]=E}}(),o.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},o.getDefaultProperties=r.memoize(function(){for(var e=r.extend({events:"yes","text-events":"no","text-valign":"top","text-halign":"center",color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(e,t){for(var n=1;n<=o.pieBackgroundN;n++){var r=t.name.replace("{{i}}",n),i=t.value;e[r]=i}return e},{}),{"line-style":"solid","line-color":"#999","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"edge-distances":"intersection","curve-style":"bezier","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node"},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(e,t){return o.arrowPrefixes.forEach(function(n){var r=n+"-"+t.name,i=t.value;e[r]=i}),e},{})),t={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var a=i.name,s=e[a],l=this.parse(a,s);t[a]=l}}return t}),o.addDefaultStylesheet=function(){this.selector("$node > node").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3,"curve-style":"haystack"}).selector(":parent <-> node").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector("node:parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125}),this.defaultLength=this.length},e.exports=o},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(2),a={parse:function(e,t,n,o){if(i.fn(t))return this.parseImplWarn(e,t,n,o);var a=[e,t,n,"mapping"===o||!0===o||!1===o||null==o?"dontcare":o].join("$"),s=this.propCache=this.propCache||{},l=void 0;return(l=s[a])||(l=s[a]=this.parseImplWarn(e,t,n,o)),(n||"mapping"===o)&&(l=r.copy(l))&&(l.value=r.copy(l.value)),l},parseImplWarn:function(e,t,n,i){var o=this.parseImpl(e,t,n,i);return o||null==t||r.error("The style property `%s: %s` is invalid",e,t),o},parseImpl:function(e,t,n,a){e=r.camel2dash(e);var s=this.properties[e],l=t,u=this.types;if(!s)return null;if(void 0===t||null===t)return null;s.alias&&(s=s.pointsTo,e=s.name);var c=i.string(t);c&&(t=t.trim());var h=s.type;if(!h)return null;if(n&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(i.fn(t))return{name:e,value:t,strValue:"fn",mapped:u.fn,bypass:n};var d=void 0,p=void 0;if(!c||a);else{if(d=new RegExp(u.data.regex).exec(t)){if(n)return!1;var f=u.data;return{name:e,value:d,strValue:""+t,mapped:f,field:d[1],bypass:n}}if(p=new RegExp(u.mapData.regex).exec(t)){if(n)return!1;if(h.multiple)return!1;var v=u.mapData;if(!h.color&&!h.number)return!1;var g=this.parse(e,p[4]);if(!g||g.mapped)return!1;var y=this.parse(e,p[5]);if(!y||y.mapped)return!1;if(g.value===y.value)return!1;if(h.color){var m=g.value,x=y.value;if(!(m[0]!==x[0]||m[1]!==x[1]||m[2]!==x[2]||m[3]!==x[3]&&(null!=m[3]&&1!==m[3]||null!=x[3]&&1!==x[3])))return!1}return{name:e,value:p,strValue:""+t,mapped:v,field:p[1],fieldMin:parseFloat(p[2]),fieldMax:parseFloat(p[3]),valueMin:g.value,valueMax:y.value,bypass:n}}}if(h.multiple&&"multiple"!==a){var b=void 0;if(b=c?t.split(/\s+/):i.array(t)?t:[t],h.evenMultiple&&b.length%2!=0)return null;for(var w=[],E=[],_=[],k=!1,P=0;P<b.length;P++){var S=this.parse(e,b[P],n,"multiple");k=k||i.string(S.value),w.push(S.value),_.push(null!=S.pfValue?S.pfValue:S.value),E.push(S.units)}return h.validate&&!h.validate(w,E)?null:h.singleEnum&&k?1===w.length&&i.string(w[0])?{name:e,value:w[0],strValue:w[0],bypass:n}:null:{name:e,value:w,pfValue:_,strValue:w.join(" "),bypass:n,units:E}}var C=function(){for(var r=0;r<h.enums.length;r++){if(h.enums[r]===t)return{name:e,value:t,strValue:""+t,bypass:n}}return null};if(h.number){var T=void 0,D="px";if(h.units&&(T=h.units),h.implicitUnits&&(D=h.implicitUnits),!h.unitless)if(c){var M="px|em"+(h.allowPercent?"|\\%":"");T&&(M=T);var I=t.match("^("+r.regex.number+")("+M+")?$");I&&(t=I[1],T=I[2]||D)}else T&&!h.implicitUnits||(T=D);if(t=parseFloat(t),isNaN(t)&&void 0===h.enums)return null;if(isNaN(t)&&void 0!==h.enums)return t=l,C();if(h.integer&&!i.integer(t))return null;if(void 0!==h.min&&(t<h.min||h.strictMin&&t===h.min)||void 0!==h.max&&(t>h.max||h.strictMax&&t===h.max))return null;var N={name:e,value:t,strValue:""+t+(T||""),units:T,bypass:n};return h.unitless||"px"!==T&&"em"!==T?N.pfValue=t:N.pfValue="px"!==T&&T?this.getEmSizeInPixels()*t:t,"ms"!==T&&"s"!==T||(N.pfValue="ms"===T?t:1e3*t),"deg"!==T&&"rad"!==T||(N.pfValue="rad"===T?t:o.deg2rad(t)),"%"===T&&(N.pfValue=t/100),N}if(h.propList){var L=[],A=""+t;if("none"===A);else{for(var B=A.split(","),O=0;O<B.length;O++){var z=B[O].trim();this.properties[z]&&L.push(z)}if(0===L.length)return null}return{name:e,value:L,strValue:0===L.length?"none":L.join(", "),bypass:n}}if(h.color){var R=r.color2tuple(t);return R?{name:e,value:R,pfValue:R,strValue:""+t,bypass:n}:null}if(h.regex||h.regexes){if(h.enums){var V=C();if(V)return V}for(var q=h.regexes?h.regexes:[h.regex],F=0;F<q.length;F++){var j=new RegExp(q[F]).exec(t);if(j)return{name:e,value:h.singleRegexMatchValue?j[1]:j,strValue:""+t,bypass:n}}return null}return h.string?{name:e,value:""+t,strValue:""+t,bypass:n}:h.enums?C():null}};e.exports=a},function(e,t,n){"use strict";var r=n(0),i=n(3),o=n(2),a={autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)},pan:function(){var e=arguments,t=this._private.pan,n=void 0,i=void 0,o=void 0,a=void 0,s=void 0;switch(e.length){case 0:return t;case 1:if(r.string(e[0]))return t[n=e[0]];if(r.plainObject(e[0])){if(!this._private.panningEnabled)return this;a=(o=e[0]).x,s=o.y,r.number(a)&&(t.x=a),r.number(s)&&(t.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],i=e[1],"x"!==n&&"y"!==n||!r.number(i)||(t[n]=i),this.emit("pan viewport")}return this.notify({type:"viewport"}),this},panBy:function(e,t){var n=arguments,i=this._private.pan,o=void 0,a=void 0,s=void 0,l=void 0,u=void 0;if(!this._private.panningEnabled)return this;switch(n.length){case 1:r.plainObject(e)&&(l=(s=n[0]).x,u=s.y,r.number(l)&&(i.x+=l),r.number(u)&&(i.y+=u),this.emit("pan viewport"));break;case 2:a=t,"x"!==(o=e)&&"y"!==o||!r.number(a)||(i[o]+=a),this.emit("pan viewport")}return this.notify({type:"viewport"}),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify({type:"viewport"})}return this},getFitViewport:function(e,t){if(r.number(e)&&void 0===t&&(t=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var n=void 0;if(r.string(e)){var i=e;e=this.$(i)}else if(r.boundingBox(e)){var o=e;(n={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1}else r.elementOrCollection(e)||(e=this.mutableElements());if(!r.elementOrCollection(e)||!e.empty()){n=n||e.boundingBox();var a=this.width(),s=this.height(),l=void 0;if(t=r.number(t)?t:0,!isNaN(a)&&!isNaN(s)&&a>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0)return{zoom:l=(l=(l=Math.min((a-2*t)/n.w,(s-2*t)/n.h))>this._private.maxZoom?this._private.maxZoom:l)<this._private.minZoom?this._private.minZoom:l,pan:{x:(a-l*(n.x1+n.x2))/2,y:(s-l*(n.y1+n.y2))/2}}}}},minZoom:function(e){return void 0===e?this._private.minZoom:(r.number(e)&&(this._private.minZoom=e),this)},maxZoom:function(e){return void 0===e?this._private.maxZoom:(r.number(e)&&(this._private.maxZoom=e),this)},getZoomedViewport:function(e){var t=this._private,n=t.pan,i=t.zoom,a=void 0,s=void 0,l=!1;if(t.zoomingEnabled||(l=!0),r.number(e)?s=e:r.plainObject(e)&&(s=e.level,null!=e.position?a=o.modelToRenderedPosition(e.position,i,n):null!=e.renderedPosition&&(a=e.renderedPosition),null==a||t.panningEnabled||(l=!0)),s=(s=s>t.maxZoom?t.maxZoom:s)<t.minZoom?t.minZoom:s,l||!r.number(s)||s===i||null!=a&&(!r.number(a.x)||!r.number(a.y)))return null;if(null!=a){var u=n,c=i,h=s;return{zoomed:!0,panned:!0,zoom:h,pan:{x:-h/c*(a.x-u.x)+a.x,y:-h/c*(a.y-u.y)+a.y}}}return{zoomed:!0,panned:!1,zoom:s,pan:n}},zoom:function(e){if(void 0===e)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return null!=t&&t.zoomed?(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify({type:"viewport"}),this):this},viewport:function(e){var t=this._private,n=!0,i=!0,o=[],a=!1,s=!1;if(!e)return this;if(r.number(e.zoom)||(n=!1),r.plainObject(e.pan)||(i=!1),!n&&!i)return this;if(n){var l=e.zoom;l<t.minZoom||l>t.maxZoom||!t.zoomingEnabled?a=!0:(t.zoom=l,o.push("zoom"))}if(i&&(!a||!e.cancelOnFailedZoom)&&t.panningEnabled){var u=e.pan;r.number(u.x)&&(t.pan.x=u.x,s=!1),r.number(u.y)&&(t.pan.y=u.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.emit(o.join(" ")),this.notify({type:"viewport"})),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify({type:"viewport"})),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(r.string(e)){var n=e;e=this.mutableElements().filter(n)}else r.elementOrCollection(e)||(e=this.mutableElements());if(0!==e.length){var i=e.boundingBox(),o=this.width(),a=this.height();return{x:(o-(t=void 0===t?this._private.zoom:t)*(i.x1+i.x2))/2,y:(a-t*(i.y1+i.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e,t,n=this._private,r=n.container;return n.sizeCache=n.sizeCache||(r?(e=i.getComputedStyle(r),t=function(t){return parseFloat(e.getPropertyValue(t))},{width:r.clientWidth-t("padding-left")-t("padding-right"),height:r.clientHeight-t("padding-top")-t("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}}};a.centre=a.center,a.autolockNodes=a.autolock,a.autoungrabifyNodes=a.autoungrabify,e.exports=a},function(e,t,n){"use strict";var r=n(1),i=n(4),o=n(7),a=n(12),s=n(96),l=n(0),u=n(11),c={},h={};function d(e,t,n){var s=n,h=function(n){r.error("Can not register `"+t+"` for `"+e+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===e){if(a.prototype[t])return h(t);a.prototype[t]=n}else if("collection"===e){if(o.prototype[t])return h(t);o.prototype[t]=n}else if("layout"===e){for(var d=function(e){this.options=e,n.call(this,e),l.plainObject(this._private)||(this._private={}),this._private.cy=e.cy,this._private.listeners=[],this.createEmitter()},f=d.prototype=Object.create(n.prototype),v=[],g=0;g<v.length;g++){var y=v[g];f[y]=f[y]||function(){return this}}f.start&&!f.run?f.run=function(){return this.start(),this}:!f.start&&f.run&&(f.start=function(){return this.run(),this});var m=n.prototype.stop;f.stop=function(){var e=this.options;if(e&&e.animate){var t=this.animations;if(t)for(var n=0;n<t.length;n++)t[n].stop()}return m?m.call(this):this.emit("layoutstop"),this},f.destroy||(f.destroy=function(){return this}),f.cy=function(){return this._private.cy};var x=function(e){return e._private.cy};r.assign(f,{createEmitter:function(){return this._private.emitter=new u({eventFields:function(e){return{layout:e,cy:x(e),target:e}},bubble:function(){return!0},parent:function(e){return x(e)},context:this}),this},emitter:function(){return this._private.emitter},on:function(e,t){return this.emitter().on(e,t),this},one:function(e,t){return this.emitter().one(e,t),this},once:function(e,t){return this.emitter().one(e,t),this},removeListener:function(e,t){return this.emitter().removeListener(e,t),this},emit:function(e,t){return this.emitter().emit(e,t),this}}),i.eventAliasesOn(f),s=d}else if("renderer"===e&&"null"!==t&&"base"!==t){var b=p("renderer","base"),w=b.prototype,E=n,_=n.prototype,k=function(){b.apply(this,arguments),E.apply(this,arguments)},P=k.prototype;for(var S in w){var C=w[S];if(null!=_[S])return h(S);P[S]=C}for(var T in _)P[T]=_[T];w.clientFunctions.forEach(function(e){P[e]=P[e]||function(){r.error("Renderer does not implement `renderer."+e+"()` on its prototype")}}),s=k}return r.setMap({map:c,keys:[e,t],value:s})}function p(e,t){return r.getMap({map:c,keys:[e,t]})}var f=function(){return 2===arguments.length?p.apply(null,arguments):3===arguments.length?d.apply(null,arguments):4===arguments.length?function(e,t,n,i){return r.getMap({map:h,keys:[e,t,n,i]})}.apply(null,arguments):5===arguments.length?function(e,t,n,i,o){return r.setMap({map:h,keys:[e,t,n,i],value:o})}.apply(null,arguments):void r.error("Invalid extension access syntax")};a.prototype.extension=f,s.forEach(function(e){e.extensions.forEach(function(t){d(e.type,t.name,t.impl)})}),e.exports=f},function(e,t,n){"use strict";e.exports=[{type:"layout",extensions:n(97)},{type:"renderer",extensions:n(106)}]},function(e,t,n){"use strict";e.exports=[{name:"breadthfirst",impl:n(98)},{name:"circle",impl:n(99)},{name:"concentric",impl:n(100)},{name:"cose",impl:n(101)},{name:"grid",impl:n(102)},{name:"null",impl:n(103)},{name:"preset",impl:n(104)},{name:"random",impl:n(105)}]},function(e,t,n){"use strict";var r=n(1),i=n(2),o=n(0),a={fit:!0,directed:!1,padding:30,circle:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function s(e){this.options=r.extend({},a,e)}s.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,a=r.nodes().not(":parent"),s=r,l=i.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),u=void 0;if(o.elementOrCollection(t.roots))u=t.roots;else if(o.array(t.roots)){for(var c=[],h=0;h<t.roots.length;h++){var d=t.roots[h],p=n.getElementById(d);c.push(p)}u=n.collection(c)}else if(o.string(t.roots))u=n.$(t.roots);else if(t.directed)u=a.roots();else{for(var f=[],v=a,g=function(){var e=n.collection();r.bfs({roots:v[0],visit:function(t,n,r,i,o){e=e.add(t)},directed:!1}),v=v.not(e),f.push(e)};v.length>0;)g();u=n.collection();for(var y=function(e){var t=f[e],n=t.maxDegree(!1),r=t.filter(function(e){return e.degree(!1)===n});u=u.add(r)},m=0;m<f.length;m++)y(m)}var x=[],b={},w={},E={},_={},k={};s.bfs({roots:u,directed:t.directed,visit:function(e,t,n,r,i){var o=e[0],a=o.id();if(x[i]||(x[i]=[]),x[i].push(o),b[a]=!0,w[a]=i,E[a]=n,_[a]=t,n){var s=n.id();(k[s]=k[s]||[]).push(e)}}});for(var P=[],S=0;S<a.length;S++){var C=a[S];b[C.id()]||P.push(C)}for(var T=3*P.length,D=0;0!==P.length&&D<T;){for(var M=P.shift(),I=M.neighborhood().nodes(),N=!1,L=0;L<I.length;L++){var A=w[I[L].id()];if(void 0!==A){x[A].push(M),N=!0;break}}N||P.push(M),D++}for(;0!==P.length;){var B=P.shift();0===x.length&&x.push([]),x[0].push(B)}var O=function(){for(var e=0;e<x.length;e++)for(var t=x[e],n=0;n<t.length;n++){var r=t[n];null!=r?r._private.scratch.breadthfirst={depth:e,index:n}:(t.splice(n,1),n--)}};O();for(var z=function(e){for(var t=e.connectedEdges(function(t){return t.data("target")===e.id()}),n=e._private.scratch.breadthfirst,r=0,i=void 0,o=0;o<t.length;o++){var a=t[o].source()[0],s=a._private.scratch.breadthfirst;n.depth<=s.depth&&r<s.depth&&(r=s.depth,i=a)}return i},R=0;R<t.maximalAdjustments;R++){for(var V=x.length,q=[],F=0;F<V;F++)for(var j=x[F],X=j.length,Y=0;Y<X;Y++){var G=j[Y],W=G._private.scratch.breadthfirst,H=z(G);H&&(W.intEle=H,q.push(G))}for(var U=0;U<q.length;U++){var Z=q[U],$=Z._private.scratch.breadthfirst,Q=$.intEle._private.scratch.breadthfirst;x[$.depth][$.index]=null;for(var K=Q.depth+1;K>x.length-1;)x.push([]);x[K].push(Z),$.depth=K,$.index=x[K].length-1}O()}var J=0;if(t.avoidOverlap)for(var ee=0;ee<a.length;ee++){var te=a[ee].layoutDimensions(t),ne=te.w,re=te.h;J=Math.max(J,ne,re)}for(var ie={},oe=function(e){if(ie[e.id()])return ie[e.id()];for(var t=e._private.scratch.breadthfirst.depth,n=e.neighborhood().nodes().not(":parent").intersection(a),r=0,i=0,o=0;o<n.length;o++){var s=n[o]._private.scratch.breadthfirst,l=s.index,u=s.depth,c=x[u].length;(t>u||0===t)&&(r+=l/c,i++)}return r/=i=Math.max(1,i),0===i&&(r=void 0),ie[e.id()]=r,r},ae=function(e,t){return oe(e)-oe(t)},se=0;se<3;se++){for(var le=0;le<x.length;le++)x[le]=x[le].sort(ae);O()}for(var ue=0,ce=0;ce<x.length;ce++)ue=Math.max(x[ce].length,ue);for(var he=l.x1+l.w/2,de=l.x1+l.h/2,pe=function(e,n){var r=e._private.scratch.breadthfirst,i=r.depth,o=r.index,a=x[i].length,s=Math.max(l.w/(a+1),J),u=Math.max(l.h/(x.length+1),J),c=Math.min(l.w/2/x.length,l.h/2/x.length);if(c=Math.max(c,J),t.circle){if(t.circle){var h=c*i+c-(x.length>0&&x[0].length<=3?c/2:0),d=2*Math.PI/x[i].length*o;return 0===i&&1===x[0].length&&(h=1),{x:he+h*Math.cos(d),y:de+h*Math.sin(d)}}return{x:he+(o+1-(a+1)/2)*s,y:(i+1)*u}}var p={x:he+(o+1-(a+1)/2)*s,y:(i+1)*u};return p},fe={},ve=x.length-1;ve>=0;ve--)for(var ge=x[ve],ye=0;ye<ge.length;ye++){var me=ge[ye];fe[me.id()]=pe(me,x.length)}return a.layoutPositions(this,t,function(e){return fe[e.id()]}),this},e.exports=s},function(e,t,n){"use strict";var r=n(1),i=n(2),o=n(0),a={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function s(e){this.options=r.extend({},a,e)}s.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles,a=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,s=r.nodes().not(":parent");t.sort&&(s=s.sort(t.sort));for(var l=i.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),u=l.x1+l.w/2,c=l.y1+l.h/2,h=(void 0===t.sweep?2*Math.PI-2*Math.PI/s.length:t.sweep)/Math.max(1,s.length-1),d=void 0,p=0,f=0;f<s.length;f++){var v=s[f].layoutDimensions(t),g=v.w,y=v.h;p=Math.max(p,g,y)}if(d=o.number(t.radius)?t.radius:s.length<=1?0:Math.min(l.h,l.w)/2-p,s.length>1&&t.avoidOverlap){p*=1.75;var m=Math.cos(h)-Math.cos(0),x=Math.sin(h)-Math.sin(0),b=Math.sqrt(p*p/(m*m+x*x));d=Math.max(b,d)}return s.layoutPositions(this,t,function(e,n){var r=t.startAngle+n*h*(a?1:-1),i=d*Math.cos(r),o=d*Math.sin(r);return{x:u+i,y:c+o}}),this},e.exports=s},function(e,t,n){"use strict";var r=n(1),i=n(2),o={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function a(e){this.options=r.extend({},o,e)}a.prototype.run=function(){for(var e=this.options,t=e,n=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,r=e.cy,o=t.eles.nodes().not(":parent"),a=i.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s=a.x1+a.w/2,l=a.y1+a.h/2,u=[],c=(t.startAngle,0),h=0;h<o.length;h++){var d,p=o[h];d=t.concentric(p),u.push({value:d,node:p}),p._private.scratch.concentric=d}o.updateStyle();for(var f=0;f<o.length;f++){var v=o[f].layoutDimensions(t);c=Math.max(c,v.w,v.h)}u.sort(function(e,t){return t.value-e.value});for(var g=t.levelWidth(o),y=[[]],m=y[0],x=0;x<u.length;x++){var b=u[x];if(m.length>0)Math.abs(m[0].value-b.value)>=g&&(m=[],y.push(m));m.push(b)}var w=c+t.minNodeSpacing;if(!t.avoidOverlap){var E=y.length>0&&y[0].length>1,_=(Math.min(a.w,a.h)/2-w)/(y.length+E?1:0);w=Math.min(w,_)}for(var k=0,P=0;P<y.length;P++){var S=y[P],C=void 0===t.sweep?2*Math.PI-2*Math.PI/S.length:t.sweep,T=S.dTheta=C/Math.max(1,S.length-1);if(S.length>1&&t.avoidOverlap){var D=Math.cos(T)-Math.cos(0),M=Math.sin(T)-Math.sin(0),I=Math.sqrt(w*w/(D*D+M*M));k=Math.max(I,k)}S.r=k,k+=w}if(t.equidistant){for(var N=0,L=0,A=0;A<y.length;A++){var B=y[A].r-L;N=Math.max(N,B)}L=0;for(var O=0;O<y.length;O++){var z=y[O];0===O&&(L=z.r),z.r=L,L+=N}}for(var R={},V=0;V<y.length;V++)for(var q=y[V],F=q.dTheta,j=q.r,X=0;X<q.length;X++){var Y=q[X],G=t.startAngle+(n?1:-1)*F*X,W={x:s+j*Math.cos(G),y:l+j*Math.sin(G)};R[Y.node.id()]=W}return o.layoutPositions(this,t,function(e){var t=e.id();return R[t]}),this},e.exports=a},function(e,t,n){"use strict";var r,i=n(1),o=n(2),a=n(0),s=n(5),l={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1,weaver:!1};function u(e){this.options=i.extend({},l,e),this.options.layout=this}u.prototype.run=function(){var e=this.options,t=e.cy,n=this,o=this.thread,l=e.weaver?e.weaver.Thread:null,u={listeners:[],on:function(e,t){return this.listeners.push({event:e,callback:t}),this},trigger:function(e){a.string(e)&&(e={type:e});var t=function(t){t.callback(e)};return this.listeners.filter(function(t){return t.event===e.type}).forEach(t),this},pass:function(e){return this.pass=e,this},run:function(e){var t=this.pass;return new s(function(n){n(e(t))})},stop:function(){return this}};o&&!o.stopped()||(o=this.thread=l?new l:u),n.stopped=!1,!0!==e.animate&&!1!==e.animate||n.emit({type:"layoutstart",layout:n}),r=!0===e.debug;var h=c(t,n,e);r&&p(h),e.randomize&&f(h,t);var d=Date.now(),g=!1,y=function(n){n=n||{},g&&!n.next||!n.force&&Date.now()-d<e.animationThreshold||(g=!0,i.requestAnimationFrame(function(){v(h,t,e),!0===e.fit&&t.fit(e.padding),g=!1,n.next&&n.next()}))};o.on("message",function(e){var t=e.message;h.layoutNodes=t,y()}),o.pass({layoutInfo:h,options:{animate:e.animate,refresh:e.refresh,componentSpacing:e.componentSpacing,nodeOverlap:e.nodeOverlap,nestingFactor:e.nestingFactor,gravity:e.gravity,numIter:e.numIter,initialTemp:e.initialTemp,coolingFactor:e.coolingFactor,minTemp:e.minTemp}}).run(function(e){var t,n,r=e.layoutInfo,i=e.options,o=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var r=e.graphSet[n],i=r.length,o=0;o<i;o++)for(var a=e.layoutNodes[e.idToIndex[r[o]]],l=o+1;l<i;l++){var u=e.layoutNodes[e.idToIndex[r[l]]];s(a,u,e,t)}},a=function(e){return-e+2*e*Math.random()},s=function(e,t,n,r){if(e.cmptId===t.cmptId||n.isCompound){var i=t.positionX-e.positionX,o=t.positionY-e.positionY;0===i&&0===o&&(i=a(1),o=a(1));var s=l(e,t,i,o);if(s>0)var u=(d=r.nodeOverlap*s)*i/(m=Math.sqrt(i*i+o*o)),h=d*o/m;else{var d,p=c(e,i,o),f=c(t,-1*i,-1*o),v=f.x-p.x,g=f.y-p.y,y=v*v+g*g,m=Math.sqrt(y);u=(d=(e.nodeRepulsion+t.nodeRepulsion)/y)*v/m,h=d*g/m}e.isLocked||(e.offsetX-=u,e.offsetY-=h),t.isLocked||(t.offsetX+=u,t.offsetY+=h)}},l=function(e,t,n,r){if(n>0)var i=e.maxX-t.minX;else i=t.maxX-e.minX;if(r>0)var o=e.maxY-t.minY;else o=t.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},c=function(e,t,n){var r=e.positionX,i=e.positionY,o=e.height||1,a=e.width||1,s=n/t,l=o/a,u={};return 0===t&&0<n?(u.x=r,u.y=i+o/2,u):0===t&&0>n?(u.x=r,u.y=i+o/2,u):0<t&&-1*l<=s&&s<=l?(u.x=r+a/2,u.y=i+a*n/2/t,u):0>t&&-1*l<=s&&s<=l?(u.x=r-a/2,u.y=i-a*n/2/t,u):0<n&&(s<=-1*l||s>=l)?(u.x=r+o*t/2/n,u.y=i+o/2,u):0>n&&(s<=-1*l||s>=l)?(u.x=r-o*t/2/n,u.y=i-o/2,u):u},h=function(e,t){for(var n=0;n<e.edgeSize;n++){var r=e.layoutEdges[n],i=e.idToIndex[r.sourceId],o=e.layoutNodes[i],a=e.idToIndex[r.targetId],s=e.layoutNodes[a],l=s.positionX-o.positionX,u=s.positionY-o.positionY;if(0!==l||0!==u){var h=c(o,l,u),d=c(s,-1*l,-1*u),p=d.x-h.x,f=d.y-h.y,v=Math.sqrt(p*p+f*f),g=Math.pow(r.idealLength-v,2)/r.elasticity;if(0!==v)var y=g*p/v,m=g*f/v;else y=0,m=0;o.isLocked||(o.offsetX+=y,o.offsetY+=m),s.isLocked||(s.offsetX-=y,s.offsetY-=m)}}},d=function(e,t){for(var n=0;n<e.graphSet.length;n++){var r=e.graphSet[n],i=r.length;if(0===n)var o=e.clientHeight/2,a=e.clientWidth/2;else{var s=e.layoutNodes[e.idToIndex[r[0]]],l=e.layoutNodes[e.idToIndex[s.parentId]];o=l.positionX,a=l.positionY}for(var u=0;u<i;u++){var c=e.layoutNodes[e.idToIndex[r[u]]];if(!c.isLocked){var h=o-c.positionX,d=a-c.positionY,p=Math.sqrt(h*h+d*d);if(p>1){var f=t.gravity*h/p,v=t.gravity*d/p;c.offsetX+=f,c.offsetY+=v}}}}},p=function(e,t){var n=[],r=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;r<=i;){var o=n[r++],a=e.idToIndex[o],s=e.layoutNodes[a],l=s.children;if(0<l.length&&!s.isLocked){for(var u=s.offsetX,c=s.offsetY,h=0;h<l.length;h++){var d=e.layoutNodes[e.idToIndex[l[h]]];d.offsetX+=u,d.offsetY+=c,n[++i]=l[h]}s.offsetX=0,s.offsetY=0}}},f=function(e,t){for(var n=0;n<e.nodeSize;n++){0<(i=e.layoutNodes[n]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(n=0;n<e.nodeSize;n++){if(!(0<(i=e.layoutNodes[n]).children.length||i.isLocked)){var r=v(i.offsetX,i.offsetY,e.temperature);i.positionX+=r.x,i.positionY+=r.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,g(i,e)}}for(n=0;n<e.nodeSize;n++){var i;0<(i=e.layoutNodes[n]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},v=function(e,t,n){var r=Math.sqrt(e*e+t*t);if(r>n)var i={x:n*e/r,y:n*t/r};else i={x:e,y:t};return i},g=function e(t,n){var r=t.parentId;if(null!=r){var i=n.layoutNodes[n.idToIndex[r]],o=!1;return(null==i.maxX||t.maxX+i.padRight>i.maxX)&&(i.maxX=t.maxX+i.padRight,o=!0),(null==i.minX||t.minX-i.padLeft<i.minX)&&(i.minX=t.minX-i.padLeft,o=!0),(null==i.maxY||t.maxY+i.padBottom>i.maxY)&&(i.maxY=t.maxY+i.padBottom,o=!0),(null==i.minY||t.minY-i.padTop<i.minY)&&(i.minY=t.minY-i.padTop,o=!0),o?e(i,n):void 0}},y=function(e){return function(e,t,n){o(e,t),h(e,t),d(e,t),p(e,t),f(e,t)}(r,i),r.temperature=r.temperature*i.coolingFactor,!(r.temperature<i.minTemp)},m=0;do{for(var x=0;x<i.refresh&&m<i.numIter;){var b;if(!(b=y()))break;x++,m++}!0===i.animate&&(t=r.layoutNodes,void 0,n={type:"message",message:t},u.trigger(n))}while(b&&m+1<i.numIter);return function(e,t){for(var n=r.layoutNodes,i=[],o=0;o<n.length;o++){var a=n[o],s=a.cmptId;(i[s]=i[s]||[]).push(a)}var l=0;for(o=0;o<i.length;o++)if(g=i[o]){g.x1=1/0,g.x2=-1/0,g.y1=1/0,g.y2=-1/0;for(var u=0;u<g.length;u++){var c=g[u];g.x1=Math.min(g.x1,c.positionX-c.width/2),g.x2=Math.max(g.x2,c.positionX+c.width/2),g.y1=Math.min(g.y1,c.positionY-c.height/2),g.y2=Math.max(g.y2,c.positionY+c.height/2)}g.w=g.x2-g.x1,g.h=g.y2-g.y1,l+=g.w*g.h}i.sort(function(e,t){return t.w*t.h-e.w*e.h});var h=0,d=0,p=0,f=0,v=Math.sqrt(l)*r.clientWidth/r.clientHeight;for(o=0;o<i.length;o++){var g;if(g=i[o]){for(u=0;u<g.length;u++)(c=g[u]).isLocked||(c.positionX+=h,c.positionY+=d);h+=g.w+t.componentSpacing,p+=g.w+t.componentSpacing,f=Math.max(f,g.h),p>v&&(d+=f+t.componentSpacing,h=0,p=0,f=0)}}}(0,i),r}).then(function(e){h.layoutNodes=e.layoutNodes,o.stop(),m()});var m=function(){!0===e.animate||!1===e.animate?y({force:!0,next:function(){n.one("layoutstop",e.stop),n.emit({type:"layoutstop",layout:n})}}):e.eles.nodes().layoutPositions(n,e,function(e){var t=h.layoutNodes[h.idToIndex[e.data("id")]];return{x:t.positionX,y:t.positionY}})};return this},u.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},u.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var c=function(e,t,n){for(var r=n.eles.edges(),i=n.eles.nodes(),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:e.width(),clientHeight:e.width(),boundingBox:o.makeBoundingBox(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()})},l=n.eles.components(),u={},c=0;c<l.length;c++)for(var d=l[c],p=0;p<d.length;p++){u[d[p].id()]=c}for(c=0;c<s.nodeSize;c++){var f=(x=i[c]).layoutDimensions(n);(B={}).isLocked=x.locked(),B.id=x.data("id"),B.parentId=x.data("parent"),B.cmptId=u[x.id()],B.children=[],B.positionX=x.position("x"),B.positionY=x.position("y"),B.offsetX=0,B.offsetY=0,B.height=f.w,B.width=f.h,B.maxX=B.positionX+B.width/2,B.minX=B.positionX-B.width/2,B.maxY=B.positionY+B.height/2,B.minY=B.positionY-B.height/2,B.padLeft=parseFloat(x.style("padding")),B.padRight=parseFloat(x.style("padding")),B.padTop=parseFloat(x.style("padding")),B.padBottom=parseFloat(x.style("padding")),B.nodeRepulsion=a.fn(n.nodeRepulsion)?n.nodeRepulsion(x):n.nodeRepulsion,s.layoutNodes.push(B),s.idToIndex[B.id]=c}var v=[],g=0,y=-1,m=[];for(c=0;c<s.nodeSize;c++){var x,b=(x=s.layoutNodes[c]).parentId;null!=b?s.layoutNodes[s.idToIndex[b]].children.push(x.id):(v[++y]=x.id,m.push(x.id))}for(s.graphSet.push(m);g<=y;){var w=v[g++],E=s.idToIndex[w],_=s.layoutNodes[E].children;if(_.length>0){s.graphSet.push(_);for(c=0;c<_.length;c++)v[++y]=_[c]}}for(c=0;c<s.graphSet.length;c++){var k=s.graphSet[c];for(p=0;p<k.length;p++){var P=s.idToIndex[k[p]];s.indexToGraph[P]=c}}for(c=0;c<s.edgeSize;c++){var S=r[c],C={};C.id=S.data("id"),C.sourceId=S.data("source"),C.targetId=S.data("target");var T=a.fn(n.idealEdgeLength)?n.idealEdgeLength(S):n.idealEdgeLength,D=a.fn(n.edgeElasticity)?n.edgeElasticity(S):n.edgeElasticity,M=s.idToIndex[C.sourceId],I=s.idToIndex[C.targetId];if(s.indexToGraph[M]!=s.indexToGraph[I]){for(var N=h(C.sourceId,C.targetId,s),L=s.graphSet[N],A=0,B=s.layoutNodes[M];-1===L.indexOf(B.id);)B=s.layoutNodes[s.idToIndex[B.parentId]],A++;for(B=s.layoutNodes[I];-1===L.indexOf(B.id);)B=s.layoutNodes[s.idToIndex[B.parentId]],A++;T*=A*n.nestingFactor}C.idealLength=T,C.elasticity=D,s.layoutEdges.push(C)}return s},h=function(e,t,n){var r=d(e,t,0,n);return 2>r.count?0:r.graph},d=function e(t,n,r,i){var o=i.graphSet[r];if(-1<o.indexOf(t)&&-1<o.indexOf(n))return{count:2,graph:r};for(var a=0,s=0;s<o.length;s++){var l=o[s],u=i.idToIndex[l],c=i.layoutNodes[u].children;if(0!==c.length){var h=e(t,n,i.indexToGraph[i.idToIndex[c[0]]],i);if(0!==h.count){if(1!==h.count)return h;if(2===++a)break}}}return{count:a,graph:r}},p=function(e){if(r){console.debug("layoutNodes:");for(var t=0;t<e.nodeSize;t++){var n=e.layoutNodes[t],i="\nindex: "+t+"\nId: "+n.id+"\nChildren: "+n.children.toString()+"\nparentId: "+n.parentId+"\npositionX: "+n.positionX+"\npositionY: "+n.positionY+"\nOffsetX: "+n.offsetX+"\nOffsetY: "+n.offsetY+"\npadLeft: "+n.padLeft+"\npadRight: "+n.padRight+"\npadTop: "+n.padTop+"\npadBottom: "+n.padBottom;console.debug(i)}for(var t in console.debug("idToIndex"),e.idToIndex)console.debug("Id: "+t+"\nIndex: "+e.idToIndex[t]);console.debug("Graph Set");var o=e.graphSet;for(t=0;t<o.length;t++)console.debug("Set : "+t+": "+o[t].toString());for(i="IndexToGraph",t=0;t<e.indexToGraph.length;t++)i+="\nIndex : "+t+" Graph: "+e.indexToGraph[t];console.debug(i),i="Layout Edges";for(t=0;t<e.layoutEdges.length;t++){var a=e.layoutEdges[t];i+="\nEdge Index: "+t+" ID: "+a.id+" SouceID: "+a.sourceId+" TargetId: "+a.targetId+" Ideal Length: "+a.idealLength}console.debug(i),i="nodeSize: "+e.nodeSize,i+="\nedgeSize: "+e.edgeSize,i+="\ntemperature: "+e.temperature,console.debug(i)}},f=function(e,t){for(var n=e.clientWidth,r=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];0!==o.children.length||o.isLocked||(o.positionX=Math.random()*n,o.positionY=Math.random()*r)}},v=function(e,t,n){var r=n.layout,i=n.eles.nodes(),o=e.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};n.boundingBox&&(i.forEach(function(t){var n=e.layoutNodes[e.idToIndex[t.data("id")]];a.x1=Math.min(a.x1,n.positionX),a.x2=Math.max(a.x2,n.positionX),a.y1=Math.min(a.y1,n.positionY),a.y2=Math.max(a.y2,n.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),i.positions(function(t,r){var i=e.layoutNodes[e.idToIndex[t.data("id")]];if(n.boundingBox){var s=(i.positionX-a.x1)/a.w,l=(i.positionY-a.y1)/a.h;return{x:o.x1+s*o.w,y:o.y1+l*o.h}}return{x:i.positionX,y:i.positionY}}),!0!==e.ready&&(e.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))};e.exports=u},function(e,t,n){"use strict";var r=n(1),i=n(2),o={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function a(e){this.options=r.extend({},o,e)}a.prototype.run=function(){var e=this.options,t=e,n=e.cy,r=t.eles.nodes().not(":parent");t.sort&&(r=r.sort(t.sort));var o=i.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===o.h||0===o.w)r.layoutPositions(this,t,function(e){return{x:o.x1,y:o.y1}});else{var a=r.size(),s=Math.sqrt(a*o.h/o.w),l=Math.round(s),u=Math.round(o.w/o.h*s),c=function(e){if(null==e)return Math.min(l,u);Math.min(l,u)==l?l=e:u=e},h=function(e){if(null==e)return Math.max(l,u);Math.max(l,u)==l?l=e:u=e},d=t.rows,p=null!=t.cols?t.cols:t.columns;if(null!=d&&null!=p)l=d,u=p;else if(null!=d&&null==p)l=d,u=Math.ceil(a/l);else if(null==d&&null!=p)u=p,l=Math.ceil(a/u);else if(u*l>a){var f=c(),v=h();(f-1)*v>=a?c(f-1):(v-1)*f>=a&&h(v-1)}else for(;u*l<a;){var g=c(),y=h();(y+1)*g>=a?h(y+1):c(g+1)}var m=o.w/u,x=o.h/l;if(t.condense&&(m=0,x=0),t.avoidOverlap)for(var b=0;b<r.length;b++){var w=r[b],E=w._private.position;null!=E.x&&null!=E.y||(E.x=0,E.y=0);var _=w.layoutDimensions(t),k=t.avoidOverlapPadding,P=_.w+k,S=_.h+k;m=Math.max(m,P),x=Math.max(x,S)}for(var C={},T=function(e,t){return!!C["c-"+e+"-"+t]},D=function(e,t){C["c-"+e+"-"+t]=!0},M=0,I=0,N=function(){++I>=u&&(I=0,M++)},L={},A=0;A<r.length;A++){var B=r[A],O=t.position(B);if(O&&(void 0!==O.row||void 0!==O.col)){var z={row:O.row,col:O.col};if(void 0===z.col)for(z.col=0;T(z.row,z.col);)z.col++;else if(void 0===z.row)for(z.row=0;T(z.row,z.col);)z.row++;L[B.id()]=z,D(z.row,z.col)}}r.layoutPositions(this,t,function(e,t){var n=void 0,r=void 0;if(e.locked()||e.isParent())return!1;var i=L[e.id()];if(i)n=i.col*m+m/2+o.x1,r=i.row*x+x/2+o.y1;else{for(;T(M,I);)N();n=I*m+m/2+o.x1,r=M*x+x/2+o.y1,D(M,I),N()}return{x:n,y:r}})}return this},e.exports=a},function(e,t,n){"use strict";var r=n(1),i={ready:function(){},stop:function(){}};function o(e){this.options=r.extend({},i,e)}o.prototype.run=function(){var e=this.options,t=e.eles;e.cy;return this.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),this.one("layoutready",e.ready),this.emit("layoutready"),this.one("layoutstop",e.stop),this.emit("layoutstop"),this},o.prototype.stop=function(){return this},e.exports=o},function(e,t,n){"use strict";var r=n(1),i=n(0),o={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function a(e){this.options=r.extend({},o,e)}a.prototype.run=function(){var e=this.options,t=e.eles.nodes(),n=i.fn(e.positions);return t.layoutPositions(this,e,function(t,r){var i=function(t){if(null==e.positions)return null;if(n)return e.positions(t);var r=e.positions[t._private.data.id];return null==r?null:r}(t);return!t.locked()&&null!=i&&i}),this},e.exports=a},function(e,t,n){"use strict";var r=n(1),i=n(2),o={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function a(e){this.options=r.extend({},o,e)}a.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles.nodes().not(":parent"),r=i.makeBoundingBox(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});return n.layoutPositions(this,e,function(e,t){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}}),this},e.exports=a},function(e,t,n){"use strict";e.exports=[{name:"null",impl:n(107)},{name:"base",impl:n(108)},{name:"canvas",impl:n(124)}]},function(e,t,n){"use strict";function r(e){this.options=e,this.notifications=0}var i=function(){};r.prototype={recalculateRenderedStyle:i,notify:function(){this.notifications++},init:i},e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(3),a=function(e){this.init(e)},s=a.prototype;s.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],s.init=function(e){var t=this;t.options=e,t.cy=e.cy;var n=t.container=e.cy.container();if(o){var r=o.document,a=r.head,s="__________cytoscape_container",l=null!=r.getElementById("__________cytoscape_stylesheet");if(n.className.indexOf(s)<0&&(n.className=(n.className||"")+" "+s),!l){var u=r.createElement("style");u.id="__________cytoscape_stylesheet",u.innerHTML="."+s+" { position: relative; }",a.insertBefore(u,a.children[0])}"static"===o.getComputedStyle(n).getPropertyValue("position")&&i.error("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.hideLabelsOnViewport=e.hideLabelsOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=e.pixelRatio,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()},s.notify=function(e){var t,n=this;if(!this.destroyed){t=r.array(e.type)?e.type:[e.type];for(var i={},o=0;o<t.length;o++){i[t[o]]=!0}i.init?n.load():i.destroy?n.destroy():((i.add||i.remove||i.load||i.zorder)&&n.invalidateCachedZSortedEles(),i.viewport&&n.redrawHint("select",!0),(i.load||i.resize)&&(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw())}},s.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var n=e.bindings[t],r=n.target;(r.off||r.removeEventListener).apply(r,n.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch(e){}},[n(109),n(110),n(120),n(121),n(122),n(123)].forEach(function(e){i.extend(s,e)}),e.exports=a},function(e,t,n){"use strict";var r=n(2),i=n(0),o=n(1),a={arrowShapeWidth:.3,registerArrowShapes:function(){var e=this.arrowShapes={},t=this,n=function(e,t,n,r,i,o,a){var s=i.x-n/2-a,l=i.x+n/2+a,u=i.y-n/2-a,c=i.y+n/2+a;return s<=e&&e<=l&&u<=t&&t<=c},a=function(e,t,n,r,i){var o=e*Math.cos(r)-t*Math.sin(r),a=(e*Math.sin(r)+t*Math.cos(r))*n;return{x:o*n+i.x,y:a+i.y}},s=function(e,t,n,r){for(var i=[],o=0;o<e.length;o+=2){var s=e[o],l=e[o+1];i.push(a(s,l,t,n,r))}return i},l=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r.x,r.y)}return t},u=function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").pfValue*2},c=function(a,c){i.string(c)&&(c=e[c]),e[a]=o.extend({name:a,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(e,t,n,i,o,a){var u=l(s(this.points,n+2*a,i,o));return r.pointInsidePolygonPoints(e,t,u)},roughCollide:n,draw:function(e,n,r,i){var o=s(this.points,n,r,i);t.arrowShapeImpl("polygon")(e,o)},spacing:function(e){return 0},gap:u},c)};c("none",{collide:o.falsify,roughCollide:o.falsify,draw:o.noop,spacing:o.zeroify,gap:o.zeroify}),c("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),c("arrow","triangle"),c("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(e,n,r,i,o){var l=s(this.points,n,r,i),u=this.controlPoint,c=a(u[0],u[1],n,r,i);t.arrowShapeImpl(this.name)(e,l,c)},gap:function(e){return.8*u(e)}}),c("triangle-tee",{points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(e,t,n,i,o,a,u){var c=l(s(this.points,n+2*u,i,o)),h=l(s(this.pointsTee,n+2*u,i,o));return r.pointInsidePolygonPoints(e,t,c)||r.pointInsidePolygonPoints(e,t,h)},draw:function(e,n,r,i,o){var a=s(this.points,n,r,i),l=s(this.pointsTee,n,r,i);t.arrowShapeImpl(this.name)(e,a,l)}}),c("triangle-cross",{points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(e,t){var n=this.baseCrossLinePts.slice(),r=t/e;return n[3]=n[3]-r,n[5]=n[5]-r,n},collide:function(e,t,n,i,o,a,u){var c=l(s(this.points,n+2*u,i,o)),h=l(s(this.crossLinePts(n,a),n+2*u,i,o));return r.pointInsidePolygonPoints(e,t,c)||r.pointInsidePolygonPoints(e,t,h)},draw:function(e,n,r,i,o){var a=s(this.points,n,r,i),l=s(this.crossLinePts(n,o),n,r,i);t.arrowShapeImpl(this.name)(e,a,l)}}),c("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(e){return.525*u(e)}}),c("circle",{radius:.15,collide:function(e,t,n,r,i,o,a){var s=i;return Math.pow(s.x-e,2)+Math.pow(s.y-t,2)<=Math.pow((n+2*a)*this.radius,2)},draw:function(e,n,r,i,o){t.arrowShapeImpl(this.name)(e,i.x,i.y,this.radius*n)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),c("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(e){return 1},gap:function(e){return 1}}),c("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),c("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}})}};e.exports=a},function(e,t,n){"use strict";var r=n(1),i={};[n(111),n(112),n(113),n(114),n(115),n(116),n(117),n(118),n(119)].forEach(function(e){r.extend(i,e)}),e.exports=i},function(e,t,n){"use strict";var r=n(3),i=n(2),o=n(1),a=(r=n(3),{projectIntoViewport:function(e,t){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],o=r[1],a=r[4],s=n.pan(),l=n.zoom();return[((e-i)/a-s.x)/l,((t-o)/a-s.y)/l]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),n=r.getComputedStyle(e),i=function(e){return parseFloat(n.getPropertyValue(e))},o=i("padding-left"),a=i("padding-right"),s=i("padding-top"),l=i("padding-bottom"),u=i("border-left-width"),c=i("border-right-width"),h=i("border-top-width"),d=i("border-bottom-width"),p=e.clientWidth,f=e.clientHeight,v=o+a,g=s+l,y=u+c,m=h+d,x=t.width/(p+y),b=p-v,w=f-g,E=(t.width,t.height,t.left+o+u),_=t.top+s+h;return this.containerBB=[E,_,b,w,x]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(e,t,n,r){return this.findNearestElements(e,t,n,r)[0]},findNearestElements:function(e,t,n,r){var a,s,l=this,u=this,c=u.getCachedZSortedEles(),h=[],d=u.cy.zoom(),p=u.cy.hasCompoundNodes(),f=(r?24:8)/d,v=(r?8:2)/d,g=(r?8:2)/d,y=1/0;function m(e,t){if(e.isNode()){if(s)return;s=e,h.push(e)}if(e.isEdge()&&(null==t||t<y))if(a){if(a.pstyle("z-index").value===e.pstyle("z-index").value)for(var n=0;n<h.length;n++)if(h[n].isEdge()){h[n]=e,a=e,y=null!=t?t:y;break}}else h.push(e),a=e,y=null!=t?t:y}function x(n){var r=n.outerWidth()+2*v,i=n.outerHeight()+2*v,o=r/2,a=i/2,s=n.position();if(s.x-o<=e&&e<=s.x+o&&s.y-a<=t&&t<=s.y+a&&u.nodeShapes[l.getNodeShape(n)].checkPoint(e,t,0,r,i,s.x,s.y))return m(n,0),!0}function b(n){var r,o=n._private,a=o.rscratch,s=n.pstyle("width").pfValue,c=n.pstyle("arrow-scale").value,d=s/2+f,v=d*d,g=2*d,y=o.source,b=o.target;if("segments"===a.edgeType||"straight"===a.edgeType||"haystack"===a.edgeType){for(var w=a.allpts,E=0;E+3<w.length;E+=2)if(i.inLineVicinity(e,t,w[E],w[E+1],w[E+2],w[E+3],g)&&v>(r=i.sqdistToFiniteLine(e,t,w[E],w[E+1],w[E+2],w[E+3])))return m(n,r),!0}else if("bezier"===a.edgeType||"multibezier"===a.edgeType||"self"===a.edgeType||"compound"===a.edgeType)for(w=a.allpts,E=0;E+5<a.allpts.length;E+=4)if(i.inBezierVicinity(e,t,w[E],w[E+1],w[E+2],w[E+3],w[E+4],w[E+5],g)&&v>(r=i.sqdistToQuadraticBezier(e,t,w[E],w[E+1],w[E+2],w[E+3],w[E+4],w[E+5])))return m(n,r),!0;y=y||o.source,b=b||o.target;var _=l.getArrowWidth(s,c),k=[{name:"source",x:a.arrowStartX,y:a.arrowStartY,angle:a.srcArrowAngle},{name:"target",x:a.arrowEndX,y:a.arrowEndY,angle:a.tgtArrowAngle},{name:"mid-source",x:a.midX,y:a.midY,angle:a.midsrcArrowAngle},{name:"mid-target",x:a.midX,y:a.midY,angle:a.midtgtArrowAngle}];for(E=0;E<k.length;E++){var P=k[E],S=u.arrowShapes[n.pstyle(P.name+"-arrow-shape").value],C=n.pstyle("width").pfValue;if(S.roughCollide(e,t,_,P.angle,{x:P.x,y:P.y},C,f)&&S.collide(e,t,_,P.angle,{x:P.x,y:P.y},C,f))return m(n),!0}p&&h.length>0&&(x(y),x(b))}function w(e,t,n){return o.getPrefixedProperty(e,t,n)}function E(n,r){var o,a=n._private,s=g;o=r?r+"-":"";var l=n.pstyle(o+"label").value;if("yes"===n.pstyle("text-events").strValue&&l){var u=a.rstyle,c=n.pstyle("text-border-width").pfValue,h=n.pstyle("text-background-padding").pfValue,d=w(u,"labelWidth",r)+c+2*s+2*h,p=w(u,"labelHeight",r)+c+2*s+2*h,f=w(u,"labelX",r),v=w(u,"labelY",r),y=w(a.rscratch,"labelAngle",r),x=f-d/2,b=f+d/2,E=v-p/2,_=v+p/2;if(y){var k=Math.cos(y),P=Math.sin(y),S=function(e,t){return{x:(e-=f)*k-(t-=v)*P+f,y:e*P+t*k+v}},C=S(x,E),T=S(x,_),D=S(b,E),M=S(b,_),I=[C.x,C.y,D.x,D.y,M.x,M.y,T.x,T.y];if(i.pointInsidePolygonPoints(e,t,I))return m(n),!0}else{var N={w:d,h:p,x1:x,x2:b,y1:E,y2:_};if(i.inBoundingBox(N,e,t))return m(n),!0}}}n&&(c=c.interactive);for(var _=c.length-1;_>=0;_--){var k=c[_];k.isNode()?x(k)||E(k):b(k)||E(k)||E(k,"source")||E(k,"target")}return h},getAllInBox:function(e,t,n,r){var o=this.getCachedZSortedEles().interactive,a=[],s=Math.min(e,n),l=Math.max(e,n),u=Math.min(t,r),c=Math.max(t,r);e=s,n=l,t=u,r=c;for(var h=i.makeBoundingBox({x1:e,y1:t,x2:n,y2:r}),d=0;d<o.length;d++){var p=o[d];if(p.isNode()){var f=p,v=f.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});i.boundingBoxesIntersect(h,v)&&!i.boundingBoxInBoundingBox(v,h)&&a.push(f)}else{var g=p,y=g._private,m=y.rscratch;if(null!=m.startX&&null!=m.startY&&!i.inBoundingBox(h,m.startX,m.startY))continue;if(null!=m.endX&&null!=m.endY&&!i.inBoundingBox(h,m.endX,m.endY))continue;if("bezier"===m.edgeType||"multibezier"===m.edgeType||"self"===m.edgeType||"compound"===m.edgeType||"segments"===m.edgeType||"haystack"===m.edgeType){for(var x=y.rstyle.bezierPts||y.rstyle.linePts||y.rstyle.haystackPts,b=!0,w=0;w<x.length;w++)if(!i.pointInBoundingBox(h,x[w])){b=!1;break}b&&a.push(g)}else"haystack"!==m.edgeType&&"straight"!==m.edgeType||a.push(g)}}return a}});e.exports=a},function(e,t,n){"use strict";var r=n(2),i={calculateArrowAngles:function(e){var t,n,i,o,a,s,l=e._private.rscratch,u="haystack"===l.edgeType,c="bezier"===l.edgeType,h="multibezier"===l.edgeType,d="segments"===l.edgeType,p="compound"===l.edgeType,f="self"===l.edgeType;if(u?(i=l.haystackPts[0],o=l.haystackPts[1],a=l.haystackPts[2],s=l.haystackPts[3]):(i=l.arrowStartX,o=l.arrowStartY,a=l.arrowEndX,s=l.arrowEndY),g=l.midX,y=l.midY,d)t=i-l.segpts[0],n=o-l.segpts[1];else if(h||p||f||c){var v=l.allpts;t=i-r.qbezierAt(v[0],v[2],v[4],.1),n=o-r.qbezierAt(v[1],v[3],v[5],.1)}else t=i-g,n=o-y;l.srcArrowAngle=r.getAngleFromDisp(t,n);var g=l.midX,y=l.midY;if(u&&(g=(i+a)/2,y=(o+s)/2),t=a-i,n=s-o,d)if((v=l.allpts).length/2%2==0){var m=(x=v.length/2)-2;t=v[x]-v[m],n=v[x+1]-v[m+1]}else{m=(x=v.length/2-1)-2;var x,b=x+2;t=v[x]-v[m],n=v[x+1]-v[m+1]}else if(h||p||f){var w,E,_,k,v=l.allpts;if(l.ctrlpts.length/2%2==0){var P=(S=(C=v.length/2-1)+2)+2;w=r.qbezierAt(v[C],v[S],v[P],0),E=r.qbezierAt(v[C+1],v[S+1],v[P+1],0),_=r.qbezierAt(v[C],v[S],v[P],1e-4),k=r.qbezierAt(v[C+1],v[S+1],v[P+1],1e-4)}else{var S,C=(S=v.length/2-1)-2;P=S+2;w=r.qbezierAt(v[C],v[S],v[P],.4999),E=r.qbezierAt(v[C+1],v[S+1],v[P+1],.4999),_=r.qbezierAt(v[C],v[S],v[P],.5),k=r.qbezierAt(v[C+1],v[S+1],v[P+1],.5)}t=_-w,n=k-E}(l.midtgtArrowAngle=r.getAngleFromDisp(t,n),l.midDispX=t,l.midDispY=n,t*=-1,n*=-1,d)&&((v=l.allpts).length/2%2==0||(t=-(v[b=(x=v.length/2-1)+2]-v[x]),n=-(v[b+1]-v[x+1])));if(l.midsrcArrowAngle=r.getAngleFromDisp(t,n),d)t=a-l.segpts[l.segpts.length-2],n=s-l.segpts[l.segpts.length-1];else if(h||p||f||c){var T=(v=l.allpts).length;t=a-r.qbezierAt(v[T-6],v[T-4],v[T-2],.9),n=s-r.qbezierAt(v[T-5],v[T-3],v[T-1],.9)}else t=a-g,n=s-y;l.tgtArrowAngle=r.getAngleFromDisp(t,n)}};i.getArrowWidth=i.getArrowHeight=function(e,t){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[e+", "+t];return r||(r=Math.max(Math.pow(13.37*e,.9),29)*t,n[e+", "+t]=r,r)},e.exports=i},function(e,t,n){"use strict";var r=n(2),i=n(0),o={};function a(e){var t=[];if(null!=e){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];t.push({x:r,y:i})}return t}}o.findEdgeControlPoints=function(e){if(e&&0!==e.length){for(var t,n,o,a,s,l=this,u=l.cy.hasCompoundNodes(),c={},h=[],d=[],p=0;p<e.length;p++){var f=(jt=(Ft=e[p])._private).data,v="unbundled-bezier"===(L=Ft.pstyle("curve-style").value)||"segments"===L,g="unbundled-bezier"===L||"bezier"===L;if("none"!==Ft.pstyle("display").value)if("haystack"!==L){var y=f.source,m=f.target;t=y>m?m+"$-$"+y:y+"$-$"+m,v&&(t="unbundled$-$"+f.id);var x=c[t];null==x&&(x=c[t]=[],h.push(t)),x.push(Ft),v&&(x.hasUnbundled=!0),g&&(x.hasBezier=!0)}else d.push(Ft)}for(var b=0;b<h.length;b++){var w=c[t=h[b]];if(w.sort(function(e,t){return e.poolIndex()-t.poolIndex()}),Wt=w[0]._private.source,Ht=w[0]._private.target,!w.hasUnbundled&&Wt.id()>Ht.id()){var E=Wt;Wt=Ht,Ht=E}Ut=Wt.position(),Zt=Ht.position(),$t=Wt.outerWidth(),Kt=Wt.outerHeight(),Qt=Ht.outerWidth(),Jt=Ht.outerHeight(),n=l.nodeShapes[this.getNodeShape(Wt)],o=l.nodeShapes[this.getNodeShape(Ht)],s=!1;var _={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0},k=Ut.x,P=Ut.y,S=$t,C=Kt,T=Zt.x,D=Zt.y,M=Qt,I=Jt,N=w.length;for(p=0;p<w.length;p++){var L,A,B=(Yt=(Ft=w[p])._private.rscratch).lastEdgeIndex,O=p,z=Yt.lastNumEdges,R=(v="unbundled-bezier"===(L=Ft.pstyle("curve-style").value)||"segments"===L,Wt.id()!==Ft.source().id()),V=Ft.pstyle("control-point-distances"),q=Ft.pstyle("loop-direction").pfValue,F=Ft.pstyle("loop-sweep").pfValue,j=Ft.pstyle("control-point-weights"),X=V&&j?Math.min(V.value.length,j.value.length):1,Y=Ft.pstyle("control-point-step-size").pfValue,G=V?V.pfValue[0]:void 0,W=j.value[0],H=Ft.pstyle("edge-distances").value,U=Ft.pstyle("segment-weights"),Z=Ft.pstyle("segment-distances"),$=Math.min(U.pfValue.length,Z.pfValue.length),Q=Ft.pstyle("source-endpoint").value,K=Ft.pstyle("target-endpoint").value,J=Ft.pstyle("source-arrow-shape").value,ee=Ft.pstyle("target-arrow-shape").value,te=Ft.pstyle("arrow-scale").value,ne=Ft.pstyle("width").pfValue,re=Yt.lastSrcCtlPtX,ie=Yt.lastSrcCtlPtY,oe=Yt.lastSrcCtlPtW,ae=Yt.lastSrcCtlPtH,se=Yt.lastTgtCtlPtX,le=Yt.lastTgtCtlPtY,ue=Yt.lastTgtCtlPtW,ce=Yt.lastTgtCtlPtH,he=Yt.lastCurveStyle,de=L,pe=Yt.lastCtrlptDists,fe=V?V.strValue:null,ve=Yt.lastCtrlptWs,ge=j.strValue,ye=Yt.lastSegmentWs,me=U.strValue,xe=Yt.lastSegmentDs,be=Z.strValue,we=Yt.lastStepSize,Ee=Y,_e=Yt.lastLoopDir,ke=q,Pe=Yt.lastLoopSwp,Se=F,Ce=Yt.lastEdgeDistances,Te=H,De=Yt.lastSrcEndpt,Me=Q,Ie=Yt.lastTgtEndpt,Ne=K,Le=Yt.lastSrcArr,Ae=J,Be=Yt.lastTgtArr,Oe=ee,ze=Yt.lastLineW,Re=ne,Ve=Yt.lastArrScl,qe=te;if(Yt.badBezier=!!s,re===k&&ie===P&&oe===S&&ae===C&&se===T&&le===D&&ue===M&&ce===I&&he===de&&pe===fe&&ve===ge&&ye===me&&xe===be&&we===Ee&&_e===ke&&Pe===Se&&Ce===Te&&De===Me&&Ie===Ne&&Le===Ae&&Be===Oe&&ze===Re&&Ve===qe&&(B===O&&z===N||v)?A=!0:(A=!1,Yt.lastSrcCtlPtX=k,Yt.lastSrcCtlPtY=P,Yt.lastSrcCtlPtW=S,Yt.lastSrcCtlPtH=C,Yt.lastTgtCtlPtX=T,Yt.lastTgtCtlPtY=D,Yt.lastTgtCtlPtW=M,Yt.lastTgtCtlPtH=I,Yt.lastEdgeIndex=O,Yt.lastNumEdges=N,Yt.lastCurveStyle=de,Yt.lastCtrlptDists=fe,Yt.lastCtrlptWs=ge,Yt.lastSegmentDs=be,Yt.lastSegmentWs=me,Yt.lastStepSize=Ee,Yt.lastLoopDir=ke,Yt.lastLoopSwp=Se,Yt.lastEdgeDistances=Te,Yt.lastSrcEndpt=Me,Yt.lastTgtEndpt=Ne,Yt.lastSrcArr=Ae,Yt.lastTgtArr=Oe,Yt.lastLineW=Re,Yt.lastArrScl=qe),!A){if(!w.calculatedIntersection&&Wt!==Ht&&(w.hasBezier||w.hasUnbundled)){w.calculatedIntersection=!0;var Fe=n.intersectLine(Ut.x,Ut.y,$t,Kt,Zt.x,Zt.y,0);w.srcIntn=Fe;var je=o.intersectLine(Zt.x,Zt.y,Qt,Jt,Ut.x,Ut.y,0);w.tgtIntn=je;var Xe={x1:Fe[0],x2:je[0],y1:Fe[1],y2:je[1]},Ye={x1:Ut.x,x2:Zt.x,y1:Ut.y,y2:Zt.y},Ge=je[1]-Fe[1],We=je[0]-Fe[0],He=Math.sqrt(We*We+Ge*Ge),Ue={x:We,y:Ge},Ze={x:Ue.x/He,y:Ue.y/He};a={x:-Ze.y,y:Ze.x},o.checkPoint(Fe[0],Fe[1],0,Qt,Jt,Zt.x,Zt.y)&&n.checkPoint(je[0],je[1],0,$t,Kt,Ut.x,Ut.y)&&(a={},s=!0)}if(R?(Yt.srcIntn=w.tgtIntn,Yt.tgtIntn=w.srcIntn):(Yt.srcIntn=w.srcIntn,Yt.tgtIntn=w.tgtIntn),Wt===Ht){Yt.edgeType="self";var $e=p,Qe=Y;v&&($e=0,Qe=G);var Ke=q-Math.PI/2,Je=Ke-F/2,et=Ke+F/2,tt=String(q+"_"+F);$e=void 0===_[tt]?_[tt]=0:++_[tt],Yt.ctrlpts=[Ut.x+1.4*Math.cos(Je)*Qe*($e/3+1),Ut.y+1.4*Math.sin(Je)*Qe*($e/3+1),Ut.x+1.4*Math.cos(et)*Qe*($e/3+1),Ut.y+1.4*Math.sin(et)*Qe*($e/3+1)]}else if(u&&(Wt.isParent()||Wt.isChild()||Ht.isParent()||Ht.isChild())&&(Wt.parents().anySame(Ht)||Ht.parents().anySame(Wt))){Yt.edgeType="compound",Yt.badBezier=!1;$e=p,Qe=Y;v&&($e=0,Qe=G);var nt={x:Ut.x-$t/2,y:Ut.y-Kt/2},rt={x:Zt.x-Qt/2,y:Zt.y-Jt/2},it={x:Math.min(nt.x,rt.x),y:Math.min(nt.y,rt.y)},ot=Math.max(.5,Math.log(.01*$t)),at=Math.max(.5,Math.log(.01*Qt));Yt.ctrlpts=[it.x,it.y-(1+Math.pow(50,1.12)/100)*Qe*($e/3+1)*ot,it.x-(1+Math.pow(50,1.12)/100)*Qe*($e/3+1)*at,it.y]}else if("segments"===L){Yt.edgeType="segments",Yt.segpts=[];for(var st=0;st<$;st++){var lt=U.pfValue[st],ut=Z.pfValue[st],ct=1-lt,ht=lt,dt={x:(xt="node-position"===H?Ye:Xe).x1*ct+xt.x2*ht,y:xt.y1*ct+xt.y2*ht};Yt.segpts.push(dt.x+a.x*ut,dt.y+a.y*ut)}}else if(w.length%2!=1||p!==Math.floor(w.length/2)||v){var pt=v;Yt.edgeType=pt?"multibezier":"bezier",Yt.ctrlpts=[];for(var ft=0;ft<X;ft++){var vt,gt=(.5-w.length/2+p)*Y,yt=r.signum(gt);pt&&(G=V?V.pfValue[ft]:Y,W=j.value[ft]);var mt=void 0!==(vt=v?G:void 0!==G?yt*G:void 0)?vt:gt;ct=1-W,ht=W;if(R){E=ct;ct=ht,ht=E}var xt;dt={x:(xt="node-position"===H?Ye:Xe).x1*ct+xt.x2*ht,y:xt.y1*ct+xt.y2*ht};Yt.ctrlpts.push(dt.x+a.x*mt,dt.y+a.y*mt)}}else Yt.edgeType="straight";this.findEndpoints(Ft);var bt=!i.number(Yt.startX)||!i.number(Yt.startY),wt=!i.number(Yt.arrowStartX)||!i.number(Yt.arrowStartY),Et=!i.number(Yt.endX)||!i.number(Yt.endY),_t=!i.number(Yt.arrowEndX)||!i.number(Yt.arrowEndY),kt=3*(this.getArrowWidth(Ft.pstyle("width").pfValue,Ft.pstyle("arrow-scale").value)*this.arrowShapeWidth);if("bezier"===Yt.edgeType){var Pt=r.dist({x:Yt.ctrlpts[0],y:Yt.ctrlpts[1]},{x:Yt.startX,y:Yt.startY}),St=Pt<kt,Ct=r.dist({x:Yt.ctrlpts[0],y:Yt.ctrlpts[1]},{x:Yt.endX,y:Yt.endY}),Tt=Ct<kt,Dt=!1;if(bt||wt||St){Dt=!0;var Mt={x:Yt.ctrlpts[0]-Ut.x,y:Yt.ctrlpts[1]-Ut.y},It=Math.sqrt(Mt.x*Mt.x+Mt.y*Mt.y),Nt={x:Mt.x/It,y:Mt.y/It},Lt=Math.max($t,Kt),At={x:Yt.ctrlpts[0]+2*Nt.x*Lt,y:Yt.ctrlpts[1]+2*Nt.y*Lt},Bt=n.intersectLine(Ut.x,Ut.y,$t,Kt,At.x,At.y,0);St?(Yt.ctrlpts[0]=Yt.ctrlpts[0]+Nt.x*(kt-Pt),Yt.ctrlpts[1]=Yt.ctrlpts[1]+Nt.y*(kt-Pt)):(Yt.ctrlpts[0]=Bt[0]+Nt.x*kt,Yt.ctrlpts[1]=Bt[1]+Nt.y*kt)}if(Et||_t||Tt){Dt=!0;Mt={x:Yt.ctrlpts[0]-Zt.x,y:Yt.ctrlpts[1]-Zt.y},It=Math.sqrt(Mt.x*Mt.x+Mt.y*Mt.y),Nt={x:Mt.x/It,y:Mt.y/It},Lt=Math.max($t,Kt),At={x:Yt.ctrlpts[0]+2*Nt.x*Lt,y:Yt.ctrlpts[1]+2*Nt.y*Lt};var Ot=o.intersectLine(Zt.x,Zt.y,Qt,Jt,At.x,At.y,0);Tt?(Yt.ctrlpts[0]=Yt.ctrlpts[0]+Nt.x*(kt-Ct),Yt.ctrlpts[1]=Yt.ctrlpts[1]+Nt.y*(kt-Ct)):(Yt.ctrlpts[0]=Ot[0]+Nt.x*kt,Yt.ctrlpts[1]=Ot[1]+Nt.y*kt)}Dt&&this.findEndpoints(Ft)}if("multibezier"===Yt.edgeType||"bezier"===Yt.edgeType||"self"===Yt.edgeType||"compound"===Yt.edgeType){Yt.allpts=[],Yt.allpts.push(Yt.startX,Yt.startY);for(ft=0;ft+1<Yt.ctrlpts.length;ft+=2)Yt.allpts.push(Yt.ctrlpts[ft],Yt.ctrlpts[ft+1]),ft+3<Yt.ctrlpts.length&&Yt.allpts.push((Yt.ctrlpts[ft]+Yt.ctrlpts[ft+2])/2,(Yt.ctrlpts[ft+1]+Yt.ctrlpts[ft+3])/2);var zt,Rt;Yt.allpts.push(Yt.endX,Yt.endY),Yt.ctrlpts.length/2%2==0?(zt=Yt.allpts.length/2-1,Yt.midX=Yt.allpts[zt],Yt.midY=Yt.allpts[zt+1]):(zt=Yt.allpts.length/2-3,Rt=.5,Yt.midX=r.qbezierAt(Yt.allpts[zt],Yt.allpts[zt+2],Yt.allpts[zt+4],Rt),Yt.midY=r.qbezierAt(Yt.allpts[zt+1],Yt.allpts[zt+3],Yt.allpts[zt+5],Rt))}else if("straight"===Yt.edgeType)Yt.allpts=[Yt.startX,Yt.startY,Yt.endX,Yt.endY],Yt.midX=(Yt.startX+Yt.endX+Yt.arrowStartX+Yt.arrowEndX)/4,Yt.midY=(Yt.startY+Yt.endY+Yt.arrowStartY+Yt.arrowEndY)/4;else if("segments"===Yt.edgeType)if(Yt.allpts=[],Yt.allpts.push(Yt.startX,Yt.startY),Yt.allpts.push.apply(Yt.allpts,Yt.segpts),Yt.allpts.push(Yt.endX,Yt.endY),Yt.segpts.length%4==0){var Vt=Yt.segpts.length/2,qt=Vt-2;Yt.midX=(Yt.segpts[qt]+Yt.segpts[Vt])/2,Yt.midY=(Yt.segpts[qt+1]+Yt.segpts[Vt+1])/2}else{qt=Yt.segpts.length/2-1;Yt.midX=Yt.segpts[qt],Yt.midY=Yt.segpts[qt+1]}this.storeEdgeProjections(Ft),this.calculateArrowAngles(Ft)}this.recalculateEdgeLabelProjections(Ft),this.calculateLabelAngles(Ft)}}for(p=0;p<d.length;p++){var Ft,jt,Xt=(jt=(Ft=d[p])._private).rscratch,Yt=Xt;if(!Xt.haystack){var Gt=2*Math.random()*Math.PI;Xt.source={x:Math.cos(Gt),y:Math.sin(Gt)};Gt=2*Math.random()*Math.PI;Xt.target={x:Math.cos(Gt),y:Math.sin(Gt)}}var Wt=jt.source,Ht=jt.target,Ut=Wt.position(),Zt=Ht.position(),$t=Wt.width(),Qt=Ht.width(),Kt=Wt.height(),Jt=Ht.height(),en=(Lt=Ft.pstyle("haystack-radius").value)/2;Yt.haystackPts=Yt.allpts=[Yt.source.x*$t*en+Ut.x,Yt.source.y*Kt*en+Ut.y,Yt.target.x*Qt*en+Zt.x,Yt.target.y*Jt*en+Zt.y],Yt.midX=(Yt.allpts[0]+Yt.allpts[2])/2,Yt.midY=(Yt.allpts[1]+Yt.allpts[3])/2,Xt.edgeType=Xt.lastCurveStyle="haystack",Xt.haystack=!0,this.storeEdgeProjections(Ft),this.calculateArrowAngles(Ft),this.recalculateEdgeLabelProjections(Ft),this.calculateLabelAngles(Ft)}}},o.getSegmentPoints=function(e){var t=e[0]._private.rscratch;if("segments"===t.edgeType)return a(t.segpts)},o.getControlPoints=function(e){var t=e[0]._private.rscratch,n=t.edgeType;if("bezier"===n||"multibezier"===n)return a(t.ctrlpts)},o.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return{x:t.midX,y:t.midY}},e.exports=o},function(e,t,n){"use strict";var r=n(2),i=n(0),o={manualEndptToPx:function(e,t){var n=e.position(),r=e.outerWidth(),i=e.outerHeight();if(2===t.value.length){var o=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(o[0]=o[0]*r),"%"===t.units[1]&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}var a=t.pfValue[0];a=-Math.PI/2+a;var s=2*Math.max(r,i),l=[n.x+Math.cos(a)*s,n.y+Math.sin(a)*s];return this.nodeShapes[this.getNodeShape(e)].intersectLine(n.x,n.y,r,i,l[0],l[1],0)},findEndpoints:function(e){var t=this,n=void 0,o=e.source()[0],a=e.target()[0],s=o.position(),l=a.position(),u=e.pstyle("target-arrow-shape").value,c=e.pstyle("source-arrow-shape").value,h=e.pstyle("target-distance-from-node").pfValue,d=e.pstyle("source-distance-from-node").pfValue,p=e._private.rscratch,f=p.edgeType,v="self"===f||"compound"===f,g="bezier"===f||"multibezier"===f||v,y="bezier"!==f,m="straight"===f||"segments"===f,x="segments"===f,b=g||y||m,w=e.pstyle("source-endpoint"),E=v?"outside-to-node":w.value,_=e.pstyle("target-endpoint"),k=v?"outside-to-node":_.value;p.srcManEndpt=w,p.tgtManEndpt=_;var P=void 0,S=void 0,C=void 0,T=void 0;if(g){var D=[p.ctrlpts[0],p.ctrlpts[1]];P=y?[p.ctrlpts[p.ctrlpts.length-2],p.ctrlpts[p.ctrlpts.length-1]]:D,S=D}else if(m){var M=x?p.segpts.slice(0,2):[l.x,l.y];P=x?p.segpts.slice(p.segpts.length-2):[s.x,s.y],S=M}"inside-to-node"===k?n=[l.x,l.y]:_.units?n=this.manualEndptToPx(a,_):"outside-to-line"===k?n=p.tgtIntn:("outside-to-node"===k?C=P:"outside-to-line"===k&&(C=[s.x,s.y]),n=t.nodeShapes[this.getNodeShape(a)].intersectLine(l.x,l.y,a.outerWidth(),a.outerHeight(),C[0],C[1],0));var I=r.shortenIntersection(n,P,t.arrowShapes[u].spacing(e)+h),N=r.shortenIntersection(n,P,t.arrowShapes[u].gap(e)+h);p.endX=N[0],p.endY=N[1],p.arrowEndX=I[0],p.arrowEndY=I[1],"inside-to-node"===E?n=[s.x,s.y]:w.units?n=this.manualEndptToPx(o,w):"outside-to-line"===E?n=p.srcIntn:("outside-to-node"===E?T=S:"outside-to-line"===E&&(T=[l.x,l.y]),n=t.nodeShapes[this.getNodeShape(o)].intersectLine(s.x,s.y,o.outerWidth(),o.outerHeight(),T[0],T[1],0));var L=r.shortenIntersection(n,S,t.arrowShapes[c].spacing(e)+d),A=r.shortenIntersection(n,S,t.arrowShapes[c].gap(e)+d);p.startX=A[0],p.startY=A[1],p.arrowStartX=L[0],p.arrowStartY=L[1],b&&(i.number(p.startX)&&i.number(p.startY)&&i.number(p.endX)&&i.number(p.endY)?p.badLine=!1:p.badLine=!0)},getSourceEndpoint:function(e){var t=e[0]._private.rscratch;switch(t.edgeType){case"haystack":return{x:t.haystackPts[0],y:t.haystackPts[1]};default:return{x:t.arrowStartX,y:t.arrowStartY}}},getTargetEndpoint:function(e){var t=e[0]._private.rscratch;switch(t.edgeType){case"haystack":return{x:t.haystackPts[2],y:t.haystackPts[3]};default:return{x:t.arrowEndX,y:t.arrowEndY}}}};e.exports=o},function(e,t,n){"use strict";var r=n(2),i={};function o(e,t,n){for(var i=function(e,t,n,i){return r.qbezierAt(e,t,n,i)},o=t._private.rstyle.bezierPts,a=0;a<e.bezierProjPcts.length;a++){var s=e.bezierProjPcts[a];o.push({x:i(n[0],n[2],n[4],s),y:i(n[1],n[3],n[5],s)})}}i.storeEdgeProjections=function(e){var t=e._private,n=t.rscratch,r=n.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===r||"bezier"===r||"self"===r||"compound"===r){t.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)o(this,e,n.allpts.slice(i,i+6))}else if("segments"===r){var a=t.rstyle.linePts=[];for(i=0;i+1<n.allpts.length;i+=2)a.push({x:n.allpts[i],y:n.allpts[i+1]})}else if("haystack"===r){var s=n.haystackPts;t.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},i.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)},e.exports=i},function(e,t,n){"use strict";var r=n(2),i=n(0),o=n(1),a={recalculateNodeLabelProjection:function(e){var t=e.pstyle("label").strValue;if(!i.emptyString(t)){var n,r,o=e._private,a=e.width(),s=e.height(),l=e.padding(),u=e.position(),c=e.pstyle("text-halign").strValue,h=e.pstyle("text-valign").strValue,d=o.rscratch,p=o.rstyle;switch(c){case"left":n=u.x-a/2-l;break;case"right":n=u.x+a/2+l;break;default:n=u.x}switch(h){case"top":r=u.y-s/2-l;break;case"bottom":r=u.y+s/2+l;break;default:r=u.y}d.labelX=n,d.labelY=r,p.labelX=n,p.labelY=r,this.applyLabelDimensions(e)}}};a.recalculateEdgeLabelProjections=function(e){var t,n=e._private,i=n.rscratch,a=this,s={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(s.mid||s.source||s.target){t={x:i.midX,y:i.midY};var l=function(e,t,r){o.setPrefixedProperty(n.rscratch,e,t,r),o.setPrefixedProperty(n.rstyle,e,t,r)};l("labelX",null,t.x),l("labelY",null,t.y);var u=function(o){var u,c="source"===o;if(s[o]){var h=e.pstyle(o+"-text-offset").pfValue,d=function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.atan(r/n)};switch(i.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var p,f=function e(){if(e.cache)return e.cache;for(var t=[],o=0;o+5<i.allpts.length;o+=4){var s={x:i.allpts[o],y:i.allpts[o+1]},l={x:i.allpts[o+2],y:i.allpts[o+3]},u={x:i.allpts[o+4],y:i.allpts[o+5]};t.push({p0:s,p1:l,p2:u,startDist:0,length:0,segments:[]})}var c=n.rstyle.bezierPts,h=a.bezierProjPcts.length;function d(e,t,n,i,o){var a=r.dist(t,n),s=e.segments[e.segments.length-1],l={p0:t,p1:n,t0:i,t1:o,startDist:s?s.startDist+s.length:0,length:a};e.segments.push(l),e.length+=a}for(o=0;o<t.length;o++){var p=t[o],f=t[o-1];f&&(p.startDist=f.startDist+f.length),d(p,p.p0,c[o*h],0,a.bezierProjPcts[0]);for(var v=0;v<h-1;v++)d(p,c[o*h+v],c[o*h+v+1],a.bezierProjPcts[v],a.bezierProjPcts[v+1]);d(p,c[o*h+h-1],p.p2,a.bezierProjPcts[h-1],1)}return e.cache=t}(),v=0,g=0,y=0;y<f.length;y++){for(var m=f[c?y:f.length-1-y],x=0;x<m.segments.length;x++){var b=m.segments[c?x:m.segments.length-1-x],w=y===f.length-1&&x===m.segments.length-1;if(v=g,(g+=b.length)>=h||w){p={cp:m,segment:b};break}}if(p)break}m=p.cp;var E=(h-v)/(b=p.segment).length,_=b.t1-b.t0,k=c?b.t0+_*E:b.t1-_*E;k=r.bound(0,k,1),t=r.qbezierPtAt(m.p0,m.p1,m.p2,k),u=function(e,t,n,i){var o=r.bound(0,i-.001,1),a=r.bound(0,i+.001,1),s=r.qbezierPtAt(e,t,n,o),l=r.qbezierPtAt(e,t,n,a);return d(s,l)}(m.p0,m.p1,m.p2,k);break;case"straight":case"segments":case"haystack":var P,S,C,T,D=0,M=i.allpts.length;for(y=0;y+3<M&&(c?(C={x:i.allpts[y],y:i.allpts[y+1]},T={x:i.allpts[y+2],y:i.allpts[y+3]}):(C={x:i.allpts[M-2-y],y:i.allpts[M-1-y]},T={x:i.allpts[M-4-y],y:i.allpts[M-3-y]}),S=D,!((D+=P=r.dist(C,T))>=h));y+=2);k=(h-S)/P;k=r.bound(0,k,1),t=r.lineAt(C,T,k),u=d(C,T)}l("labelX",o,t.x),l("labelY",o,t.y),l("labelAutoAngle",o,u)}};u("source"),u("target"),this.applyLabelDimensions(e)}},a.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},a.applyPrefixedLabelDimensions=function(e,t){var n=e._private,r=this.getLabelText(e,t),i=this.calculateLabelDimensions(e,r);o.setPrefixedProperty(n.rstyle,"labelWidth",t,i.width),o.setPrefixedProperty(n.rscratch,"labelWidth",t,i.width),o.setPrefixedProperty(n.rstyle,"labelHeight",t,i.height),o.setPrefixedProperty(n.rscratch,"labelHeight",t,i.height)},a.getLabelText=function(e,t){var n=e._private,r=t?t+"-":"",i=e.pstyle(r+"label").strValue,a=e.pstyle("text-transform").value,s=function(e,r){return r?(o.setPrefixedProperty(n.rscratch,e,t,r),r):o.getPrefixedProperty(n.rscratch,e,t)};"none"==a||("uppercase"==a?i=i.toUpperCase():"lowercase"==a&&(i=i.toLowerCase()));var l=e.pstyle("text-wrap").value;if("wrap"===l){var u=s("labelKey");if(u&&s("labelWrapKey")===u)return s("labelWrapCachedText");for(var c=i.split("\n"),h=e.pstyle("text-max-width").pfValue,d=[],p=0;p<c.length;p++){var f=c[p];if(this.calculateLabelDimensions(e,f,"line="+f).width>h){for(var v=f.split(/\s+/),g="",y=0;y<v.length;y++){var m=v[y],x=0===g.length?m:g+" "+m;this.calculateLabelDimensions(e,x,"testLine="+x).width<=h?g+=m+" ":(d.push(g),g=m+" ")}g.match(/^\s+$/)||d.push(g)}else d.push(f)}s("labelWrapCachedLines",d),i=s("labelWrapCachedText",d.join("\n")),s("labelWrapKey",u)}else if("ellipsis"===l){h=e.pstyle("text-max-width").pfValue;for(var b="",w=!1,E=0;E<i.length;E++){if(this.calculateLabelDimensions(e,b+i[E]+"").width>h)break;b+=i[E],E===i.length-1&&(w=!0)}return w||(b+=""),b}return i},a.calculateLabelDimensions=function(e,t,n){var r=e._private.labelStyleKey+"$@$"+t;n&&(r+="$@$"+n);var i=this.labelDimCache||(this.labelDimCache={});if(i[r])return i[r];var o=e.pstyle("font-style").strValue,a=1*e.pstyle("font-size").pfValue+"px",s=e.pstyle("font-family").strValue,l=e.pstyle("font-weight").strValue,u=this.labelCalcDiv;u||(u=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(u));var c=u.style;return c.fontFamily=s,c.fontStyle=o,c.fontSize=a,c.fontWeight=l,c.position="absolute",c.left="-9999px",c.top="-9999px",c.zIndex="-1",c.visibility="hidden",c.pointerEvents="none",c.padding="0",c.lineHeight="1","wrap"===e.pstyle("text-wrap").value?c.whiteSpace="pre":c.whiteSpace="normal",u.textContent=t,i[r]={width:Math.ceil(u.clientWidth/1),height:Math.ceil(u.clientHeight/1)},i[r]},a.calculateLabelAngles=function(e){var t=e._private.rscratch,n=e.isEdge(),r=e.pstyle("text-rotation"),i=r.strValue;"none"===i?t.labelAngle=t.sourceLabelAngle=t.targetLabelAngle=0:n&&"autorotate"===i?(t.labelAngle=Math.atan(t.midDispY/t.midDispX),t.sourceLabelAngle=t.sourceLabelAutoAngle,t.targetLabelAngle=t.targetLabelAutoAngle):t.labelAngle=t.sourceLabelAngle=t.targetLabelAngle="autorotate"===i?0:r.pfValue},e.exports=a},function(e,t,n){"use strict";var r={getNodeShape:function(e){var t=e.pstyle("shape").value;if(e.isParent())return"rectangle"===t||"roundrectangle"===t||"cutrectangle"===t||"barrel"===t?t:"rectangle";if("polygon"===t){var n=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return t}};e.exports=r},function(e,t,n){"use strict";var r={registerCalculationListeners:function(){var e=this.cy,t=e.collection(),n=this,r=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.merge(e);for(var i=0;i<e.length;i++){var o=e[i]._private,a=o.rstyle;r&&(a.clean=!1,o.bbCache=null);var s=a.dirtyEvents=a.dirtyEvents||{length:0};s[n.type]||(s[n.type]=!0,s.length++)}};n.binder(e).on("position.* style.* free.* bounds.*","node",function(e){var t=e.target;r(t,e),r(t.connectedEdges(),e)}).on("add.*","node",function(e){var t=e.target;r(t,e)}).on("background.*","node",function(e){var t=e.target;r(t,e,!1)}).on("add.* style.*","edge",function(e){var t=e.target;r(t,e),r(t.parallelEdges(),e)}).on("remove.*","edge",function(e){for(var t=e.target.parallelEdges(),n=0;n<t.length;n++){var i=t[n];i.removed()||r(i,e)}}).on("dirty.*","node",function(e){var t=e.target;r(t,e)});n.beforeRender(function(r){if(r){var i=n.onUpdateEleCalcsFns;if(i)for(var o=0;o<i.length;o++)(0,i[o])(r,t);for(n.recalculateRenderedStyle(t,!1),o=0;o<t.length;o++)t[o]._private.rstyle.dirtyEvents=null;t=e.collection()}},n.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},recalculateRenderedStyle:function(e,t){var n=[],r=[];if(!this.destroyed){void 0===t&&(t=!0);for(var i=0;i<e.length;i++){var o=(l=(s=e[i])._private).rstyle;t&&o.clean||s.removed()||"none"!==s.pstyle("display").value&&("nodes"===l.group?r.push(s):n.push(s),o.clean=!0)}for(i=0;i<r.length;i++){o=(l=(s=r[i])._private).rstyle;var a=s.position();this.recalculateNodeLabelProjection(s),o.nodeX=a.x,o.nodeY=a.y,o.nodeW=s.pstyle("width").pfValue,o.nodeH=s.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(i=0;i<n.length;i++){o=(l=(s=n[i])._private).rstyle;var s,l,u=l.rscratch;this.recalculateEdgeLabelProjections(s),o.srcX=u.arrowStartX,o.srcY=u.arrowStartY,o.tgtX=u.arrowEndX,o.tgtY=u.arrowEndY,o.midX=u.midX,o.midY=u.midY,o.labelAngle=u.labelAngle,o.sourceLabelAngle=u.sourceLabelAngle,o.targetLabelAngle=u.targetLabelAngle}}}};e.exports=r},function(e,t,n){"use strict";var r=n(17),i={updateCachedGrabbedEles:function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],n=0;n<e.length;n++){var r=(i=e[n])._private.rscratch;i.grabbed()&&!i.isParent()?t.push(i):r.inDragLayer?e.drag.push(i):e.nondrag.push(i)}for(n=0;n<t.length;n++){var i=t[n];e.drag.push(i)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(r),t.interactive=t.filter(function(e){return e.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t}};e.exports=i},function(e,t,n){"use strict";var r={getCachedImage:function(e,t,n){var r=this.imageCache=this.imageCache||{},i=r[e];if(i)return i.image.complete||i.image.addEventListener("load",n),i.image;var o=(i=r[e]=r[e]||{}).image=new Image;o.addEventListener("load",n),o.addEventListener("error",function(){o.error=!0});return"data:"===e.substring(0,"data:".length).toLowerCase()||(o.crossOrigin=t),o.src=e,o}};e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(2),a=(n(16),{registerBinding:function(e,t,n,r){var i=Array.prototype.slice.apply(arguments,[1]),o=this.binder(e);return o.on.apply(o,i)},binder:function(e){var t=this,n=e===window||e===document||e===document.body||r.domElement(e);if(null==t.supportsPassiveEvents){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,o)}catch(e){}t.supportsPassiveEvents=i}var a=function(r,i,o){var a=Array.prototype.slice.call(arguments);return n&&t.supportsPassiveEvents&&(a[2]={capture:null!=o&&o,passive:!1,once:!1}),t.bindings.push({target:e,args:a}),(e.addEventListener||e.on).apply(e,a),this};return{on:a,addEventListener:a,addListener:a,bind:a}},nodeIsDraggable:function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},nodeIsGrabbable:function(e){return this.nodeIsDraggable(e)&&e.interactive()}});a.load=function(){var e=this,t=function(t,n,r,o){null==t&&(t=e.cy);for(var a=0;a<n.length;a++){var s=n[a];t.emit(i.extend({originalEvent:r,type:s},o))}},n=function(e){return e.shiftKey||e.metaKey||e.ctrlKey},a=function(t,n){var r=!0;if(e.cy.hasCompoundNodes()&&t&&t.isEdge())for(var i=0;n&&i<n.length;i++){if((t=n[i]).isNode()&&t.isParent()){r=!1;break}}else r=!0;return r},s=function(e){e[0]._private.rscratch.inDragLayer=!0},l=function(e){e[0]._private.rscratch.isGrabTarget=!0},u=function(t,n){var r=function(t){var n;if(t.addToList&&e.cy.hasCompoundNodes()){if(!t.addToList.hasId){t.addToList.hasId={};for(var r=0;r<t.addToList.length;r++){var i=t.addToList[r];t.addToList.hasId[i.id()]=!0}}n=t.addToList.hasId}return n||{}}(n);r[t.id()]||(n.addToList.push(t),r[t.id()]=!0,function(e){e[0]._private.grabbed=!0}(t))},c=function(t,n){n=n||{};var r=t.cy().hasCompoundNodes();n.inDragLayer&&(t.forEach(s),t.neighborhood().stdFilter(function(e){return!r||e.isEdge()}).forEach(s)),n.addToList&&t.forEach(function(e){u(e,n)}),function(e,t){if(e.cy().hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList)){var n=e.descendants();t.inDragLayer&&(n.forEach(s),n.connectedEdges().forEach(s)),t.addToList&&n.forEach(function(e){u(e,t)})}}(t,n),p(t,{inDragLayer:n.inDragLayer}),e.updateCachedGrabbedEles()},h=c,d=function(t){t&&(t.hasId={},e.getCachedZSortedEles().forEach(function(e){!function(e){e[0]._private.grabbed=!1}(e),function(e){e[0]._private.rscratch.inDragLayer=!1}(e),function(e){e[0]._private.rscratch.isGrabTarget=!1}(e)}),e.updateCachedGrabbedEles())},p=function(e,t){if((null!=t.inDragLayer||null!=t.addToList)&&e.cy().hasCompoundNodes()){var n=e.ancestors().orphans();if(!n.same(e)){var r=n.descendants().spawnSelf().merge(n).unmerge(e).unmerge(e.descendants()),i=r.connectedEdges();t.inDragLayer&&(i.forEach(s),r.forEach(s)),t.addToList&&r.forEach(function(e){u(e,t)})}}},f="undefined"!=typeof MutationObserver;f?(e.removeObserver=new MutationObserver(function(t){for(var n=0;n<t.length;n++){var r=t[n].removedNodes;if(r)for(var i=0;i<r.length;i++){if(r[i]===e.container){e.destroy();break}}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(t){e.destroy()});var v=i.debounce(function(){e.cy.resize()},100);f&&(e.styleObserver=new MutationObserver(v),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(window,"resize",v);var g=function(){e.invalidateContainerClientCoordsCache()};!function(e,t){for(;null!=e;)t(e),e=e.parentNode}(e.container,function(t){e.registerBinding(t,"transitionend",g),e.registerBinding(t,"animationend",g),e.registerBinding(t,"scroll",g)}),e.registerBinding(e.container,"contextmenu",function(e){e.preventDefault()});var y=function(t){for(var n=e.findContainerClientCoords(),r=n[0],i=n[1],o=n[2],a=n[3],s=t.touches?t.touches:[t],l=!1,u=0;u<s.length;u++){var c=s[u];if(r<=c.clientX&&c.clientX<=r+o&&i<=c.clientY&&c.clientY<=i+a){l=!0;break}}if(!l)return!1;for(var h=e.container,d=t.target.parentNode,p=!1;d;){if(d===h){p=!0;break}d=d.parentNode}return!!p};e.registerBinding(e.container,"mousedown",function(n){if(y(n)){n.preventDefault(),e.hoverData.capture=!0,e.hoverData.which=n.which;var r=e.cy,i=[n.clientX,n.clientY],o=e.projectIntoViewport(i[0],i[1]),a=e.selection,s=e.findNearestElements(o[0],o[1],!0,!1),u=s[0],d=e.dragData.possibleDragElements;e.hoverData.mdownPos=o,e.hoverData.mdownGPos=i;if(3==n.which){e.hoverData.cxtStarted=!0;var p={originalEvent:n,type:"cxttapstart",position:{x:o[0],y:o[1]}};u?(u.activate(),u.emit(p),e.hoverData.down=u):r.emit(p),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==n.which){if(u&&u.activate(),null!=u&&e.nodeIsGrabbable(u)){var f=function(e){return{originalEvent:n,type:e,position:{x:o[0],y:o[1]}}};if(l(u),u.selected()){d=e.dragData.possibleDragElements=[];var v=r.$(function(t){return t.isNode()&&t.selected()&&e.nodeIsGrabbable(t)});c(v,{addToList:d}),u.emit(f("grabon")),v.forEach(function(e){e.emit(f("grab"))})}else d=e.dragData.possibleDragElements=[],h(u,{addToList:d}),u.emit(f("grabon")).emit(f("grab"));e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=u,e.hoverData.downs=s,e.hoverData.downTime=(new Date).getTime(),t(u,["mousedown","tapstart","vmousedown"],n,{position:{x:o[0],y:o[1]}}),null==u?(a[4]=1,e.data.bgActivePosistion={x:o[0],y:o[1]},e.redrawHint("select",!0),e.redraw()):u.isEdge()&&(a[4]=1),e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var t=e.hoverData.down;t?t.emit({originalEvent:n,type:"taphold",position:{x:o[0],y:o[1]}}):r.emit({originalEvent:n,type:"taphold",position:{x:o[0],y:o[1]}})}},e.tapholdDuration)}a[0]=a[2]=o[0],a[1]=a[3]=o[1]}},!1),e.registerBinding(window,"mousemove",function(i){if(e.hoverData.capture||y(i)){var s=!1,l=e.cy,u=l.zoom(),h=[i.clientX,i.clientY],p=e.projectIntoViewport(h[0],h[1]),f=e.hoverData.mdownPos,v=e.hoverData.mdownGPos,g=e.selection,m=null;e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.selecting||(m=e.findNearestElement(p[0],p[1],!0,!1));var x,b=e.hoverData.last,w=e.hoverData.down,E=[p[0]-g[2],p[1]-g[3]],_=e.dragData.possibleDragElements;if(v){var k=h[0]-v[0],P=k*k,S=h[1]-v[1],C=P+S*S;e.hoverData.isOverThresholdDrag=x=C>=e.desktopTapThreshold2}var T=n(i);x&&(e.hoverData.tapholdCancelled=!0);s=!0,t(m,["mousemove","vmousemove","tapdrag"],i,{position:{x:p[0],y:p[1]}});var D=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||l.emit("boxstart"),g[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(3===e.hoverData.which){if(x){var M={originalEvent:i,type:"cxtdrag",position:{x:p[0],y:p[1]}};w?w.emit(M):l.emit(M),e.hoverData.cxtDragged=!0,e.hoverData.cxtOver&&m===e.hoverData.cxtOver||(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit({originalEvent:i,type:"cxtdragout",position:{x:p[0],y:p[1]}}),e.hoverData.cxtOver=m,m&&m.emit({originalEvent:i,type:"cxtdragover",position:{x:p[0],y:p[1]}}))}}else if(e.hoverData.dragging){if(s=!0,l.panningEnabled()&&l.userPanningEnabled()){var I;if(e.hoverData.justStartedPan){var N=e.hoverData.mdownPos;I={x:(p[0]-N[0])*u,y:(p[1]-N[1])*u},e.hoverData.justStartedPan=!1}else I={x:E[0]*u,y:E[1]*u};l.panBy(I),e.hoverData.dragged=!0}p=e.projectIntoViewport(i.clientX,i.clientY)}else if(1!=g[4]||null!=w&&!w.isEdge()){if(w&&w.isEdge()&&w.active()&&w.unactivate(),w&&w.grabbed()||m==b||(b&&t(b,["mouseout","tapdragout"],i,{position:{x:p[0],y:p[1]}}),m&&t(m,["mouseover","tapdragover"],i,{position:{x:p[0],y:p[1]}}),e.hoverData.last=m),w)if(x){if(l.boxSelectionEnabled()&&T)w&&w.grabbed()&&(d(_),w.emit("free")),D();else if(w&&w.grabbed()&&e.nodeIsDraggable(w)){var L=!e.dragData.didDrag;L&&e.redrawHint("eles",!0),e.dragData.didDrag=!0;var A=[];e.hoverData.draggingEles||c(l.collection(_),{inDragLayer:!0});for(var B=0;B<_.length;B++){var O=_[B];if(e.nodeIsDraggable(O)&&O.grabbed()){var z=O.position();if(A.push(O),r.number(E[0])&&r.number(E[1])&&(z.x+=E[0],z.y+=E[1],L)){var R=e.hoverData.dragDelta;R&&r.number(R[0])&&r.number(R[1])&&(z.x+=R[0],z.y+=R[1])}}}e.hoverData.draggingEles=!0;var V=l.collection(A);V.dirtyCompoundBoundsCache(),V.emit("position drag"),e.redrawHint("drag",!0),e.redraw()}}else!function(){var t=e.hoverData.dragDelta=e.hoverData.dragDelta||[];0===t.length?(t.push(E[0]),t.push(E[1])):(t[0]+=E[0],t[1]+=E[1])}();s=!0}else if(x){if(e.hoverData.dragging||!l.boxSelectionEnabled()||!T&&l.panningEnabled()&&l.userPanningEnabled()){if(!e.hoverData.selecting&&l.panningEnabled()&&l.userPanningEnabled()){a(w,e.hoverData.downs)&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,g[4]=0,e.data.bgActivePosistion=o.array2point(f),e.redrawHint("select",!0),e.redraw())}}else D();w&&w.isEdge()&&w.active()&&w.unactivate()}return g[2]=p[0],g[3]=p[1],s?(i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault(),!1):void 0}},!1),e.registerBinding(window,"mouseup",function(r){if(e.hoverData.capture){e.hoverData.capture=!1;var i=e.cy,o=e.projectIntoViewport(r.clientX,r.clientY),a=e.selection,s=e.findNearestElement(o[0],o[1],!0,!1),l=e.dragData.possibleDragElements,u=e.hoverData.down,c=n(r);if(e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,u&&u.unactivate(),3===e.hoverData.which){var h={originalEvent:r,type:"cxttapend",position:{x:o[0],y:o[1]}};if(u?u.emit(h):i.emit(h),!e.hoverData.cxtDragged){var p={originalEvent:r,type:"cxttap",position:{x:o[0],y:o[1]}};u?u.emit(p):i.emit(p)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(null!=u||e.dragData.didDrag||e.hoverData.selecting||e.hoverData.dragged||n(r)||(i.$(function(e){return e.selected()}).unselect(),l.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=l=[]),t(s,["mouseup","tapend","vmouseup"],r,{position:{x:o[0],y:o[1]}}),e.dragData.didDrag||e.hoverData.dragged||e.hoverData.selecting||e.hoverData.isOverThresholdDrag||t(u,["click","tap","vclick"],r,{position:{x:o[0],y:o[1]}}),s!=u||e.dragData.didDrag||e.hoverData.selecting||null!=s&&s._private.selectable&&(e.hoverData.dragging||("additive"===i.selectionType()||c?s.selected()?s.unselect():s.select():c||(i.$(":selected").unmerge(s).unselect(),s.select())),e.redrawHint("eles",!0)),e.hoverData.selecting){var f=i.collection(e.getAllInBox(a[0],a[1],a[2],a[3]));e.redrawHint("select",!0),f.length>0&&e.redrawHint("eles",!0),i.emit("boxend");var v=function(e){return e.selectable()&&!e.selected()};"additive"===i.selectionType()?f.emit("box").stdFilter(v).select().emit("boxselect"):(c||i.$(":selected").unmerge(f).unselect(),f.emit("box").stdFilter(v).select().emit("boxselect")),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!a[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var g=u&&u.grabbed();d(l),g&&u.emit("free")}}a[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null}},!1);var m,x,b,w,E,_,k,P,S,C,T,D,M;e.registerBinding(e.container,"wheel",function(t){if(!e.scrollingPage){var n,r=e.cy,i=e.projectIntoViewport(t.clientX,t.clientY),o=[i[0]*r.zoom()+r.pan().x,i[1]*r.zoom()+r.pan().y];e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||0!==e.selection[4]?t.preventDefault():r.panningEnabled()&&r.userPanningEnabled()&&r.zoomingEnabled()&&r.userZoomingEnabled()&&(t.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150),n=null!=t.deltaY?t.deltaY/-250:null!=t.wheelDeltaY?t.wheelDeltaY/1e3:t.wheelDelta/1e3,n*=e.wheelSensitivity,1===t.deltaMode&&(n*=33),r.zoom({level:r.zoom()*Math.pow(10,n),renderedPosition:{x:o[0],y:o[1]}}))}},!0),e.registerBinding(window,"scroll",function(t){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"mouseout",function(t){var n=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseout",position:{x:n[0],y:n[1]}})},!1),e.registerBinding(e.container,"mouseover",function(t){var n=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseover",position:{x:n[0],y:n[1]}})},!1);var I,N,L,A,B=function(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))},O=function(e,t,n,r){return(n-e)*(n-e)+(r-t)*(r-t)};if(e.registerBinding(e.container,"touchstart",I=function(n){if(y(n)){e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var r=e.cy,i=e.touchData.now,o=e.touchData.earlier;if(n.touches[0]){var a=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);i[0]=a[0],i[1]=a[1]}if(n.touches[1]){a=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);i[2]=a[0],i[3]=a[1]}if(n.touches[2]){a=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);i[4]=a[0],i[5]=a[1]}if(n.touches[1]){d(e.dragData.touchDragEles);var s=e.findContainerClientCoords();S=s[0],C=s[1],T=s[2],D=s[3],m=n.touches[0].clientX-S,x=n.touches[0].clientY-C,b=n.touches[1].clientX-S,w=n.touches[1].clientY-C,M=0<=m&&m<=T&&0<=b&&b<=T&&0<=x&&x<=D&&0<=w&&w<=D;var u=r.pan(),p=r.zoom();E=B(m,x,b,w),_=O(m,x,b,w),P=[((k=[(m+b)/2,(x+w)/2])[0]-u.x)/p,(k[1]-u.y)/p];if(_<4e4&&!n.touches[2]){var f=e.findNearestElement(i[0],i[1],!0,!0),v=e.findNearestElement(i[2],i[3],!0,!0);return f&&f.isNode()?(f.activate().emit({originalEvent:n,type:"cxttapstart",position:{x:i[0],y:i[1]}}),e.touchData.start=f):v&&v.isNode()?(v.activate().emit({originalEvent:n,type:"cxttapstart",position:{x:i[0],y:i[1]}}),e.touchData.start=v):r.emit({originalEvent:n,type:"cxttapstart",position:{x:i[0],y:i[1]}}),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(n.touches[2]);else if(n.touches[1]);else if(n.touches[0]){var g=e.findNearestElements(i[0],i[1],!0,!0),I=g[0];if(null!=I&&(I.activate(),e.touchData.start=I,e.touchData.starts=g,e.nodeIsGrabbable(I))){var N=e.dragData.touchDragEles=[],L=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),I.selected()?(L=r.$(function(t){return t.selected()&&e.nodeIsGrabbable(t)}),c(L,{addToList:N})):h(I,{addToList:N}),l(I);var A=function(e){return{originalEvent:n,type:e,position:{x:i[0],y:i[1]}}};I.emit(A("grabon")),L?L.forEach(function(e){e.emit(A("grab"))}):I.emit(A("grab"))}t(I,["touchstart","tapstart","vmousedown"],n,{position:{x:i[0],y:i[1]}}),null==I&&(e.data.bgActivePosistion={x:a[0],y:a[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){!1!==e.touchData.singleTouchMoved||e.pinching||e.touchData.selecting||(t(e.touchData.start,["taphold"],n,{position:{x:i[0],y:i[1]}}),e.touchData.start||r.$(":selected").unselect())},e.tapholdDuration)}if(n.touches.length>=1){for(var z=e.touchData.startPosition=[],R=0;R<i.length;R++)z[R]=o[R]=i[R];var V=n.touches[0];e.touchData.startGPosition=[V.clientX,V.clientY]}}},!1),e.registerBinding(window,"touchmove",N=function(n){var i=e.touchData.capture;if(i||y(n)){var s=e.selection,l=e.cy,u=e.touchData.now,h=e.touchData.earlier,p=l.zoom();if(n.touches[0]){var f=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);u[0]=f[0],u[1]=f[1]}if(n.touches[1]){f=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);u[2]=f[0],u[3]=f[1]}if(n.touches[2]){f=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);u[4]=f[0],u[5]=f[1]}var v,g=e.touchData.startGPosition;if(i&&n.touches[0]&&g){for(var k=[],T=0;T<u.length;T++)k[T]=u[T]-h[T];var D=n.touches[0].clientX-g[0],I=D*D,N=n.touches[0].clientY-g[1];v=I+N*N>=e.touchTapThreshold2}if(i&&e.touchData.cxt){n.preventDefault();var L=n.touches[0].clientX-S,A=n.touches[0].clientY-C,z=n.touches[1].clientX-S,R=n.touches[1].clientY-C,V=O(L,A,z,R);if(V/_>=2.25||V>=22500){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var q={originalEvent:n,type:"cxttapend",position:{x:u[0],y:u[1]}};e.touchData.start?(e.touchData.start.unactivate().emit(q),e.touchData.start=null):l.emit(q)}}if(i&&e.touchData.cxt){q={originalEvent:n,type:"cxtdrag",position:{x:u[0],y:u[1]}};e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(q):l.emit(q),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var F=e.findNearestElement(u[0],u[1],!0,!0);e.touchData.cxtOver&&F===e.touchData.cxtOver||(e.touchData.cxtOver&&e.touchData.cxtOver.emit({originalEvent:n,type:"cxtdragout",position:{x:u[0],y:u[1]}}),e.touchData.cxtOver=F,F&&F.emit({originalEvent:n,type:"cxtdragover",position:{x:u[0],y:u[1]}}))}else if(i&&n.touches[2]&&l.boxSelectionEnabled())n.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||l.emit("boxstart"),e.touchData.selecting=!0,e.redrawHint("select",!0),s&&0!==s.length&&void 0!==s[0]?(s[2]=(u[0]+u[2]+u[4])/3,s[3]=(u[1]+u[3]+u[5])/3):(s[0]=(u[0]+u[2]+u[4])/3,s[1]=(u[1]+u[3]+u[5])/3,s[2]=(u[0]+u[2]+u[4])/3+1,s[3]=(u[1]+u[3]+u[5])/3+1),s[4]=1,e.touchData.selecting=!0,e.redraw();else if(i&&n.touches[1]&&l.zoomingEnabled()&&l.panningEnabled()&&l.userZoomingEnabled()&&l.userPanningEnabled()){if(n.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),ee=e.dragData.touchDragEles){e.redrawHint("drag",!0);for(var j=0;j<ee.length;j++){var X=ee[j]._private;X.grabbed=!1,X.rscratch.inDragLayer=!1}}L=n.touches[0].clientX-S,A=n.touches[0].clientY-C,z=n.touches[1].clientX-S,R=n.touches[1].clientY-C;var Y=B(L,A,z,R),G=Y/E;if(M){var W=(L-m+(z-b))/2,H=(A-x+(R-w))/2,U=l.zoom(),Z=U*G,$=l.pan(),Q=P[0]*U+$.x,K=P[1]*U+$.y,J={x:-Z/U*(Q-$.x-W)+Q,y:-Z/U*(K-$.y-H)+K};if(e.touchData.start&&e.touchData.start.active()){var ee=e.dragData.touchDragEles;d(ee),e.redrawHint("drag",!0),e.redrawHint("eles",!0),e.touchData.start.unactivate().emit("free")}l.viewport({zoom:Z,pan:J,cancelOnFailedZoom:!0}),E=Y,m=L,x=A,b=z,w=R,e.pinching=!0}if(n.touches[0]){f=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);u[0]=f[0],u[1]=f[1]}if(n.touches[1]){f=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);u[2]=f[0],u[3]=f[1]}if(n.touches[2]){f=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);u[4]=f[0],u[5]=f[1]}}else if(n.touches[0]){var te=e.touchData.start,ne=e.touchData.last;if(e.hoverData.draggingEles||e.swipePanning||(F=e.findNearestElement(u[0],u[1],!0,!0)),i&&null!=te&&n.preventDefault(),i&&null!=te&&e.nodeIsDraggable(te))if(v){ee=e.dragData.touchDragEles;var re=!e.dragData.didDrag;re&&c(l.collection(ee),{inDragLayer:!0});for(var ie=0;ie<ee.length;ie++){var oe=ee[ie];if(e.nodeIsDraggable(oe)&&oe.grabbed()){e.dragData.didDrag=!0;var ae=oe.position();if(r.number(k[0])&&r.number(k[1])&&(ae.x+=k[0],ae.y+=k[1]),re)e.redrawHint("eles",!0),(le=e.touchData.dragDelta)&&r.number(le[0])&&r.number(le[1])&&(ae.x+=le[0],ae.y+=le[1])}}var se=l.collection(ee);se.dirtyCompoundBoundsCache(),se.emit("position drag"),e.hoverData.draggingEles=!0,e.redrawHint("drag",!0),e.touchData.startPosition[0]==h[0]&&e.touchData.startPosition[1]==h[1]&&e.redrawHint("eles",!0),e.redraw()}else{var le;0===(le=e.touchData.dragDelta=e.touchData.dragDelta||[]).length?(le.push(k[0]),le.push(k[1])):(le[0]+=k[0],le[1]+=k[1])}if(t(te||F,["touchmove","tapdrag","vmousemove"],n,{position:{x:u[0],y:u[1]}}),te&&te.grabbed()||F==ne||(ne&&ne.emit({originalEvent:n,type:"tapdragout",position:{x:u[0],y:u[1]}}),F&&F.emit({originalEvent:n,type:"tapdragover",position:{x:u[0],y:u[1]}})),e.touchData.last=F,i)for(j=0;j<u.length;j++)u[j]&&e.touchData.startPosition[j]&&v&&(e.touchData.singleTouchMoved=!0);if(i&&(null==te||te.isEdge())&&l.panningEnabled()&&l.userPanningEnabled()){a(te,e.touchData.starts)&&(n.preventDefault(),e.swipePanning?l.panBy({x:k[0]*p,y:k[1]*p}):v&&(e.swipePanning=!0,l.panBy({x:D*p,y:N*p}),te&&(te.unactivate(),e.data.bgActivePosistion||(e.data.bgActivePosistion=o.array2point(e.touchData.startPosition)),e.redrawHint("select",!0),e.touchData.start=null)));f=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);u[0]=f[0],u[1]=f[1]}}for(T=0;T<u.length;T++)h[T]=u[T]}},!1),e.registerBinding(window,"touchcancel",L=function(t){var n=e.touchData.start;e.touchData.capture=!1,n&&n.unactivate()}),e.registerBinding(window,"touchend",A=function(n){var r=e.touchData.start;if(e.touchData.capture){e.touchData.capture=!1,n.preventDefault();var i=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var o,a=e.cy,s=a.zoom(),l=e.touchData.now,u=e.touchData.earlier;if(n.touches[0]){var c=e.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);l[0]=c[0],l[1]=c[1]}if(n.touches[1]){c=e.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);l[2]=c[0],l[3]=c[1]}if(n.touches[2]){c=e.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);l[4]=c[0],l[5]=c[1]}if(r&&r.unactivate(),e.touchData.cxt){if(o={originalEvent:n,type:"cxttapend",position:{x:l[0],y:l[1]}},r?r.emit(o):a.emit(o),!e.touchData.cxtDragged){var h={originalEvent:n,type:"cxttap",position:{x:l[0],y:l[1]}};r?r.emit(h):a.emit(h)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!n.touches[2]&&a.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var p=a.collection(e.getAllInBox(i[0],i[1],i[2],i[3]));i[0]=void 0,i[1]=void 0,i[2]=void 0,i[3]=void 0,i[4]=0,e.redrawHint("select",!0),a.emit("boxend");p.emit("box").stdFilter(function(e){return e.selectable()&&!e.selected()}).select().emit("boxselect"),p.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(null!=r&&r.unactivate(),n.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(n.touches[1]);else if(n.touches[0]);else if(!n.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var f=e.dragData.touchDragEles;if(null!=r){var v=r._private.grabbed;d(f),e.redrawHint("drag",!0),e.redrawHint("eles",!0),v&&r.emit("free"),t(r,["touchend","tapend","vmouseup","tapdragout"],n,{position:{x:l[0],y:l[1]}}),r.unactivate(),e.touchData.start=null}else{var g=e.findNearestElement(l[0],l[1],!0,!0);t(g,["touchend","tapend","vmouseup","tapdragout"],n,{position:{x:l[0],y:l[1]}})}var y=e.touchData.startPosition[0]-l[0],m=y*y,x=e.touchData.startPosition[1]-l[1],b=(m+x*x)*s*s;null!=r&&!e.dragData.didDrag&&r._private.selectable&&b<e.touchTapThreshold2&&!e.pinching&&("single"===a.selectionType()?(a.$(":selected").unmerge(r).unselect(),r.select()):r.selected()?r.unselect():r.select(),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved||t(r,["tap","vclick"],n,{position:{x:l[0],y:l[1]}}),e.touchData.singleTouchMoved=!0}for(var w=0;w<l.length;w++)u[w]=l[w];e.dragData.didDrag=!1,0===n.touches.length&&(e.touchData.dragDelta=[],e.touchData.startPosition=null,e.touchData.startGPosition=null),n.touches.length<2&&(e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}},!1),"undefined"==typeof TouchEvent){var z=[],R=function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}},V=function(e){z.push(function(e){return{event:e,touch:R(e)}}(e))},q=function(e){for(var t=0;t<z.length;t++){if(z[t].event.pointerId===e.pointerId)return void z.splice(t,1)}},F=function(e){e.touches=z.map(function(e){return e.touch})},j=function(e){return"mouse"===e.pointerType||4===e.pointerType};e.registerBinding(e.container,"pointerdown",function(e){j(e)||(e.preventDefault(),V(e),F(e),I(e))}),e.registerBinding(e.container,"pointerup",function(e){j(e)||(q(e),F(e),A(e))}),e.registerBinding(e.container,"pointercancel",function(e){j(e)||(q(e),F(e),L())}),e.registerBinding(e.container,"pointermove",function(e){j(e)||(e.preventDefault(),function(e){var t=z.filter(function(t){return t.event.pointerId===e.pointerId})[0];t.event=e,t.touch=R(e)}(e),F(e),N(e))})}},e.exports=a},function(e,t,n){"use strict";var r=n(2),i={generatePolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl("polygon",e,t,n,r,i,this.points)},intersectLine:function(e,t,n,i,o,a,s){return r.polygonIntersectLine(o,a,this.points,e,t,n/2,i/2,s)},checkPoint:function(e,t,n,i,o,a,s){return r.pointInsidePolygon(e,t,this.points,a,s,i,o,[0,-1],n)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,i,o,a,s){return r.intersectLineEllipse(o,a,e,t,n/2+s,i/2+s)},checkPoint:function(e,t,n,i,o,a,s){return r.checkInEllipse(e,t,i,o,a,s,n)}}},generateRoundRectangle:function(){return this.nodeShapes.roundrectangle={renderer:this,name:"roundrectangle",points:r.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,i,o,a,s){return r.roundRectangleIntersectLine(o,a,e,t,n,i,s)},checkPoint:function(e,t,n,i,o,a,s){var l=r.getRoundRectangleRadius(i,o),u=2*l;return!!r.pointInsidePolygon(e,t,this.points,a,s,i,o-u,[0,-1],n)||(!!r.pointInsidePolygon(e,t,this.points,a,s,i-u,o,[0,-1],n)||(!!r.checkInEllipse(e,t,u,u,a-i/2+l,s-o/2+l,n)||(!!r.checkInEllipse(e,t,u,u,a+i/2-l,s-o/2+l,n)||(!!r.checkInEllipse(e,t,u,u,a+i/2-l,s+o/2-l,n)||!!r.checkInEllipse(e,t,u,u,a-i/2+l,s+o/2-l,n)))))}}},generateCutRectangle:function(){return this.nodeShapes.cutrectangle={renderer:this,name:"cutrectangle",cornerLength:r.getCutRectangleCornerLength(),points:r.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},generateCutTrianglePts:function(e,t,n,r){var i=this.cornerLength,o=t/2,a=e/2,s=n-a,l=n+a,u=r-o,c=r+o;return{topLeft:[s,u+i,s+i,u,s+i,u+i],topRight:[l-i,u,l,u+i,l-i,u+i],bottomRight:[l,c-i,l-i,c,l-i,c-i],bottomLeft:[s+i,c,s,c-i,s+i,c-i]}},intersectLine:function(e,t,n,i,o,a,s){var l=this.generateCutTrianglePts(n+2*s,i+2*s,e,t),u=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return r.polygonIntersectLine(o,a,u,e,t)},checkPoint:function(e,t,n,i,o,a,s){if(r.pointInsidePolygon(e,t,this.points,a,s,i,o-2*this.cornerLength,[0,-1],n))return!0;if(r.pointInsidePolygon(e,t,this.points,a,s,i-2*this.cornerLength,o,[0,-1],n))return!0;var l=this.generateCutTrianglePts(i,o,a,s);return r.pointInsidePolygonPoints(e,t,l.topLeft)||r.pointInsidePolygonPoints(e,t,l.topRight)||r.pointInsidePolygonPoints(e,t,l.bottomRight)||r.pointInsidePolygonPoints(e,t,l.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:r.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,i,o,a,s){var l=this.generateBarrelBezierPts(n+2*s,i+2*s,e,t),u=function(e){var t=r.qbezierPtAt({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.15),n=r.qbezierPtAt({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.5),i=r.qbezierPtAt({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.85);return[e[0],e[1],t.x,t.y,n.x,n.y,i.x,i.y,e[4],e[5]]},c=[].concat(u(l.topLeft),u(l.topRight),u(l.bottomRight),u(l.bottomLeft));return r.polygonIntersectLine(o,a,c,e,t)},generateBarrelBezierPts:function(e,t,n,i){var o=t/2,a=e/2,s=n-a,l=n+a,u=i-o,c=i+o,h=r.getBarrelCurveConstants(e,t),d=h.heightOffset,p=h.widthOffset,f=h.ctrlPtOffsetPct*e,v={topLeft:[s,u+d,s+f,u,s+p,u],topRight:[l-p,u,l-f,u,l,u+d],bottomRight:[l,c-d,l-f,c,l-p,c],bottomLeft:[s+p,c,s+f,c,s,c-d]};return v.topLeft.isTop=!0,v.topRight.isTop=!0,v.bottomLeft.isBottom=!0,v.bottomRight.isBottom=!0,v},checkPoint:function(e,t,n,i,o,a,s){var l=r.getBarrelCurveConstants(i,o),u=l.heightOffset,c=l.widthOffset;if(r.pointInsidePolygon(e,t,this.points,a,s,i,o-2*u,[0,-1],n))return!0;if(r.pointInsidePolygon(e,t,this.points,a,s,i-2*c,o,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(i,o,a,s),d=function(e,t,n){var i=n[4],o=n[2],a=n[0],s=n[5],l=n[1],u=Math.min(i,a),c=Math.max(i,a),h=Math.min(s,l),d=Math.max(s,l);if(u<=e&&e<=c&&h<=t&&t<=d){var p=r.bezierPtsToQuadCoeff(i,o,a),f=r.solveQuadratic(p[0],p[1],p[2],e).filter(function(e){return 0<=e&&e<=1});if(f.length>0)return f[0]}return null},p=Object.keys(h),f=0;f<p.length;f++){var v=h[p[f]],g=d(e,t,v);if(null!=g){var y=v[5],m=v[3],x=v[1],b=r.qbezierAt(y,m,x,g);if(v.isTop&&b<=t)return!0;if(v.isBottom&&t<=b)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottomroundrectangle",points:r.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,n,r,i){this.renderer.nodeShapeImpl(this.name,e,t,n,r,i)},intersectLine:function(e,t,n,i,o,a,s){var l=e-(n/2+s),u=t-(i/2+s),c=u,h=e+(n/2+s),d=r.finiteLinesIntersect(o,a,e,t,l,u,h,c,!1);return d.length>0?d:r.roundRectangleIntersectLine(o,a,e,t,n,i,s)},checkPoint:function(e,t,n,i,o,a,s){var l=r.getRoundRectangleRadius(i,o),u=2*l;if(r.pointInsidePolygon(e,t,this.points,a,s,i,o-u,[0,-1],n))return!0;if(r.pointInsidePolygon(e,t,this.points,a,s,i-u,o,[0,-1],n))return!0;var c=i/2+2*n,h=o/2+2*n,d=[a-c,s-h,a-c,s,a+c,s,a+c,s-h];return!!r.pointInsidePolygonPoints(e,t,d)||(!!r.checkInEllipse(e,t,u,u,a+i/2-l,s+o/2-l,n)||!!r.checkInEllipse(e,t,u,u,a-i/2+l,s+o/2-l,n))}}},registerNodeShapes:function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",r.generateUnitNgonPointsFitToSquare(3,0)),this.generatePolygon("rectangle",r.generateUnitNgonPointsFitToSquare(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle(),this.generatePolygon("diamond",[0,1,1,0,0,-1,-1,0]),this.generatePolygon("pentagon",r.generateUnitNgonPointsFitToSquare(5,0)),this.generatePolygon("hexagon",r.generateUnitNgonPointsFitToSquare(6,0)),this.generatePolygon("heptagon",r.generateUnitNgonPointsFitToSquare(7,0)),this.generatePolygon("octagon",r.generateUnitNgonPointsFitToSquare(8,0));var n=new Array(20),i=r.generateUnitNgonPoints(5,0),o=r.generateUnitNgonPoints(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<o.length/2;s++)o[2*s]*=a,o[2*s+1]*=a;for(s=0;s<5;s++)n[4*s]=i[2*s],n[4*s+1]=i[2*s+1],n[4*s+2]=o[2*s],n[4*s+3]=o[2*s+1];n=r.fitPolygonToSquare(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("concavehexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]),this.generatePolygon("tag",[-1,-1,.25,-1,1,0,.25,1,-1,1]),e.makePolygon=function(e){var n,r="polygon-"+e.join("$");return(n=this[r])?n:t.generatePolygon(r,e)}}};e.exports=i},function(e,t,n){"use strict";var r=n(1),i={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(e){e=e||r.staticEmptyObject();var t=this;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0),void 0===t.lastDrawTime&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e},beforeRender:function(e,t){if(!this.destroyed){t=t||0;var n=this.beforeRenderCallbacks;n.push({fn:e,priority:t}),n.sort(function(e,t){return t.priority-e.priority})}}},o=function(e,t,n){for(var r=e.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(t,n)};i.startRenderLoop=function(){var e=this;if(!e.renderLoopStarted){e.renderLoopStarted=!0;r.requestAnimationFrame(function t(n){if(!e.destroyed){if(e.requestedFrame&&!e.skipFrame){o(e,!0,n);var i=r.performanceNow();e.render(e.renderOptions);var a=e.lastDrawTime=r.performanceNow();void 0===e.averageRedrawTime&&(e.averageRedrawTime=a-i),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var s=a-i;e.redrawTotalTime+=s,e.lastRedrawTime=s,e.averageRedrawTime=e.averageRedrawTime/2+s/2,e.requestedFrame=!1}else o(e,!1,n);e.skipFrame=!1,r.requestAnimationFrame(t)}})}},e.exports=i},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(125),a=n(126),s=u,l=u.prototype;function u(e){var t=this;t.data={canvases:new Array(l.CANVAS_LAYERS),contexts:new Array(l.CANVAS_LAYERS),canvasNeedsRedraw:new Array(l.CANVAS_LAYERS),bufferCanvases:new Array(l.BUFFER_COUNT),bufferContexts:new Array(l.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color: rgba(0,0,0,0);";t.data.canvasContainer=document.createElement("div");var r=t.data.canvasContainer.style;t.data.canvasContainer.setAttribute("style",n),r.position="relative",r.zIndex="0",r.overflow="hidden";var s=e.cy.container();s.appendChild(t.data.canvasContainer),(s.getAttribute("style")||"").indexOf(n)<0&&s.setAttribute("style",(s.getAttribute("style")||"")+n);for(var u=0;u<l.CANVAS_LAYERS;u++){var c=t.data.canvases[u]=document.createElement("canvas");t.data.contexts[u]=c.getContext("2d"),c.setAttribute("style","-webkit-user-select: none; -moz-user-select: -moz-none; user-select: none; -webkit-tap-highlight-color: rgba(0,0,0,0); outline-style: none;"+(i.ms()?" -ms-touch-action: none; touch-action: none; ":"")),c.style.position="absolute",c.setAttribute("data-id","layer"+u),c.style.zIndex=String(l.CANVAS_LAYERS-u),t.data.canvasContainer.appendChild(c),t.data.canvasNeedsRedraw[u]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[l.NODE].setAttribute("data-id","layer"+l.NODE+"-node"),t.data.canvases[l.SELECT_BOX].setAttribute("data-id","layer"+l.SELECT_BOX+"-selectbox"),t.data.canvases[l.DRAG].setAttribute("data-id","layer"+l.DRAG+"-drag");for(u=0;u<l.BUFFER_COUNT;u++)t.data.bufferCanvases[u]=document.createElement("canvas"),t.data.bufferContexts[u]=t.data.bufferCanvases[u].getContext("2d"),t.data.bufferCanvases[u].style.position="absolute",t.data.bufferCanvases[u].setAttribute("data-id","buffer"+u),t.data.bufferCanvases[u].style.zIndex=String(-u-1),t.data.bufferCanvases[u].style.visibility="hidden";t.pathsEnabled=!0,t.data.eleTxrCache=new o(t),t.data.lyrTxrCache=new a(t,t.data.eleTxrCache),t.onUpdateEleCalcs(function(e,n){for(var r=0;r<n.length;r++){var i=n[r],o=i._private.rstyle,a=o.dirtyEvents;if(i.isNode()&&a&&1===a.length&&a.position);else if(t.data.eleTxrCache.invalidateElement(i),i.isParent()&&a.style){var s=o.prevParentOpacity,l=i.pstyle("opacity").pfValue;if(o.prevParentOpacity=l,s!==l)for(var u=i.descendants(),c=0;c<u.length;c++)t.data.eleTxrCache.invalidateElement(u[c])}}n.length>0&&t.data.lyrTxrCache.invalidateElements(n)})}l.CANVAS_LAYERS=3,l.SELECT_BOX=0,l.DRAG=1,l.NODE=2,l.BUFFER_COUNT=3,l.TEXTURE_BUFFER=0,l.MOTIONBLUR_BUFFER_NODE=1,l.MOTIONBLUR_BUFFER_DRAG=2,l.redrawHint=function(e,t){var n=this;switch(e){case"eles":n.data.canvasNeedsRedraw[l.NODE]=t;break;case"drag":n.data.canvasNeedsRedraw[l.DRAG]=t;break;case"select":n.data.canvasNeedsRedraw[l.SELECT_BOX]=t}};var c="undefined"!=typeof Path2D;l.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},l.usePaths=function(){return c&&this.pathsEnabled},[n(127),n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(135),n(136)].forEach(function(e){r.extend(l,e)}),e.exports=s},function(e,t,n){"use strict";var r=n(2),i=n(1),o=n(9),a=n(19),s={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},l=function(e){this.renderer=e,this.onDequeues=[],this.setupDequeueing()},u=l.prototype;u.reasons=s,u.getTextureQueue=function(e){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[e]=this.eleImgCaches[e]||[]},u.getRetiredTextureQueue=function(e){var t=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return t[e]=t[e]||[]},u.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new o(function(e,t){return t.reqs-e.reqs})},u.getElementIdToQueue=function(){return this.eleIdToCacheQueue=this.eleIdToCacheQueue||{}},u.getElement=function(e,t,n,i,o){var a=this,l=this.renderer,u=e._private.rscratch,c=l.cy.zoom();if(0===t.w||0===t.h||!e.visible())return null;if(null==i&&(i=Math.ceil(r.log2(c*n))),i<-4)i=-4;else if(c>=3.99||i>2)return null;var h,d=Math.pow(2,i),p=t.h*d,f=t.w*d,v=u.imgCaches=u.imgCaches||{},g=v[i];if(g)return g;if(h=p<=25?25:p<=50?50:50*Math.ceil(p/50),p>1024||f>1024||e.isEdge()||e.isParent())return null;var y=a.getTextureQueue(h),m=y[y.length-2],x=function(){return a.recycleTexture(h,f)||a.addTexture(h,f)};m||(m=y[y.length-1]),m||(m=x()),m.width-m.usedWidth<f&&(m=x());for(var b,w=l.eleTextBiggerThanMin(e,d),E=function(e){return e&&e.scaledLabelShown===w},_=o&&o===s.dequeue,k=o&&o===s.highQuality,P=o&&o===s.downscale,S=i+1;S<=2;S++){if(M=v[S]){b=M;break}}var C=b&&b.level===i+1?b:null,T=function(){m.context.drawImage(C.texture.canvas,C.x,0,C.width,C.height,m.usedWidth,0,f,p)};if(m.context.setTransform(1,0,0,1,0,0),m.context.clearRect(m.usedWidth,0,f,h),E(C))T();else if(E(b)){if(!k)return a.queueElement(e,b.level-1),b;for(S=b.level;S>i;S--)C=a.getElement(e,t,n,S,s.downscale);T()}else{var D;if(!_&&!k&&!P)for(S=i-1;S>=-4;S--){var M;if(M=v[S]){D=M;break}}if(E(D))return a.queueElement(e,i),D;m.context.translate(m.usedWidth,0),m.context.scale(d,d),l.drawElement(m.context,e,t,w),m.context.scale(1/d,1/d),m.context.translate(-m.usedWidth,0)}return g=v[i]={ele:e,x:m.usedWidth,texture:m,level:i,scale:d,width:f,height:p,scaledLabelShown:w},m.usedWidth+=Math.ceil(f+8),m.eleCaches.push(g),a.checkTextureFullness(m),g},u.invalidateElement=function(e){var t=e._private.rscratch.imgCaches;if(t)for(var n=-4;n<=2;n++){var r=t[n];if(r){var o=r.texture;o.invalidatedWidth+=r.width,t[n]=null,i.removeFromArray(o.eleCaches,r),this.removeFromQueue(e),this.checkTextureUtility(o)}}},u.checkTextureUtility=function(e){e.invalidatedWidth>=.5*e.width&&this.retireTexture(e)},u.checkTextureFullness=function(e){var t=this.getTextureQueue(e.height);e.usedWidth/e.width>.8&&e.fullnessChecks>=10?i.removeFromArray(t,e):e.fullnessChecks++},u.retireTexture=function(e){var t=e.height,n=this.getTextureQueue(t);i.removeFromArray(n,e),e.retired=!0;for(var r=e.eleCaches,o=0;o<r.length;o++){var a=r[o],s=a.ele,l=a.level,u=s._private.rscratch.imgCaches;u&&(u[l]=null)}i.clearArray(r),this.getRetiredTextureQueue(t).push(e)},u.addTexture=function(e,t){var n={};return this.getTextureQueue(e).push(n),n.eleCaches=[],n.height=e,n.width=Math.max(1024,t),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=document.createElement("canvas"),n.canvas.width=n.width,n.canvas.height=n.height,n.context=n.canvas.getContext("2d"),n},u.recycleTexture=function(e,t){for(var n=this.getTextureQueue(e),r=this.getRetiredTextureQueue(e),o=0;o<r.length;o++){var a=r[o];if(a.width>=t)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,i.clearArray(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),i.removeFromArray(r,a),n.push(a),a}},u.queueElement=function(e,t){var n=this.getElementQueue(),r=this.getElementIdToQueue(),i=e.id(),o=r[i];if(o)o.level=Math.max(o.level,t),o.reqs++,n.updateItem(o);else{var a={ele:e,level:t,reqs:1};n.push(a),r[i]=a}},u.dequeue=function(e){for(var t=this.getElementQueue(),n=this.getElementIdToQueue(),r=[],i=0;i<1&&t.size()>0;i++){var o=t.pop(),a=o.ele;if(null==a._private.rscratch.imgCaches[o.level]){n[a.id()]=null,r.push(o);var l=a.boundingBox();this.getElement(a,l,e,o.level,s.dequeue)}}return r},u.removeFromQueue=function(e){var t=this.getElementQueue(),n=this.getElementIdToQueue(),r=n[e.id()];null!=r&&(r.reqs=i.MAX_INT,t.updateItem(r),t.pop(),n[e.id()]=null)},u.onDequeue=function(e){this.onDequeues.push(e)},u.offDequeue=function(e){i.removeFromArray(this.onDequeues,e)},u.setupDequeueing=a.setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){(0,e.onDequeues[n])(t)}},shouldRedraw:function(e,t,n,i){for(var o=0;o<t.length;o++){var a=t[o].ele.boundingBox();if(r.boundingBoxesIntersect(a,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}}),e.exports=l},function(e,t,n){"use strict";var r=n(1),i=n(2),o=n(9),a=n(0),s=n(19),l=function(e,t){var n=this,i=n.renderer=e;n.layersByLevel={},n.firstGet=!0,n.lastInvalidationTime=r.performanceNow()-500,n.skipping=!1,i.beforeRender(function(e,t){t-n.lastInvalidationTime<=250?n.skipping=!0:n.skipping=!1});n.layersQueue=new o(function(e,t){return t.reqs-e.reqs}),n.eleTxrCache=t,n.setupEleCacheInvalidation(),n.setupDequeueing()},u=l.prototype,c=0,h=Math.pow(2,53)-1;function d(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)}u.makeLayer=function(e,t){var n=Math.pow(2,t),r=Math.ceil(e.w*n),i=Math.ceil(e.h*n),o=document.createElement("canvas");o.width=r,o.height=i;var a={id:c=++c%h,bb:e,level:t,width:r,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,l=-a.bb.x1,u=-a.bb.y1;return s.scale(n,n),s.translate(l,u),a},u.getLayers=function(e,t,n){var o=this,a=o.renderer.cy.zoom(),s=o.firstGet;if(o.firstGet=!1,null==n)if((n=Math.ceil(i.log2(a*t)))<-4)n=-4;else if(a>=3.99||n>2)return null;o.validateLayersElesOrdering(n,e);var l,u,c=o.layersByLevel,h=Math.pow(2,n),d=c[n]=c[n]||[];if(o.levelIsComplete(n,e))return d;!function(){var t=function(t){if(o.validateLayersElesOrdering(t,e),o.levelIsComplete(t,e))return u=c[t],!0},i=function(e){if(!u)for(var r=n+e;-4<=r&&r<=2&&!t(r);r+=e);};i(1),i(-1);for(var a=d.length-1;a>=0;a--){var s=d[a];s.invalid&&r.removeFromArray(d,s)}}();var p=function(t){var r=(t=t||{}).after;if(function(){if(!l){l=i.makeBoundingBox();for(var t=0;t<e.length;t++)i.updateBoundingBox(l,e[t].boundingBox())}}(),l.w*h*(l.h*h)>16e6)return null;var a=o.makeLayer(l,n);if(null!=r){var s=d.indexOf(r)+1;d.splice(s,0,a)}else(void 0===t.insert||t.insert)&&d.unshift(a);return a};if(o.skipping&&!s)return null;for(var f=null,v=e.length/1,g=!s,y=0;y<e.length;y++){var m=e[y],x=m._private.rscratch,b=x.imgLayerCaches=x.imgLayerCaches||{},w=b[n];if(w)f=w;else{if((!f||f.eles.length>=v||!i.boundingBoxInBoundingBox(f.bb,m.boundingBox()))&&!(f=p({insert:!0,after:f})))return null;u||g?o.queueLayer(f,m):o.drawEleInLayer(f,m,n,t),f.eles.push(m),b[n]=f}}return u||(g?null:d)},u.getEleLevelForLayerLevel=function(e,t){return e},u.drawEleInLayer=function(e,t,n,r){var i=this.renderer,o=e.context,a=t.boundingBox();if(0!==a.w&&0!==a.h&&t.visible()){var s=this.eleTxrCache,l=s.reasons.highQuality;n=this.getEleLevelForLayerLevel(n,r);var u=s.getElement(t,a,null,n,l);u?(d(o,!1),o.drawImage(u.texture.canvas,u.x,0,u.width,u.height,a.x1,a.y1,a.w,a.h),d(o,!0)):i.drawElement(o,t)}},u.levelIsComplete=function(e,t){var n=this.layersByLevel[e];if(!n||0===n.length)return!1;for(var r=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0)return!1;if(o.invalid)return!1;r+=o.eles.length}return r===t.length},u.validateLayersElesOrdering=function(e,t){var n=this.layersByLevel[e];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],o=-1,a=0;a<t.length;a++)if(i.eles[0]===t[a]){o=a;break}if(o<0)this.invalidateLayer(i);else{var s=o;for(a=0;a<i.eles.length;a++)if(i.eles[a]!==t[s+a]){this.invalidateLayer(i);break}}}},u.updateElementsInLayers=function(e,t){for(var n=a.element(e[0]),r=0;r<e.length;r++)for(var i=n?null:e[r],o=n?e[r]:e[r].ele,s=o._private.rscratch,l=s.imgLayerCaches=s.imgLayerCaches||{},u=-4;u<=2;u++){var c=l[u];c&&(i&&this.getEleLevelForLayerLevel(c.level)!==i.level||t(c,o,i))}},u.haveLayers=function(){for(var e=!1,t=-4;t<=2;t++){var n=this.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e},u.invalidateElements=function(e){var t=this;t.lastInvalidationTime=r.performanceNow(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,function(e,n,r){t.invalidateLayer(e)})},u.invalidateLayer=function(e){if(this.lastInvalidationTime=r.performanceNow(),!e.invalid){var t=e.level,n=e.eles,i=this.layersByLevel[t];r.removeFromArray(i,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var o=0;o<n.length;o++){var a=n[o]._private.rscratch.imgLayerCaches;a&&(a[t]=null)}}},u.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function(e,n,r){var i=e.replacement;if(i||((i=e.replacement=t.makeLayer(e.bb,e.level)).replaces=e,i.eles=e.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)t.queueLayer(i,i.eles[o])})},u.setupEleCacheInvalidation=function(){var e=this,t=[];var n=r.debounce(function(){e.refineElementTextures(t),t=[]},50);e.eleTxrCache.onDequeue(function(e){for(var r=0;r<e.length;r++)t.push(e[r]);n()})},u.queueLayer=function(e,t){var n=this.layersQueue,r=e.elesQueue,i=r.hasId=r.hasId||{};if(!e.replacement){if(t){if(i[t.id()])return;r.push(t),i[t.id()]=!0}e.reqs?(e.reqs++,n.updateItem(e)):(e.reqs=1,n.push(e))}},u.dequeue=function(e){for(var t=this.layersQueue,n=[],r=0;r<1&&0!==t.size();){var i=t.peek();if(i.replacement)t.pop();else if(i.replaces&&i!==i.replaces.replacement)t.pop();else if(i.invalid)t.pop();else{var o=i.elesQueue.shift();o&&(this.drawEleInLayer(i,o,i.level,e),r++),0===n.length&&n.push(!0),0===i.elesQueue.length&&(t.pop(),i.reqs=0,i.replaces&&this.applyLayerReplacement(i),this.requestRedraw())}}return n},u.applyLayerReplacement=function(e){var t=this.layersByLevel[e.level],n=e.replaces,r=t.indexOf(n);if(!(r<0||n.invalid)){t[r]=e;for(var i=0;i<e.eles.length;i++){var o=e.eles[i]._private,a=o.imgLayerCaches=o.imgLayerCaches||{};a&&(a[e.level]=e)}this.requestRedraw()}},u.requestRedraw=r.debounce(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100),u.setupDequeueing=s.setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,t){return e.dequeue(t)},onDeqd:r.noop,shouldRedraw:r.trueify,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}}),e.exports=l},function(e,t,n){"use strict";var r,i={};i.arrowShapeImpl=function(e){return(r||(r={polygon:function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.lineTo(r.x,r.y)}},"triangle-backcurve":function(e,t,n){for(var r,i=0;i<t.length;i++){var o=t[i];0===i&&(r=o),e.lineTo(o.x,o.y)}e.quadraticCurveTo(n.x,n.y,r.x,r.y)},"triangle-tee":function(e,t,n){e.beginPath&&e.beginPath();for(var r=t,i=0;i<r.length;i++){var o=r[i];e.lineTo(o.x,o.y)}e.closePath&&e.closePath(),e.beginPath&&e.beginPath();var a=n,s=n[0];e.moveTo(s.x,s.y);for(i=0;i<a.length;i++){o=a[i];e.lineTo(o.x,o.y)}e.closePath&&e.closePath()},"triangle-cross":function(e,t,n){e.beginPath&&e.beginPath();for(var r=t,i=0;i<r.length;i++){var o=r[i];e.lineTo(o.x,o.y)}e.closePath&&e.closePath(),e.beginPath&&e.beginPath();var a=n,s=n[0];e.moveTo(s.x,s.y);for(i=0;i<a.length;i++){o=a[i];e.lineTo(o.x,o.y)}e.closePath&&e.closePath()},circle:function(e,t,n,r){e.arc(t,n,r,0,2*Math.PI,!1)}}))[e]},e.exports=i},function(e,t,n){"use strict";var r=n(2),i={drawElement:function(e,t,n,r){t.isNode()?this.drawNode(e,t,n,r):this.drawEdge(e,t,n,r)},drawCachedElement:function(e,t,n,i){var o=t.boundingBox();if(0!==o.w&&0!==o.h&&(!i||r.boundingBoxesIntersect(o,i))){var a=this.data.eleTxrCache.getElement(t,o,n);null!=a?e.drawImage(a.texture.canvas,a.x,0,a.width,a.height,o.x1,o.y1,o.w,o.h):this.drawElement(e,t)}},drawElements:function(e,t){for(var n=0;n<t.length;n++){var r=t[n];this.drawElement(e,r)}},drawCachedElements:function(e,t,n,r){for(var i=0;i<t.length;i++){var o=t[i];this.drawCachedElement(e,o,n,r)}},drawCachedNodes:function(e,t,n,r){for(var i=0;i<t.length;i++){var o=t[i];o.isNode()&&this.drawCachedElement(e,o,n,r)}},drawLayeredElements:function(e,t,n,r){var i=this.data.lyrTxrCache.getLayers(t,n);if(i)for(var o=0;o<i.length;o++){var a=i[o],s=a.bb;0!==s.w&&0!==s.h&&e.drawImage(a.canvas,s.x1,s.y1,s.w,s.h)}else this.drawCachedElements(e,t,n,r)},drawDebugPoints:function(e,t){for(var n=function(t,n,r){e.fillStyle=r,e.fillRect(t-1,n-1,3,3)},r=0;r<t.length;r++){var i=t[r],o=i._private.rscratch;if(i.isNode()){var a=i.position();n(a.x,a.y,"magenta")}else{for(var s=o.allpts,l=0;l+1<s.length;l+=2){n(s[l],s[l+1],"cyan")}n(o.midX,o.midY,"yellow")}}}};e.exports=i},function(e,t,n){"use strict";var r={drawEdge:function(e,t,n,r){var i=this,o=t._private.rscratch,a=i.usePaths();if(t.visible()&&!o.badLine&&null!=o.allpts&&!isNaN(o.allpts[0])){var s=void 0;n&&(s=n,e.translate(-s.x1,-s.y1));var l=2*t.pstyle("overlay-padding").pfValue,u=t.pstyle("overlay-opacity").value,c=t.pstyle("overlay-color").value,h=t.pstyle("line-color").value,d=t.pstyle("opacity").value,p=t.pstyle("line-style").value,f=t.pstyle("width").pfValue,v=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;e.lineWidth=f,e.lineCap="butt",i.strokeStyle(e,h[0],h[1],h[2],n),i.drawEdgePath(t,e,o.allpts,p)},g=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;i.drawArrowheads(e,t,n)};if(e.lineJoin="round","yes"===t.pstyle("ghost").value){var y=t.pstyle("ghost-offset-x").pfValue,m=t.pstyle("ghost-offset-y").pfValue,x=t.pstyle("ghost-opacity").value,b=d*x;e.translate(y,m),v(b),g(b),e.translate(-y,-m)}v(),g(),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;e.lineWidth=l,"self"!==o.edgeType||a?e.lineCap="round":e.lineCap="butt",i.strokeStyle(e,c[0],c[1],c[2],n),i.drawEdgePath(t,e,o.allpts,"solid")}(),i.drawElementText(e,t,r),n&&e.translate(s.x1,s.y1)}},drawEdgePath:function(e,t,n,r){var i=e._private.rscratch,o=t,a=void 0,s=!1,l=this.usePaths();if(l){var u=n.join("$");i.pathCacheKey&&i.pathCacheKey===u?(a=t=i.pathCache,s=!0):(a=t=new Path2D,i.pathCacheKey=u,i.pathCache=a)}if(o.setLineDash)switch(r){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash([6,3]);break;case"solid":o.setLineDash([])}if(!s&&!i.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(n[0],n[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var c=2;c+3<n.length;c+=4)t.quadraticCurveTo(n[c],n[c+1],n[c+2],n[c+3]);break;case"straight":case"segments":case"haystack":for(var h=2;h+1<n.length;h+=2)t.lineTo(n[h],n[h+1])}t=o,l?t.stroke(a):t.stroke(),t.setLineDash&&t.setLineDash([])},drawArrowheads:function(e,t,n){var r=t._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(e,t,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(e,t,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(e,t,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(e,t,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},drawArrowhead:function(e,t,n,r,i,o,a){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(o)||null==o)){var s=t.pstyle(n+"-arrow-shape").value;if("none"!==s){var l="hollow"===t.pstyle(n+"-arrow-fill").value?"both":"filled",u=t.pstyle(n+"-arrow-fill").value,c=t.pstyle("width").pfValue,h=t.pstyle("opacity").value;void 0===a&&(a=h);var d=e.globalCompositeOperation;1===a&&"hollow"!==u||(e.globalCompositeOperation="destination-out",this.fillStyle(e,255,255,255,1),this.strokeStyle(e,255,255,255,1),this.drawArrowShape(t,n,e,l,c,s,r,i,o),e.globalCompositeOperation=d);var p=t.pstyle(n+"-arrow-color").value;this.fillStyle(e,p[0],p[1],p[2],a),this.strokeStyle(e,p[0],p[1],p[2],a),this.drawArrowShape(t,n,e,u,c,s,r,i,o)}}},drawArrowShape:function(e,t,n,r,i,o,a,s,l){var u=this.usePaths(),c=e._private.rscratch,h=!1,d=void 0,p=n,f={x:a,y:s},v=e.pstyle("arrow-scale").value,g=this.getArrowWidth(i,v),y=this.arrowShapes[o];if(u){var m=g+"$"+o+"$"+l+"$"+a+"$"+s;c.arrowPathCacheKey=c.arrowPathCacheKey||{},c.arrowPathCache=c.arrowPathCache||{},c.arrowPathCacheKey[t]===m?(d=n=c.arrowPathCache[t],h=!0):(d=n=new Path2D,c.arrowPathCacheKey[t]=m,c.arrowPathCache[t]=d)}n.beginPath&&n.beginPath(),h||y.draw(n,g,l,f,i),!y.leavePathOpen&&n.closePath&&n.closePath(),n=p,"filled"!==r&&"both"!==r||(u?n.fill(d):n.fill()),"hollow"!==r&&"both"!==r||(n.lineWidth=y.matchEdgeWidth?i:1,n.lineJoin="miter",u?n.stroke(d):n.stroke())}};e.exports=r},function(e,t,n){"use strict";var r={safeDrawImage:function(e,t,n,r,i,o,a,s,l,u){i<=0||o<=0||l<=0||u<=0||e.drawImage(t,n,r,i,o,a,s,l,u)},drawInscribedImage:function(e,t,n,r,i){var o=this,a=n.position(),s=a.x,l=a.y,u=n.cy().style(),c=u.getIndexedStyle.bind(u),h=c(n,"background-fit","value",r),d=c(n,"background-repeat","value",r),p=n.width(),f=n.height(),v=2*n.padding(),g=p+("inner"===c(n,"background-width-relative-to","value",r)?0:v),y=f+("inner"===c(n,"background-height-relative-to","value",r)?0:v),m=n._private.rscratch,x="node"===n.pstyle("background-clip").value,b=c(n,"background-image-opacity","value",r)*i,w=t.width||t.cachedW,E=t.height||t.cachedH;null!=w&&null!=E||(document.body.appendChild(t),w=t.cachedW=t.width||t.offsetWidth,E=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var _=w,k=E;if("auto"!==c(n,"background-width","value",r)&&(_="%"===c(n,"background-width","units",r)?c(n,"background-width","pfValue",r)*g:c(n,"background-width","pfValue",r)),"auto"!==c(n,"background-height","value",r)&&(k="%"===c(n,"background-height","units",r)?c(n,"background-height","pfValue",r)*y:c(n,"background-height","pfValue",r)),0!==_&&0!==k){if("contain"===h)_*=P=Math.min(g/_,y/k),k*=P;else if("cover"===h){var P;_*=P=Math.max(g/_,y/k),k*=P}var S=s-g/2;"%"===c(n,"background-position-x","units",r)?S+=(g-_)*c(n,"background-position-x","pfValue",r):S+=c(n,"background-position-x","pfValue",r);var C=l-y/2;"%"===c(n,"background-position-y","units",r)?C+=(y-k)*c(n,"background-position-y","pfValue",r):C+=c(n,"background-position-y","pfValue",r),m.pathCache&&(S-=s,C-=l,s=0,l=0);var T=e.globalAlpha;if(e.globalAlpha=b,"no-repeat"===d)x&&(e.save(),m.pathCache?e.clip(m.pathCache):(o.nodeShapes[o.getNodeShape(n)].draw(e,s,l,g,y),e.clip())),o.safeDrawImage(e,t,0,0,w,E,S,C,_,k),x&&e.restore();else{var D=e.createPattern(t,d);e.fillStyle=D,o.nodeShapes[o.getNodeShape(n)].draw(e,s,l,g,y),e.translate(S,C),e.fill(),e.translate(-S,-C)}e.globalAlpha=T}}};e.exports=r},function(e,t,n){"use strict";var r=n(1),i=n(2),o={};o.eleTextBiggerThanMin=function(e,t){if(!t){var n=e.cy().zoom(),r=this.getPixelRatio(),o=Math.ceil(i.log2(n*r));t=Math.pow(2,o)}return!(e.pstyle("font-size").pfValue*t<e.pstyle("min-zoomed-font-size").pfValue)},o.drawElementText=function(e,t,n){var r=this;if(void 0===n){if(!r.eleTextBiggerThanMin(t))return}else if(!n)return;if(t.isNode()){if(!(o=t.pstyle("label"))||!o.value)return;var i=t.pstyle("text-halign").strValue;t.pstyle("text-valign").strValue;switch(i){case"left":e.textAlign="right";break;case"right":e.textAlign="left";break;default:e.textAlign="center"}e.textBaseline="bottom"}else{var o=t.pstyle("label"),a=t.pstyle("source-label"),s=t.pstyle("target-label");if(!(o&&o.value||a&&a.value||s&&s.value))return;e.textAlign="center",e.textBaseline="bottom"}r.drawText(e,t),t.isEdge()&&(r.drawText(e,t,"source"),r.drawText(e,t,"target"))},o.drawNodeText=o.drawEdgeText=o.drawElementText,o.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((t=this.fontCaches[n]).context===e)return t;return t={context:e},this.fontCaches.push(t),t},o.setupTextStyle=function(e,t){var n=t.effectiveOpacity(),r=t.pstyle("font-style").strValue,i=t.pstyle("font-size").pfValue+"px",o=t.pstyle("font-family").strValue,a=t.pstyle("font-weight").strValue,s=t.pstyle("text-opacity").value*t.pstyle("opacity").value*n,l=t.pstyle("text-outline-opacity").value*s,u=t.pstyle("color").value,c=t.pstyle("text-outline-color").value,h=t._private.fontKey,d=this.getFontCache(e);d.key!==h&&(e.font=r+" "+a+" "+i+" "+o,d.key=h),e.lineJoin="round",this.fillStyle(e,u[0],u[1],u[2],s),this.strokeStyle(e,c[0],c[1],c[2],l)},o.drawText=function(e,t,n){var i=t._private.rscratch,o=t.effectiveOpacity();if(0!==o&&0!==t.pstyle("text-opacity").value){var a,s,l,u,c,h,d=r.getPrefixedProperty(i,"labelX",n),p=r.getPrefixedProperty(i,"labelY",n),f=this.getLabelText(t,n);if(null!=f&&""!==f&&!isNaN(d)&&!isNaN(p)){this.setupTextStyle(e,t);var v=n?n+"-":"",g=r.getPrefixedProperty(i,"labelWidth",n),y=r.getPrefixedProperty(i,"labelHeight",n),m=r.getPrefixedProperty(i,"labelAngle",n),x=t.pstyle(v+"text-margin-x").pfValue,b=t.pstyle(v+"text-margin-y").pfValue,w=t.isEdge(),E=(t.isNode(),t.pstyle("text-halign").value),_=t.pstyle("text-valign").value;w&&(E="center",_="center"),d+=x,p+=b;var k,P=t.pstyle("text-rotation");if(0!==(k="autorotate"===P.strValue?w?m:0:"none"===P.strValue?0:P.pfValue)){var S=d,C=p;e.translate(S,C),e.rotate(k),d=0,p=0}switch(_){case"top":break;case"center":p+=y/2;break;case"bottom":p+=y}var T=t.pstyle("text-background-opacity").value,D=t.pstyle("text-border-opacity").value,M=t.pstyle("text-border-width").pfValue,I=t.pstyle("text-background-padding").pfValue;if(T>0||M>0&&D>0){var N=d-I;switch(E){case"left":N-=g;break;case"center":N-=g/2}var L=p-y-I,A=g+2*I,B=y+2*I;if(T>0){var O=e.fillStyle,z=t.pstyle("text-background-color").value;e.fillStyle="rgba("+z[0]+","+z[1]+","+z[2]+","+T*o+")","roundrectangle"==t.pstyle("text-background-shape").strValue?(a=e,s=N,l=L,u=A,c=B,h=(h=2)||5,a.beginPath(),a.moveTo(s+h,l),a.lineTo(s+u-h,l),a.quadraticCurveTo(s+u,l,s+u,l+h),a.lineTo(s+u,l+c-h),a.quadraticCurveTo(s+u,l+c,s+u-h,l+c),a.lineTo(s+h,l+c),a.quadraticCurveTo(s,l+c,s,l+c-h),a.lineTo(s,l+h),a.quadraticCurveTo(s,l,s+h,l),a.closePath(),a.fill()):e.fillRect(N,L,A,B),e.fillStyle=O}if(M>0&&D>0){var R=e.strokeStyle,V=e.lineWidth,q=t.pstyle("text-border-color").value,F=t.pstyle("text-border-style").value;if(e.strokeStyle="rgba("+q[0]+","+q[1]+","+q[2]+","+D*o+")",e.lineWidth=M,e.setLineDash)switch(F){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=M/4,e.setLineDash([]);break;case"solid":e.setLineDash([])}if(e.strokeRect(N,L,A,B),"double"===F){var j=M/2;e.strokeRect(N+j,L+j,A-2*j,B-2*j)}e.setLineDash&&e.setLineDash([]),e.lineWidth=V,e.strokeStyle=R}}var X=2*t.pstyle("text-outline-width").pfValue;if(X>0&&(e.lineWidth=X),"wrap"===t.pstyle("text-wrap").value){var Y=r.getPrefixedProperty(i,"labelWrapCachedLines",n),G=y/Y.length;switch(_){case"top":p-=(Y.length-1)*G;break;case"center":case"bottom":p-=(Y.length-1)*G}for(var W=0;W<Y.length;W++)X>0&&e.strokeText(Y[W],d,p),e.fillText(Y[W],d,p),p+=G}else X>0&&e.strokeText(f,d,p),e.fillText(f,d,p);0!==k&&(e.rotate(-k),e.translate(-S,-C))}}},e.exports=o},function(e,t,n){"use strict";var r=n(0),i={drawNode:function(e,t,n,i){var o,a,s=this,l=t._private,u=l.rscratch,c=t.position();if(r.number(c.x)&&r.number(c.y)&&t.visible()){var h=t.effectiveOpacity(),d=s.usePaths(),p=void 0,f=!1,v=t.padding();o=t.width()+2*v,a=t.height()+2*v;var g=void 0;n&&(g=n,e.translate(-g.x1,-g.y1));for(var y=t.pstyle("background-image").value,m=new Array(y.length),x=new Array(y.length),b=0,w=0;w<y.length;w++){var E=y[w];if(m[w]=null!=E&&"none"!==E){var _=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",w);b++,x[w]=s.getCachedImage(E,_,function(){t.emitAndNotify("background")})}}var k=t.pstyle("background-blacken").value,P=t.pstyle("border-width").pfValue,S=t.pstyle("background-color").value,C=t.pstyle("background-opacity").value*h,T=t.pstyle("border-color").value,D=t.pstyle("border-style").value,M=t.pstyle("border-opacity").value*h;e.lineJoin="miter";var I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;s.fillStyle(e,S[0],S[1],S[2],t)},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;s.strokeStyle(e,T[0],T[1],T[2],t)},L=t.pstyle("shape").strValue,A=t.pstyle("shape-polygon-points").pfValue;if(d){var B=L+"$"+o+"$"+a+("polygon"===L?"$"+A.join("$"):"");e.translate(c.x,c.y),u.pathCacheKey===B?(p=u.pathCache,f=!0):(p=new Path2D,u.pathCacheKey=B,u.pathCache=p)}var O,z,R,V=function(){if(!f){var n=c;d&&(n={x:0,y:0}),s.nodeShapes[s.getNodeShape(t)].draw(p||e,n.x,n.y,o,a)}d?e.fill(p):e.fill()},q=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,r=l.backgrounding,i=0,o=0;o<x.length;o++)m[o]&&x[o].complete&&!x[o].error&&(i++,s.drawInscribedImage(e,x[o],t,o,n));l.backgrounding=!(i===b),r!==l.backgrounding&&t.updateStyle(!1)},F=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;s.hasPie(t)&&(s.drawPie(e,t,r),n&&(d||s.nodeShapes[s.getNodeShape(t)].draw(e,c.x,c.y,o,a)))},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,n=(k>0?k:-k)*t,r=k>0?0:255;0!==k&&(s.fillStyle(e,r,r,r,n),d?e.fill(p):e.fill())},X=function(){if(P>0){if(e.lineWidth=P,e.lineCap="butt",e.setLineDash)switch(D){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}if(d?e.stroke(p):e.stroke(),"double"===D){e.lineWidth=P/3;var t=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",d?e.stroke(p):e.stroke(),e.globalCompositeOperation=t}e.setLineDash&&e.setLineDash([])}};if("yes"===t.pstyle("ghost").value){var Y=t.pstyle("ghost-offset-x").pfValue,G=t.pstyle("ghost-offset-y").pfValue,W=t.pstyle("ghost-opacity").value,H=W*h;e.translate(Y,G),I(W*C),V(),q(H),F(0!==k||0!==P),j(H),N(W*M),X(),e.translate(-Y,-G)}I(),V(),q(),F(0!==k||0!==P),j(),N(),X(),d&&e.translate(-c.x,-c.y),s.drawElementText(e,t,i),O=t.pstyle("overlay-padding").pfValue,z=t.pstyle("overlay-opacity").value,R=t.pstyle("overlay-color").value,z>0&&(s.fillStyle(e,R[0],R[1],R[2],z),s.nodeShapes.roundrectangle.draw(e,c.x,c.y,o+2*O,a+2*O),e.fill()),n&&e.translate(g.x1,g.y1)}},hasPie:function(e){return(e=e[0])._private.hasPie},drawPie:function(e,t,n,r){t=t[0],r=r||t.position();var i=t.cy().style(),o=t.pstyle("pie-size"),a=r.x,s=r.y,l=t.width(),u=t.height(),c=Math.min(l,u)/2,h=0;this.usePaths()&&(a=0,s=0),"%"===o.units?c*=o.pfValue:void 0!==o.pfValue&&(c=o.pfValue/2);for(var d=1;d<=i.pieBackgroundN;d++){var p=t.pstyle("pie-"+d+"-background-size").value,f=t.pstyle("pie-"+d+"-background-color").value,v=t.pstyle("pie-"+d+"-background-opacity").value*n,g=p/100;g+h>1&&(g=1-h);var y=1.5*Math.PI+2*Math.PI*h,m=y+2*Math.PI*g;0===p||h>=1||h+g>1||(e.beginPath(),e.moveTo(a,s),e.arc(a,s,c,y,m),e.closePath(),this.fillStyle(e,f[0],f[1],f[2],v),e.fill(),h+=g)}}};e.exports=i},function(e,t,n){"use strict";var r={},i=n(1);r.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},r.paintCache=function(e){for(var t,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if((t=n[i]).context===e){r=!1;break}return r&&(t={context:e},n.push(t)),t},r.fillStyle=function(e,t,n,r,i){e.fillStyle="rgba("+t+","+n+","+r+","+i+")"},r.strokeStyle=function(e,t,n,r,i){e.strokeStyle="rgba("+t+","+n+","+r+","+i+")"},r.matchCanvasSize=function(e){var t=this,n=t.data,r=t.findContainerClientCoords(),i=r[2],o=r[3],a=t.getPixelRatio(),s=t.motionBlurPxRatio;e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]&&e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG]||(a=s);var l,u=i*a,c=o*a;if(u!==t.canvasWidth||c!==t.canvasHeight){t.fontCaches=null;var h=n.canvasContainer;h.style.width=i+"px",h.style.height=o+"px";for(var d=0;d<t.CANVAS_LAYERS;d++)(l=n.canvases[d]).width=u,l.height=c,l.style.width=i+"px",l.style.height=o+"px";for(d=0;d<t.BUFFER_COUNT;d++)(l=n.bufferCanvases[d]).width=u,l.height=c,l.style.width=i+"px",l.style.height=o+"px";t.textureMult=1,a<=1&&(l=n.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,l.width=u*t.textureMult,l.height=c*t.textureMult),t.canvasWidth=u,t.canvasHeight=c}},r.renderTo=function(e,t,n,r){this.render({forcedContext:e,forcedZoom:t,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},r.render=function(e){var t=(e=e||i.staticEmptyObject()).forcedContext,n=e.drawAllLayers,r=e.drawOnlyNodeLayer,o=e.forcedZoom,a=e.forcedPan,s=this,l=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,u=s.cy,c=s.data,h=c.canvasNeedsRedraw,d=s.textureOnViewport&&!t&&(s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming),p=void 0!==e.motionBlur?e.motionBlur:s.motionBlur,f=s.motionBlurPxRatio,v=u.hasCompoundNodes(),g=s.hoverData.draggingEles,y=!(!s.hoverData.selecting&&!s.touchData.selecting),m=p=p&&!t&&s.motionBlurEnabled&&!y;t||(s.prevPxRatio!==l&&(s.invalidateContainerClientCoordsCache(),s.matchCanvasSize(s.container),s.redrawHint("eles",!0),s.redrawHint("drag",!0)),s.prevPxRatio=l),!t&&s.motionBlurTimeout&&clearTimeout(s.motionBlurTimeout),p&&(null==s.mbFrames&&(s.mbFrames=0),s.mbFrames++,s.mbFrames<3&&(m=!1),s.mbFrames>s.minMbLowQualFrames&&(s.motionBlurPxRatio=s.mbPxRBlurry)),s.clearingMotionBlur&&(s.motionBlurPxRatio=1),s.textureDrawLastFrame&&!d&&(h[s.NODE]=!0,h[s.SELECT_BOX]=!0);var x=u.style()._private.coreStyle,b=u.zoom(),w=void 0!==o?o:b,E=u.pan(),_={x:E.x,y:E.y},k={zoom:b,pan:{x:E.x,y:E.y}},P=s.prevViewport;void 0===P||k.zoom!==P.zoom||k.pan.x!==P.pan.x||k.pan.y!==P.pan.y||g&&!v||(s.motionBlurPxRatio=1),a&&(_=a),w*=l,_.x*=l,_.y*=l;var S=s.getCachedZSortedEles();function C(e,t,n,r,i){var o=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",s.fillStyle(e,255,255,255,s.motionBlurTransparency),e.fillRect(t,n,r,i),e.globalCompositeOperation=o}function T(e,r){var i,l,u,h;s.clearingMotionBlur||e!==c.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]&&e!==c.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG]?(i=_,l=w,u=s.canvasWidth,h=s.canvasHeight):(i={x:E.x*f,y:E.y*f},l=b*f,u=s.canvasWidth*f,h=s.canvasHeight*f),e.setTransform(1,0,0,1,0,0),"motionBlur"===r?C(e,0,0,u,h):t||void 0!==r&&!r||e.clearRect(0,0,u,h),n||(e.translate(i.x,i.y),e.scale(l,l)),a&&e.translate(a.x,a.y),o&&e.scale(o,o)}if(d||(s.textureDrawLastFrame=!1),d){if(s.textureDrawLastFrame=!0,!s.textureCache){s.textureCache={},s.textureCache.bb=u.mutableElements().boundingBox(),s.textureCache.texture=s.data.bufferCanvases[s.TEXTURE_BUFFER];var D=s.data.bufferContexts[s.TEXTURE_BUFFER];D.setTransform(1,0,0,1,0,0),D.clearRect(0,0,s.canvasWidth*s.textureMult,s.canvasHeight*s.textureMult),s.render({forcedContext:D,drawOnlyNodeLayer:!0,forcedPxRatio:l*s.textureMult}),(k=s.textureCache.viewport={zoom:u.zoom(),pan:u.pan(),width:s.canvasWidth,height:s.canvasHeight}).mpan={x:(0-k.pan.x)/k.zoom,y:(0-k.pan.y)/k.zoom}}h[s.DRAG]=!1,h[s.NODE]=!1;var M=c.contexts[s.NODE],I=s.textureCache.texture;k=s.textureCache.viewport;s.textureCache.bb,M.setTransform(1,0,0,1,0,0),p?C(M,0,0,k.width,k.height):M.clearRect(0,0,k.width,k.height);var N=x["outside-texture-bg-color"].value,L=x["outside-texture-bg-opacity"].value;s.fillStyle(M,N[0],N[1],N[2],L),M.fillRect(0,0,k.width,k.height);b=u.zoom();T(M,!1),M.clearRect(k.mpan.x,k.mpan.y,k.width/k.zoom/l,k.height/k.zoom/l),M.drawImage(I,k.mpan.x,k.mpan.y,k.width/k.zoom/l,k.height/k.zoom/l)}else s.textureOnViewport&&!t&&(s.textureCache=null);var A=u.extent(),B=s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming||s.hoverData.draggingEles,O=s.hideEdgesOnViewport&&B,z=[];if(z[s.NODE]=!h[s.NODE]&&p&&!s.clearedForMotionBlur[s.NODE]||s.clearingMotionBlur,z[s.NODE]&&(s.clearedForMotionBlur[s.NODE]=!0),z[s.DRAG]=!h[s.DRAG]&&p&&!s.clearedForMotionBlur[s.DRAG]||s.clearingMotionBlur,z[s.DRAG]&&(s.clearedForMotionBlur[s.DRAG]=!0),h[s.NODE]||n||r||z[s.NODE]){var R=p&&!z[s.NODE]&&1!==f;T(M=t||(R?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_NODE]:c.contexts[s.NODE]),p&&!R?"motionBlur":void 0),O?s.drawCachedNodes(M,S.nondrag,l,A):s.drawLayeredElements(M,S.nondrag,l,A),s.debug&&s.drawDebugPoints(M,S.nondrag),n||p||(h[s.NODE]=!1)}if(!r&&(h[s.DRAG]||n||z[s.DRAG])){R=p&&!z[s.DRAG]&&1!==f;T(M=t||(R?s.data.bufferContexts[s.MOTIONBLUR_BUFFER_DRAG]:c.contexts[s.DRAG]),p&&!R?"motionBlur":void 0),O?s.drawCachedNodes(M,S.drag,l,A):s.drawCachedElements(M,S.drag,l,A),s.debug&&s.drawDebugPoints(M,S.drag),n||p||(h[s.DRAG]=!1)}if(s.showFps||!r&&h[s.SELECT_BOX]&&!n){if(T(M=t||c.contexts[s.SELECT_BOX]),1==s.selection[4]&&(s.hoverData.selecting||s.touchData.selecting)){b=s.cy.zoom();var V=x["selection-box-border-width"].value/b;M.lineWidth=V,M.fillStyle="rgba("+x["selection-box-color"].value[0]+","+x["selection-box-color"].value[1]+","+x["selection-box-color"].value[2]+","+x["selection-box-opacity"].value+")",M.fillRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]),V>0&&(M.strokeStyle="rgba("+x["selection-box-border-color"].value[0]+","+x["selection-box-border-color"].value[1]+","+x["selection-box-border-color"].value[2]+","+x["selection-box-opacity"].value+")",M.strokeRect(s.selection[0],s.selection[1],s.selection[2]-s.selection[0],s.selection[3]-s.selection[1]))}if(c.bgActivePosistion&&!s.hoverData.selecting){b=s.cy.zoom();var q=c.bgActivePosistion;M.fillStyle="rgba("+x["active-bg-color"].value[0]+","+x["active-bg-color"].value[1]+","+x["active-bg-color"].value[2]+","+x["active-bg-opacity"].value+")",M.beginPath(),M.arc(q.x,q.y,x["active-bg-size"].pfValue/b,0,2*Math.PI),M.fill()}var F=s.lastRedrawTime;if(s.showFps&&F){F=Math.round(F);var j=Math.round(1e3/F);M.setTransform(1,0,0,1,0,0),M.fillStyle="rgba(255, 0, 0, 0.75)",M.strokeStyle="rgba(255, 0, 0, 0.75)",M.lineWidth=1,M.fillText("1 frame = "+F+" ms = "+j+" fps",0,20);M.strokeRect(0,30,250,20),M.fillRect(0,30,250*Math.min(j/60,1),20)}n||(h[s.SELECT_BOX]=!1)}if(p&&1!==f){var X=c.contexts[s.NODE],Y=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_NODE],G=c.contexts[s.DRAG],W=s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_DRAG],H=function(e,t,n){e.setTransform(1,0,0,1,0,0),n||!m?e.clearRect(0,0,s.canvasWidth,s.canvasHeight):C(e,0,0,s.canvasWidth,s.canvasHeight);var r=f;e.drawImage(t,0,0,s.canvasWidth*r,s.canvasHeight*r,0,0,s.canvasWidth,s.canvasHeight)};(h[s.NODE]||z[s.NODE])&&(H(X,Y,z[s.NODE]),h[s.NODE]=!1),(h[s.DRAG]||z[s.DRAG])&&(H(G,W,z[s.DRAG]),h[s.DRAG]=!1)}s.prevViewport=k,s.clearingMotionBlur&&(s.clearingMotionBlur=!1,s.motionBlurCleared=!0,s.motionBlur=!0),p&&(s.motionBlurTimeout=setTimeout(function(){s.motionBlurTimeout=null,s.clearedForMotionBlur[s.NODE]=!1,s.clearedForMotionBlur[s.DRAG]=!1,s.motionBlur=!1,s.clearingMotionBlur=!d,s.mbFrames=0,h[s.NODE]=!0,h[s.DRAG]=!0,s.redraw()},100)),t||u.emit("render")},e.exports=r},function(e,t,n){"use strict";for(var r=n(2),i={drawPolygonPath:function(e,t,n,r,i,o){var a=r/2,s=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+a*o[0],n+s*o[1]);for(var l=1;l<o.length/2;l++)e.lineTo(t+a*o[2*l],n+s*o[2*l+1]);e.closePath()},drawRoundRectanglePath:function(e,t,n,i,o){var a=i/2,s=o/2,l=r.getRoundRectangleRadius(i,o);e.beginPath&&e.beginPath(),e.moveTo(t,n-s),e.arcTo(t+a,n-s,t+a,n,l),e.arcTo(t+a,n+s,t,n+s,l),e.arcTo(t-a,n+s,t-a,n,l),e.arcTo(t-a,n-s,t,n-s,l),e.lineTo(t,n-s),e.closePath()},drawBottomRoundRectanglePath:function(e,t,n,i,o){var a=i/2,s=o/2,l=r.getRoundRectangleRadius(i,o);e.beginPath&&e.beginPath(),e.moveTo(t,n-s),e.lineTo(t+a,n-s),e.lineTo(t+a,n),e.arcTo(t+a,n+s,t,n+s,l),e.arcTo(t-a,n+s,t-a,n,l),e.lineTo(t-a,n-s),e.lineTo(t,n-s),e.closePath()},drawCutRectanglePath:function(e,t,n,i,o){var a=i/2,s=o/2,l=r.getCutRectangleCornerLength();e.beginPath&&e.beginPath(),e.moveTo(t-a+l,n-s),e.lineTo(t+a-l,n-s),e.lineTo(t+a,n-s+l),e.lineTo(t+a,n+s-l),e.lineTo(t+a-l,n+s),e.lineTo(t-a+l,n+s),e.lineTo(t-a,n+s-l),e.lineTo(t-a,n-s+l),e.closePath()},drawBarrelPath:function(e,t,n,i,o){var a=i/2,s=o/2,l=t-a,u=t+a,c=n-s,h=n+s,d=r.getBarrelCurveConstants(i,o),p=d.widthOffset,f=d.heightOffset,v=d.ctrlPtOffsetPct*p;e.beginPath&&e.beginPath(),e.moveTo(l,c+f),e.lineTo(l,h-f),e.quadraticCurveTo(l+v,h,l+p,h),e.lineTo(u-p,h),e.quadraticCurveTo(u-v,h,u,h-f),e.lineTo(u,c+f),e.quadraticCurveTo(u-v,c,u-p,c),e.lineTo(l+p,c),e.quadraticCurveTo(l+v,c,l,c+f),e.closePath()}},o=Math.sin(0),a=Math.cos(0),s={},l={},u=Math.PI/40,c=0*Math.PI;c<2*Math.PI;c+=u)s[c]=Math.sin(c),l[c]=Math.cos(c);i.drawEllipsePath=function(e,t,n,r,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,n,r/2,i/2,0,0,2*Math.PI);else for(var c,h,d=r/2,p=i/2,f=0*Math.PI;f<2*Math.PI;f+=u)c=t-d*s[f]*o+d*l[f]*a,h=n+p*l[f]*o+p*s[f]*a,0===f?e.moveTo(c,h):e.lineTo(c,h);e.closePath()},e.exports=i},function(e,t,n){"use strict";var r=n(0),i={};function o(e){var t=e.indexOf(",");return e.substr(t+1)}function a(e,t,n){var r=t.toDataURL(n,e.quality);switch(e.output){case"blob":return function(e,t){for(var n=atob(e),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return new Blob([r],{type:t})}(o(r),n);case"base64":return o(r);case"base64uri":default:return r}}i.createBuffer=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,[n,n.getContext("2d")]},i.bufferCanvasImage=function(e){var t=this.cy,n=t.mutableElements().boundingBox(),i=this.findContainerClientCoords(),o=e.full?Math.ceil(n.w):i[2],a=e.full?Math.ceil(n.h):i[3],s=r.number(e.maxWidth)||r.number(e.maxHeight),l=this.getPixelRatio(),u=1;if(void 0!==e.scale)o*=e.scale,a*=e.scale,u=e.scale;else if(s){var c=1/0,h=1/0;r.number(e.maxWidth)&&(c=u*e.maxWidth/o),r.number(e.maxHeight)&&(h=u*e.maxHeight/a),o*=u=Math.min(c,h),a*=u}s||(o*=l,a*=l,u*=l);var d=document.createElement("canvas");d.width=o,d.height=a,d.style.width=o+"px",d.style.height=a+"px";var p=d.getContext("2d");if(o>0&&a>0){p.clearRect(0,0,o,a),p.globalCompositeOperation="source-over";var f=this.getCachedZSortedEles();if(e.full)p.translate(-n.x1*u,-n.y1*u),p.scale(u,u),this.drawElements(p,f),p.scale(1/u,1/u),p.translate(n.x1*u,n.y1*u);else{var v=t.pan(),g={x:v.x*u,y:v.y*u};u*=t.zoom(),p.translate(g.x,g.y),p.scale(u,u),this.drawElements(p,f),p.scale(1/u,1/u),p.translate(-g.x,-g.y)}e.bg&&(p.globalCompositeOperation="destination-over",p.fillStyle=e.bg,p.rect(0,0,o,a),p.fill())}return d},i.png=function(e){return a(e,this.bufferCanvasImage(e),"image/png")},i.jpg=function(e){return a(e,this.bufferCanvasImage(e),"image/jpeg")},e.exports=i},function(e,t,n){"use strict";var r={nodeShapeImpl:function(e,t,n,r,i,o,a){switch(e){case"ellipse":return this.drawEllipsePath(t,n,r,i,o);case"polygon":return this.drawPolygonPath(t,n,r,i,o,a);case"roundrectangle":return this.drawRoundRectanglePath(t,n,r,i,o);case"cutrectangle":return this.drawCutRectanglePath(t,n,r,i,o);case"bottomroundrectangle":return this.drawBottomRoundRectanglePath(t,n,r,i,o);case"barrel":return this.drawBarrelPath(t,n,r,i,o)}}};e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(1),o=n(18),a=function e(){if(!(this instanceof e))return new e;this.length=0},s=a.prototype;s.instanceString=function(){return"stylesheet"},s.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},s.css=function(e,t){var n=this.length-1;if(r.string(e))this[n].properties.push({name:e,value:t});else if(r.plainObject(e))for(var a=e,s=0;s<o.properties.length;s++){var l=o.properties[s],u=a[l.name];if(void 0===u&&(u=a[i.dash2camel(l.name)]),void 0!==u){var c=l.name,h=u;this[n].properties.push({name:c,value:h})}}return this},s.style=s.css,s.generateStyle=function(e){var t=new o(e);return this.appendToStyle(t)},s.appendToStyle=function(e){for(var t=0;t<this.length;t++){var n=this[t],r=n.selector,i=n.properties;e.selector(r);for(var o=0;o<i.length;o++){var a=i[o];e.css(a.name,a.value)}}return e},e.exports=a},function(e,t,n){"use strict";e.exports="3.2.12"}])}),function(e){var t={PADDING:10,GOLDEN_SECTION:(1+Math.sqrt(5))/2,FLOAT_EPSILON:1e-4,MAX_INERATIONS:100};e.applyPacking=function(e,n,r,i,o){void 0===o&&(o=1);var a=0,s=0,l=n,u=r,c=(o=void 0!==o?o:1,i=void 0!==i?i:0,0),h=0,d=0,p=0,f=[];function v(e,t){f=[],c=0,h=0,p=s;for(var n=0;n<e.length;n++)g(e[n],t);return Math.abs(c/h-o)}function g(e,n){for(var r=void 0,i=0;i<f.length;i++)if(f[i].space_left>=e.height&&f[i].x+f[i].width+e.width+t.PADDING-n<=t.FLOAT_EPSILON){r=f[i];break}f.push(e),void 0!==r?(e.x=r.x+r.width+t.PADDING,e.y=r.bottom,e.space_left=e.height,e.bottom=e.y,r.space_left-=e.height+t.PADDING,r.bottom+=e.height+t.PADDING):(e.y=p,p+=e.height+t.PADDING,e.x=a,e.bottom=e.y,e.space_left=e.height),e.y+e.height-h>-t.FLOAT_EPSILON&&(h=e.y+e.height-s),e.x+e.width-c>-t.FLOAT_EPSILON&&(c=e.x+e.width-a)}0!=e.length&&(function(e){e.forEach(function(e){var t,n,r,o,a;t=e,n=Number.MAX_VALUE,r=Number.MAX_VALUE,o=0,a=0,t.array.forEach(function(e){var t=void 0!==e.width?e.width:i,s=void 0!==e.height?e.height:i;t/=2,s/=2,o=Math.max(e.x+t,o),n=Math.min(e.x-t,n),a=Math.max(e.y+s,a),r=Math.min(e.y-s,r)}),t.width=o-n,t.height=a-r})}(e),function(e,n){var r=Number.POSITIVE_INFINITY,i=0;e.sort(function(e,t){return t.height-e.height}),d=e.reduce(function(e,t){return e.width<t.width?e.width:t.width});for(var o=f=d,a=g=function(e){var n=0;return e.forEach(function(e){return n+=e.width+t.PADDING}),n}(e),s=0,l=Number.MAX_VALUE,u=Number.MAX_VALUE,c=-1,h=Number.MAX_VALUE,p=Number.MAX_VALUE;h>d||p>t.FLOAT_EPSILON;){if(1!=c)var f=a-(a-o)/t.GOLDEN_SECTION,l=v(e,f);if(0!=c)var g=o+(a-o)/t.GOLDEN_SECTION,u=v(e,g);if(h=Math.abs(f-g),p=Math.abs(l-u),l<r&&(r=l,i=f),u<r&&(r=u,i=g),l>u?(o=f,f=g,l=u,c=1):(a=g,g=f,u=l,c=0),s++>100)break}v(e,i)}(e),function(e){e.forEach(function(e){var t={x:0,y:0};e.array.forEach(function(e){t.x+=e.x,t.y+=e.y}),t.x/=e.array.length,t.y/=e.array.length;var n={x:t.x-e.width/2,y:t.y-e.height/2},r={x:e.x-n.x+l/2-c/2,y:e.y-n.y+u/2-h/2};e.array.forEach(function(e){e.x+=r.x,e.y+=r.y})})}(e))},e.separateGraphs=function(e,t){for(var n={},r={},i=[],o=0,a=0;a<t.length;a++){var s=t[a],l=s.source,u=s.target;r[l.index]?r[l.index].push(u):r[l.index]=[u],r[u.index]?r[u.index].push(l):r[u.index]=[l]}for(a=0;a<e.length;a++){var c=e[a];n[c.index]||h(c,!0)}function h(e,t){if(void 0===n[e.index]){t&&(o++,i.push({array:[]})),n[e.index]=o,i[o-1].array.push(e);var a=r[e.index];if(a)for(var s=0;s<a.length;s++)h(a[s],!1)}}return i}}(cola||(cola={})),function(e){!function(e){var t=function(){function e(e){this.scale=e,this.AB=0,this.AD=0,this.A2=0}return e.prototype.addVariable=function(e){var t=this.scale/e.scale,n=e.offset/e.scale,r=e.weight;this.AB+=r*t*n,this.AD+=r*t*e.desiredPosition,this.A2+=r*t*t},e.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},e}();e.PositionStats=t;var n=function(){function e(e,t,n,r){void 0===r&&(r=!1),this.left=e,this.right=t,this.gap=n,this.equality=r,this.active=!1,this.unsatisfiable=!1,this.left=e,this.right=t,this.gap=n,this.equality=r}return e.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},e}();e.Constraint=n;var r=function(){function e(e,t,n){void 0===t&&(t=1),void 0===n&&(n=1),this.desiredPosition=e,this.weight=t,this.scale=n,this.offset=0}return e.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},e.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},e.prototype.visitNeighbours=function(e,t){var n=function(n,r){return n.active&&e!==r&&t(n,r)};this.cOut.forEach(function(e){return n(e,e.right)}),this.cIn.forEach(function(e){return n(e,e.left)})},e}();e.Variable=r;var i=function(){function e(e){this.vars=[],e.offset=0,this.ps=new t(e.scale),this.addVariable(e)}return e.prototype.addVariable=function(e){e.block=this,this.vars.push(e),this.ps.addVariable(e),this.posn=this.ps.getPosn()},e.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var e=0,t=this.vars.length;e<t;++e)this.ps.addVariable(this.vars[e]);this.posn=this.ps.getPosn()},e.prototype.compute_lm=function(e,t,n){var r=this,i=e.dfdv();return e.visitNeighbours(t,function(t,o){var a=r.compute_lm(o,e,n);o===t.right?(i+=a*t.left.scale,t.lm=a):(i+=a*t.right.scale,t.lm=-a),n(t)}),i/e.scale},e.prototype.populateSplitBlock=function(e,t){var n=this;e.visitNeighbours(t,function(t,r){r.offset=e.offset+(r===t.right?t.gap:-t.gap),n.addVariable(r),n.populateSplitBlock(r,e)})},e.prototype.traverse=function(e,t,n,r){var i=this;void 0===n&&(n=this.vars[0]),void 0===r&&(r=null),n.visitNeighbours(r,function(r,o){t.push(e(r)),i.traverse(e,t,o,n)})},e.prototype.findMinLM=function(){var e=null;return this.compute_lm(this.vars[0],null,function(t){!t.equality&&(null===e||t.lm<e.lm)&&(e=t)}),e},e.prototype.findMinLMBetween=function(e,t){this.compute_lm(e,null,function(){});var n=null;return this.findPath(e,null,t,function(e,t){!e.equality&&e.right===t&&(null===n||e.lm<n.lm)&&(n=e)}),n},e.prototype.findPath=function(e,t,n,r){var i=this,o=!1;return e.visitNeighbours(t,function(t,a){o||a!==n&&!i.findPath(a,e,n,r)||(o=!0,r(t,a))}),o},e.prototype.isActiveDirectedPathBetween=function(e,t){if(e===t)return!0;for(var n=e.cOut.length;n--;){var r=e.cOut[n];if(r.active&&this.isActiveDirectedPathBetween(r.right,t))return!0}return!1},e.split=function(t){return t.active=!1,[e.createSplitBlock(t.left),e.createSplitBlock(t.right)]},e.createSplitBlock=function(t){var n=new e(t);return n.populateSplitBlock(t,null),n},e.prototype.splitBetween=function(t,n){var r=this.findMinLMBetween(t,n);if(null!==r){var i=e.split(r);return{constraint:r,lb:i[0],rb:i[1]}}return null},e.prototype.mergeAcross=function(e,t,n){t.active=!0;for(var r=0,i=e.vars.length;r<i;++r){var o=e.vars[r];o.offset+=n,this.addVariable(o)}this.posn=this.ps.getPosn()},e.prototype.cost=function(){for(var e=0,t=this.vars.length;t--;){var n=this.vars[t],r=n.position()-n.desiredPosition;e+=r*r*n.weight}return e},e}();e.Block=i;var o=function(){function e(e){this.vs=e;var t=e.length;for(this.list=new Array(t);t--;){var n=new i(e[t]);this.list[t]=n,n.blockInd=t}}return e.prototype.cost=function(){for(var e=0,t=this.list.length;t--;)e+=this.list[t].cost();return e},e.prototype.insert=function(e){e.blockInd=this.list.length,this.list.push(e)},e.prototype.remove=function(e){var t=this.list.length-1,n=this.list[t];this.list.length=t,e!==n&&(this.list[e.blockInd]=n,n.blockInd=e.blockInd)},e.prototype.merge=function(e){var t=e.left.block,n=e.right.block,r=e.right.offset-e.left.offset-e.gap;t.vars.length<n.vars.length?(n.mergeAcross(t,e,r),this.remove(t)):(t.mergeAcross(n,e,-r),this.remove(n))},e.prototype.forEach=function(e){this.list.forEach(e)},e.prototype.updateBlockPositions=function(){this.list.forEach(function(e){return e.updateWeightedPosition()})},e.prototype.split=function(e){var t=this;this.updateBlockPositions(),this.list.forEach(function(n){var r=n.findMinLM();null!==r&&r.lm<a.LAGRANGIAN_TOLERANCE&&(n=r.left.block,i.split(r).forEach(function(e){return t.insert(e)}),t.remove(n),e.push(r))})},e}();e.Blocks=o;var a=function(){function e(e,t){this.vs=e,this.cs=t,this.vs=e,e.forEach(function(e){e.cIn=[],e.cOut=[]}),this.cs=t,t.forEach(function(e){e.left.cOut.push(e),e.right.cIn.push(e)}),this.inactive=t.map(function(e){return e.active=!1,e}),this.bs=null}return e.prototype.cost=function(){return this.bs.cost()},e.prototype.setStartingPositions=function(e){this.inactive=this.cs.map(function(e){return e.active=!1,e}),this.bs=new o(this.vs),this.bs.forEach(function(t,n){return t.posn=e[n]})},e.prototype.setDesiredPositions=function(e){this.vs.forEach(function(t,n){return t.desiredPosition=e[n]})},e.prototype.mostViolated=function(){for(var t=Number.MAX_VALUE,n=null,r=this.inactive,i=r.length,o=i,a=0;a<i;++a){var s=r[a];if(!s.unsatisfiable){var l=s.slack();if((s.equality||l<t)&&(t=l,n=s,o=a,s.equality))break}}return o!==i&&(t<e.ZERO_UPPERBOUND&&!n.active||n.equality)&&(r[o]=r[i-1],r.length=i-1),n},e.prototype.satisfy=function(){null==this.bs&&(this.bs=new o(this.vs)),this.bs.split(this.inactive);for(var t=null;(t=this.mostViolated())&&(t.equality||t.slack()<e.ZERO_UPPERBOUND&&!t.active);){var n=t.left.block;if(n!==t.right.block)this.bs.merge(t);else{if(n.isActiveDirectedPathBetween(t.right,t.left)){t.unsatisfiable=!0;continue}var r=n.splitBetween(t.left,t.right);if(null===r){t.unsatisfiable=!0;continue}this.bs.insert(r.lb),this.bs.insert(r.rb),this.bs.remove(n),this.inactive.push(r.constraint),t.slack()>=0?this.inactive.push(t):this.bs.merge(t)}}},e.prototype.solve=function(){this.satisfy();for(var e=Number.MAX_VALUE,t=this.bs.cost();Math.abs(e-t)>1e-4;)this.satisfy(),e=t,t=this.bs.cost();return t},e.LAGRANGIAN_TOLERANCE=-1e-4,e.ZERO_UPPERBOUND=-1e-10,e}();e.Solver=a,e.removeOverlapInOneDimension=function(e,t,i){for(var o=e.map(function(e){return new r(e.desiredCenter)}),s=[],l=e.length,u=0;u<l-1;u++){var c=e[u],h=e[u+1];s.push(new n(o[u],o[u+1],(c.size+h.size)/2))}var d=o[0],p=o[l-1],f=e[0].size/2,v=e[l-1].size/2,g=null,y=null;return t&&(g=new r(t,1e3*d.weight),o.push(g),s.push(new n(g,d,f))),i&&(y=new r(i,1e3*p.weight),o.push(y),s.push(new n(p,y,v))),new a(o,s).solve(),{newCenters:o.slice(0,e.length).map(function(e){return e.position()}),lowerBound:g?g.position():d.position()-f,upperBound:y?y.position():p.position()+v}}}(e.vpsc||(e.vpsc={}))}(cola||(cola={}));var __extends=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){var t=function(){function e(){this.findIter=function(e){for(var t=this._root,n=this.iterator();null!==t;){var r=this._comparator(e,t.data);if(0===r)return n._cursor=t,n;n._ancestors.push(t),t=t.get_child(r>0)}return null}}return e.prototype.clear=function(){this._root=null,this.size=0},e.prototype.find=function(e){for(var t=this._root;null!==t;){var n=this._comparator(e,t.data);if(0===n)return t.data;t=t.get_child(n>0)}return null},e.prototype.lowerBound=function(e){return this._bound(e,this._comparator)},e.prototype.upperBound=function(e){var t=this._comparator;return this._bound(e,function(e,n){return t(n,e)})},e.prototype.min=function(){var e=this._root;if(null===e)return null;for(;null!==e.left;)e=e.left;return e.data},e.prototype.max=function(){var e=this._root;if(null===e)return null;for(;null!==e.right;)e=e.right;return e.data},e.prototype.iterator=function(){return new n(this)},e.prototype.each=function(e){for(var t,n=this.iterator();null!==(t=n.next());)e(t)},e.prototype.reach=function(e){for(var t,n=this.iterator();null!==(t=n.prev());)e(t)},e.prototype._bound=function(e,t){for(var n=this._root,r=this.iterator();null!==n;){var i=this._comparator(e,n.data);if(0===i)return r._cursor=n,r;r._ancestors.push(n),n=n.get_child(i>0)}for(var o=r._ancestors.length-1;o>=0;--o)if(t(e,(n=r._ancestors[o]).data)>0)return r._cursor=n,r._ancestors.length=o,r;return r._ancestors.length=0,r},e}();e.TreeBase=t;var n=function(){function e(e){this._tree=e,this._ancestors=[],this._cursor=null}return e.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},e.prototype.next=function(){if(null===this._cursor){var e=this._tree._root;null!==e&&this._minNode(e)}else{var t;if(null===this._cursor.right)do{if(t=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===t);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right)}return null!==this._cursor?this._cursor.data:null},e.prototype.prev=function(){if(null===this._cursor){var e=this._tree._root;null!==e&&this._maxNode(e)}else{var t;if(null===this._cursor.left)do{if(t=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===t);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left)}return null!==this._cursor?this._cursor.data:null},e.prototype._minNode=function(e){for(;null!==e.left;)this._ancestors.push(e),e=e.left;this._cursor=e},e.prototype._maxNode=function(e){for(;null!==e.right;)this._ancestors.push(e),e=e.right;this._cursor=e},e}();e.Iterator=n;var r=function(){function e(e){this.data=e,this.left=null,this.right=null,this.red=!0}return e.prototype.get_child=function(e){return e?this.right:this.left},e.prototype.set_child=function(e,t){e?this.right=t:this.left=t},e}(),i=function(e){function t(t){e.call(this),this._root=null,this._comparator=t,this.size=0}return __extends(t,e),t.prototype.insert=function(e){var n=!1;if(null===this._root)this._root=new r(e),n=!0,this.size++;else{var i=new r(void 0),o=!1,a=!1,s=null,l=i,u=null,c=this._root;for(l.right=this._root;;){if(null===c?(c=new r(e),u.set_child(o,c),n=!0,this.size++):t.is_red(c.left)&&t.is_red(c.right)&&(c.red=!0,c.left.red=!1,c.right.red=!1),t.is_red(c)&&t.is_red(u)){var h=l.right===s;c===u.get_child(a)?l.set_child(h,t.single_rotate(s,!a)):l.set_child(h,t.double_rotate(s,!a))}var d=this._comparator(c.data,e);if(0===d)break;a=o,o=d<0,null!==s&&(l=s),s=u,u=c,c=c.get_child(o)}this._root=i.right}return this._root.red=!1,n},t.prototype.remove=function(e){if(null===this._root)return!1;var n=new r(void 0),i=n;i.right=this._root;for(var o=null,a=null,s=null,l=!0;null!==i.get_child(l);){var u=l;a=o,o=i,i=i.get_child(l);var c=this._comparator(e,i.data);if(l=c>0,0===c&&(s=i),!t.is_red(i)&&!t.is_red(i.get_child(l)))if(t.is_red(i.get_child(!l))){var h=t.single_rotate(i,l);o.set_child(u,h),o=h}else if(!t.is_red(i.get_child(!l))){var d=o.get_child(!u);if(null!==d)if(t.is_red(d.get_child(!u))||t.is_red(d.get_child(u))){var p=a.right===o;t.is_red(d.get_child(u))?a.set_child(p,t.double_rotate(o,u)):t.is_red(d.get_child(!u))&&a.set_child(p,t.single_rotate(o,u));var f=a.get_child(p);f.red=!0,i.red=!0,f.left.red=!1,f.right.red=!1}else o.red=!1,d.red=!0,i.red=!0}}return null!==s&&(s.data=i.data,o.set_child(o.right===i,i.get_child(null===i.left)),this.size--),this._root=n.right,null!==this._root&&(this._root.red=!1),null!==s},t.is_red=function(e){return null!==e&&e.red},t.single_rotate=function(e,t){var n=e.get_child(!t);return e.set_child(!t,n.get_child(t)),n.set_child(t,e),e.red=!0,n.red=!1,n},t.double_rotate=function(e,n){return e.set_child(!n,t.single_rotate(e.get_child(!n),!n)),t.single_rotate(e,n)},t}(t);e.RBTree=i}(e.vpsc||(e.vpsc={}))}(cola||(cola={})),function(e){!function(e){function t(e){return e.bounds=void 0!==e.leaves?e.leaves.reduce(function(e,t){return t.bounds.union(e)},n.empty()):n.empty(),void 0!==e.groups&&(e.bounds=e.groups.reduce(function(e,n){return t(n).union(e)},e.bounds)),e.bounds=e.bounds.inflate(e.padding),e.bounds}e.computeGroupBounds=t;var n=function(){function e(e,t,n,r){this.x=e,this.X=t,this.y=n,this.Y=r}return e.empty=function(){return new e(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},e.prototype.cx=function(){return(this.x+this.X)/2},e.prototype.cy=function(){return(this.y+this.Y)/2},e.prototype.overlapX=function(e){var t=this.cx(),n=e.cx();return t<=n&&e.x<this.X?this.X-e.x:n<=t&&this.x<e.X?e.X-this.x:0},e.prototype.overlapY=function(e){var t=this.cy(),n=e.cy();return t<=n&&e.y<this.Y?this.Y-e.y:n<=t&&this.y<e.Y?e.Y-this.y:0},e.prototype.setXCentre=function(e){var t=e-this.cx();this.x+=t,this.X+=t},e.prototype.setYCentre=function(e){var t=e-this.cy();this.y+=t,this.Y+=t},e.prototype.width=function(){return this.X-this.x},e.prototype.height=function(){return this.Y-this.y},e.prototype.union=function(t){return new e(Math.min(this.x,t.x),Math.max(this.X,t.X),Math.min(this.y,t.y),Math.max(this.Y,t.Y))},e.prototype.lineIntersections=function(t,n,r,i){for(var o=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],a=[],s=0;s<4;++s){var l=e.lineIntersection(t,n,r,i,o[s][0],o[s][1],o[s][2],o[s][3]);null!==l&&a.push({x:l.x,y:l.y})}return a},e.prototype.rayIntersection=function(e,t){var n=this.lineIntersections(this.cx(),this.cy(),e,t);return n.length>0?n[0]:null},e.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y},{x:this.x,y:this.y}]},e.lineIntersection=function(e,t,n,r,i,o,a,s){var l=n-e,u=a-i,c=r-t,h=s-o,d=h*l-u*c;if(0==d)return null;var p=e-i,f=t-o,v=(u*f-h*p)/d,g=(l*f-c*p)/d;return v>=0&&v<=1&&g>=0&&g<=1?{x:e+v*l,y:t+v*c}:null},e.prototype.inflate=function(t){return new e(this.x-t,this.X+t,this.y-t,this.Y+t)},e}();e.Rectangle=n,e.makeEdgeBetween=function(e,t,n){var r=e.rayIntersection(t.cx(),t.cy())||{x:e.cx(),y:e.cy()},i=t.rayIntersection(e.cx(),e.cy())||{x:t.cx(),y:t.cy()},o=i.x-r.x,a=i.y-r.y,s=Math.sqrt(o*o+a*a),l=s-n;return{sourceIntersection:r,targetIntersection:i,arrowStart:{x:r.x+l*o/s,y:r.y+l*a/s}}},e.makeEdgeTo=function(e,t,n){var r=t.rayIntersection(e.x,e.y);r||(r={x:t.cx(),y:t.cy()});var i=r.x-e.x,o=r.y-e.y,a=Math.sqrt(i*i+o*o);return{x:r.x-n*i/a,y:r.y-n*o/a}};var r=function(){return function(e,t,n){this.v=e,this.r=t,this.pos=n,this.prev=a(),this.next=a()}}(),i=function(){return function(e,t,n){this.isOpen=e,this.v=t,this.pos=n}}();function o(e,t){return e.pos>t.pos?1:e.pos<t.pos?-1:e.isOpen?-1:t.isOpen?1:0}function a(){return new e.RBTree(function(e,t){return e.pos-t.pos})}var s={getCentre:function(e){return e.cx()},getOpen:function(e){return e.y},getClose:function(e){return e.Y},getSize:function(e){return e.width()},makeRect:function(e,t,r,i){return new n(r-i/2,r+i/2,e,t)},findNeighbours:function(e,t){var n=function(n,r){for(var i,o=t.findIter(e);null!==(i=o[n]());){var a=i.r.overlapX(e.r);if((a<=0||a<=i.r.overlapY(e.r))&&(e[n].insert(i),i[r].insert(e)),a<=0)break}};n("next","prev"),n("prev","next")}},l={getCentre:function(e){return e.cy()},getOpen:function(e){return e.x},getClose:function(e){return e.X},getSize:function(e){return e.height()},makeRect:function(e,t,r,i){return new n(e,t,r-i/2,r+i/2)},findNeighbours:function(e,t){var n=function(n,r){var i=t.findIter(e)[n]();null!==i&&i.r.overlapX(e.r)>0&&(e[n].insert(i),i[r].insert(e))};n("next","prev"),n("prev","next")}};function u(e,t,n,r){void 0===r&&(r=!1);var i=e.padding,o=void 0!==e.groups?e.groups.length:0,a=void 0!==e.leaves?e.leaves.length:0,s=o?e.groups.reduce(function(e,r){return e.concat(u(r,t,n,!0))},[]):[],l=(r?2:0)+a+o,h=new Array(l),d=new Array(l),p=0,f=function(e,t){d[p]=e,h[p++]=t};if(r){var v=e.bounds,g=t.getCentre(v),y=t.getSize(v)/2,m=t.getOpen(v),x=t.getClose(v),b=g-y+i/2,w=g+y-i/2;e.minVar.desiredPosition=b,f(t.makeRect(m,x,b,i),e.minVar),e.maxVar.desiredPosition=w,f(t.makeRect(m,x,w,i),e.maxVar)}a&&e.leaves.forEach(function(e){return f(e.bounds,e.variable)}),o&&e.groups.forEach(function(e){var n=e.bounds;f(t.makeRect(t.getOpen(n),t.getClose(n),t.getCentre(n),t.getSize(n)),e.minVar)});var E=c(d,h,t,n);return o&&(h.forEach(function(e){e.cOut=[],e.cIn=[]}),E.forEach(function(e){e.left.cOut.push(e),e.right.cIn.push(e)}),e.groups.forEach(function(e){var n=(e.padding-t.getSize(e.bounds))/2;e.minVar.cIn.forEach(function(e){return e.gap+=n}),e.minVar.cOut.forEach(function(t){t.left=e.maxVar,t.gap+=n})})),s.concat(E)}function c(t,n,s,l){var u,c=t.length,h=2*c;console.assert(n.length>=c);var d=new Array(h);for(u=0;u<c;++u){var p=t[u],f=new r(n[u],p,s.getCentre(p));d[u]=new i(!0,f,s.getOpen(p)),d[u+c]=new i(!1,f,s.getClose(p))}d.sort(o);var v=new Array,g=a();for(u=0;u<h;++u){var y=d[u];f=y.v;if(y.isOpen)g.insert(f),s.findNeighbours(f,g);else{g.remove(f);var m=function(t,n){var r=(s.getSize(t.r)+s.getSize(n.r))/2+l;v.push(new e.Constraint(t.v,n.v,r))},x=function(e,t,n){for(var r,i=f[e].iterator();null!==(r=i[e]());)n(r,f),r[t].remove(f)};x("prev","next",function(e,t){return m(e,t)}),x("next","prev",function(e,t){return m(t,e)})}}return console.assert(0===g.size),v}function h(e){return u(e,s,1e-6)}function d(e){return u(e,l,1e-6)}e.generateXConstraints=function(e,t){return c(e,t,s,1e-6)},e.generateYConstraints=function(e,t){return c(e,t,l,1e-6)},e.generateXGroupConstraints=h,e.generateYGroupConstraints=d,e.removeOverlaps=function(t){var n=t.map(function(t){return new e.Variable(t.cx())}),r=e.generateXConstraints(t,n),i=new e.Solver(n,r);i.solve(),n.forEach(function(e,n){return t[n].setXCentre(e.position())}),n=t.map(function(t){return new e.Variable(t.cy())}),r=e.generateYConstraints(t,n),(i=new e.Solver(n,r)).solve(),n.forEach(function(e,n){return t[n].setYCentre(e.position())})};var p=function(e){function t(t,n){e.call(this,0,n),this.index=t}return __extends(t,e),t}(e.Variable);e.IndexedVariable=p;var f=function(){function r(n,r,i,o,a){var s=this;if(void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=!1),this.nodes=n,this.groups=r,this.rootGroup=i,this.avoidOverlaps=a,this.variables=n.map(function(e,t){return e.variable=new p(t,1)}),o&&this.createConstraints(o),a&&i&&void 0!==i.groups){n.forEach(function(t){if(t.width&&t.height){var n=t.width/2,r=t.height/2;t.bounds=new e.Rectangle(t.x-n,t.x+n,t.y-r,t.y+r)}else t.bounds=new e.Rectangle(t.x,t.x,t.y,t.y)}),t(i);var l=n.length;r.forEach(function(e){s.variables[l]=e.minVar=new p(l++,void 0!==e.stiffness?e.stiffness:.01),s.variables[l]=e.maxVar=new p(l++,void 0!==e.stiffness?e.stiffness:.01)})}}return r.prototype.createSeparation=function(t){return new e.Constraint(this.nodes[t.left].variable,this.nodes[t.right].variable,t.gap,void 0!==t.equality&&t.equality)},r.prototype.makeFeasible=function(e){var t=this;if(this.avoidOverlaps){var n="x",r="width";"x"===e.axis&&(n="y",r="height");var i=null;e.offsets.map(function(e){return t.nodes[e.node]}).sort(function(e,t){return e[n]-t[n]}).forEach(function(e){i&&(e[n]=i[n]+i[r]+1),i=e})}},r.prototype.createAlignment=function(t){var n=this,r=this.nodes[t.offsets[0].node].variable;this.makeFeasible(t);var i="x"===t.axis?this.xConstraints:this.yConstraints;t.offsets.slice(1).forEach(function(t){var o=n.nodes[t.node].variable;i.push(new e.Constraint(r,o,t.offset,!0))})},r.prototype.createConstraints=function(e){var t=this,n=function(e){return void 0===e.type||"separation"===e.type};this.xConstraints=e.filter(function(e){return"x"===e.axis&&n(e)}).map(function(e){return t.createSeparation(e)}),this.yConstraints=e.filter(function(e){return"y"===e.axis&&n(e)}).map(function(e){return t.createSeparation(e)}),e.filter(function(e){return"alignment"===e.type}).forEach(function(e){return t.createAlignment(e)})},r.prototype.setupVariablesAndBounds=function(e,t,r,i){this.nodes.forEach(function(o,a){o.fixed?(o.variable.weight=o.fixedWeight?o.fixedWeight:1e3,r[a]=i(o)):o.variable.weight=1;var s=(o.width||0)/2,l=(o.height||0)/2,u=e[a],c=t[a];o.bounds=new n(u-s,u+s,c-l,c+l)})},r.prototype.xProject=function(e,t,n){(this.rootGroup||this.avoidOverlaps||this.xConstraints)&&this.project(e,t,e,n,function(e){return e.px},this.xConstraints,h,function(e){return e.bounds.setXCentre(n[e.variable.index]=e.variable.position())},function(e){var t=n[e.minVar.index]=e.minVar.position(),r=n[e.maxVar.index]=e.maxVar.position(),i=e.padding/2;e.bounds.x=t-i,e.bounds.X=r+i})},r.prototype.yProject=function(e,t,n){(this.rootGroup||this.yConstraints)&&this.project(e,t,t,n,function(e){return e.py},this.yConstraints,d,function(e){return e.bounds.setYCentre(n[e.variable.index]=e.variable.position())},function(e){var t=n[e.minVar.index]=e.minVar.position(),r=n[e.maxVar.index]=e.maxVar.position(),i=e.padding/2;e.bounds.y=t-i,e.bounds.Y=r+i})},r.prototype.projectFunctions=function(){var e=this;return[function(t,n,r){return e.xProject(t,n,r)},function(t,n,r){return e.yProject(t,n,r)}]},r.prototype.project=function(e,n,r,i,o,a,s,l,u){this.setupVariablesAndBounds(e,n,i,o),this.rootGroup&&this.avoidOverlaps&&(t(this.rootGroup),a=a.concat(s(this.rootGroup))),this.solve(this.variables,a,r,i),this.nodes.forEach(l),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(u),t(this.rootGroup))},r.prototype.solve=function(t,n,r,i){var o=new e.Solver(t,n);o.setStartingPositions(r),o.setDesiredPositions(i),o.solve()},r}();e.Projection=f}(e.vpsc||(e.vpsc={}))}(cola||(cola={})),function(e){!function(t){var n=function(){return function(){}}();t.Point=n;var r=function(){return function(e,t,n,r){this.x1=e,this.y1=t,this.x2=n,this.y2=r}}();t.LineSegment=r;var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(n);function o(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}function a(e,t,n){return o(e,t,n)>0}function s(e,t,n){return o(e,t,n)<0}function l(e,t){var n,r,i,o,l=t.length-1;if(s(e,t[1],t[0])&&!a(e,t[l-1],t[0]))return 0;for(n=0,r=l;;){if(r-n==1)return a(e,t[n],t[r])?n:r;if((o=s(e,t[(i=Math.floor((n+r)/2))+1],t[i]))&&!a(e,t[i-1],t[i]))return i;a(e,t[n+1],t[n])?o?r=i:a(e,t[n],t[i])?r=i:n=i:o&&s(e,t[n],t[i])?r=i:n=i}}function u(e,t){var n,r,i,o,l=t.length-1;if(a(e,t[l-1],t[0])&&!s(e,t[1],t[0]))return 0;for(n=0,r=l;;){if(r-n==1)return s(e,t[n],t[r])?n:r;if(o=s(e,t[(i=Math.floor((n+r)/2))+1],t[i]),a(e,t[i-1],t[i])&&!o)return i;s(e,t[n+1],t[n])?o?s(e,t[n],t[i])?r=i:n=i:r=i:o?n=i:a(e,t[n],t[i])?r=i:n=i}}function c(e,t,n,r,i,o){var a,s;s=r(e[a=n(t[0],e)],t);for(var l=!1;!l;){for(l=!0;a===e.length-1&&(a=0),!i(t[s],e[a],e[a+1]);)++a;for(;0===s&&(s=t.length-1),!o(e[a],t[s],t[s-1]);)--s,l=!1}return{t1:a,t2:s}}function h(e,t){return c(e,t,l,u,a,s)}t.PolyPoint=i,t.isLeft=o,t.ConvexHull=function(e){var t,n=e.slice(0).sort(function(e,t){return e.x!==t.x?t.x-e.x:t.y-e.y}),r=e.length,i=n[0].x;for(t=1;t<r&&n[t].x===i;++t);var a=t-1,s=[];if(s.push(n[0]),a===r-1)n[a].y!==n[0].y&&s.push(n[a]);else{var l,u=r-1,c=n[r-1].x;for(t=r-2;t>=0&&n[t].x===c;t--);for(l=t+1,t=a;++t<=l;)if(!(o(n[0],n[l],n[t])>=0&&t<l)){for(;s.length>1&&!(o(s[s.length-2],s[s.length-1],n[t])>0);)s.length-=1;0!=t&&s.push(n[t])}u!=l&&s.push(n[u]);var h=s.length;for(t=l;--t>=a;)if(!(o(n[u],n[a],n[t])>=0&&t>a)){for(;s.length>h&&!(o(s[s.length-2],s[s.length-1],n[t])>0);)s.length-=1;0!=t&&s.push(n[t])}}return s},t.clockwiseRadialSweep=function(e,t,n){t.slice(0).sort(function(t,n){return Math.atan2(t.y-e.y,t.x-e.x)-Math.atan2(n.y-e.y,n.x-e.x)}).forEach(n)},t.tangent_PolyPolyC=c,t.LRtangent_PolyPolyC=function(e,t){var n=h(t,e);return{t1:n.t2,t2:n.t1}},t.RLtangent_PolyPolyC=h,t.LLtangent_PolyPolyC=function(e,t){return c(e,t,u,u,s,s)},t.RRtangent_PolyPolyC=function(e,t){return c(e,t,l,l,a,a)};var d=function(){return function(e,t){this.t1=e,this.t2=t}}();t.BiTangent=d;var p=function(){return function(){}}();t.BiTangents=p;var f=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(n);t.TVGPoint=f;var v=function(){return function(e,t,n,r){this.id=e,this.polyid=t,this.polyvertid=n,this.p=r,r.vv=this}}();t.VisibilityVertex=v;var g=function(){function e(e,t){this.source=e,this.target=t}return e.prototype.length=function(){var e=this.source.p.x-this.target.p.x,t=this.source.p.y-this.target.p.y;return Math.sqrt(e*e+t*t)},e}();t.VisibilityEdge=g;var y=function(){function e(e,n){if(this.P=e,this.V=[],this.E=[],n)this.V=n.V.slice(0),this.E=n.E.slice(0);else{for(var r=e.length,i=0;i<r;i++)for(var o=e[i],a=0;a<o.length;++a){var s=o[a],l=new v(this.V.length,i,a,s);this.V.push(l),a>0&&this.E.push(new g(o[a-1].vv,l))}for(i=0;i<r-1;i++){var u=e[i];for(a=i+1;a<r;a++){var c=e[a],h=t.tangents(u,c);for(var d in h){var p=h[d],f=u[p.t1],y=c[p.t2];this.addEdgeIfVisible(f,y,i,a)}}}}}return e.prototype.addEdgeIfVisible=function(e,t,n,i){this.intersectsPolys(new r(e.x,e.y,t.x,t.y),n,i)||this.E.push(new g(e.vv,t.vv))},e.prototype.addPoint=function(e,t){var n,r,i=this.P.length;this.V.push(new v(this.V.length,i,0,e));for(var o=0;o<i;++o)if(o!==t){var a=this.P[o],s={rtan:l(n=e,r=a),ltan:u(n,r)};this.addEdgeIfVisible(e,a[s.ltan],t,o),this.addEdgeIfVisible(e,a[s.rtan],t,o)}return e.vv},e.prototype.intersectsPolys=function(e,t,n){for(var r=0,i=this.P.length;r<i;++r)if(r!=t&&r!=n&&m(e,this.P[r]).length>0)return!0;return!1},e}();function m(t,n){for(var r=[],i=1,o=n.length;i<o;++i){var a=e.vpsc.Rectangle.lineIntersection(t.x1,t.y1,t.x2,t.y2,n[i-1].x,n[i-1].y,n[i].x,n[i].y);a&&r.push(a)}return r}function x(e,t){return!e.every(function(e){return!function(e,t){for(var n=1,r=t.length;n<r;++n)if(s(t[n-1],t[n],e))return!1;return!0}(e,t)})}t.TangentVisibilityGraph=y,t.tangents=function(e,t){for(var n=e.length-1,r=t.length-1,i=new p,a=0;a<n;++a)for(var s=0;s<r;++s){var l=e[0==a?n-1:a-1],u=e[a],c=e[a+1],h=t[0==s?r-1:s-1],f=t[s],v=t[s+1],g=o(l,u,f),y=o(u,h,f),m=o(u,f,v),x=o(h,f,u),b=o(f,l,u),w=o(f,u,c);g>=0&&y>=0&&m<0&&x>=0&&b>=0&&w<0?i.ll=new d(a,s):g<=0&&y<=0&&m>0&&x<=0&&b<=0&&w>0?i.rr=new d(a,s):g<=0&&y>0&&m<=0&&x>=0&&b<0&&w>=0?i.rl=new d(a,s):g>=0&&y<0&&m>=0&&x<=0&&b>0&&w<=0&&(i.lr=new d(a,s))}return i},t.polysOverlap=function(e,t){if(x(e,t))return!0;if(x(t,e))return!0;for(var n=1,i=e.length;n<i;++n){var o=e[n],a=e[n-1];if(m(new r(a.x,a.y,o.x,o.y),t).length>0)return!0}return!1}}(e.geom||(e.geom={}))}(cola||(cola={})),function(e){var t=function(){function e(){this.locks={}}return e.prototype.add=function(e,t){this.locks[e]=t},e.prototype.clear=function(){this.locks={}},e.prototype.isEmpty=function(){for(var e in this.locks)return!1;return!0},e.prototype.apply=function(e){for(var t in this.locks)e(t,this.locks[t])},e}();e.Locks=t;var n=function(){function e(e,n,i){void 0===i&&(i=null),this.D=n,this.G=i,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new r,this.project=null,this.x=e,this.k=e.length;var o=this.n=e[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new t,this.minD=Number.MAX_VALUE;for(var a,s=o;s--;)for(a=o;--a>s;){var l=n[s][a];l>0&&l<this.minD&&(this.minD=l)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),s=this.k;s--;){for(this.g[s]=new Array(o),this.H[s]=new Array(o),a=o;a--;)this.H[s][a]=new Array(o);this.Hd[s]=new Array(o),this.a[s]=new Array(o),this.b[s]=new Array(o),this.c[s]=new Array(o),this.d[s]=new Array(o),this.e[s]=new Array(o),this.ia[s]=new Array(o),this.ib[s]=new Array(o),this.xtmp[s]=new Array(o)}}return e.createSquareMatrix=function(e,t){for(var n=new Array(e),r=0;r<e;++r){n[r]=new Array(e);for(var i=0;i<e;++i)n[r][i]=t(r,i)}return n},e.prototype.offsetDir=function(){for(var e=this,t=new Array(this.k),n=0,r=0;r<this.k;++r){var i=t[r]=this.random.getNextBetween(.01,1)-.5;n+=i*i}return n=Math.sqrt(n),t.map(function(t){return t*(e.minD/n)})},e.prototype.computeDerivatives=function(e){var t=this,n=this.n;if(!(n<1)){for(var r,i=new Array(this.k),o=new Array(this.k),a=new Array(this.k),s=0,l=0;l<n;++l){for(r=0;r<this.k;++r)a[r]=this.g[r][l]=0;for(var u=0;u<n;++u)if(l!==u){for(var c=n;c--;){var h=0;for(r=0;r<this.k;++r){var d=i[r]=e[r][l]-e[r][u];h+=o[r]=d*d}if(h>1e-9)break;var p=this.offsetDir();for(r=0;r<this.k;++r)e[r][u]+=p[r]}var f=Math.sqrt(h),v=this.D[l][u],g=null!=this.G?this.G[l][u]:1;if(g>1&&f>v||!isFinite(v))for(r=0;r<this.k;++r)this.H[r][l][u]=0;else{g>1&&(g=1);var y=v*v,m=2*g*(f-v)/(y*f),x=f*f*f,b=2*-g/(y*x);for(isFinite(m)||console.log(m),r=0;r<this.k;++r)this.g[r][l]+=i[r]*m,a[r]-=this.H[r][l][u]=b*(x+v*(o[r]-h)+f*h)}}for(r=0;r<this.k;++r)s=Math.max(s,this.H[r][l][l]=a[r])}var w=this.snapGridSize/2,E=this.snapGridSize,_=this.snapStrength/(w*w),k=this.numGridSnapNodes;for(l=0;l<k;++l)for(r=0;r<this.k;++r){var P=this.x[r][l],S=P/E,C=S%1,T=S-C;-w<(d=Math.abs(C)<=.5?P-T*E:P>0?P-(T+1)*E:P-(T-1)*E)&&d<=w&&(this.scaleSnapByMaxH?(this.g[r][l]+=s*_*d,this.H[r][l][l]+=s*_):(this.g[r][l]+=_*d,this.H[r][l][l]+=_))}this.locks.isEmpty()||this.locks.apply(function(n,i){for(r=0;r<t.k;++r)t.H[r][n][n]+=s,t.g[r][n]-=s*(i[r]-e[r][n])})}},e.dotProd=function(e,t){for(var n=0,r=e.length;r--;)n+=e[r]*t[r];return n},e.rightMultiply=function(t,n,r){for(var i=t.length;i--;)r[i]=e.dotProd(t[i],n)},e.prototype.computeStepSize=function(t){for(var n=0,r=0,i=0;i<this.k;++i)n+=e.dotProd(this.g[i],t[i]),e.rightMultiply(this.H[i],t[i],this.Hd[i]),r+=e.dotProd(t[i],this.Hd[i]);return 0!==r&&isFinite(r)?1*n/r:0},e.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var e=this.computeStepSize(this.g),t=0;t<this.k;++t)this.takeDescentStep(this.x[t],this.g[t],e);return this.computeStress()},e.copy=function(e,t){for(var n=e.length,r=t[0].length,i=0;i<n;++i)for(var o=0;o<r;++o)t[i][o]=e[i][o]},e.prototype.stepAndProject=function(t,n,r,i){e.copy(t,n),this.takeDescentStep(n[0],r[0],i),this.project&&this.project[0](t[0],t[1],n[0]),this.takeDescentStep(n[1],r[1],i),this.project&&this.project[1](n[0],t[1],n[1]);for(var o=2;o<this.k;o++)this.takeDescentStep(n[o],r[o],i)},e.mApply=function(e,t,n){for(var r=e;r-- >0;)for(var i=t;i-- >0;)n(r,i)},e.prototype.matrixApply=function(t){e.mApply(this.k,this.n,t)},e.prototype.computeNextPosition=function(e,t){var n=this;this.computeDerivatives(e);var r=this.computeStepSize(this.g);if(this.stepAndProject(e,t,this.g,r),this.project){this.matrixApply(function(r,i){return n.e[r][i]=e[r][i]-t[r][i]});var i=this.computeStepSize(this.e);i=Math.max(.2,Math.min(i,1)),this.stepAndProject(e,t,this.e,i)}},e.prototype.run=function(e){for(var t=Number.MAX_VALUE,n=!1;!n&&e-- >0;){var r=this.rungeKutta();n=Math.abs(t/r-1)<this.threshold,t=r}return t},e.prototype.rungeKutta=function(){var t=this;this.computeNextPosition(this.x,this.a),e.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),e.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var n=0;return this.matrixApply(function(e,r){var i=(t.a[e][r]+2*t.b[e][r]+2*t.c[e][r]+t.d[e][r])/6,o=t.x[e][r]-i;n+=o*o,t.x[e][r]=i}),n},e.mid=function(t,n,r){e.mApply(t.length,t[0].length,function(e,i){return r[e][i]=t[e][i]+(n[e][i]-t[e][i])/2})},e.prototype.takeDescentStep=function(e,t,n){for(var r=0;r<this.n;++r)e[r]=e[r]-n*t[r]},e.prototype.computeStress=function(){for(var e=0,t=0,n=this.n-1;t<n;++t)for(var r=t+1,i=this.n;r<i;++r){for(var o=0,a=0;a<this.k;++a){var s=this.x[a][t]-this.x[a][r];o+=s*s}o=Math.sqrt(o);var l=this.D[t][r];if(isFinite(l)){var u=l-o;e+=u*u/(l*l)}}return e},e.zeroDistance=1e-10,e}();e.Descent=n;var r=function(){function e(e){void 0===e&&(e=1),this.seed=e,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return e.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},e.prototype.getNextBetween=function(e,t){return e+this.getNext()*(t-e)},e}();e.PseudoRandom=r}(cola||(cola={})),function(e){!function(e){var t=function(){return function(e,t,n){this.source=e,this.target=t,this.type=n}}();e.PowerEdge=t;var n=function(){function e(e,t,n,i){var a=this;if(this.linkAccessor=n,this.modules=new Array(e),this.roots=[],i)this.initModulesFromGroup(i);else{this.roots.push(new o);for(var s=0;s<e;++s)this.roots[0].add(this.modules[s]=new r(s))}this.R=t.length,t.forEach(function(e){var t=a.modules[n.getSourceIndex(e)],r=a.modules[n.getTargetIndex(e)],i=n.getType(e);t.outgoing.add(i,r),r.incoming.add(i,t)})}return e.prototype.initModulesFromGroup=function(e){var t=new o;this.roots.push(t);for(var n=0;n<e.leaves.length;++n){var i=e.leaves[n],s=new r(i.id);this.modules[i.id]=s,t.add(s)}if(e.groups)for(var l=0;l<e.groups.length;++l){var u=e.groups[l],c={};for(var h in u)"leaves"!==h&&"groups"!==h&&u.hasOwnProperty(h)&&(c[h]=u[h]);t.add(new r(-1-l,new a,new a,this.initModulesFromGroup(u),c))}return t},e.prototype.merge=function(e,t,n){void 0===n&&(n=0);var i=e.incoming.intersection(t.incoming),a=e.outgoing.intersection(t.outgoing),s=new o;s.add(e),s.add(t);var l=new r(this.modules.length,a,i,s);this.modules.push(l);var u=function(n,r,i){n.forAll(function(n,o){n.forAll(function(n){var a=n[r];a.add(o,l),a.remove(o,e),a.remove(o,t),e[i].remove(o,n),t[i].remove(o,n)})})};return u(a,"incoming","outgoing"),u(i,"outgoing","incoming"),this.R-=i.count()+a.count(),this.roots[n].remove(e),this.roots[n].remove(t),this.roots[n].add(l),l},e.prototype.rootMerges=function(e){void 0===e&&(e=0);for(var t=this.roots[e].modules(),n=t.length,r=new Array(n*(n-1)),i=0,o=0,a=n-1;o<a;++o)for(var s=o+1;s<n;++s){var l=t[o],u=t[s];r[i]={id:i,nEdges:this.nEdges(l,u),a:l,b:u},i++}return r},e.prototype.greedyMerge=function(){for(var e=0;e<this.roots.length;++e)if(!(this.roots[e].modules().length<2)){var t=this.rootMerges(e).sort(function(e,t){return e.nEdges==t.nEdges?e.id-t.id:e.nEdges-t.nEdges})[0];if(!(t.nEdges>=this.R))return this.merge(t.a,t.b,e),!0}},e.prototype.nEdges=function(e,t){var n=e.incoming.intersection(t.incoming),r=e.outgoing.intersection(t.outgoing);return this.R-n.count()-r.count()},e.prototype.getGroupHierarchy=function(e){var n=this,r=[];return function e(t,n,r){t.forAll(function(t){if(t.isLeaf())n.leaves||(n.leaves=[]),n.leaves.push(t.id);else{var i=n;if(t.gid=r.length,!t.isIsland()||t.isPredefined()){if(i={id:t.gid},t.isPredefined())for(var o in t.definition)i[o]=t.definition[o];n.groups||(n.groups=[]),n.groups.push(t.gid),r.push(i)}e(t.children,i,r)}})}(this.roots[0],{},r),this.allEdges().forEach(function(i){var o=n.modules[i.source],a=n.modules[i.target];e.push(new t(void 0===o.gid?i.source:r[o.gid],void 0===a.gid?i.target:r[a.gid],i.type))}),r},e.prototype.allEdges=function(){var t=[];return e.getEdges(this.roots[0],t),t},e.getEdges=function(t,n){t.forAll(function(t){t.getEdges(n),e.getEdges(t.children,n)})},e}();e.Configuration=n;var r=function(){function e(e,t,n,r,i){void 0===t&&(t=new a),void 0===n&&(n=new a),void 0===r&&(r=new o),this.id=e,this.outgoing=t,this.incoming=n,this.children=r,this.definition=i}return e.prototype.getEdges=function(e){var n=this;this.outgoing.forAll(function(r,i){r.forAll(function(r){e.push(new t(n.id,r.id,i))})})},e.prototype.isLeaf=function(){return 0===this.children.count()},e.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},e.prototype.isPredefined=function(){return void 0!==this.definition},e}();function i(e,t){var n={};for(var r in e)r in t&&(n[r]=e[r]);return n}e.Module=r;var o=function(){function e(){this.table={}}return e.prototype.count=function(){return Object.keys(this.table).length},e.prototype.intersection=function(t){var n=new e;return n.table=i(this.table,t.table),n},e.prototype.intersectionCount=function(e){return this.intersection(e).count()},e.prototype.contains=function(e){return e in this.table},e.prototype.add=function(e){this.table[e.id]=e},e.prototype.remove=function(e){delete this.table[e.id]},e.prototype.forAll=function(e){for(var t in this.table)e(this.table[t])},e.prototype.modules=function(){var e=[];return this.forAll(function(t){t.isPredefined()||e.push(t)}),e},e}();e.ModuleSet=o;var a=function(){function e(){this.sets={},this.n=0}return e.prototype.count=function(){return this.n},e.prototype.contains=function(e){var t=!1;return this.forAllModules(function(n){t||n.id!=e||(t=!0)}),t},e.prototype.add=function(e,t){(e in this.sets?this.sets[e]:this.sets[e]=new o).add(t),++this.n},e.prototype.remove=function(e,t){var n=this.sets[e];n.remove(t),0===n.count()&&delete this.sets[e],--this.n},e.prototype.forAll=function(e){for(var t in this.sets)e(this.sets[t],t)},e.prototype.forAllModules=function(e){this.forAll(function(t,n){return t.forAll(e)})},e.prototype.intersection=function(t){var n=new e;return this.forAll(function(e,r){if(r in t.sets){var i=e.intersection(t.sets[r]),o=i.count();o>0&&(n.sets[r]=i,n.n+=o)}}),n},e}();e.LinkSets=a,e.getGroups=function(t,n,r,i){for(var o=t.length,a=new e.Configuration(o,n,r,i);a.greedyMerge(););var s=[],l=a.getGroupHierarchy(s);return s.forEach(function(e){var n=function(n){var r=e[n];"number"==typeof r&&(e[n]=t[r])};n("source"),n("target")}),{groups:l,powerEdges:s}}}(e.powergraph||(e.powergraph={}))}(cola||(cola={})),function(e){function t(e,t){var n={};for(var r in e)n[r]={};for(var r in t)n[r]={};return Object.keys(n).length}function n(e,t){var n=0;for(var r in e)void 0!==t[r]&&++n;return n}function r(e,t,n,r){var i=function(e,t){var n={},r=function(e,t){void 0===n[e]&&(n[e]={}),n[e][t]={}};return e.forEach(function(e){var n=t.getSourceIndex(e),i=t.getTargetIndex(e);r(n,i),r(i,n)}),n}(e,r);e.forEach(function(e){var o=i[r.getSourceIndex(e)],a=i[r.getTargetIndex(e)];r.setLength(e,1+t*n(o,a))})}function i(e,t,n){var r=[],i=0,o=[],a=[];function s(e){e.index=e.lowlink=i++,o.push(e),e.onStack=!0;for(var t=0,n=e.out;t<n.length;t++){var r=n[t];void 0===r.index?(s(r),e.lowlink=Math.min(e.lowlink,r.lowlink)):r.onStack&&(e.lowlink=Math.min(e.lowlink,r.index))}if(e.lowlink===e.index){for(var l=[];o.length&&((r=o.pop()).onStack=!1,l.push(r),r!==e););a.push(l.map(function(e){return e.id}))}}for(var l=0;l<e;l++)r.push({id:l,out:[]});for(var u=0;u<t.length;u++){var c=t[u],h=r[n.getSourceIndex(c)],d=r[n.getTargetIndex(c)];h.out.push(d)}for(var p=0;p<r.length;p++){var f=r[p];void 0===f.index&&s(f)}return a}e.symmetricDiffLinkLengths=function(e,i,o){void 0===o&&(o=1),r(e,o,function(e,r){return Math.sqrt(t(e,r)-n(e,r))},i)},e.jaccardLinkLengths=function(e,i,o){void 0===o&&(o=1),r(e,o,function(e,r){return Math.min(Object.keys(e).length,Object.keys(r).length)<1.1?0:n(e,r)/t(e,r)},i)},e.generateDirectedEdgeConstraints=function(e,t,n,r){var o={};i(e,t,r).forEach(function(e,t){return e.forEach(function(e){return o[e]=t})});var a=[];return t.forEach(function(e){var t=r.getSourceIndex(e),i=r.getTargetIndex(e);o[t]!==o[i]&&a.push({axis:n,left:t,right:i,gap:r.getMinSeparation(e)})}),a},e.stronglyConnectedComponents=i}(cola||(cola={}));var cola,PairingHeap=function(){function e(e){this.elem=e,this.subheaps=[]}return e.prototype.toString=function(e){for(var t="",n=!1,r=0;r<this.subheaps.length;++r){var i=this.subheaps[r];i.elem?(n&&(t+=","),t+=i.toString(e),n=!0):n=!1}return""!==t&&(t="("+t+")"),(this.elem?e(this.elem):"")+t},e.prototype.forEach=function(e){this.empty()||(e(this.elem,this),this.subheaps.forEach(function(t){return t.forEach(e)}))},e.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(e,t){return e+t.count()},0)},e.prototype.min=function(){return this.elem},e.prototype.empty=function(){return null==this.elem},e.prototype.contains=function(e){if(this===e)return!0;for(var t=0;t<this.subheaps.length;t++)if(this.subheaps[t].contains(e))return!0;return!1},e.prototype.isHeap=function(e){var t=this;return this.subheaps.every(function(n){return e(t.elem,n.elem)&&n.isHeap(e)})},e.prototype.insert=function(t,n){return this.merge(new e(t),n)},e.prototype.merge=function(e,t){return this.empty()?e:e.empty()?this:t(this.elem,e.elem)?(this.subheaps.push(e),this):(e.subheaps.push(this),e)},e.prototype.removeMin=function(e){return this.empty()?null:this.mergePairs(e)},e.prototype.mergePairs=function(t){if(0==this.subheaps.length)return new e(null);if(1==this.subheaps.length)return this.subheaps[0];var n=this.subheaps.pop().merge(this.subheaps.pop(),t),r=this.mergePairs(t);return n.merge(r,t)},e.prototype.decreaseKey=function(t,n,r,i){var o=t.removeMin(i);t.elem=o.elem,t.subheaps=o.subheaps,null!==r&&null!==o.elem&&r(t.elem,t);var a=new e(n);return null!==r&&r(n,a),this.merge(a,i)},e}(),PriorityQueue=function(){function e(e){this.lessThan=e}return e.prototype.top=function(){return this.empty()?null:this.root.elem},e.prototype.push=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];for(var r,i=0;r=t[i];++i)e=new PairingHeap(r),this.root=this.empty()?e:this.root.merge(e,this.lessThan);return e},e.prototype.empty=function(){return!this.root||!this.root.elem},e.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},e.prototype.forEach=function(e){this.root.forEach(e)},e.prototype.pop=function(){if(this.empty())return null;var e=this.root.min();return this.root=this.root.removeMin(this.lessThan),e},e.prototype.reduceKey=function(e,t,n){void 0===n&&(n=null),this.root=this.root.decreaseKey(e,t,n,this.lessThan)},e.prototype.toString=function(e){return this.root.toString(e)},e.prototype.count=function(){return this.root.count()},e}();!function(e){!function(e){var t=function(){return function(e,t){this.id=e,this.distance=t}}(),n=function(){return function(e){this.id=e,this.neighbours=[]}}(),r=function(){return function(e,t,n){this.node=e,this.prev=t,this.d=n}}(),i=function(){function e(e,r,i,o,a){this.n=e,this.es=r,this.neighbours=new Array(this.n);for(var s=this.n;s--;)this.neighbours[s]=new n(s);for(s=this.es.length;s--;){var l=this.es[s],u=i(l),c=o(l),h=a(l);this.neighbours[u].neighbours.push(new t(c,h)),this.neighbours[c].neighbours.push(new t(u,h))}}return e.prototype.DistanceMatrix=function(){for(var e=new Array(this.n),t=0;t<this.n;++t)e[t]=this.dijkstraNeighbours(t);return e},e.prototype.DistancesFromNode=function(e){return this.dijkstraNeighbours(e)},e.prototype.PathFromNodeToNode=function(e,t){return this.dijkstraNeighbours(e,t)},e.prototype.PathFromNodeToNodeWithPrevCost=function(e,t,n){var i=new PriorityQueue(function(e,t){return e.d<=t.d}),o=this.neighbours[e],a=new r(o,null,0),s={};for(i.push(a);!i.empty()&&(o=(a=i.pop()).node).id!==t;)for(var l=o.neighbours.length;l--;){var u=o.neighbours[l],c=this.neighbours[u.id];if(!a.prev||c.id!==a.prev.node.id){var h=c.id+","+o.id;if(!(h in s&&s[h]<=a.d)){var d=a.prev?n(a.prev.node.id,o.id,c.id):0,p=a.d+u.distance+d;s[h]=p,i.push(new r(c,a,p))}}}for(var f=[];a.prev;)a=a.prev,f.push(a.node.id);return f},e.prototype.dijkstraNeighbours=function(e,t){void 0===t&&(t=-1);for(var n=new PriorityQueue(function(e,t){return e.d<=t.d}),r=this.neighbours.length,i=new Array(r);r--;){var o=this.neighbours[r];o.d=r===e?0:Number.POSITIVE_INFINITY,o.q=n.push(o)}for(;!n.empty();){var a=n.pop();if(i[a.id]=a.d,a.id===t){for(var s=[],l=a;void 0!==l.prev;)s.push(l.prev.id),l=l.prev;return s}for(r=a.neighbours.length;r--;){var u=a.neighbours[r],c=(l=this.neighbours[u.id],a.d+u.distance);a.d!==Number.MAX_VALUE&&l.d>c&&(l.d=c,l.prev=a,n.reduceKey(l.q,l,function(e,t){return e.q=t}))}}return i},e}();e.Calculator=i}(e.shortestpaths||(e.shortestpaths={}))}(cola||(cola={})),function(e){!function(e){e[e.start=0]="start",e[e.tick=1]="tick",e[e.end=2]="end"}(e.EventType||(e.EventType={}));var t=e.EventType;function n(e){return void 0!==e.leaves||void 0!==e.groups}var r=function(){function r(){var e=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:r.getSourceIndex,getTargetIndex:r.getTargetIndex,setLength:r.setLinkLength,getType:function(t){return"function"==typeof e._linkType?e._linkType(t):0}}}return r.prototype.on=function(e,n){return this.event||(this.event={}),"string"==typeof e?this.event[t[e]]=n:this.event[e]=n,this},r.prototype.trigger=function(e){this.event&&void 0!==this.event[e.type]&&this.event[e.type](e)},r.prototype.kick=function(){for(;!this.tick(););},r.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:t.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var e,n,r=this._nodes.length;this._links.length;for(this._descent.locks.clear(),n=0;n<r;++n)if((e=this._nodes[n]).fixed){void 0!==e.px&&void 0!==e.py||(e.px=e.x,e.py=e.y);var i=[e.px,e.py];this._descent.locks.add(n,i)}var o=this._descent.rungeKutta();return 0===o?this._alpha=0:void 0!==this._lastStress&&(this._alpha=o),this._lastStress=o,this.updateNodePositions(),this.trigger({type:t.tick,alpha:this._alpha,stress:this._lastStress}),!1},r.prototype.updateNodePositions=function(){for(var e,t=this._descent.x[0],n=this._descent.x[1],r=this._nodes.length;r--;)(e=this._nodes[r]).x=t[r],e.y=n[r]},r.prototype.nodes=function(e){if(!e){if(0===this._nodes.length&&this._links.length>0){var t=0;this._links.forEach(function(e){t=Math.max(t,e.source,e.target)}),this._nodes=new Array(++t);for(var n=0;n<t;++n)this._nodes[n]={}}return this._nodes}return this._nodes=e,this},r.prototype.groups=function(e){var t=this;return e?(this._groups=e,this._rootGroup={},this._groups.forEach(function(e){void 0===e.padding&&(e.padding=1),void 0!==e.leaves&&e.leaves.forEach(function(n,r){"number"==typeof n&&((e.leaves[r]=t._nodes[n]).parent=e)}),void 0!==e.groups&&e.groups.forEach(function(n,r){"number"==typeof n&&((e.groups[r]=t._groups[n]).parent=e)})}),this._rootGroup.leaves=this._nodes.filter(function(e){return void 0===e.parent}),this._rootGroup.groups=this._groups.filter(function(e){return void 0===e.parent}),this):this._groups},r.prototype.powerGraphGroups=function(t){var n=e.powergraph.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(n.groups),t(n),this},r.prototype.avoidOverlaps=function(e){return arguments.length?(this._avoidOverlaps=e,this):this._avoidOverlaps},r.prototype.handleDisconnected=function(e){return arguments.length?(this._handleDisconnected=e,this):this._handleDisconnected},r.prototype.flowLayout=function(e,t){return arguments.length||(e="y"),this._directedLinkConstraints={axis:e,getMinSeparation:"number"==typeof t?function(){return t}:t},this},r.prototype.links=function(e){return arguments.length?(this._links=e,this):this._links},r.prototype.constraints=function(e){return arguments.length?(this._constraints=e,this):this._constraints},r.prototype.distanceMatrix=function(e){return arguments.length?(this._distanceMatrix=e,this):this._distanceMatrix},r.prototype.size=function(e){return e?(this._canvasSize=e,this):this._canvasSize},r.prototype.defaultNodeSize=function(e){return e?(this._defaultNodeSize=e,this):this._defaultNodeSize},r.prototype.groupCompactness=function(e){return e?(this._groupCompactness=e,this):this._groupCompactness},r.prototype.linkDistance=function(e){return e?(this._linkDistance="function"==typeof e?e:+e,this._linkLengthCalculator=null,this):this._linkDistance},r.prototype.linkType=function(e){return this._linkType=e,this},r.prototype.convergenceThreshold=function(e){return e?(this._threshold="function"==typeof e?e:+e,this):this._threshold},r.prototype.alpha=function(e){return arguments.length?(e=+e,this._alpha?this._alpha=e>0?e:0:e>0&&(this._running||(this._running=!0,this.trigger({type:t.start,alpha:this._alpha=e}),this.kick())),this):this._alpha},r.prototype.getLinkLength=function(e){return"function"==typeof this._linkDistance?+this._linkDistance(e):this._linkDistance},r.setLinkLength=function(e,t){e.length=t},r.prototype.getLinkType=function(e){return"function"==typeof this._linkType?this._linkType(e):0},r.prototype.symmetricDiffLinkLengths=function(t,n){var r=this;return void 0===n&&(n=1),this.linkDistance(function(e){return t*e.length}),this._linkLengthCalculator=function(){return e.symmetricDiffLinkLengths(r._links,r.linkAccessor,n)},this},r.prototype.jaccardLinkLengths=function(t,n){var r=this;return void 0===n&&(n=1),this.linkDistance(function(e){return t*e.length}),this._linkLengthCalculator=function(){return e.jaccardLinkLengths(r._links,r.linkAccessor,n)},this},r.prototype.start=function(t,n,i,o,a){var s=this;void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=!0);var l,u=this.nodes().length,c=u+2*this._groups.length,h=(this._links.length,this._canvasSize[0]),d=this._canvasSize[1],p=new Array(c),f=new Array(c),v=null,g=this._avoidOverlaps;this._nodes.forEach(function(e,t){e.index=t,void 0===e.x&&(e.x=h/2,e.y=d/2),p[t]=e.x,f[t]=e.y}),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?l=this._distanceMatrix:(l=new e.shortestpaths.Calculator(c,this._links,r.getSourceIndex,r.getTargetIndex,function(e){return s.getLinkLength(e)}).DistanceMatrix(),v=e.Descent.createSquareMatrix(c,function(){return 2}),this._links.forEach(function(e){"number"==typeof e.source&&(e.source=s._nodes[e.source]),"number"==typeof e.target&&(e.target=s._nodes[e.target])}),this._links.forEach(function(e){var t=r.getSourceIndex(e),n=r.getTargetIndex(e);v[t][n]=v[n][t]=e.weight||1}));var y=e.Descent.createSquareMatrix(c,function(e,t){return l[e][t]});if(this._rootGroup&&void 0!==this._rootGroup.groups){var m=u;this._groups.forEach(function(e){!function(e,t,n,r){v[e][t]=v[t][e]=n,y[e][t]=y[t][e]=r}(m,m+1,s._groupCompactness,.1),p[m]=0,f[m++]=0,p[m]=0,f[m++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var x=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,x=x.concat(e.generateDirectedEdgeConstraints(u,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new e.Descent([p,f],y),this._descent.locks.clear();for(m=0;m<u;++m){var b=this._nodes[m];if(b.fixed){b.px=b.x,b.py=b.y;var w=[b.x,b.y];this._descent.locks.add(m,w)}}if(this._descent.threshold=this._threshold,this.initialLayout(t,p,f),x.length>0&&(this._descent.project=new e.vpsc.Projection(this._nodes,this._groups,this._rootGroup,x).projectFunctions()),this._descent.run(n),this.separateOverlappingComponents(h,d),this.avoidOverlaps(g),g&&(this._nodes.forEach(function(e,t){e.x=p[t],e.y=f[t]}),this._descent.project=new e.vpsc.Projection(this._nodes,this._groups,this._rootGroup,x,!0).projectFunctions(),this._nodes.forEach(function(e,t){p[t]=e.x,f[t]=e.y})),this._descent.G=v,this._descent.run(i),o){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=u,this._descent.scaleSnapByMaxH=u!=c;var E=e.Descent.createSquareMatrix(c,function(e,t){return e>=u||t>=u?v[e][t]:0});this._descent.G=E,this._descent.run(o)}return this.updateNodePositions(),this.separateOverlappingComponents(h,d),a?this.resume():this},r.prototype.initialLayout=function(t,n,r){if(this._groups.length>0&&t>0){var i=this._nodes.length,o=this._links.map(function(e){return{source:e.source.index,target:e.target.index}}),a=this._nodes.map(function(e){return{index:e.index}});this._groups.forEach(function(e,t){a.push({index:e.index=i+t})}),this._groups.forEach(function(e,t){void 0!==e.leaves&&e.leaves.forEach(function(t){return o.push({source:e.index,target:t.index})}),void 0!==e.groups&&e.groups.forEach(function(t){return o.push({source:e.index,target:t.index})})}),(new e.Layout).size(this.size()).nodes(a).links(o).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(t,0,0,0,!1),this._nodes.forEach(function(e){n[e.index]=a[e.index].x,r[e.index]=a[e.index].y})}else this._descent.run(t)},r.prototype.separateOverlappingComponents=function(t,n){var r=this;if(!this._distanceMatrix&&this._handleDisconnected){var i=this._descent.x[0],o=this._descent.x[1];this._nodes.forEach(function(e,t){e.x=i[t],e.y=o[t]});var a=e.separateGraphs(this._nodes,this._links);e.applyPacking(a,t,n,this._defaultNodeSize),this._nodes.forEach(function(e,t){r._descent.x[0][t]=e.x,r._descent.x[1][t]=e.y,e.bounds&&(e.bounds.setXCentre(e.x),e.bounds.setYCentre(e.y))})}},r.prototype.resume=function(){return this.alpha(.1)},r.prototype.stop=function(){return this.alpha(0)},r.prototype.prepareEdgeRouting=function(t){void 0===t&&(t=0),this._visibilityGraph=new e.geom.TangentVisibilityGraph(this._nodes.map(function(e){return e.bounds.inflate(-t).vertices()}))},r.prototype.routeEdge=function(t,n){var r=[],i=new e.geom.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),o={x:t.source.x,y:t.source.y},a={x:t.target.x,y:t.target.y},s=i.addPoint(o,t.source.index),l=i.addPoint(a,t.target.index);i.addEdgeIfVisible(o,a,t.source.index,t.target.index),void 0!==n&&n(i);var u=new e.shortestpaths.Calculator(i.V.length,i.E,function(e){return e.source.id},function(e){return e.target.id},function(e){return e.length()}).PathFromNodeToNode(s.id,l.id);if(1===u.length||u.length===i.V.length){var c=e.vpsc.makeEdgeBetween(t.source.innerBounds,t.target.innerBounds,5);r=[c.sourceIntersection,c.arrowStart]}else{for(var h=u.length-2,d=i.V[u[h]].p,p=i.V[u[0]].p,f=(r=[t.source.innerBounds.rayIntersection(d.x,d.y)],h);f>=0;--f)r.push(i.V[u[f]].p);r.push(e.vpsc.makeEdgeTo(p,t.target.innerBounds,5))}return r},r.getSourceIndex=function(e){return"number"==typeof e.source?e.source:e.source.index},r.getTargetIndex=function(e){return"number"==typeof e.target?e.target:e.target.index},r.linkId=function(e){return r.getSourceIndex(e)+"-"+r.getTargetIndex(e)},r.dragStart=function(e){n(e)?r.storeOffset(e,r.dragOrigin(e)):(r.stopNode(e),e.fixed|=2)},r.stopNode=function(e){e.px=e.x,e.py=e.y},r.storeOffset=function(e,t){void 0!==e.leaves&&e.leaves.forEach(function(e){e.fixed|=2,r.stopNode(e),e._dragGroupOffsetX=e.x-t.x,e._dragGroupOffsetY=e.y-t.y}),void 0!==e.groups&&e.groups.forEach(function(e){return r.storeOffset(e,t)})},r.dragOrigin=function(e){return n(e)?{x:e.bounds.cx(),y:e.bounds.cy()}:e},r.drag=function(e,t){n(e)?(void 0!==e.leaves&&e.leaves.forEach(function(n){e.bounds.setXCentre(t.x),e.bounds.setYCentre(t.y),n.px=n._dragGroupOffsetX+t.x,n.py=n._dragGroupOffsetY+t.y}),void 0!==e.groups&&e.groups.forEach(function(e){return r.drag(e,t)})):(e.px=t.x,e.py=t.y)},r.dragEnd=function(e){n(e)?(void 0!==e.leaves&&e.leaves.forEach(function(e){r.dragEnd(e),delete e._dragGroupOffsetX,delete e._dragGroupOffsetY}),void 0!==e.groups&&e.groups.forEach(r.dragEnd)):e.fixed&=-7},r.mouseOver=function(e){e.fixed|=4,e.px=e.x,e.py=e.y},r.mouseOut=function(e){e.fixed&=-5},r}();e.Layout=r}(cola||(cola={})),function(e){var t=function(t){function n(n){t.call(this);var r=n;r.trigger&&(this.trigger=r.trigger),r.kick&&(this.kick=r.kick),r.drag&&(this.drag=r.drag),r.on&&(this.on=r.on),this.dragstart=this.dragStart=e.Layout.dragStart,this.dragend=this.dragEnd=e.Layout.dragEnd}return __extends(n,t),n.prototype.trigger=function(e){},n.prototype.kick=function(){},n.prototype.drag=function(){},n.prototype.on=function(e,t){return this},n}(e.Layout);e.LayoutAdaptor=t,e.adaptor=function(e){return new t(e)}}(cola||(cola={})),function(e){e.gridify=function(t,n,r,i){return t.cola.start(0,0,0,10,!1),function(t,n,r,i){t.forEach(function(e){e.routerNode={name:e.name,bounds:e.bounds.inflate(-r)}}),n.forEach(function(e){e.routerNode={bounds:e.bounds.inflate(-i),children:(void 0!==e.groups?e.groups.map(function(e){return t.length+e.id}):[]).concat(void 0!==e.leaves?e.leaves.map(function(e){return e.index}):[])}});var o=t.concat(n).map(function(e,t){return e.routerNode.id=t,e.routerNode});return new e.GridRouter(o,{getChildren:function(e){return e.children},getBounds:function(e){return e.bounds}},r-i)}(t.cola.nodes(),t.cola.groups(),r,i).routeEdges(t.powerGraph.powerEdges,n,function(e){return e.source.routerNode.id},function(e){return e.target.routerNode.id})},e.powerGraphGridLayout=function(t,n,r,i,o){var a;t.nodes.forEach(function(e,t){return e.index=t}),(new e.Layout).avoidOverlaps(!1).nodes(t.nodes).links(t.links).powerGraphGroups(function(e){(a=e).groups.forEach(function(e){return e.padding=r})});var s=t.nodes.length,l=[],u=t.nodes.slice(0);return u.forEach(function(e,t){return e.index=t}),a.groups.forEach(function(e){var t=e.index=e.id+s;u.push(e),void 0!==e.leaves&&e.leaves.forEach(function(e){return l.push({source:t,target:e.index})}),void 0!==e.groups&&e.groups.forEach(function(e){return l.push({source:t,target:e.id+s})})}),a.powerEdges.forEach(function(e){l.push({source:e.source.index,target:e.target.index})}),(new e.Layout).size(n).nodes(u).links(l).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new e.Layout).convergenceThreshold(.001).size(n).avoidOverlaps(!0).nodes(t.nodes).links(t.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(e){(a=e).groups.forEach(function(e){e.padding=r})}).start(50,0,100,0,!1),powerGraph:a}}}(cola||(cola={})),function(e){var t=function(t){function n(){t.call(this),this.event=d3.dispatch(e.EventType[e.EventType.start],e.EventType[e.EventType.tick],e.EventType[e.EventType.end]);var n=this;this.drag=function(){if(!t)var t=d3.behavior.drag().origin(e.Layout.dragOrigin).on("dragstart.d3adaptor",e.Layout.dragStart).on("drag.d3adaptor",function(t){e.Layout.drag(t,d3.event),n.resume()}).on("dragend.d3adaptor",e.Layout.dragEnd);if(!arguments.length)return t;this.call(t)}}return __extends(n,t),n.prototype.trigger=function(t){var n={type:e.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event[n.type](n)},n.prototype.kick=function(){var e=this;d3.timer(function(){return t.prototype.tick.call(e)})},n.prototype.on=function(t,n){return"string"==typeof t?this.event.on(t,n):this.event.on(e.EventType[t],n),this},n}(e.Layout);e.D3StyleLayoutAdaptor=t,e.d3adaptor=function(){return new t}}(cola||(cola={})),function(e){var t=function(){return function(e,t,n){this.id=e,this.rect=t,this.children=n,this.leaf=void 0===n||0===n.length}}();e.NodeWrapper=t;var n=function(){return function(e,t,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null),this.id=e,this.x=t,this.y=n,this.node=r,this.line=i}}();e.Vert=n;var r=function(){function e(t,n){this.s=t,this.t=n;var r=e.findMatch(t,n),i=n.slice(0).reverse(),o=e.findMatch(t,i);r.length>=o.length?(this.length=r.length,this.si=r.si,this.ti=r.ti,this.reversed=!1):(this.length=o.length,this.si=o.si,this.ti=n.length-o.ti-o.length,this.reversed=!0)}return e.findMatch=function(e,t){for(var n=e.length,r=t.length,i={length:0,si:-1,ti:-1},o=new Array(n),a=0;a<n;a++){o[a]=new Array(r);for(var s=0;s<r;s++)if(e[a]===t[s]){var l=o[a][s]=0===a||0===s?1:o[a-1][s-1]+1;l>i.length&&(i.length=l,i.si=a-l+1,i.ti=s-l+1)}else o[a][s]=0}return i},e.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},e}();e.LongestCommonSubsequence=r;var i=function(){function r(r,i,o){var a=this;void 0===o&&(o=12),this.originalnodes=r,this.groupPadding=o,this.leaves=null,this.nodes=r.map(function(e,n){return new t(n,i.getBounds(e),i.getChildren(e))}),this.leaves=this.nodes.filter(function(e){return e.leaf}),this.groups=this.nodes.filter(function(e){return!e.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(e){return e.children.forEach(function(t){return a.nodes[t].parent=e})}),this.root={children:[]},this.nodes.forEach(function(e){void 0===e.parent&&(e.parent=a.root,a.root.children.push(e.id)),e.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(e,t){return a.getDepth(e)-a.getDepth(t)}),this.backToFront.slice(0).reverse().filter(function(e){return!e.leaf}).forEach(function(t){var n=e.vpsc.Rectangle.empty();t.children.forEach(function(e){return n=n.union(a.nodes[e].rect)}),t.rect=n.inflate(a.groupPadding)});var s=this.midPoints(this.cols.map(function(e){return e.pos})),l=this.midPoints(this.rows.map(function(e){return e.pos})),u=s[0],c=s[s.length-1],h=l[0],d=l[l.length-1],p=this.rows.map(function(e){return{x1:u,x2:c,y1:e.pos,y2:e.pos}}).concat(l.map(function(e){return{x1:u,x2:c,y1:e,y2:e}})),f=this.cols.map(function(e){return{x1:e.pos,x2:e.pos,y1:h,y2:d}}).concat(s.map(function(e){return{x1:e,x2:e,y1:h,y2:d}})),v=p.concat(f);v.forEach(function(e){return e.verts=[]}),this.verts=[],this.edges=[],p.forEach(function(e){return f.forEach(function(t){var r=new n(a.verts.length,t.x1,e.y1);e.verts.push(r),t.verts.push(r),a.verts.push(r);for(var i=a.backToFront.length;i-- >0;){var o=a.backToFront[i],s=o.rect,l=Math.abs(r.x-s.cx()),u=Math.abs(r.y-s.cy());if(l<s.width()/2&&u<s.height()/2){r.node=o;break}}})}),v.forEach(function(e,t){a.nodes.forEach(function(t,r){t.rect.lineIntersections(e.x1,e.y1,e.x2,e.y2).forEach(function(r,i){var o=new n(a.verts.length,r.x,r.y,t,e);a.verts.push(o),e.verts.push(o),t.ports.push(o)})});var r=Math.abs(e.y1-e.y2)<.1,i=function(e,t){return r?t.x-e.x:t.y-e.y};e.verts.sort(i);for(var o=1;o<e.verts.length;o++){var s=e.verts[o-1],l=e.verts[o];s.node&&s.node===l.node&&s.node.leaf||a.edges.push({source:s.id,target:l.id,length:Math.abs(i(s,l))})}})}return r.prototype.avg=function(e){return e.reduce(function(e,t){return e+t})/e.length},r.prototype.getGridLines=function(e){for(var t=[],n=this.leaves.slice(0,this.leaves.length);n.length>0;){var r=n.filter(function(t){return t.rect["overlap"+e.toUpperCase()](n[0].rect)}),i={nodes:r,pos:this.avg(r.map(function(t){return t.rect["c"+e]()}))};t.push(i),i.nodes.forEach(function(e){return n.splice(n.indexOf(e),1)})}return t.sort(function(e,t){return e.pos-t.pos}),t},r.prototype.getDepth=function(e){for(var t=0;e.parent!==this.root;)t++,e=e.parent;return t},r.prototype.midPoints=function(e){for(var t=e[1]-e[0],n=[e[0]-t/2],r=1;r<e.length;r++)n.push((e[r]+e[r-1])/2);return n.push(e[e.length-1]+t/2),n},r.prototype.findLineage=function(e){var t=[e];do{e=e.parent,t.push(e)}while(e!==this.root);return t.reverse()},r.prototype.findAncestorPathBetween=function(e,t){for(var n=this.findLineage(e),r=this.findLineage(t),i=0;n[i]===r[i];)i++;return{commonAncestor:n[i-1],lineages:n.slice(i).concat(r.slice(i))}},r.prototype.siblingObstacles=function(e,t){var n=this,r=this.findAncestorPathBetween(e,t),i={};r.lineages.forEach(function(e){return i[e.id]={}});var o=r.commonAncestor.children.filter(function(e){return!(e in i)});return r.lineages.filter(function(e){return e.parent!==r.commonAncestor}).forEach(function(e){return o=o.concat(e.parent.children.filter(function(t){return t!==e.id}))}),o.map(function(e){return n.nodes[e]})},r.getSegmentSets=function(e,t,n){for(var r=[],i=0;i<e.length;i++)for(var o=e[i],a=0;a<o.length;a++){(h=o[a]).edgeid=i,h.i=a;var s=h[1][t]-h[0][t];Math.abs(s)<.1&&r.push(h)}r.sort(function(e,n){return e[0][t]-n[0][t]});for(var l=[],u=null,c=0;c<r.length;c++){var h=r[c];(!u||Math.abs(h[0][t]-u.pos)>.1)&&(u={pos:h[0][t],segments:[]},l.push(u)),u.segments.push(h)}return l},r.nudgeSegs=function(t,n,r,i,o,a){var s=i.length;if(!(s<=1)){for(var l=i.map(function(n){return new e.vpsc.Variable(n[0][t])}),u=[],c=0;c<s;c++)for(var h=0;h<s;h++)if(c!==h){var d=i[c],p=i[h],f=d.edgeid,v=p.edgeid,g=-1,y=-1;"x"==t?o(f,v)&&(d[0][n]<d[1][n]?(g=h,y=c):(g=c,y=h)):o(f,v)&&(d[0][n]<d[1][n]?(g=c,y=h):(g=h,y=c)),g>=0&&u.push(new e.vpsc.Constraint(l[g],l[y],a))}new e.vpsc.Solver(l,u).solve(),l.forEach(function(e,n){var o=i[n],a=e.position();o[0][t]=o[1][t]=a;var s=r[o.edgeid];o.i>0&&(s[o.i-1][1][t]=a),o.i<s.length-1&&(s[o.i+1][0][t]=a)})}},r.nudgeSegments=function(e,t,n,i,o){for(var a=r.getSegmentSets(e,t,n),s=0;s<a.length;s++){for(var l=a[s],u=[],c=0;c<l.segments.length;c++){var h=l.segments[c];u.push({type:0,s:h,pos:Math.min(h[0][n],h[1][n])}),u.push({type:1,s:h,pos:Math.max(h[0][n],h[1][n])})}u.sort(function(e,t){return e.pos-t.pos+e.type-t.type});var d=[],p=0;u.forEach(function(a){0===a.type?(d.push(a.s),p++):p--,0==p&&(r.nudgeSegs(t,n,e,d,i,o),d=[])})}},r.prototype.routeEdges=function(t,n,r,i){var o=this,a=t.map(function(e){return o.route(r(e),i(e))}),s=e.GridRouter.orderEdges(a),l=a.map(function(t){return e.GridRouter.makeSegments(t)});return e.GridRouter.nudgeSegments(l,"x","y",s,n),e.GridRouter.nudgeSegments(l,"y","x",s,n),e.GridRouter.unreverseEdges(l,a),l},r.unreverseEdges=function(e,t){e.forEach(function(e,n){t[n].reversed&&(e.reverse(),e.forEach(function(e){e.reverse()}))})},r.angleBetween2Lines=function(e,t){var n=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),r=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),i=n-r;return(i>Math.PI||i<-Math.PI)&&(i=r-n),i},r.isLeft=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)<=0},r.getOrder=function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];void 0===t[r.l]&&(t[r.l]={}),t[r.l][r.r]=!0}return function(e,n){return void 0!==t[e]&&t[e][n]}},r.orderEdges=function(t){for(var n=[],i=0;i<t.length-1;i++)for(var o=i+1;o<t.length;o++){var a,s,l,u=t[i],c=t[o],h=new e.LongestCommonSubsequence(u,c);0!==h.length&&(h.reversed&&(c.reverse(),c.reversed=!0,h=new e.LongestCommonSubsequence(u,c)),(h.si<=0||h.ti<=0)&&(h.si+h.length>=u.length||h.ti+h.length>=c.length)?n.push({l:i,r:o}):(h.si+h.length>=u.length||h.ti+h.length>=c.length?(a=u[h.si+1],l=u[h.si-1],s=c[h.ti-1]):(a=u[h.si+h.length-2],s=u[h.si+h.length],l=c[h.ti+h.length]),r.isLeft(a,s,l)?n.push({l:o,r:i}):n.push({l:i,r:o})))}return e.GridRouter.getOrder(n)},r.makeSegments=function(e){function t(e){return{x:e.x,y:e.y}}for(var n=function(e,t,n){return Math.abs((t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x))<.001},r=[],i=t(e[0]),o=1;o<e.length;o++){var a=t(e[o]),s=o<e.length-1?e[o+1]:null;s&&n(i,a,s)||(r.push([i,a]),i=a)}return r},r.prototype.route=function(t,n){var r=this,i=this.nodes[t],o=this.nodes[n];this.obstacles=this.siblingObstacles(i,o);var a={};this.obstacles.forEach(function(e){return a[e.id]=e}),this.passableEdges=this.edges.filter(function(e){var t=r.verts[e.source],n=r.verts[e.target];return!(t.node&&t.node.id in a||n.node&&n.node.id in a)});for(var s=1;s<i.ports.length;s++){var l=i.ports[0].id,u=i.ports[s].id;this.passableEdges.push({source:l,target:u,length:0})}for(s=1;s<o.ports.length;s++){l=o.ports[0].id,u=o.ports[s].id;this.passableEdges.push({source:l,target:u,length:0})}var c=new e.shortestpaths.Calculator(this.verts.length,this.passableEdges,function(e){return e.source},function(e){return e.target},function(e){return e.length}).PathFromNodeToNodeWithPrevCost(i.ports[0].id,o.ports[0].id,function(e,t,n){var a=r.verts[e],s=r.verts[t],l=r.verts[n],u=Math.abs(l.x-a.x),c=Math.abs(l.y-a.y);return a.node===i&&a.node===s.node||s.node===o&&s.node===l.node?0:u>1&&c>1?1e3:0}).reverse().map(function(e){return r.verts[e]});return c.push(this.nodes[o.id].ports[0]),c.filter(function(e,t){return!(t<c.length-1&&c[t+1].node===i&&e.node===i||t>0&&e.node===o&&c[t-1].node===o)})},r.getRoutePath=function(e,t,n,i){var o={routepath:"M "+e[0][0].x+" "+e[0][0].y+" ",arrowpath:""};if(e.length>1)for(var a=0;a<e.length;a++){var s=(b=e[a])[1].x,l=b[1].y,u=s-b[0].x,c=l-b[0].y;if(a<e.length-1){Math.abs(u)>0?s-=u/Math.abs(u)*t:l-=c/Math.abs(c)*t,o.routepath+="L "+s+" "+l+" ";var h=e[a+1],d=h[0].x,p=h[0].y;u=h[1].x-d,c=h[1].y-p;var f,v,g=r.angleBetween2Lines(b,h)<0?1:0;Math.abs(u)>0?(f=d+u/Math.abs(u)*t,v=p):(f=d,v=p+c/Math.abs(c)*t);var y=Math.abs(f-s),m=Math.abs(v-l);o.routepath+="A "+y+" "+m+" 0 0 "+g+" "+f+" "+v+" "}else{var x=[s,l];Math.abs(u)>0?(w=[s-=u/Math.abs(u)*i,l+n],E=[s,l-n]):(w=[s+n,l-=c/Math.abs(c)*i],E=[s-n,l]),o.routepath+="L "+s+" "+l+" ",i>0&&(o.arrowpath="M "+x[0]+" "+x[1]+" L "+w[0]+" "+w[1]+" L "+E[0]+" "+E[1])}}else{var b,w,E;s=(b=e[0])[1].x,l=b[1].y,u=s-b[0].x,c=l-b[0].y,x=[s,l];Math.abs(u)>0?(w=[s-=u/Math.abs(u)*i,l+n],E=[s,l-n]):(w=[s+n,l-=c/Math.abs(c)*i],E=[s-n,l]),o.routepath+="L "+s+" "+l+" ",i>0&&(o.arrowpath="M "+x[0]+" "+x[1]+" L "+w[0]+" "+w[1]+" L "+E[0]+" "+E[1])}return o},r}();e.GridRouter=i}(cola||(cola={})),function(e){var t=function(){function e(e,t){this.source=e,this.target=t}return e.prototype.actualLength=function(e){var t=this;return Math.sqrt(e.reduce(function(e,n){var r=n[t.target]-n[t.source];return e+r*r},0))},e}();e.Link3D=t;var n=function(){return function(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),this.x=e,this.y=t,this.z=n}}();e.Node3D=n;var r=function(){function t(e,n,r){var i=this;void 0===r&&(r=1),this.nodes=e,this.links=n,this.idealLinkLength=r,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(t.k);for(var o=0;o<t.k;++o)this.result[o]=new Array(e.length);e.forEach(function(e,n){for(var r=0,o=t.dims;r<o.length;r++){var a=o[r];void 0===e[a]&&(e[a]=Math.random())}i.result[0][n]=e.x,i.result[1][n]=e.y,i.result[2][n]=e.z})}return t.prototype.linkLength=function(e){return e.actualLength(this.result)},t.prototype.start=function(t){var n=this;void 0===t&&(t=100);var r=this.nodes.length,o=new i;this.useJaccardLinkLengths&&e.jaccardLinkLengths(this.links,o,1.5),this.links.forEach(function(e){return e.length*=n.idealLinkLength});var a=new e.shortestpaths.Calculator(r,this.links,function(e){return e.source},function(e){return e.target},function(e){return e.length}).DistanceMatrix(),s=e.Descent.createSquareMatrix(r,function(e,t){return a[e][t]}),l=e.Descent.createSquareMatrix(r,function(){return 2});this.links.forEach(function(e){var t=e.source,n=e.target;return l[t][n]=l[n][t]=1}),this.descent=new e.Descent(this.result,s),this.descent.threshold=.001,this.descent.G=l,this.constraints&&(this.descent.project=new e.vpsc.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var u=0;u<this.nodes.length;u++){var c=this.nodes[u];c.fixed&&this.descent.locks.add(u,[c.x,c.y,c.z])}return this.descent.run(t),this},t.prototype.tick=function(){this.descent.locks.clear();for(var e=0;e<this.nodes.length;e++){var t=this.nodes[e];t.fixed&&this.descent.locks.add(e,[t.x,t.y,t.z])}return this.descent.rungeKutta()},t.dims=["x","y","z"],t.k=t.dims.length,t}();e.Layout3D=r;var i=function(){function e(){}return e.prototype.getSourceIndex=function(e){return e.source},e.prototype.getTargetIndex=function(e){return e.target},e.prototype.getLength=function(e){return e.length},e.prototype.setLength=function(e,t){e.length=t},e}()}(cola||(cola={})),"undefined"!=typeof module&&(module.exports=cola),function(){"use strict";var e=function(e,t){if(e&&t){var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,r=function(e){return"number"==typeof e},i={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:void 0,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,nodeSpacing:function(e){return 10},flow:void 0,alignment:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1};o.prototype.run=function(){var e=this,i=this.options;e.manuallyStopped=!1;var o=i.cy,a=i.eles,s=a.nodes(),l=a.edges(),u=!1,c=i.boundingBox||{x1:0,y1:0,w:o.width(),h:o.height()};void 0===c.x2&&(c.x2=c.x1+c.w),void 0===c.w&&(c.w=c.x2-c.x1),void 0===c.y2&&(c.y2=c.y1+c.h),void 0===c.h&&(c.h=c.y2-c.y1);var h=function(e,t){return"function"==typeof e?e.apply(t,[t]):e},d=function(){for(var e=0;e<s.length;e++){var t=s[e],n=t.layoutDimensions(i),a=t.scratch("cola");if(!a.updatedDims){var l=h(i.nodeSpacing,t);a.width=n.w+2*l,a.height=n.h+2*l}}s.positions(function(e,t){r(e)&&(e=t);var n,i=e.scratch().cola;return e.grabbed()||e.isParent()||(n={x:c.x1+i.x,y:c.y1+i.y},r(n.x)&&r(n.y)||(n=void 0)),n}),s.updateCompoundBounds(),u||(f(),u=!0),i.fit&&o.fit(i.padding)},p=function(){i.ungrabifyWhileSimulating&&b.grabify(),o.off("destroy",y),s.off("grab free position",m),s.off("lock unlock",x),e.one("layoutstop",i.stop),e.trigger({type:"layoutstop",layout:e})},f=function(){e.one("layoutready",i.ready),e.trigger({type:"layoutready",layout:e})},v=i.refresh;i.refresh<0?(Math.abs(i.refresh),v=1):v=Math.max(1,v);var g=e.adaptor=t.adaptor({trigger:function(e){var n=t.EventType?t.EventType.tick:null,r=t.EventType?t.EventType.end:null;switch(e.type){case"tick":case n:i.animate&&d();break;case"end":case r:d(),i.infinite||p()}},kick:function(){var t=function(){if(e.manuallyStopped)return p(),!0;var t=g.tick();return t&&i.infinite&&g.resume(),t};if(i.animate){var r=function(){(function(){for(var e,n=0;n<v&&!e;n++)e=e||t();return e})()||n(r)};n(r)}else for(;!t(););},on:function(e,t){},drag:function(){}});e.adaptor=g;var y,m,x,b=s.filter(":grabbable");i.ungrabifyWhileSimulating&&b.ungrabify(),o.one("destroy",y=function(t){e.stop()}),s.on("grab free position",m=function(e){var t=this.scratch().cola,n=this.position();if(e.cyTarget===this||e.target===this)switch(e.type){case"grab":g.dragstart(t),g.resume();break;case"free":g.dragend(t);break;case"position":t.px===n.x-c.x1&&t.py===n.y-c.y1||(t.px=n.x-c.x1,t.py=n.y-c.y1,g.resume())}}),s.on("lock unlock",x=function(e){var t=this.scratch().cola;t.fixed=this.locked(),this.locked()?g.dragstart(t):g.dragend(t)});var w,E,_=s.stdFilter(function(e){return!e.isParent()});if(g.nodes(_.map(function(e,t){var n=h(i.nodeSpacing,e),r=e.position(),o=e.layoutDimensions(i);return e.scratch().cola={x:i.randomize||void 0===r.x?Math.round(Math.random()*c.w):r.x,y:i.randomize||void 0===r.y?Math.round(Math.random()*c.h):r.y,width:o.w+2*n,height:o.h+2*n,index:t,fixed:e.locked()}})),i.alignment){var k=[],P=[];_.forEach(function(e){var t=h(i.alignment,e),n=e.scratch().cola.index;t&&(null!=t.x&&k.push({node:n,offset:t.x}),null!=t.y&&P.push({node:n,offset:t.y}))});var S=[];k.length>0&&S.push({type:"alignment",axis:"x",offsets:k}),P.length>0&&S.push({type:"alignment",axis:"y",offsets:P}),g.constraints(S)}g.groups(s.stdFilter(function(e){return e.isParent()}).map(function(e,t){var n=h(i.nodeSpacing,e),r=function(t){return parseFloat(e.style("padding-"+t))},o=r("left")+n,a=r("right")+n,s=r("top")+n,l=r("bottom")+n;return e.scratch().cola={index:t,padding:Math.max(o,a,s,l),leaves:e.children().stdFilter(function(e){return!e.isParent()}).map(function(e){return e[0].scratch().cola.index}),fixed:e.locked()},e}).map(function(e){return e.scratch().cola.groups=e.children().stdFilter(function(e){return e.isParent()}).map(function(e){return e.scratch().cola.index}),e.scratch().cola})),null!=i.edgeLength?(w=i.edgeLength,E="linkDistance"):null!=i.edgeSymDiffLength?(w=i.edgeSymDiffLength,E="symmetricDiffLinkLengths"):null!=i.edgeJaccardLength?(w=i.edgeJaccardLength,E="jaccardLinkLengths"):(w=100,E="linkDistance");if(g.links(l.stdFilter(function(e){return!e.source().isParent()&&!e.target().isParent()}).map(function(e,t){var n=e.scratch().cola={source:e.source()[0].scratch().cola.index,target:e.target()[0].scratch().cola.index};return null!=w&&(n.calcLength=h(w,e)),n})),g.size([c.w,c.h]),null!=w&&g[E](function(e){return e.calcLength}),i.flow){var C;"string"==typeof i.flow?C={axis:i.flow,minSeparation:50}:r(i.flow)?C={axis:"y",minSeparation:i.flow}:!function(e){return null!=e&&typeof e==typeof{}}(i.flow)?C={axis:"y",minSeparation:50}:((C=i.flow).axis=C.axis||"y",C.minSeparation=null!=C.minSeparation?C.minSeparation:50),g.flowLayout(C.axis,C.minSeparation)}return e.trigger({type:"layoutstart",layout:e}),g.avoidOverlaps(i.avoidOverlap).handleDisconnected(i.handleDisconnected).start(i.unconstrIter,i.userConstIter,i.allConstIter),i.infinite||setTimeout(function(){e.manuallyStopped||g.stop()},i.maxSimulationTime),this},o.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},e("layout","cola",o)}function o(e){var t=this.options={};for(var n in i)t[n]=i[n];for(var n in e)t[n]=e[n]}};"undefined"!=typeof module&&module.exports?module.exports=function(t,n){e(t,n||require("webcola"))}:"undefined"!=typeof define&&define.amd&&define("cytoscape-cola",function(){return e}),"undefined"!=typeof cytoscape&&void 0!==cola&&e(cytoscape,cola)}();
//# sourceMappingURL=externals.js.map