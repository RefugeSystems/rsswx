!function(){return function t(e,n,i){function r(a,o){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return r(e[a][1][t]||t)},u,u.exports,t,e,n,i)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}}()({1:[function(t,e,n){var i=t("cssfilter").FilterCSS,r=t("cssfilter").getDefaultWhiteList,s=t("./util");function a(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}var o=new i;function l(t){return t.replace(c,"&lt;").replace(u,"&gt;")}var c=/</g,u=/>/g,d=/"/g,p=/&quot;/g,h=/&#([a-zA-Z0-9]*);?/gim,f=/&colon;?/gim,m=/&newline;?/gim,v=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,g=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,y=/u\s*r\s*l\s*\(.*/gi;function b(t){return t.replace(d,"&quot;")}function _(t){return t.replace(p,'"')}function x(t){return t.replace(h,function(t,e){return"x"===e[0]||"X"===e[0]?String.fromCharCode(parseInt(e.substr(1),16)):String.fromCharCode(parseInt(e,10))})}function w(t){return t.replace(f,":").replace(m," ")}function k(t){for(var e="",n=0,i=t.length;n<i;n++)e+=t.charCodeAt(n)<32?" ":t.charAt(n);return s.trim(e)}function S(t){return t=k(t=w(t=x(t=_(t))))}function C(t){return t=l(t=b(t))}var E=/<!--[\s\S]*?-->/g;n.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]},n.getDefaultWhiteList=a,n.onTag=function(t,e,n){},n.onIgnoreTag=function(t,e,n){},n.onTagAttr=function(t,e,n){},n.onIgnoreTagAttr=function(t,e,n){},n.safeAttrValue=function(t,e,n,i){if(n=S(n),"href"===e||"src"===e){if("#"===(n=s.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===e){if(v.lastIndex=0,v.test(n))return""}else if("style"===e){if(g.lastIndex=0,g.test(n))return"";if(y.lastIndex=0,y.test(n)&&(v.lastIndex=0,v.test(n)))return"";!1!==i&&(n=(i=i||o).process(n))}return n=C(n)},n.escapeHtml=l,n.escapeQuote=b,n.unescapeQuote=_,n.escapeHtmlEntities=x,n.escapeDangerHtml5Entities=w,n.clearNonPrintableCharacter=k,n.friendlyAttrValue=S,n.escapeAttrValue=C,n.onIgnoreTagStripAll=function(){return""},n.StripTagBody=function(t,e){"function"!=typeof e&&(e=function(){});var n=!Array.isArray(t),i=[],r=!1;return{onIgnoreTag:function(a,o,l){if(function(e){return!!n||-1!==s.indexOf(t,e)}(a)){if(l.isClosing){var c="[/removed]",u=l.position+c.length;return i.push([!1!==r?r:l.position,u]),r=!1,c}return r||(r=l.position),"[removed]"}return e(a,o,l)},remove:function(t){var e="",n=0;return s.forEach(i,function(i){e+=t.slice(n,i[0]),n=i[1]}),e+=t.slice(n)}}},n.stripCommentTag=function(t){return t.replace(E,"")},n.stripBlankChar=function(t){var e=t.split("");return(e=e.filter(function(t){var e=t.charCodeAt(0);return!(127===e||e<=31&&10!==e&&13!==e)})).join("")},n.cssFilter=o,n.getDefaultCSSWhiteList=r},{"./util":4,cssfilter:8}],2:[function(t,e,n){var i=t("./default"),r=t("./parser"),s=t("./xss");function a(t,e){return new s(e).process(t)}for(var o in(n=e.exports=a).filterXSS=a,n.FilterXSS=s,i)n[o]=i[o];for(var o in r)n[o]=r[o];"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)},{"./default":1,"./parser":3,"./xss":5}],3:[function(t,e,n){var i=t("./util");function r(t){var e=i.spaceIndex(t);if(-1===e)var n=t.slice(1,-1);else n=t.slice(1,e+1);return"/"===(n=i.trim(n).toLowerCase()).slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function s(t){return"</"===t.slice(0,2)}var a=/[^a-zA-Z0-9_:\.\-]/gim;function o(t,e){for(;e<t.length;e++){var n=t[e];if(" "!==n)return"="===n?e:-1}}function l(t,e){for(;e>0;e--){var n=t[e];if(" "!==n)return"="===n?e:-1}}function c(t){return function(t){return'"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1]}(t)?t.substr(1,t.length-2):t}n.parseTag=function(t,e,n){"use strict";var i="",a=0,o=!1,l=!1,c=0,u=t.length,d="",p="";t:for(c=0;c<u;c++){var h=t.charAt(c);if(!1===o){if("<"===h){o=c;continue}}else if(!1===l){if("<"===h){i+=n(t.slice(a,c)),o=c,a=c;continue}if(">"===h){i+=n(t.slice(a,o)),d=r(p=t.slice(o,c+1)),i+=e(o,i.length,d,p,s(p)),a=c+1,o=!1;continue}if('"'===h||"'"===h)for(var f=1,m=t.charAt(c-f);" "===m||"="===m;){if("="===m){l=h;continue t}m=t.charAt(c-++f)}}else if(h===l){l=!1;continue}}return a<t.length&&(i+=n(t.substr(a))),i},n.parseAttr=function(t,e){"use strict";var n=0,r=[],s=!1,u=t.length;function d(t,n){if(!((t=(t=i.trim(t)).replace(a,"").toLowerCase()).length<1)){var s=e(t,n||"");s&&r.push(s)}}for(var p=0;p<u;p++){var h,f=t.charAt(p);if(!1!==s||"="!==f)if(!1===s||p!==n||'"'!==f&&"'"!==f||"="!==t.charAt(p-1)){if(/\s|\n|\t/.test(f)){if(t=t.replace(/\s|\n|\t/g," "),!1===s){if(-1===(h=o(t,p))){d(i.trim(t.slice(n,p))),s=!1,n=p+1;continue}p=h-1;continue}if(-1===(h=l(t,p-1))){d(s,c(i.trim(t.slice(n,p)))),s=!1,n=p+1;continue}}}else{if(-1===(h=t.indexOf(f,p+1)))break;d(s,i.trim(t.slice(n+1,h))),s=!1,n=(p=h)+1}else s=t.slice(n,p),n=p+1}return n<t.length&&(!1===s?d(t.slice(n)):d(s,c(i.trim(t.slice(n))))),i.trim(r.join(" "))}},{"./util":4}],4:[function(t,e,n){e.exports={indexOf:function(t,e){var n,i;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var i,r;if(Array.prototype.forEach)return t.forEach(e,n);for(i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/.exec(t);return e?e.index:-1}}},{}],5:[function(t,e,n){var i=t("cssfilter").FilterCSS,r=t("./default"),s=t("./parser"),a=s.parseTag,o=s.parseAttr,l=t("./util");function c(t){return void 0===t||null===t}function u(t){(t=function(t){var e={};for(var n in t)e[n]=t[n];return e}(t||{})).stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=r.onIgnoreTagStripAll),t.whiteList=t.whiteList||r.whiteList,t.onTag=t.onTag||r.onTag,t.onTagAttr=t.onTagAttr||r.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||r.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||r.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||r.safeAttrValue,t.escapeHtml=t.escapeHtml||r.escapeHtml,this.options=t,!1===t.css?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new i(t.css))}u.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var e=this.options,n=e.whiteList,i=e.onTag,s=e.onIgnoreTag,u=e.onTagAttr,d=e.onIgnoreTagAttr,p=e.safeAttrValue,h=e.escapeHtml,f=this.cssFilter;e.stripBlankChar&&(t=r.stripBlankChar(t)),e.allowCommentTag||(t=r.stripCommentTag(t));var m=!1;if(e.stripIgnoreTagBody){m=r.StripTagBody(e.stripIgnoreTagBody,s);s=m.onIgnoreTag}var v=a(t,function(t,e,r,a,m){var v,g={sourcePosition:t,position:e,isClosing:m,isWhite:n.hasOwnProperty(r)};if(!c(v=i(r,a,g)))return v;if(g.isWhite){if(g.isClosing)return"</"+r+">";var y=function(t){var e=l.spaceIndex(t);if(-1===e)return{html:"",closing:"/"===t[t.length-2]};var n="/"===(t=l.trim(t.slice(e+1,-1)))[t.length-1];return n&&(t=l.trim(t.slice(0,-1))),{html:t,closing:n}}(a),b=n[r],_=o(y.html,function(t,e){var n,i=-1!==l.indexOf(b,t);return c(n=u(r,t,e,i))?i?(e=p(r,t,e,f))?t+'="'+e+'"':t:c(n=d(r,t,e,i))?void 0:n:n});a="<"+r;return _&&(a+=" "+_),y.closing&&(a+=" /"),a+=">"}return c(v=s(r,a,g))?h(a):v},h);return m&&(v=m.remove(v)),v},e.exports=u},{"./default":1,"./parser":3,"./util":4,cssfilter:8}],6:[function(t,e,n){var i=t("./default"),r=t("./parser");t("./util");function s(t){return void 0===t||null===t}function a(t){(t=function(t){var e={};for(var n in t)e[n]=t[n];return e}(t||{})).whiteList=t.whiteList||i.whiteList,t.onAttr=t.onAttr||i.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||i.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||i.safeAttrValue,this.options=t}a.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var e=this.options,n=e.whiteList,i=e.onAttr,a=e.onIgnoreAttr,o=e.safeAttrValue;return r(t,function(t,e,r,l,c){var u=n[r],d=!1;if(!0===u?d=u:"function"==typeof u?d=u(l):u instanceof RegExp&&(d=u.test(l)),!0!==d&&(d=!1),l=o(r,l)){var p,h={position:e,sourcePosition:t,source:c,isWhite:d};return d?s(p=i(r,l,h))?r+":"+l:p:s(p=a(r,l,h))?void 0:p}})},e.exports=a},{"./default":7,"./parser":9,"./util":10}],7:[function(t,e,n){function i(){var t={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return t}var r=/javascript\s*\:/gim;n.whiteList=i(),n.getDefaultWhiteList=i,n.onAttr=function(t,e,n){},n.onIgnoreAttr=function(t,e,n){},n.safeAttrValue=function(t,e){return r.test(e)?"":e}},{}],8:[function(t,e,n){var i=t("./default"),r=t("./css");for(var s in(n=e.exports=function(t,e){return new r(e).process(t)}).FilterCSS=r,i)n[s]=i[s];"undefined"!=typeof window&&(window.filterCSS=e.exports)},{"./css":6,"./default":7}],9:[function(t,e,n){var i=t("./util");e.exports=function(t,e){";"!==(t=i.trimRight(t))[t.length-1]&&(t+=";");var n=t.length,r=!1,s=0,a=0,o="";function l(){if(!r){var n=i.trim(t.slice(s,a)),l=n.indexOf(":");if(-1!==l){var c=i.trim(n.slice(0,l)),u=i.trim(n.slice(l+1));if(c){var d=e(s,o.length,c,u,n);d&&(o+=d+"; ")}}}s=a+1}for(;a<n;a++){var c=t[a];if("/"===c&&"*"===t[a+1]){var u=t.indexOf("*/",a+2);if(-1===u)break;s=(a=u+1)+1,r=!1}else"("===c?r=!0:")"===c?r=!1:";"===c?r||l():"\n"===c&&l()}return i.trim(o)}},{"./util":10}],10:[function(t,e,n){e.exports={indexOf:function(t,e){var n,i;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var i,r;if(Array.prototype.forEach)return t.forEach(e,n);for(i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}}},{}]},{},[2]),function(t,e,n,i){"use strict";var r,s=["","webkit","Moz","MS","ms","o"],a=e.createElement("div"),o="function",l=Math.round,c=Math.abs,u=Date.now;function d(t,e,n){return setTimeout(y(t,n),e)}function p(t,e,n){return!!Array.isArray(t)&&(h(t,n[e],n),!0)}function h(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function f(e,n,i){var r="DEPRECATED METHOD: "+n+"\n"+i+" AT \n";return function(){var n=new Error("get-stack-trace"),i=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=t.console&&(t.console.warn||t.console.log);return s&&s.call(t.console,r,i),e.apply(this,arguments)}}r="function"!=typeof Object.assign?function(t){if(t===i||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==i&&null!==r)for(var s in r)r.hasOwnProperty(s)&&(e[s]=r[s])}return e}:Object.assign;var m=f(function(t,e,n){for(var r=Object.keys(e),s=0;s<r.length;)(!n||n&&t[r[s]]===i)&&(t[r[s]]=e[r[s]]),s++;return t},"extend","Use `assign`."),v=f(function(t,e){return m(t,e,!0)},"merge","Use `assign`.");function g(t,e,n){var i,s=e.prototype;(i=t.prototype=Object.create(s)).constructor=t,i._super=s,n&&r(i,n)}function y(t,e){return function(){return t.apply(e,arguments)}}function b(t,e){return typeof t==o?t.apply(e&&e[0]||i,e):t}function _(t,e){return t===i?e:t}function x(t,e,n){h(C(e),function(e){t.addEventListener(e,n,!1)})}function w(t,e,n){h(C(e),function(e){t.removeEventListener(e,n,!1)})}function k(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function S(t,e){return t.indexOf(e)>-1}function C(t){return t.trim().split(/\s+/g)}function E(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function M(t){return Array.prototype.slice.call(t,0)}function A(t,e,n){for(var i=[],r=[],s=0;s<t.length;){var a=e?t[s][e]:t[s];E(r,a)<0&&i.push(t[s]),r[s]=a,s++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function T(t,e){for(var n,r,a=e[0].toUpperCase()+e.slice(1),o=0;o<s.length;){if((r=(n=s[o])?n+a:e)in t)return r;o++}return i}var D=1;function O(e){var n=e.ownerDocument||e;return n.defaultView||n.parentWindow||t}var R="ontouchstart"in t,N=T(t,"PointerEvent")!==i,I=R&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),$=25,j=1,L=2,V=4,P=8,q=1,z=2,F=4,B=8,H=16,U=z|F,K=B|H,W=U|K,G=["x","y"],X=["clientX","clientY"];function Y(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){b(t.options.enable,[t])&&n.handler(e)},this.init()}function J(t,e,n){var r=n.pointers.length,s=n.changedPointers.length,a=e&j&&r-s==0,o=e&(V|P)&&r-s==0;n.isFirst=!!a,n.isFinal=!!o,a&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,s=r.length;n.firstInput||(n.firstInput=Z(e));s>1&&!n.firstMultiple?n.firstMultiple=Z(e):1===s&&(n.firstMultiple=!1);var a=n.firstInput,o=n.firstMultiple,l=o?o.center:a.center,d=e.center=Q(r);e.timeStamp=u(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=it(l,d),e.distance=nt(l,d),function(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};e.eventType!==j&&s.eventType!==V||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y});e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}(n,e),e.offsetDirection=et(e.deltaX,e.deltaY);var p=tt(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=c(p.x)>c(p.y)?p.x:p.y,e.scale=o?(h=o.pointers,f=r,nt(f[0],f[1],X)/nt(h[0],h[1],X)):1,e.rotation=o?function(t,e){return it(e[1],e[0],X)+it(t[1],t[0],X)}(o.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,s,a,o=t.lastInterval||e,l=e.timeStamp-o.timeStamp;if(e.eventType!=P&&(l>$||o.velocity===i)){var u=e.deltaX-o.deltaX,d=e.deltaY-o.deltaY,p=tt(l,u,d);r=p.x,s=p.y,n=c(p.x)>c(p.y)?p.x:p.y,a=et(u,d),t.lastInterval=e}else n=o.velocity,r=o.velocityX,s=o.velocityY,a=o.direction;e.velocity=n,e.velocityX=r,e.velocityY=s,e.direction=a}(n,e);var h,f;var m=t.element;k(e.srcEvent.target,m)&&(m=e.srcEvent.target);e.target=m}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function Z(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:l(t.pointers[n].clientX),clientY:l(t.pointers[n].clientY)},n++;return{timeStamp:u(),pointers:e,center:Q(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Q(t){var e=t.length;if(1===e)return{x:l(t[0].clientX),y:l(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:l(n/e),y:l(i/e)}}function tt(t,e,n){return{x:e/t||0,y:n/t||0}}function et(t,e){return t===e?q:c(t)>=c(e)?t<0?z:F:e<0?B:H}function nt(t,e,n){n||(n=G);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function it(t,e,n){n||(n=G);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}Y.prototype={handler:function(){},init:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(O(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(O(this.element),this.evWin,this.domHandler)}};var rt={mousedown:j,mousemove:L,mouseup:V},st="mousedown",at="mousemove mouseup";function ot(){this.evEl=st,this.evWin=at,this.pressed=!1,Y.apply(this,arguments)}g(ot,Y,{handler:function(t){var e=rt[t.type];e&j&&0===t.button&&(this.pressed=!0),e&L&&1!==t.which&&(e=V),this.pressed&&(e&V&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var lt={pointerdown:j,pointermove:L,pointerup:V,pointercancel:P,pointerout:P},ct={2:"touch",3:"pen",4:"mouse",5:"kinect"},ut="pointerdown",dt="pointermove pointerup pointercancel";function pt(){this.evEl=ut,this.evWin=dt,Y.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}t.MSPointerEvent&&!t.PointerEvent&&(ut="MSPointerDown",dt="MSPointerMove MSPointerUp MSPointerCancel"),g(pt,Y,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=lt[i],s=ct[t.pointerType]||t.pointerType,a="touch"==s,o=E(e,t.pointerId,"pointerId");r&j&&(0===t.button||a)?o<0&&(e.push(t),o=e.length-1):r&(V|P)&&(n=!0),o<0||(e[o]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),n&&e.splice(o,1))}});var ht={touchstart:j,touchmove:L,touchend:V,touchcancel:P},ft="touchstart",mt="touchstart touchmove touchend touchcancel";function vt(){this.evTarget=ft,this.evWin=mt,this.started=!1,Y.apply(this,arguments)}g(vt,Y,{handler:function(t){var e=ht[t.type];if(e===j&&(this.started=!0),this.started){var n=function(t,e){var n=M(t.touches),i=M(t.changedTouches);e&(V|P)&&(n=A(n.concat(i),"identifier",!0));return[n,i]}.call(this,t,e);e&(V|P)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var gt={touchstart:j,touchmove:L,touchend:V,touchcancel:P},yt="touchstart touchmove touchend touchcancel";function bt(){this.evTarget=yt,this.targetIds={},Y.apply(this,arguments)}g(bt,Y,{handler:function(t){var e=gt[t.type],n=function(t,e){var n=M(t.touches),i=this.targetIds;if(e&(j|L)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,s,a=M(t.changedTouches),o=[],l=this.target;if(s=n.filter(function(t){return k(t.target,l)}),e===j)for(r=0;r<s.length;)i[s[r].identifier]=!0,r++;r=0;for(;r<a.length;)i[a[r].identifier]&&o.push(a[r]),e&(V|P)&&delete i[a[r].identifier],r++;if(!o.length)return;return[A(s.concat(o),"identifier",!0),o]}.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var _t=2500,xt=25;function wt(){Y.apply(this,arguments);var t=y(this.handler,this);this.touch=new bt(this.manager,t),this.mouse=new ot(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function kt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout(function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)},_t)}}g(wt,Y,{handler:function(t,e,n){var i="touch"==n.pointerType,r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)(function(t,e){t&j?(this.primaryTouch=e.changedPointers[0].identifier,kt.call(this,e)):t&(V|P)&&kt.call(this,e)}).call(this,e,n);else if(r&&function(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],s=Math.abs(e-r.x),a=Math.abs(n-r.y);if(s<=xt&&a<=xt)return!0}return!1}.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var St=T(a.style,"touchAction"),Ct=St!==i,Et="auto",Mt="manipulation",At="none",Tt="pan-x",Dt="pan-y",Ot=function(){if(!Ct)return!1;var e={},n=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){e[i]=!n||t.CSS.supports("touch-action",i)}),e}();function Rt(t,e){this.manager=t,this.set(e)}Rt.prototype={set:function(t){"compute"==t&&(t=this.compute()),Ct&&this.manager.element.style&&Ot[t]&&(this.manager.element.style[St]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return h(this.manager.recognizers,function(e){b(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(S(t,At))return At;var e=S(t,Tt),n=S(t,Dt);if(e&&n)return At;if(e||n)return e?Tt:Dt;if(S(t,Mt))return Mt;return Et}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,r=S(i,At)&&!Ot[At],s=S(i,Dt)&&!Ot[Dt],a=S(i,Tt)&&!Ot[Tt];if(r){var o=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(o&&l&&c)return}if(!a||!s)return r||s&&n&U||a&&n&K?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Nt=1,It=2,$t=4,jt=8,Lt=jt,Vt=16;function Pt(t){this.options=r({},this.defaults,t||{}),this.id=D++,this.manager=null,this.options.enable=_(this.options.enable,!0),this.state=Nt,this.simultaneous={},this.requireFail=[]}function qt(t){return t&Vt?"cancel":t&jt?"end":t&$t?"move":t&It?"start":""}function zt(t){return t==H?"down":t==B?"up":t==z?"left":t==F?"right":""}function Ft(t,e){var n=e.manager;return n?n.get(t):t}function Bt(){Pt.apply(this,arguments)}function Ht(){Bt.apply(this,arguments),this.pX=null,this.pY=null}function Ut(){Bt.apply(this,arguments)}function Kt(){Pt.apply(this,arguments),this._timer=null,this._input=null}function Wt(){Bt.apply(this,arguments)}function Gt(){Bt.apply(this,arguments)}function Xt(){Pt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Yt(t,e){return(e=e||{}).recognizers=_(e.recognizers,Yt.defaults.preset),new Jt(t,e)}Pt.prototype={defaults:{},set:function(t){return r(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(p(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Ft(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return p(t,"dropRecognizeWith",this)?this:(t=Ft(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(p(t,"requireFailure",this))return this;var e=this.requireFail;return-1===E(e,t=Ft(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(p(t,"dropRequireFailure",this))return this;t=Ft(t,this);var e=E(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function i(n){e.manager.emit(n,t)}n<jt&&i(e.options.event+qt(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=jt&&i(e.options.event+qt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Nt)))return!1;t++}return!0},recognize:function(t){var e=r({},t);if(!b(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Lt|Vt|32)&&(this.state=Nt),this.state=this.process(e),this.state&(It|$t|jt|Vt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},g(Bt,Pt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(It|$t),r=this.attrTest(t);return i&&(n&P||!r)?e|Vt:i||r?n&V?e|jt:e&It?e|$t:It:32}}),g(Ht,Bt,{defaults:{event:"pan",threshold:10,pointers:1,direction:W},getTouchAction:function(){var t=this.options.direction,e=[];return t&U&&e.push(Dt),t&K&&e.push(Tt),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,s=t.deltaX,a=t.deltaY;return r&e.direction||(e.direction&U?(r=0===s?q:s<0?z:F,n=s!=this.pX,i=Math.abs(t.deltaX)):(r=0===a?q:a<0?B:H,n=a!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return Bt.prototype.attrTest.call(this,t)&&(this.state&It||!(this.state&It)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=zt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),g(Ut,Bt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[At]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&It)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),g(Kt,Pt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Et]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(V|P)&&!r)this.reset();else if(t.eventType&j)this.reset(),this._timer=d(function(){this.state=Lt,this.tryEmit()},e.time,this);else if(t.eventType&V)return Lt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Lt&&(t&&t.eventType&V?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}}),g(Wt,Bt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[At]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&It)}}),g(Gt,Bt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:U|K,pointers:1},getTouchAction:function(){return Ht.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(U|K)?e=t.overallVelocity:n&U?e=t.overallVelocityX:n&K&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&c(e)>this.options.velocity&&t.eventType&V},emit:function(t){var e=zt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),g(Xt,Pt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Mt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&j&&0===this.count)return this.failTimeout();if(i&&r&&n){if(t.eventType!=V)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||nt(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&s?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=d(function(){this.state=Lt,this.tryEmit()},e.interval,this),It):Lt}return 32},failTimeout:function(){return this._timer=d(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Lt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Yt.VERSION="2.0.7",Yt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Wt,{enable:!1}],[Ut,{enable:!1},["rotate"]],[Gt,{direction:U}],[Ht,{direction:U},["swipe"]],[Xt],[Xt,{event:"doubletap",taps:2},["tap"]],[Kt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Jt(t,e){var n;this.options=r({},Yt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(N?pt:I?bt:R?wt:ot))(n,J),this.touchAction=new Rt(this,this.options.touchAction),Zt(this,!0),h(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function Zt(t,e){var n,i=t.element;i.style&&(h(t.options.cssProps,function(r,s){n=T(i.style,s),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={}))}Jt.prototype={set:function(t){return r(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&Lt)&&(r=e.curRecognizer=null);for(var s=0;s<i.length;)n=i[s],2===e.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&n.state&(It|$t|jt)&&(r=e.curRecognizer=n),s++}},get:function(t){if(t instanceof Pt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(p(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(p(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=E(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==i&&e!==i){var n=this.handlers;return h(C(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==i){var n=this.handlers;return h(C(t),function(t){e?n[t]&&n[t].splice(E(n[t],e),1):delete n[t]}),this}},emit:function(t,n){this.options.domEvents&&function(t,n){var i=e.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}(t,n);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){n.type=t,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var r=0;r<i.length;)i[r](n),r++}},destroy:function(){this.element&&Zt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},r(Yt,{INPUT_START:j,INPUT_MOVE:L,INPUT_END:V,INPUT_CANCEL:P,STATE_POSSIBLE:Nt,STATE_BEGAN:It,STATE_CHANGED:$t,STATE_ENDED:jt,STATE_RECOGNIZED:Lt,STATE_CANCELLED:Vt,STATE_FAILED:32,DIRECTION_NONE:q,DIRECTION_LEFT:z,DIRECTION_RIGHT:F,DIRECTION_UP:B,DIRECTION_DOWN:H,DIRECTION_HORIZONTAL:U,DIRECTION_VERTICAL:K,DIRECTION_ALL:W,Manager:Jt,Input:Y,TouchAction:Rt,TouchInput:bt,MouseInput:ot,PointerEventInput:pt,TouchMouseInput:wt,SingleTouchInput:vt,Recognizer:Pt,AttrRecognizer:Bt,Tap:Xt,Pan:Ht,Swipe:Gt,Pinch:Ut,Rotate:Wt,Press:Kt,on:x,off:w,each:h,merge:v,extend:m,assign:r,inherit:g,bindFn:y,prefixed:T}),(void 0!==t?t:"undefined"!=typeof self?self:{}).Hammer=Yt,"function"==typeof define&&define.amd?define(function(){return Yt}):"undefined"!=typeof module&&module.exports?module.exports=Yt:t.Hammer=Yt}(window,document),function(){function t(t){"use strict";var e={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:"Remove only spaces, ' and \" from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids",type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,description:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,description:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,description:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,description:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,description:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",description:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,description:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,description:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,description:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,description:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,description:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},completeHTMLDocument:{defaultValue:!1,description:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,description:"Enable support for document metadata (defined at the top of the document between `«««` and `»»»` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,description:"Split adjacent blockquote blocks",type:"boolean"}};if(!1===t)return JSON.parse(JSON.stringify(e));var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i].defaultValue);return n}function e(t,e){"use strict";var n=e?"Error in "+e+" extension->":"Error in unnamed extension",r={valid:!0,error:""};i.helper.isArray(t)||(t=[t]);for(var s=0;s<t.length;++s){var a=n+" sub-extension "+s+": ",o=t[s];if("object"!=typeof o)return r.valid=!1,r.error=a+"must be an object, but "+typeof o+" given",r;if(!i.helper.isString(o.type))return r.valid=!1,r.error=a+'property "type" must be a string, but '+typeof o.type+" given",r;var l=o.type=o.type.toLowerCase();if("language"===l&&(l=o.type="lang"),"html"===l&&(l=o.type="output"),"lang"!==l&&"output"!==l&&"listener"!==l)return r.valid=!1,r.error=a+"type "+l+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',r;if("listener"===l){if(i.helper.isUndefined(o.listeners))return r.valid=!1,r.error=a+'. Extensions of type "listener" must have a property called "listeners"',r}else if(i.helper.isUndefined(o.filter)&&i.helper.isUndefined(o.regex))return r.valid=!1,r.error=a+l+' extensions must define either a "regex" property or a "filter" method',r;if(o.listeners){if("object"!=typeof o.listeners)return r.valid=!1,r.error=a+'"listeners" property must be an object but '+typeof o.listeners+" given",r;for(var c in o.listeners)if(o.listeners.hasOwnProperty(c)&&"function"!=typeof o.listeners[c])return r.valid=!1,r.error=a+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+c+" must be a function but "+typeof o.listeners[c]+" given",r}if(o.filter){if("function"!=typeof o.filter)return r.valid=!1,r.error=a+'"filter" must be a function, but '+typeof o.filter+" given",r}else if(o.regex){if(i.helper.isString(o.regex)&&(o.regex=new RegExp(o.regex,"g")),!(o.regex instanceof RegExp))return r.valid=!1,r.error=a+'"regex" property must either be a string or a RegExp object, but '+typeof o.regex+" given",r;if(i.helper.isUndefined(o.replace))return r.valid=!1,r.error=a+'"regex" extensions must implement a replace string or function',r}}return r}function n(t,e){"use strict";return"¨E"+e.charCodeAt(0)+"E"}var i={},r={},s={},a=t(!0),o="vanilla",l={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:t(!0),allOn:function(){"use strict";var e=t(!0),n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}()};i.helper={},i.extensions={},i.setOption=function(t,e){"use strict";return a[t]=e,this},i.getOption=function(t){"use strict";return a[t]},i.getOptions=function(){"use strict";return a},i.resetOptions=function(){"use strict";a=t(!0)},i.setFlavor=function(t){"use strict";if(!l.hasOwnProperty(t))throw Error(t+" flavor was not found");i.resetOptions();var e=l[t];for(var n in o=t,e)e.hasOwnProperty(n)&&(a[n]=e[n])},i.getFlavor=function(){"use strict";return o},i.getFlavorOptions=function(t){"use strict";if(l.hasOwnProperty(t))return l[t]},i.getDefaultOptions=function(e){"use strict";return t(e)},i.subParser=function(t,e){"use strict";if(i.helper.isString(t)){if(void 0===e){if(r.hasOwnProperty(t))return r[t];throw Error("SubParser named "+t+" not registered!")}r[t]=e}},i.extension=function(t,n){"use strict";if(!i.helper.isString(t))throw Error("Extension 'name' must be a string");if(t=i.helper.stdExtName(t),i.helper.isUndefined(n)){if(!s.hasOwnProperty(t))throw Error("Extension named "+t+" is not registered!");return s[t]}"function"==typeof n&&(n=n()),i.helper.isArray(n)||(n=[n]);var r=e(n,t);if(!r.valid)throw Error(r.error);s[t]=n},i.getAllExtensions=function(){"use strict";return s},i.removeExtension=function(t){"use strict";delete s[t]},i.resetExtensions=function(){"use strict";s={}},i.validateExtension=function(t){"use strict";var n=e(t,null);return!!n.valid||(console.warn(n.error),!1)},i.hasOwnProperty("helper")||(i.helper={}),i.helper.isString=function(t){"use strict";return"string"==typeof t||t instanceof String},i.helper.isFunction=function(t){"use strict";return t&&"[object Function]"==={}.toString.call(t)},i.helper.isArray=function(t){"use strict";return Array.isArray(t)},i.helper.isUndefined=function(t){"use strict";return void 0===t},i.helper.forEach=function(t,e){"use strict";if(i.helper.isUndefined(t))throw new Error("obj param is required");if(i.helper.isUndefined(e))throw new Error("callback param is required");if(!i.helper.isFunction(e))throw new Error("callback param must be a function/closure");if("function"==typeof t.forEach)t.forEach(e);else if(i.helper.isArray(t))for(var n=0;n<t.length;n++)e(t[n],n,t);else{if("object"!=typeof t)throw new Error("obj does not seem to be an array or an iterable object");for(var r in t)t.hasOwnProperty(r)&&e(t[r],r,t)}},i.helper.stdExtName=function(t){"use strict";return t.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()},i.helper.escapeCharactersCallback=n,i.helper.escapeCharacters=function(t,e,i){"use strict";var r="(["+e.replace(/([\[\]\\])/g,"\\$1")+"])";i&&(r="\\\\"+r);var s=new RegExp(r,"g");return t.replace(s,n)},i.helper.unescapeHTMLEntities=function(t){"use strict";return t.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var c=function(t,e,n,i){"use strict";var r,s,a,o,l,c=i||"",u=c.indexOf("g")>-1,d=new RegExp(e+"|"+n,"g"+c.replace(/g/g,"")),p=new RegExp(e,c.replace(/g/g,"")),h=[];do{for(r=0;a=d.exec(t);)if(p.test(a[0]))r++||(o=(s=d.lastIndex)-a[0].length);else if(r&&!--r){l=a.index+a[0].length;var f={left:{start:o,end:s},match:{start:s,end:a.index},right:{start:a.index,end:l},wholeMatch:{start:o,end:l}};if(h.push(f),!u)return h}}while(r&&(d.lastIndex=s));return h};i.helper.matchRecursiveRegExp=function(t,e,n,i){"use strict";for(var r=c(t,e,n,i),s=[],a=0;a<r.length;++a)s.push([t.slice(r[a].wholeMatch.start,r[a].wholeMatch.end),t.slice(r[a].match.start,r[a].match.end),t.slice(r[a].left.start,r[a].left.end),t.slice(r[a].right.start,r[a].right.end)]);return s},i.helper.replaceRecursiveRegExp=function(t,e,n,r,s){"use strict";if(!i.helper.isFunction(e)){var a=e;e=function(){return a}}var o=c(t,n,r,s),l=t,u=o.length;if(u>0){var d=[];0!==o[0].wholeMatch.start&&d.push(t.slice(0,o[0].wholeMatch.start));for(var p=0;p<u;++p)d.push(e(t.slice(o[p].wholeMatch.start,o[p].wholeMatch.end),t.slice(o[p].match.start,o[p].match.end),t.slice(o[p].left.start,o[p].left.end),t.slice(o[p].right.start,o[p].right.end))),p<u-1&&d.push(t.slice(o[p].wholeMatch.end,o[p+1].wholeMatch.start));o[u-1].wholeMatch.end<t.length&&d.push(t.slice(o[u-1].wholeMatch.end)),l=d.join("")}return l},i.helper.regexIndexOf=function(t,e,n){"use strict";if(!i.helper.isString(t))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(e instanceof RegExp==0)throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var r=t.substring(n||0).search(e);return r>=0?r+(n||0):r},i.helper.splitAtIndex=function(t,e){"use strict";if(!i.helper.isString(t))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[t.substring(0,e),t.substring(e)]},i.helper.encodeEmailAddress=function(t){"use strict";var e=[function(t){return"&#"+t.charCodeAt(0)+";"},function(t){return"&#x"+t.charCodeAt(0).toString(16)+";"},function(t){return t}];return t.replace(/./g,function(t){if("@"===t)t=e[Math.floor(2*Math.random())](t);else{var n=Math.random();t=n>.9?e[2](t):n>.45?e[1](t):e[0](t)}return t})},i.helper.padEnd=function(t,e,n){"use strict";return e>>=0,n=String(n||" "),t.length>e?String(t):((e-=t.length)>n.length&&(n+=n.repeat(e/n.length)),String(t)+n.slice(0,e))},"undefined"==typeof console&&(console={warn:function(t){"use strict";alert(t)},log:function(t){"use strict";alert(t)},error:function(t){"use strict";throw t}}),i.helper.regexes={asteriskDashAndColon:/([*_:~])/g},i.helper.emojis={"+1":"👍","-1":"👎",100:"💯",1234:"🔢","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉","8ball":"🎱",a:"🅰️",ab:"🆎",abc:"🔤",abcd:"🔡",accept:"🉑",aerial_tramway:"🚡",airplane:"✈️",alarm_clock:"⏰",alembic:"⚗️",alien:"👽",ambulance:"🚑",amphora:"🏺",anchor:"⚓️",angel:"👼",anger:"💢",angry:"😠",anguished:"😧",ant:"🐜",apple:"🍎",aquarius:"♒️",aries:"♈️",arrow_backward:"◀️",arrow_double_down:"⏬",arrow_double_up:"⏫",arrow_down:"⬇️",arrow_down_small:"🔽",arrow_forward:"▶️",arrow_heading_down:"⤵️",arrow_heading_up:"⤴️",arrow_left:"⬅️",arrow_lower_left:"↙️",arrow_lower_right:"↘️",arrow_right:"➡️",arrow_right_hook:"↪️",arrow_up:"⬆️",arrow_up_down:"↕️",arrow_up_small:"🔼",arrow_upper_left:"↖️",arrow_upper_right:"↗️",arrows_clockwise:"🔃",arrows_counterclockwise:"🔄",art:"🎨",articulated_lorry:"🚛",artificial_satellite:"🛰",astonished:"😲",athletic_shoe:"👟",atm:"🏧",atom_symbol:"⚛️",avocado:"🥑",b:"🅱️",baby:"👶",baby_bottle:"🍼",baby_chick:"🐤",baby_symbol:"🚼",back:"🔙",bacon:"🥓",badminton:"🏸",baggage_claim:"🛄",baguette_bread:"🥖",balance_scale:"⚖️",balloon:"🎈",ballot_box:"🗳",ballot_box_with_check:"☑️",bamboo:"🎍",banana:"🍌",bangbang:"‼️",bank:"🏦",bar_chart:"📊",barber:"💈",baseball:"⚾️",basketball:"🏀",basketball_man:"⛹️",basketball_woman:"⛹️&zwj;♀️",bat:"🦇",bath:"🛀",bathtub:"🛁",battery:"🔋",beach_umbrella:"🏖",bear:"🐻",bed:"🛏",bee:"🐝",beer:"🍺",beers:"🍻",beetle:"🐞",beginner:"🔰",bell:"🔔",bellhop_bell:"🛎",bento:"🍱",biking_man:"🚴",bike:"🚲",biking_woman:"🚴&zwj;♀️",bikini:"👙",biohazard:"☣️",bird:"🐦",birthday:"🎂",black_circle:"⚫️",black_flag:"🏴",black_heart:"🖤",black_joker:"🃏",black_large_square:"⬛️",black_medium_small_square:"◾️",black_medium_square:"◼️",black_nib:"✒️",black_small_square:"▪️",black_square_button:"🔲",blonde_man:"👱",blonde_woman:"👱&zwj;♀️",blossom:"🌼",blowfish:"🐡",blue_book:"📘",blue_car:"🚙",blue_heart:"💙",blush:"😊",boar:"🐗",boat:"⛵️",bomb:"💣",book:"📖",bookmark:"🔖",bookmark_tabs:"📑",books:"📚",boom:"💥",boot:"👢",bouquet:"💐",bowing_man:"🙇",bow_and_arrow:"🏹",bowing_woman:"🙇&zwj;♀️",bowling:"🎳",boxing_glove:"🥊",boy:"👦",bread:"🍞",bride_with_veil:"👰",bridge_at_night:"🌉",briefcase:"💼",broken_heart:"💔",bug:"🐛",building_construction:"🏗",bulb:"💡",bullettrain_front:"🚅",bullettrain_side:"🚄",burrito:"🌯",bus:"🚌",business_suit_levitating:"🕴",busstop:"🚏",bust_in_silhouette:"👤",busts_in_silhouette:"👥",butterfly:"🦋",cactus:"🌵",cake:"🍰",calendar:"📆",call_me_hand:"🤙",calling:"📲",camel:"🐫",camera:"📷",camera_flash:"📸",camping:"🏕",cancer:"♋️",candle:"🕯",candy:"🍬",canoe:"🛶",capital_abcd:"🔠",capricorn:"♑️",car:"🚗",card_file_box:"🗃",card_index:"📇",card_index_dividers:"🗂",carousel_horse:"🎠",carrot:"🥕",cat:"🐱",cat2:"🐈",cd:"💿",chains:"⛓",champagne:"🍾",chart:"💹",chart_with_downwards_trend:"📉",chart_with_upwards_trend:"📈",checkered_flag:"🏁",cheese:"🧀",cherries:"🍒",cherry_blossom:"🌸",chestnut:"🌰",chicken:"🐔",children_crossing:"🚸",chipmunk:"🐿",chocolate_bar:"🍫",christmas_tree:"🎄",church:"⛪️",cinema:"🎦",circus_tent:"🎪",city_sunrise:"🌇",city_sunset:"🌆",cityscape:"🏙",cl:"🆑",clamp:"🗜",clap:"👏",clapper:"🎬",classical_building:"🏛",clinking_glasses:"🥂",clipboard:"📋",clock1:"🕐",clock10:"🕙",clock1030:"🕥",clock11:"🕚",clock1130:"🕦",clock12:"🕛",clock1230:"🕧",clock130:"🕜",clock2:"🕑",clock230:"🕝",clock3:"🕒",clock330:"🕞",clock4:"🕓",clock430:"🕟",clock5:"🕔",clock530:"🕠",clock6:"🕕",clock630:"🕡",clock7:"🕖",clock730:"🕢",clock8:"🕗",clock830:"🕣",clock9:"🕘",clock930:"🕤",closed_book:"📕",closed_lock_with_key:"🔐",closed_umbrella:"🌂",cloud:"☁️",cloud_with_lightning:"🌩",cloud_with_lightning_and_rain:"⛈",cloud_with_rain:"🌧",cloud_with_snow:"🌨",clown_face:"🤡",clubs:"♣️",cocktail:"🍸",coffee:"☕️",coffin:"⚰️",cold_sweat:"😰",comet:"☄️",computer:"💻",computer_mouse:"🖱",confetti_ball:"🎊",confounded:"😖",confused:"😕",congratulations:"㊗️",construction:"🚧",construction_worker_man:"👷",construction_worker_woman:"👷&zwj;♀️",control_knobs:"🎛",convenience_store:"🏪",cookie:"🍪",cool:"🆒",policeman:"👮",copyright:"©️",corn:"🌽",couch_and_lamp:"🛋",couple:"👫",couple_with_heart_woman_man:"💑",couple_with_heart_man_man:"👨&zwj;❤️&zwj;👨",couple_with_heart_woman_woman:"👩&zwj;❤️&zwj;👩",couplekiss_man_man:"👨&zwj;❤️&zwj;💋&zwj;👨",couplekiss_man_woman:"💏",couplekiss_woman_woman:"👩&zwj;❤️&zwj;💋&zwj;👩",cow:"🐮",cow2:"🐄",cowboy_hat_face:"🤠",crab:"🦀",crayon:"🖍",credit_card:"💳",crescent_moon:"🌙",cricket:"🏏",crocodile:"🐊",croissant:"🥐",crossed_fingers:"🤞",crossed_flags:"🎌",crossed_swords:"⚔️",crown:"👑",cry:"😢",crying_cat_face:"😿",crystal_ball:"🔮",cucumber:"🥒",cupid:"💘",curly_loop:"➰",currency_exchange:"💱",curry:"🍛",custard:"🍮",customs:"🛃",cyclone:"🌀",dagger:"🗡",dancer:"💃",dancing_women:"👯",dancing_men:"👯&zwj;♂️",dango:"🍡",dark_sunglasses:"🕶",dart:"🎯",dash:"💨",date:"📅",deciduous_tree:"🌳",deer:"🦌",department_store:"🏬",derelict_house:"🏚",desert:"🏜",desert_island:"🏝",desktop_computer:"🖥",male_detective:"🕵️",diamond_shape_with_a_dot_inside:"💠",diamonds:"♦️",disappointed:"😞",disappointed_relieved:"😥",dizzy:"💫",dizzy_face:"😵",do_not_litter:"🚯",dog:"🐶",dog2:"🐕",dollar:"💵",dolls:"🎎",dolphin:"🐬",door:"🚪",doughnut:"🍩",dove:"🕊",dragon:"🐉",dragon_face:"🐲",dress:"👗",dromedary_camel:"🐪",drooling_face:"🤤",droplet:"💧",drum:"🥁",duck:"🦆",dvd:"📀","e-mail":"📧",eagle:"🦅",ear:"👂",ear_of_rice:"🌾",earth_africa:"🌍",earth_americas:"🌎",earth_asia:"🌏",egg:"🥚",eggplant:"🍆",eight_pointed_black_star:"✴️",eight_spoked_asterisk:"✳️",electric_plug:"🔌",elephant:"🐘",email:"✉️",end:"🔚",envelope_with_arrow:"📩",euro:"💶",european_castle:"🏰",european_post_office:"🏤",evergreen_tree:"🌲",exclamation:"❗️",expressionless:"😑",eye:"👁",eye_speech_bubble:"👁&zwj;🗨",eyeglasses:"👓",eyes:"👀",face_with_head_bandage:"🤕",face_with_thermometer:"🤒",fist_oncoming:"👊",factory:"🏭",fallen_leaf:"🍂",family_man_woman_boy:"👪",family_man_boy:"👨&zwj;👦",family_man_boy_boy:"👨&zwj;👦&zwj;👦",family_man_girl:"👨&zwj;👧",family_man_girl_boy:"👨&zwj;👧&zwj;👦",family_man_girl_girl:"👨&zwj;👧&zwj;👧",family_man_man_boy:"👨&zwj;👨&zwj;👦",family_man_man_boy_boy:"👨&zwj;👨&zwj;👦&zwj;👦",family_man_man_girl:"👨&zwj;👨&zwj;👧",family_man_man_girl_boy:"👨&zwj;👨&zwj;👧&zwj;👦",family_man_man_girl_girl:"👨&zwj;👨&zwj;👧&zwj;👧",family_man_woman_boy_boy:"👨&zwj;👩&zwj;👦&zwj;👦",family_man_woman_girl:"👨&zwj;👩&zwj;👧",family_man_woman_girl_boy:"👨&zwj;👩&zwj;👧&zwj;👦",family_man_woman_girl_girl:"👨&zwj;👩&zwj;👧&zwj;👧",family_woman_boy:"👩&zwj;👦",family_woman_boy_boy:"👩&zwj;👦&zwj;👦",family_woman_girl:"👩&zwj;👧",family_woman_girl_boy:"👩&zwj;👧&zwj;👦",family_woman_girl_girl:"👩&zwj;👧&zwj;👧",family_woman_woman_boy:"👩&zwj;👩&zwj;👦",family_woman_woman_boy_boy:"👩&zwj;👩&zwj;👦&zwj;👦",family_woman_woman_girl:"👩&zwj;👩&zwj;👧",family_woman_woman_girl_boy:"👩&zwj;👩&zwj;👧&zwj;👦",family_woman_woman_girl_girl:"👩&zwj;👩&zwj;👧&zwj;👧",fast_forward:"⏩",fax:"📠",fearful:"😨",feet:"🐾",female_detective:"🕵️&zwj;♀️",ferris_wheel:"🎡",ferry:"⛴",field_hockey:"🏑",file_cabinet:"🗄",file_folder:"📁",film_projector:"📽",film_strip:"🎞",fire:"🔥",fire_engine:"🚒",fireworks:"🎆",first_quarter_moon:"🌓",first_quarter_moon_with_face:"🌛",fish:"🐟",fish_cake:"🍥",fishing_pole_and_fish:"🎣",fist_raised:"✊",fist_left:"🤛",fist_right:"🤜",flags:"🎏",flashlight:"🔦",fleur_de_lis:"⚜️",flight_arrival:"🛬",flight_departure:"🛫",floppy_disk:"💾",flower_playing_cards:"🎴",flushed:"😳",fog:"🌫",foggy:"🌁",football:"🏈",footprints:"👣",fork_and_knife:"🍴",fountain:"⛲️",fountain_pen:"🖋",four_leaf_clover:"🍀",fox_face:"🦊",framed_picture:"🖼",free:"🆓",fried_egg:"🍳",fried_shrimp:"🍤",fries:"🍟",frog:"🐸",frowning:"😦",frowning_face:"☹️",frowning_man:"🙍&zwj;♂️",frowning_woman:"🙍",middle_finger:"🖕",fuelpump:"⛽️",full_moon:"🌕",full_moon_with_face:"🌝",funeral_urn:"⚱️",game_die:"🎲",gear:"⚙️",gem:"💎",gemini:"♊️",ghost:"👻",gift:"🎁",gift_heart:"💝",girl:"👧",globe_with_meridians:"🌐",goal_net:"🥅",goat:"🐐",golf:"⛳️",golfing_man:"🏌️",golfing_woman:"🏌️&zwj;♀️",gorilla:"🦍",grapes:"🍇",green_apple:"🍏",green_book:"📗",green_heart:"💚",green_salad:"🥗",grey_exclamation:"❕",grey_question:"❔",grimacing:"😬",grin:"😁",grinning:"😀",guardsman:"💂",guardswoman:"💂&zwj;♀️",guitar:"🎸",gun:"🔫",haircut_woman:"💇",haircut_man:"💇&zwj;♂️",hamburger:"🍔",hammer:"🔨",hammer_and_pick:"⚒",hammer_and_wrench:"🛠",hamster:"🐹",hand:"✋",handbag:"👜",handshake:"🤝",hankey:"💩",hatched_chick:"🐥",hatching_chick:"🐣",headphones:"🎧",hear_no_evil:"🙉",heart:"❤️",heart_decoration:"💟",heart_eyes:"😍",heart_eyes_cat:"😻",heartbeat:"💓",heartpulse:"💗",hearts:"♥️",heavy_check_mark:"✔️",heavy_division_sign:"➗",heavy_dollar_sign:"💲",heavy_heart_exclamation:"❣️",heavy_minus_sign:"➖",heavy_multiplication_x:"✖️",heavy_plus_sign:"➕",helicopter:"🚁",herb:"🌿",hibiscus:"🌺",high_brightness:"🔆",high_heel:"👠",hocho:"🔪",hole:"🕳",honey_pot:"🍯",horse:"🐴",horse_racing:"🏇",hospital:"🏥",hot_pepper:"🌶",hotdog:"🌭",hotel:"🏨",hotsprings:"♨️",hourglass:"⌛️",hourglass_flowing_sand:"⏳",house:"🏠",house_with_garden:"🏡",houses:"🏘",hugs:"🤗",hushed:"😯",ice_cream:"🍨",ice_hockey:"🏒",ice_skate:"⛸",icecream:"🍦",id:"🆔",ideograph_advantage:"🉐",imp:"👿",inbox_tray:"📥",incoming_envelope:"📨",tipping_hand_woman:"💁",information_source:"ℹ️",innocent:"😇",interrobang:"⁉️",iphone:"📱",izakaya_lantern:"🏮",jack_o_lantern:"🎃",japan:"🗾",japanese_castle:"🏯",japanese_goblin:"👺",japanese_ogre:"👹",jeans:"👖",joy:"😂",joy_cat:"😹",joystick:"🕹",kaaba:"🕋",key:"🔑",keyboard:"⌨️",keycap_ten:"🔟",kick_scooter:"🛴",kimono:"👘",kiss:"💋",kissing:"😗",kissing_cat:"😽",kissing_closed_eyes:"😚",kissing_heart:"😘",kissing_smiling_eyes:"😙",kiwi_fruit:"🥝",koala:"🐨",koko:"🈁",label:"🏷",large_blue_circle:"🔵",large_blue_diamond:"🔷",large_orange_diamond:"🔶",last_quarter_moon:"🌗",last_quarter_moon_with_face:"🌜",latin_cross:"✝️",laughing:"😆",leaves:"🍃",ledger:"📒",left_luggage:"🛅",left_right_arrow:"↔️",leftwards_arrow_with_hook:"↩️",lemon:"🍋",leo:"♌️",leopard:"🐆",level_slider:"🎚",libra:"♎️",light_rail:"🚈",link:"🔗",lion:"🦁",lips:"👄",lipstick:"💄",lizard:"🦎",lock:"🔒",lock_with_ink_pen:"🔏",lollipop:"🍭",loop:"➿",loud_sound:"🔊",loudspeaker:"📢",love_hotel:"🏩",love_letter:"💌",low_brightness:"🔅",lying_face:"🤥",m:"Ⓜ️",mag:"🔍",mag_right:"🔎",mahjong:"🀄️",mailbox:"📫",mailbox_closed:"📪",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",man:"👨",man_artist:"👨&zwj;🎨",man_astronaut:"👨&zwj;🚀",man_cartwheeling:"🤸&zwj;♂️",man_cook:"👨&zwj;🍳",man_dancing:"🕺",man_facepalming:"🤦&zwj;♂️",man_factory_worker:"👨&zwj;🏭",man_farmer:"👨&zwj;🌾",man_firefighter:"👨&zwj;🚒",man_health_worker:"👨&zwj;⚕️",man_in_tuxedo:"🤵",man_judge:"👨&zwj;⚖️",man_juggling:"🤹&zwj;♂️",man_mechanic:"👨&zwj;🔧",man_office_worker:"👨&zwj;💼",man_pilot:"👨&zwj;✈️",man_playing_handball:"🤾&zwj;♂️",man_playing_water_polo:"🤽&zwj;♂️",man_scientist:"👨&zwj;🔬",man_shrugging:"🤷&zwj;♂️",man_singer:"👨&zwj;🎤",man_student:"👨&zwj;🎓",man_teacher:"👨&zwj;🏫",man_technologist:"👨&zwj;💻",man_with_gua_pi_mao:"👲",man_with_turban:"👳",tangerine:"🍊",mans_shoe:"👞",mantelpiece_clock:"🕰",maple_leaf:"🍁",martial_arts_uniform:"🥋",mask:"😷",massage_woman:"💆",massage_man:"💆&zwj;♂️",meat_on_bone:"🍖",medal_military:"🎖",medal_sports:"🏅",mega:"📣",melon:"🍈",memo:"📝",men_wrestling:"🤼&zwj;♂️",menorah:"🕎",mens:"🚹",metal:"🤘",metro:"🚇",microphone:"🎤",microscope:"🔬",milk_glass:"🥛",milky_way:"🌌",minibus:"🚐",minidisc:"💽",mobile_phone_off:"📴",money_mouth_face:"🤑",money_with_wings:"💸",moneybag:"💰",monkey:"🐒",monkey_face:"🐵",monorail:"🚝",moon:"🌔",mortar_board:"🎓",mosque:"🕌",motor_boat:"🛥",motor_scooter:"🛵",motorcycle:"🏍",motorway:"🛣",mount_fuji:"🗻",mountain:"⛰",mountain_biking_man:"🚵",mountain_biking_woman:"🚵&zwj;♀️",mountain_cableway:"🚠",mountain_railway:"🚞",mountain_snow:"🏔",mouse:"🐭",mouse2:"🐁",movie_camera:"🎥",moyai:"🗿",mrs_claus:"🤶",muscle:"💪",mushroom:"🍄",musical_keyboard:"🎹",musical_note:"🎵",musical_score:"🎼",mute:"🔇",nail_care:"💅",name_badge:"📛",national_park:"🏞",nauseated_face:"🤢",necktie:"👔",negative_squared_cross_mark:"❎",nerd_face:"🤓",neutral_face:"😐",new:"🆕",new_moon:"🌑",new_moon_with_face:"🌚",newspaper:"📰",newspaper_roll:"🗞",next_track_button:"⏭",ng:"🆖",no_good_man:"🙅&zwj;♂️",no_good_woman:"🙅",night_with_stars:"🌃",no_bell:"🔕",no_bicycles:"🚳",no_entry:"⛔️",no_entry_sign:"🚫",no_mobile_phones:"📵",no_mouth:"😶",no_pedestrians:"🚷",no_smoking:"🚭","non-potable_water":"🚱",nose:"👃",notebook:"📓",notebook_with_decorative_cover:"📔",notes:"🎶",nut_and_bolt:"🔩",o:"⭕️",o2:"🅾️",ocean:"🌊",octopus:"🐙",oden:"🍢",office:"🏢",oil_drum:"🛢",ok:"🆗",ok_hand:"👌",ok_man:"🙆&zwj;♂️",ok_woman:"🙆",old_key:"🗝",older_man:"👴",older_woman:"👵",om:"🕉",on:"🔛",oncoming_automobile:"🚘",oncoming_bus:"🚍",oncoming_police_car:"🚔",oncoming_taxi:"🚖",open_file_folder:"📂",open_hands:"👐",open_mouth:"😮",open_umbrella:"☂️",ophiuchus:"⛎",orange_book:"📙",orthodox_cross:"☦️",outbox_tray:"📤",owl:"🦉",ox:"🐂",package:"📦",page_facing_up:"📄",page_with_curl:"📃",pager:"📟",paintbrush:"🖌",palm_tree:"🌴",pancakes:"🥞",panda_face:"🐼",paperclip:"📎",paperclips:"🖇",parasol_on_ground:"⛱",parking:"🅿️",part_alternation_mark:"〽️",partly_sunny:"⛅️",passenger_ship:"🛳",passport_control:"🛂",pause_button:"⏸",peace_symbol:"☮️",peach:"🍑",peanuts:"🥜",pear:"🍐",pen:"🖊",pencil2:"✏️",penguin:"🐧",pensive:"😔",performing_arts:"🎭",persevere:"😣",person_fencing:"🤺",pouting_woman:"🙎",phone:"☎️",pick:"⛏",pig:"🐷",pig2:"🐖",pig_nose:"🐽",pill:"💊",pineapple:"🍍",ping_pong:"🏓",pisces:"♓️",pizza:"🍕",place_of_worship:"🛐",plate_with_cutlery:"🍽",play_or_pause_button:"⏯",point_down:"👇",point_left:"👈",point_right:"👉",point_up:"☝️",point_up_2:"👆",police_car:"🚓",policewoman:"👮&zwj;♀️",poodle:"🐩",popcorn:"🍿",post_office:"🏣",postal_horn:"📯",postbox:"📮",potable_water:"🚰",potato:"🥔",pouch:"👝",poultry_leg:"🍗",pound:"💷",rage:"😡",pouting_cat:"😾",pouting_man:"🙎&zwj;♂️",pray:"🙏",prayer_beads:"📿",pregnant_woman:"🤰",previous_track_button:"⏮",prince:"🤴",princess:"👸",printer:"🖨",purple_heart:"💜",purse:"👛",pushpin:"📌",put_litter_in_its_place:"🚮",question:"❓",rabbit:"🐰",rabbit2:"🐇",racehorse:"🐎",racing_car:"🏎",radio:"📻",radio_button:"🔘",radioactive:"☢️",railway_car:"🚃",railway_track:"🛤",rainbow:"🌈",rainbow_flag:"🏳️&zwj;🌈",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐",raised_hands:"🙌",raising_hand_woman:"🙋",raising_hand_man:"🙋&zwj;♂️",ram:"🐏",ramen:"🍜",rat:"🐀",record_button:"⏺",recycle:"♻️",red_circle:"🔴",registered:"®️",relaxed:"☺️",relieved:"😌",reminder_ribbon:"🎗",repeat:"🔁",repeat_one:"🔂",rescue_worker_helmet:"⛑",restroom:"🚻",revolving_hearts:"💞",rewind:"⏪",rhinoceros:"🦏",ribbon:"🎀",rice:"🍚",rice_ball:"🍙",rice_cracker:"🍘",rice_scene:"🎑",right_anger_bubble:"🗯",ring:"💍",robot:"🤖",rocket:"🚀",rofl:"🤣",roll_eyes:"🙄",roller_coaster:"🎢",rooster:"🐓",rose:"🌹",rosette:"🏵",rotating_light:"🚨",round_pushpin:"📍",rowing_man:"🚣",rowing_woman:"🚣&zwj;♀️",rugby_football:"🏉",running_man:"🏃",running_shirt_with_sash:"🎽",running_woman:"🏃&zwj;♀️",sa:"🈂️",sagittarius:"♐️",sake:"🍶",sandal:"👡",santa:"🎅",satellite:"📡",saxophone:"🎷",school:"🏫",school_satchel:"🎒",scissors:"✂️",scorpion:"🦂",scorpius:"♏️",scream:"😱",scream_cat:"🙀",scroll:"📜",seat:"💺",secret:"㊙️",see_no_evil:"🙈",seedling:"🌱",selfie:"🤳",shallow_pan_of_food:"🥘",shamrock:"☘️",shark:"🦈",shaved_ice:"🍧",sheep:"🐑",shell:"🐚",shield:"🛡",shinto_shrine:"⛩",ship:"🚢",shirt:"👕",shopping:"🛍",shopping_cart:"🛒",shower:"🚿",shrimp:"🦐",signal_strength:"📶",six_pointed_star:"🔯",ski:"🎿",skier:"⛷",skull:"💀",skull_and_crossbones:"☠️",sleeping:"😴",sleeping_bed:"🛌",sleepy:"😪",slightly_frowning_face:"🙁",slightly_smiling_face:"🙂",slot_machine:"🎰",small_airplane:"🛩",small_blue_diamond:"🔹",small_orange_diamond:"🔸",small_red_triangle:"🔺",small_red_triangle_down:"🔻",smile:"😄",smile_cat:"😸",smiley:"😃",smiley_cat:"😺",smiling_imp:"😈",smirk:"😏",smirk_cat:"😼",smoking:"🚬",snail:"🐌",snake:"🐍",sneezing_face:"🤧",snowboarder:"🏂",snowflake:"❄️",snowman:"⛄️",snowman_with_snow:"☃️",sob:"😭",soccer:"⚽️",soon:"🔜",sos:"🆘",sound:"🔉",space_invader:"👾",spades:"♠️",spaghetti:"🍝",sparkle:"❇️",sparkler:"🎇",sparkles:"✨",sparkling_heart:"💖",speak_no_evil:"🙊",speaker:"🔈",speaking_head:"🗣",speech_balloon:"💬",speedboat:"🚤",spider:"🕷",spider_web:"🕸",spiral_calendar:"🗓",spiral_notepad:"🗒",spoon:"🥄",squid:"🦑",stadium:"🏟",star:"⭐️",star2:"🌟",star_and_crescent:"☪️",star_of_david:"✡️",stars:"🌠",station:"🚉",statue_of_liberty:"🗽",steam_locomotive:"🚂",stew:"🍲",stop_button:"⏹",stop_sign:"🛑",stopwatch:"⏱",straight_ruler:"📏",strawberry:"🍓",stuck_out_tongue:"😛",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue_winking_eye:"😜",studio_microphone:"🎙",stuffed_flatbread:"🥙",sun_behind_large_cloud:"🌥",sun_behind_rain_cloud:"🌦",sun_behind_small_cloud:"🌤",sun_with_face:"🌞",sunflower:"🌻",sunglasses:"😎",sunny:"☀️",sunrise:"🌅",sunrise_over_mountains:"🌄",surfing_man:"🏄",surfing_woman:"🏄&zwj;♀️",sushi:"🍣",suspension_railway:"🚟",sweat:"😓",sweat_drops:"💦",sweat_smile:"😅",sweet_potato:"🍠",swimming_man:"🏊",swimming_woman:"🏊&zwj;♀️",symbols:"🔣",synagogue:"🕍",syringe:"💉",taco:"🌮",tada:"🎉",tanabata_tree:"🎋",taurus:"♉️",taxi:"🚕",tea:"🍵",telephone_receiver:"📞",telescope:"🔭",tennis:"🎾",tent:"⛺️",thermometer:"🌡",thinking:"🤔",thought_balloon:"💭",ticket:"🎫",tickets:"🎟",tiger:"🐯",tiger2:"🐅",timer_clock:"⏲",tipping_hand_man:"💁&zwj;♂️",tired_face:"😫",tm:"™️",toilet:"🚽",tokyo_tower:"🗼",tomato:"🍅",tongue:"👅",top:"🔝",tophat:"🎩",tornado:"🌪",trackball:"🖲",tractor:"🚜",traffic_light:"🚥",train:"🚋",train2:"🚆",tram:"🚊",triangular_flag_on_post:"🚩",triangular_ruler:"📐",trident:"🔱",triumph:"😤",trolleybus:"🚎",trophy:"🏆",tropical_drink:"🍹",tropical_fish:"🐠",truck:"🚚",trumpet:"🎺",tulip:"🌷",tumbler_glass:"🥃",turkey:"🦃",turtle:"🐢",tv:"📺",twisted_rightwards_arrows:"🔀",two_hearts:"💕",two_men_holding_hands:"👬",two_women_holding_hands:"👭",u5272:"🈹",u5408:"🈴",u55b6:"🈺",u6307:"🈯️",u6708:"🈷️",u6709:"🈶",u6e80:"🈵",u7121:"🈚️",u7533:"🈸",u7981:"🈲",u7a7a:"🈳",umbrella:"☔️",unamused:"😒",underage:"🔞",unicorn:"🦄",unlock:"🔓",up:"🆙",upside_down_face:"🙃",v:"✌️",vertical_traffic_light:"🚦",vhs:"📼",vibration_mode:"📳",video_camera:"📹",video_game:"🎮",violin:"🎻",virgo:"♍️",volcano:"🌋",volleyball:"🏐",vs:"🆚",vulcan_salute:"🖖",walking_man:"🚶",walking_woman:"🚶&zwj;♀️",waning_crescent_moon:"🌘",waning_gibbous_moon:"🌖",warning:"⚠️",wastebasket:"🗑",watch:"⌚️",water_buffalo:"🐃",watermelon:"🍉",wave:"👋",wavy_dash:"〰️",waxing_crescent_moon:"🌒",wc:"🚾",weary:"😩",wedding:"💒",weight_lifting_man:"🏋️",weight_lifting_woman:"🏋️&zwj;♀️",whale:"🐳",whale2:"🐋",wheel_of_dharma:"☸️",wheelchair:"♿️",white_check_mark:"✅",white_circle:"⚪️",white_flag:"🏳️",white_flower:"💮",white_large_square:"⬜️",white_medium_small_square:"◽️",white_medium_square:"◻️",white_small_square:"▫️",white_square_button:"🔳",wilted_flower:"🥀",wind_chime:"🎐",wind_face:"🌬",wine_glass:"🍷",wink:"😉",wolf:"🐺",woman:"👩",woman_artist:"👩&zwj;🎨",woman_astronaut:"👩&zwj;🚀",woman_cartwheeling:"🤸&zwj;♀️",woman_cook:"👩&zwj;🍳",woman_facepalming:"🤦&zwj;♀️",woman_factory_worker:"👩&zwj;🏭",woman_farmer:"👩&zwj;🌾",woman_firefighter:"👩&zwj;🚒",woman_health_worker:"👩&zwj;⚕️",woman_judge:"👩&zwj;⚖️",woman_juggling:"🤹&zwj;♀️",woman_mechanic:"👩&zwj;🔧",woman_office_worker:"👩&zwj;💼",woman_pilot:"👩&zwj;✈️",woman_playing_handball:"🤾&zwj;♀️",woman_playing_water_polo:"🤽&zwj;♀️",woman_scientist:"👩&zwj;🔬",woman_shrugging:"🤷&zwj;♀️",woman_singer:"👩&zwj;🎤",woman_student:"👩&zwj;🎓",woman_teacher:"👩&zwj;🏫",woman_technologist:"👩&zwj;💻",woman_with_turban:"👳&zwj;♀️",womans_clothes:"👚",womans_hat:"👒",women_wrestling:"🤼&zwj;♀️",womens:"🚺",world_map:"🗺",worried:"😟",wrench:"🔧",writing_hand:"✍️",x:"❌",yellow_heart:"💛",yen:"💴",yin_yang:"☯️",yum:"😋",zap:"⚡️",zipper_mouth_face:"🤐",zzz:"💤",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:"<span style=\"font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;\">S</span>"},i.Converter=function(t){"use strict";function n(t,n){if(n=n||null,i.helper.isString(t)){if(n=t=i.helper.stdExtName(t),i.extensions[t])return console.warn("DEPRECATION WARNING: "+t+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void function(t,n){"function"==typeof t&&(t=t(new i.Converter)),i.helper.isArray(t)||(t=[t]);var r=e(t,n);if(!r.valid)throw Error(r.error);for(var s=0;s<t.length;++s)switch(t[s].type){case"lang":u.push(t[s]);break;case"output":d.push(t[s]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}(i.extensions[t],t);if(i.helper.isUndefined(s[t]))throw Error('Extension "'+t+'" could not be loaded. It was either not found or is not a valid extension.');t=s[t]}"function"==typeof t&&(t=t()),i.helper.isArray(t)||(t=[t]);var a=e(t,n);if(!a.valid)throw Error(a.error);for(var o=0;o<t.length;++o){switch(t[o].type){case"lang":u.push(t[o]);break;case"output":d.push(t[o])}if(t[o].hasOwnProperty("listeners"))for(var l in t[o].listeners)t[o].listeners.hasOwnProperty(l)&&r(l,t[o].listeners[l])}}function r(t,e){if(!i.helper.isString(t))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof t+" given");if("function"!=typeof e)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof e+" given");p.hasOwnProperty(t)||(p[t]=[]),p[t].push(e)}var c={},u=[],d=[],p={},h=o,f={parsed:{},raw:"",format:""};!function(){for(var e in t=t||{},a)a.hasOwnProperty(e)&&(c[e]=a[e]);if("object"!=typeof t)throw Error("Converter expects the passed parameter to be an object, but "+typeof t+" was passed instead.");for(var r in t)t.hasOwnProperty(r)&&(c[r]=t[r]);c.extensions&&i.helper.forEach(c.extensions,n)}(),this._dispatch=function(t,e,n,i){if(p.hasOwnProperty(t))for(var r=0;r<p[t].length;++r){var s=p[t][r](t,e,this,n,i);s&&void 0!==s&&(e=s)}return e},this.listen=function(t,e){return r(t,e),this},this.makeHtml=function(t){if(!t)return t;var e={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:u,outputModifiers:d,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return t=(t=(t=(t=(t=t.replace(/¨/g,"¨T")).replace(/\$/g,"¨D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/\u00A0/g,"&nbsp;"),c.smartIndentationFix&&(t=function(t){var e=t.match(/^\s*/)[0].length,n=new RegExp("^\\s{0,"+e+"}","gm");return t.replace(n,"")}(t)),t="\n\n"+t+"\n\n",t=(t=i.subParser("detab")(t,c,e)).replace(/^[ \t]+$/gm,""),i.helper.forEach(u,function(n){t=i.subParser("runExtension")(n,t,c,e)}),t=i.subParser("metadata")(t,c,e),t=i.subParser("hashPreCodeTags")(t,c,e),t=i.subParser("githubCodeBlocks")(t,c,e),t=i.subParser("hashHTMLBlocks")(t,c,e),t=i.subParser("hashCodeTags")(t,c,e),t=i.subParser("stripLinkDefinitions")(t,c,e),t=i.subParser("blockGamut")(t,c,e),t=i.subParser("unhashHTMLSpans")(t,c,e),t=(t=(t=i.subParser("unescapeSpecialChars")(t,c,e)).replace(/¨D/g,"$$")).replace(/¨T/g,"¨"),t=i.subParser("completeHTMLDocument")(t,c,e),i.helper.forEach(d,function(n){t=i.subParser("runExtension")(n,t,c,e)}),f=e.metadata,t},this.makeMarkdown=this.makeMd=function(t,e){if(t=(t=(t=t.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/>[ \t]+</,">¨NBSP;<"),!e){if(!window||!window.document)throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");e=window.document}var n=e.createElement("div");n.innerHTML=t;var r={preList:function(t){for(var e=t.querySelectorAll("pre"),n=[],r=0;r<e.length;++r)if(1===e[r].childElementCount&&"code"===e[r].firstChild.tagName.toLowerCase()){var s=e[r].firstChild.innerHTML.trim(),a=e[r].firstChild.getAttribute("data-language")||"";if(""===a)for(var o=e[r].firstChild.className.split(" "),l=0;l<o.length;++l){var c=o[l].match(/^language-(.+)$/);if(null!==c){a=c[1];break}}s=i.helper.unescapeHTMLEntities(s),n.push(s),e[r].outerHTML='<precode language="'+a+'" precodenum="'+r.toString()+'"></precode>'}else n.push(e[r].innerHTML),e[r].innerHTML="",e[r].setAttribute("prenum",r.toString());return n}(n)};!function t(e){for(var n=0;n<e.childNodes.length;++n){var i=e.childNodes[n];3===i.nodeType?/\S/.test(i.nodeValue)?(i.nodeValue=i.nodeValue.split("\n").join(" "),i.nodeValue=i.nodeValue.replace(/(\s)+/g,"$1")):(e.removeChild(i),--n):1===i.nodeType&&t(i)}}(n);for(var s=n.childNodes,a="",o=0;o<s.length;o++)a+=i.subParser("makeMarkdown.node")(s[o],r);return a},this.setOption=function(t,e){c[t]=e},this.getOption=function(t){return c[t]},this.getOptions=function(){return c},this.addExtension=function(t,e){n(t,e=e||null)},this.useExtension=function(t){n(t)},this.setFlavor=function(t){if(!l.hasOwnProperty(t))throw Error(t+" flavor was not found");var e=l[t];for(var n in h=t,e)e.hasOwnProperty(n)&&(c[n]=e[n])},this.getFlavor=function(){return h},this.removeExtension=function(t){i.helper.isArray(t)||(t=[t]);for(var e=0;e<t.length;++e){for(var n=t[e],r=0;r<u.length;++r)u[r]===n&&u[r].splice(r,1);for(;0<d.length;++r)d[0]===n&&d[0].splice(r,1)}},this.getAllExtensions=function(){return{language:u,output:d}},this.getMetadata=function(t){return t?f.raw:f.parsed},this.getMetadataFormat=function(){return f.format},this._setMetadataPair=function(t,e){f.parsed[t]=e},this._setMetadataFormat=function(t){f.format=t},this._setMetadataRaw=function(t){f.raw=t}},i.subParser("anchors",function(t,e,n){"use strict";var r=function(t,r,s,a,o,l,c){if(i.helper.isUndefined(c)&&(c=""),s=s.toLowerCase(),t.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)a="";else if(!a){if(s||(s=r.toLowerCase().replace(/ ?\n/g," ")),a="#"+s,i.helper.isUndefined(n.gUrls[s]))return t;a=n.gUrls[s],i.helper.isUndefined(n.gTitles[s])||(c=n.gTitles[s])}var u='<a href="'+(a=a.replace(i.helper.regexes.asteriskDashAndColon,i.helper.escapeCharactersCallback))+'"';return""!==c&&null!==c&&(u+=' title="'+(c=(c=c.replace(/"/g,"&quot;")).replace(i.helper.regexes.asteriskDashAndColon,i.helper.escapeCharactersCallback))+'"'),e.openLinksInNewWindow&&!/^#/.test(a)&&(u+=' rel="noopener noreferrer" target="¨E95Eblank"'),u+">"+r+"</a>"};return t=(t=(t=(t=(t=n.converter._dispatch("anchors.before",t,e,n)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,r)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,r)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,r)).replace(/\[([^\[\]]+)]()()()()()/g,r),e.ghMentions&&(t=t.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gim,function(t,n,r,s,a){if("\\"===r)return n+s;if(!i.helper.isString(e.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var o=e.ghMentionsLink.replace(/\{u}/g,a),l="";return e.openLinksInNewWindow&&(l=' rel="noopener noreferrer" target="¨E95Eblank"'),n+'<a href="'+o+'"'+l+">"+s+"</a>"})),n.converter._dispatch("anchors.after",t,e,n)});var u=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,d=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,p=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,h=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gim,f=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,m=function(t){"use strict";return function(e,n,r,s,a,o,l){var c=r=r.replace(i.helper.regexes.asteriskDashAndColon,i.helper.escapeCharactersCallback),u="",d="",p=n||"",h=l||"";return/^www\./i.test(r)&&(r=r.replace(/^www\./i,"http://www.")),t.excludeTrailingPunctuationFromURLs&&o&&(u=o),t.openLinksInNewWindow&&(d=' rel="noopener noreferrer" target="¨E95Eblank"'),p+'<a href="'+r+'"'+d+">"+c+"</a>"+u+h}},v=function(t,e){"use strict";return function(n,r,s){var a="mailto:";return r=r||"",s=i.subParser("unescapeSpecialChars")(s,t,e),t.encodeEmails?(a=i.helper.encodeEmailAddress(a+s),s=i.helper.encodeEmailAddress(s)):a+=s,r+'<a href="'+a+'">'+s+"</a>"}};i.subParser("autoLinks",function(t,e,n){"use strict";return t=(t=(t=n.converter._dispatch("autoLinks.before",t,e,n)).replace(p,m(e))).replace(f,v(e,n)),n.converter._dispatch("autoLinks.after",t,e,n)}),i.subParser("simplifiedAutoLinks",function(t,e,n){"use strict";return e.simplifiedAutoLink?(t=n.converter._dispatch("simplifiedAutoLinks.before",t,e,n),t=(t=e.excludeTrailingPunctuationFromURLs?t.replace(d,m(e)):t.replace(u,m(e))).replace(h,v(e,n)),t=n.converter._dispatch("simplifiedAutoLinks.after",t,e,n)):t}),i.subParser("blockGamut",function(t,e,n){"use strict";return t=n.converter._dispatch("blockGamut.before",t,e,n),t=i.subParser("blockQuotes")(t,e,n),t=i.subParser("headers")(t,e,n),t=i.subParser("horizontalRule")(t,e,n),t=i.subParser("lists")(t,e,n),t=i.subParser("codeBlocks")(t,e,n),t=i.subParser("tables")(t,e,n),t=i.subParser("hashHTMLBlocks")(t,e,n),t=i.subParser("paragraphs")(t,e,n),n.converter._dispatch("blockGamut.after",t,e,n)}),i.subParser("blockQuotes",function(t,e,n){"use strict";t=n.converter._dispatch("blockQuotes.before",t,e,n),t+="\n\n";var r=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return e.splitAdjacentBlockquotes&&(r=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),t=t.replace(r,function(t){return t=(t=(t=t.replace(/^[ \t]*>[ \t]?/gm,"")).replace(/¨0/g,"")).replace(/^[ \t]+$/gm,""),t=i.subParser("githubCodeBlocks")(t,e,n),t=(t=(t=i.subParser("blockGamut")(t,e,n)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(t,e){var n=e;return(n=n.replace(/^  /gm,"¨0")).replace(/¨0/g,"")}),i.subParser("hashBlock")("<blockquote>\n"+t+"\n</blockquote>",e,n)}),n.converter._dispatch("blockQuotes.after",t,e,n)}),i.subParser("codeBlocks",function(t,e,n){"use strict";return t=n.converter._dispatch("codeBlocks.before",t,e,n),t=(t=(t+="¨0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g,function(t,r,s){var a=r,o=s,l="\n";return a=i.subParser("outdent")(a,e,n),a=i.subParser("encodeCode")(a,e,n),a=(a=(a=i.subParser("detab")(a,e,n)).replace(/^\n+/g,"")).replace(/\n+$/g,""),e.omitExtraWLInCodeBlocks&&(l=""),a="<pre><code>"+a+l+"</code></pre>",i.subParser("hashBlock")(a,e,n)+o})).replace(/¨0/,""),n.converter._dispatch("codeBlocks.after",t,e,n)}),i.subParser("codeSpans",function(t,e,n){"use strict";return void 0===(t=n.converter._dispatch("codeSpans.before",t,e,n))&&(t=""),t=t.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(t,r,s,a){var o=a;return o=(o=o.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),o=r+"<code>"+(o=i.subParser("encodeCode")(o,e,n))+"</code>",i.subParser("hashHTMLSpans")(o,e,n)}),n.converter._dispatch("codeSpans.after",t,e,n)}),i.subParser("completeHTMLDocument",function(t,e,n){"use strict";if(!e.completeHTMLDocument)return t;t=n.converter._dispatch("completeHTMLDocument.before",t,e,n);var i="html",r="<!DOCTYPE HTML>\n",s="",a='<meta charset="utf-8">\n',o="",l="";for(var c in void 0!==n.metadata.parsed.doctype&&(r="<!DOCTYPE "+n.metadata.parsed.doctype+">\n","html"!==(i=n.metadata.parsed.doctype.toString().toLowerCase())&&"html5"!==i||(a='<meta charset="utf-8">')),n.metadata.parsed)if(n.metadata.parsed.hasOwnProperty(c))switch(c.toLowerCase()){case"doctype":break;case"title":s="<title>"+n.metadata.parsed.title+"</title>\n";break;case"charset":a="html"===i||"html5"===i?'<meta charset="'+n.metadata.parsed.charset+'">\n':'<meta name="charset" content="'+n.metadata.parsed.charset+'">\n';break;case"language":case"lang":o=' lang="'+n.metadata.parsed[c]+'"',l+='<meta name="'+c+'" content="'+n.metadata.parsed[c]+'">\n';break;default:l+='<meta name="'+c+'" content="'+n.metadata.parsed[c]+'">\n'}return t=r+"<html"+o+">\n<head>\n"+s+a+l+"</head>\n<body>\n"+t.trim()+"\n</body>\n</html>",n.converter._dispatch("completeHTMLDocument.after",t,e,n)}),i.subParser("detab",function(t,e,n){"use strict";return t=(t=(t=(t=(t=(t=n.converter._dispatch("detab.before",t,e,n)).replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"¨A¨B")).replace(/¨B(.+?)¨A/g,function(t,e){for(var n=e,i=4-n.length%4,r=0;r<i;r++)n+=" ";return n})).replace(/¨A/g,"    ")).replace(/¨B/g,""),n.converter._dispatch("detab.after",t,e,n)}),i.subParser("ellipsis",function(t,e,n){"use strict";return t=(t=n.converter._dispatch("ellipsis.before",t,e,n)).replace(/\.\.\./g,"…"),n.converter._dispatch("ellipsis.after",t,e,n)}),i.subParser("emoji",function(t,e,n){"use strict";return e.emoji?(t=(t=n.converter._dispatch("emoji.before",t,e,n)).replace(/:([\S]+?):/g,function(t,e){return i.helper.emojis.hasOwnProperty(e)?i.helper.emojis[e]:t}),n.converter._dispatch("emoji.after",t,e,n)):t}),i.subParser("encodeAmpsAndAngles",function(t,e,n){"use strict";return t=(t=(t=(t=(t=n.converter._dispatch("encodeAmpsAndAngles.before",t,e,n)).replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?$!])/gi,"&lt;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),n.converter._dispatch("encodeAmpsAndAngles.after",t,e,n)}),i.subParser("encodeBackslashEscapes",function(t,e,n){"use strict";return t=(t=(t=n.converter._dispatch("encodeBackslashEscapes.before",t,e,n)).replace(/\\(\\)/g,i.helper.escapeCharactersCallback)).replace(/\\([`*_{}\[\]()>#+.!~=|-])/g,i.helper.escapeCharactersCallback),n.converter._dispatch("encodeBackslashEscapes.after",t,e,n)}),i.subParser("encodeCode",function(t,e,n){"use strict";return t=(t=n.converter._dispatch("encodeCode.before",t,e,n)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,i.helper.escapeCharactersCallback),n.converter._dispatch("encodeCode.after",t,e,n)}),i.subParser("escapeSpecialCharsWithinTagAttributes",function(t,e,n){"use strict";return t=(t=(t=n.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",t,e,n)).replace(/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,function(t){return t.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,i.helper.escapeCharactersCallback)})).replace(/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi,function(t){return t.replace(/([\\`*_~=|])/g,i.helper.escapeCharactersCallback)}),n.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",t,e,n)}),i.subParser("githubCodeBlocks",function(t,e,n){"use strict";return e.ghCodeBlocks?(t=n.converter._dispatch("githubCodeBlocks.before",t,e,n),t=(t=(t+="¨0").replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(t,r,s,a){var o=e.omitExtraWLInCodeBlocks?"":"\n";return a=i.subParser("encodeCode")(a,e,n),a=(a=(a=i.subParser("detab")(a,e,n)).replace(/^\n+/g,"")).replace(/\n+$/g,""),a="<pre><code"+(s?' class="'+s+" language-"+s+'"':"")+">"+a+o+"</code></pre>",a=i.subParser("hashBlock")(a,e,n),"\n\n¨G"+(n.ghCodeBlocks.push({text:t,codeblock:a})-1)+"G\n\n"})).replace(/¨0/,""),n.converter._dispatch("githubCodeBlocks.after",t,e,n)):t}),i.subParser("hashBlock",function(t,e,n){"use strict";return t=(t=n.converter._dispatch("hashBlock.before",t,e,n)).replace(/(^\n+|\n+$)/g,""),t="\n\n¨K"+(n.gHtmlBlocks.push(t)-1)+"K\n\n",n.converter._dispatch("hashBlock.after",t,e,n)}),i.subParser("hashCodeTags",function(t,e,n){"use strict";return t=n.converter._dispatch("hashCodeTags.before",t,e,n),t=i.helper.replaceRecursiveRegExp(t,function(t,r,s,a){var o=s+i.subParser("encodeCode")(r,e,n)+a;return"¨C"+(n.gHtmlSpans.push(o)-1)+"C"},"<code\\b[^>]*>","</code>","gim"),n.converter._dispatch("hashCodeTags.after",t,e,n)}),i.subParser("hashElement",function(t,e,n){"use strict";return function(t,e){var i=e;return i=(i=(i=i.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),"\n\n¨K"+(n.gHtmlBlocks.push(i)-1)+"K\n\n"}}),i.subParser("hashHTMLBlocks",function(t,e,n){"use strict";t=n.converter._dispatch("hashHTMLBlocks.before",t,e,n);var r=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],s=function(t,e,i,r){var s=t;return-1!==i.search(/\bmarkdown\b/)&&(s=i+n.converter.makeHtml(e)+r),"\n\n¨K"+(n.gHtmlBlocks.push(s)-1)+"K\n\n"};e.backslashEscapesHTMLTags&&(t=t.replace(/\\<(\/?[^>]+?)>/g,function(t,e){return"&lt;"+e+"&gt;"}));for(var a=0;a<r.length;++a)for(var o,l=new RegExp("^ {0,3}(<"+r[a]+"\\b[^>]*>)","im"),c="<"+r[a]+"\\b[^>]*>",u="</"+r[a]+">";-1!==(o=i.helper.regexIndexOf(t,l));){var d=i.helper.splitAtIndex(t,o),p=i.helper.replaceRecursiveRegExp(d[1],s,c,u,"im");if(p===d[1])break;t=d[0].concat(p)}return t=t.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,i.subParser("hashElement")(t,e,n)),t=(t=i.helper.replaceRecursiveRegExp(t,function(t){return"\n\n¨K"+(n.gHtmlBlocks.push(t)-1)+"K\n\n"},"^ {0,3}\x3c!--","--\x3e","gm")).replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,i.subParser("hashElement")(t,e,n)),n.converter._dispatch("hashHTMLBlocks.after",t,e,n)}),i.subParser("hashHTMLSpans",function(t,e,n){"use strict";function i(t){return"¨C"+(n.gHtmlSpans.push(t)-1)+"C"}return t=(t=(t=(t=(t=n.converter._dispatch("hashHTMLSpans.before",t,e,n)).replace(/<[^>]+?\/>/gi,function(t){return i(t)})).replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(t){return i(t)})).replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(t){return i(t)})).replace(/<[^>]+?>/gi,function(t){return i(t)}),n.converter._dispatch("hashHTMLSpans.after",t,e,n)}),i.subParser("unhashHTMLSpans",function(t,e,n){"use strict";t=n.converter._dispatch("unhashHTMLSpans.before",t,e,n);for(var i=0;i<n.gHtmlSpans.length;++i){for(var r=n.gHtmlSpans[i],s=0;/¨C(\d+)C/.test(r);){var a=RegExp.$1;if(r=r.replace("¨C"+a+"C",n.gHtmlSpans[a]),10===s){console.error("maximum nesting of 10 spans reached!!!");break}++s}t=t.replace("¨C"+i+"C",r)}return n.converter._dispatch("unhashHTMLSpans.after",t,e,n)}),i.subParser("hashPreCodeTags",function(t,e,n){"use strict";return t=n.converter._dispatch("hashPreCodeTags.before",t,e,n),t=i.helper.replaceRecursiveRegExp(t,function(t,r,s,a){var o=s+i.subParser("encodeCode")(r,e,n)+a;return"\n\n¨G"+(n.ghCodeBlocks.push({text:t,codeblock:o})-1)+"G\n\n"},"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),n.converter._dispatch("hashPreCodeTags.after",t,e,n)}),i.subParser("headers",function(t,e,n){"use strict";function r(t){var r,s;if(e.customizedHeaderId){var a=t.match(/\{([^{]+?)}\s*$/);a&&a[1]&&(t=a[1])}return r=t,s=i.helper.isString(e.prefixHeaderId)?e.prefixHeaderId:!0===e.prefixHeaderId?"section-":"",e.rawPrefixHeaderId||(r=s+r),r=e.ghCompatibleHeaderId?r.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():e.rawHeaderId?r.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"¨").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():r.replace(/[^\w]/g,"").toLowerCase(),e.rawPrefixHeaderId&&(r=s+r),n.hashLinkCounts[r]?r=r+"-"+n.hashLinkCounts[r]++:n.hashLinkCounts[r]=1,r}t=n.converter._dispatch("headers.before",t,e,n);var s=isNaN(parseInt(e.headerLevelStart))?1:parseInt(e.headerLevelStart),a=e.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,o=e.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;t=(t=t.replace(a,function(t,a){var o=i.subParser("spanGamut")(a,e,n),l=e.noHeaderId?"":' id="'+r(a)+'"',c="<h"+s+l+">"+o+"</h"+s+">";return i.subParser("hashBlock")(c,e,n)})).replace(o,function(t,a){var o=i.subParser("spanGamut")(a,e,n),l=e.noHeaderId?"":' id="'+r(a)+'"',c=s+1,u="<h"+c+l+">"+o+"</h"+c+">";return i.subParser("hashBlock")(u,e,n)});var l=e.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;return t=t.replace(l,function(t,a,o){var l=o;e.customizedHeaderId&&(l=o.replace(/\s?\{([^{]+?)}\s*$/,""));var c=i.subParser("spanGamut")(l,e,n),u=e.noHeaderId?"":' id="'+r(o)+'"',d=s-1+a.length,p="<h"+d+u+">"+c+"</h"+d+">";return i.subParser("hashBlock")(p,e,n)}),n.converter._dispatch("headers.after",t,e,n)}),i.subParser("horizontalRule",function(t,e,n){"use strict";t=n.converter._dispatch("horizontalRule.before",t,e,n);var r=i.subParser("hashBlock")("<hr />",e,n);return t=(t=(t=t.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,r)).replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,r)).replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,r),n.converter._dispatch("horizontalRule.after",t,e,n)}),i.subParser("images",function(t,e,n){"use strict";function r(t,e,r,s,a,o,l,c){var u=n.gUrls,d=n.gTitles,p=n.gDimensions;if(r=r.toLowerCase(),c||(c=""),t.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)s="";else if(""===s||null===s){if(""!==r&&null!==r||(r=e.toLowerCase().replace(/ ?\n/g," ")),s="#"+r,i.helper.isUndefined(u[r]))return t;s=u[r],i.helper.isUndefined(d[r])||(c=d[r]),i.helper.isUndefined(p[r])||(a=p[r].width,o=p[r].height)}e=e.replace(/"/g,"&quot;").replace(i.helper.regexes.asteriskDashAndColon,i.helper.escapeCharactersCallback);var h='<img src="'+(s=s.replace(i.helper.regexes.asteriskDashAndColon,i.helper.escapeCharactersCallback))+'" alt="'+e+'"';return c&&i.helper.isString(c)&&(h+=' title="'+(c=c.replace(/"/g,"&quot;").replace(i.helper.regexes.asteriskDashAndColon,i.helper.escapeCharactersCallback))+'"'),a&&o&&(h+=' width="'+(a="*"===a?"auto":a)+'"',h+=' height="'+(o="*"===o?"auto":o)+'"'),h+" />"}return t=(t=(t=(t=(t=(t=n.converter._dispatch("images.before",t,e,n)).replace(/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,r)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,function(t,e,n,i,s,a,o,l){return r(t,e,n,i=i.replace(/\s/g,""),s,a,0,l)})).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,r)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,r)).replace(/!\[([^\[\]]+)]()()()()()/g,r),n.converter._dispatch("images.after",t,e,n)}),i.subParser("italicsAndBold",function(t,e,n){"use strict";function i(t,e,n){return e+t+n}return t=n.converter._dispatch("italicsAndBold.before",t,e,n),t=e.literalMidWordUnderscores?(t=(t=t.replace(/\b___(\S[\s\S]*?)___\b/g,function(t,e){return i(e,"<strong><em>","</em></strong>")})).replace(/\b__(\S[\s\S]*?)__\b/g,function(t,e){return i(e,"<strong>","</strong>")})).replace(/\b_(\S[\s\S]*?)_\b/g,function(t,e){return i(e,"<em>","</em>")}):(t=(t=t.replace(/___(\S[\s\S]*?)___/g,function(t,e){return/\S$/.test(e)?i(e,"<strong><em>","</em></strong>"):t})).replace(/__(\S[\s\S]*?)__/g,function(t,e){return/\S$/.test(e)?i(e,"<strong>","</strong>"):t})).replace(/_([^\s_][\s\S]*?)_/g,function(t,e){return/\S$/.test(e)?i(e,"<em>","</em>"):t}),t=e.literalMidWordAsterisks?(t=(t=t.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(t,e,n){return i(n,e+"<strong><em>","</em></strong>")})).replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(t,e,n){return i(n,e+"<strong>","</strong>")})).replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(t,e,n){return i(n,e+"<em>","</em>")}):(t=(t=t.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(t,e){return/\S$/.test(e)?i(e,"<strong><em>","</em></strong>"):t})).replace(/\*\*(\S[\s\S]*?)\*\*/g,function(t,e){return/\S$/.test(e)?i(e,"<strong>","</strong>"):t})).replace(/\*([^\s*][\s\S]*?)\*/g,function(t,e){return/\S$/.test(e)?i(e,"<em>","</em>"):t}),n.converter._dispatch("italicsAndBold.after",t,e,n)}),i.subParser("lists",function(t,e,n){"use strict";function r(t,r){n.gListLevel++,t=t.replace(/\n{2,}$/,"\n");var s=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,a=/\n[ \t]*\n(?!¨0)/.test(t+="¨0");return e.disableForced4SpacesIndentedSublists&&(s=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),t=(t=t.replace(s,function(t,r,s,o,l,c,u){u=u&&""!==u.trim();var d=i.subParser("outdent")(l,e,n),p="";return c&&e.tasklists&&(p=' class="task-list-item" style="list-style-type: none;"',d=d.replace(/^[ \t]*\[(x|X| )?]/m,function(){var t='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return u&&(t+=" checked"),t+">"})),d=d.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(t){return"¨A"+t}),r||d.search(/\n{2,}/)>-1?(d=i.subParser("githubCodeBlocks")(d,e,n),d=i.subParser("blockGamut")(d,e,n)):(d=(d=i.subParser("lists")(d,e,n)).replace(/\n$/,""),d=(d=i.subParser("hashHTMLBlocks")(d,e,n)).replace(/\n\n+/g,"\n\n"),d=a?i.subParser("paragraphs")(d,e,n):i.subParser("spanGamut")(d,e,n)),"<li"+p+">"+(d=d.replace("¨A",""))+"</li>\n"})).replace(/¨0/g,""),n.gListLevel--,r&&(t=t.replace(/\s+$/,"")),t}function s(t,e){if("ol"===e){var n=t.match(/^ *(\d+)\./);if(n&&"1"!==n[1])return' start="'+n[1]+'"'}return""}function a(t,n,i){var a=e.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,o=e.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,l="ul"===n?a:o,c="";if(-1!==t.search(l))!function e(u){var d=u.search(l),p=s(t,n);-1!==d?(c+="\n\n<"+n+p+">\n"+r(u.slice(0,d),!!i)+"</"+n+">\n",l="ul"==(n="ul"===n?"ol":"ul")?a:o,e(u.slice(d))):c+="\n\n<"+n+p+">\n"+r(u,!!i)+"</"+n+">\n"}(t);else{var u=s(t,n);c="\n\n<"+n+u+">\n"+r(t,!!i)+"</"+n+">\n"}return c}return t=n.converter._dispatch("lists.before",t,e,n),t+="¨0",t=(t=n.gListLevel?t.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(t,e,n){return a(e,n.search(/[*+-]/g)>-1?"ul":"ol",!0)}):t.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(t,e,n,i){return a(n,i.search(/[*+-]/g)>-1?"ul":"ol",!1)})).replace(/¨0/,""),n.converter._dispatch("lists.after",t,e,n)}),i.subParser("metadata",function(t,e,n){"use strict";function i(t){n.metadata.raw=t,(t=(t=t.replace(/&/g,"&amp;").replace(/"/g,"&quot;")).replace(/\n {4}/g," ")).replace(/^([\S ]+): +([\s\S]+?)$/gm,function(t,e,i){return n.metadata.parsed[e]=i,""})}return e.metadata?(t=(t=(t=(t=n.converter._dispatch("metadata.before",t,e,n)).replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,function(t,e,n){return i(n),"¨M"})).replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(t,e,r){return e&&(n.metadata.format=e),i(r),"¨M"})).replace(/¨M/g,""),t=n.converter._dispatch("metadata.after",t,e,n)):t}),i.subParser("outdent",function(t,e,n){"use strict";return t=(t=(t=n.converter._dispatch("outdent.before",t,e,n)).replace(/^(\t|[ ]{1,4})/gm,"¨0")).replace(/¨0/g,""),n.converter._dispatch("outdent.after",t,e,n)}),i.subParser("paragraphs",function(t,e,n){"use strict";for(var r=(t=(t=(t=n.converter._dispatch("paragraphs.before",t,e,n)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),s=[],a=r.length,o=0;o<a;o++){var l=r[o];l.search(/¨(K|G)(\d+)\1/g)>=0?s.push(l):l.search(/\S/)>=0&&(l=(l=i.subParser("spanGamut")(l,e,n)).replace(/^([ \t]*)/g,"<p>"),l+="</p>",s.push(l))}for(a=s.length,o=0;o<a;o++){for(var c="",u=s[o],d=!1;/¨(K|G)(\d+)\1/.test(u);){var p=RegExp.$1,h=RegExp.$2;c=(c="K"===p?n.gHtmlBlocks[h]:d?i.subParser("encodeCode")(n.ghCodeBlocks[h].text,e,n):n.ghCodeBlocks[h].codeblock).replace(/\$/g,"$$$$"),u=u.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,c),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(u)&&(d=!0)}s[o]=u}return t=(t=(t=s.join("\n")).replace(/^\n+/g,"")).replace(/\n+$/g,""),n.converter._dispatch("paragraphs.after",t,e,n)}),i.subParser("runExtension",function(t,e,n,i){"use strict";if(t.filter)e=t.filter(e,i.converter,n);else if(t.regex){var r=t.regex;r instanceof RegExp||(r=new RegExp(r,"g")),e=e.replace(r,t.replace)}return e}),i.subParser("spanGamut",function(t,e,n){"use strict";return t=n.converter._dispatch("spanGamut.before",t,e,n),t=i.subParser("codeSpans")(t,e,n),t=i.subParser("escapeSpecialCharsWithinTagAttributes")(t,e,n),t=i.subParser("encodeBackslashEscapes")(t,e,n),t=i.subParser("images")(t,e,n),t=i.subParser("anchors")(t,e,n),t=i.subParser("autoLinks")(t,e,n),t=i.subParser("simplifiedAutoLinks")(t,e,n),t=i.subParser("emoji")(t,e,n),t=i.subParser("underline")(t,e,n),t=i.subParser("italicsAndBold")(t,e,n),t=i.subParser("strikethrough")(t,e,n),t=i.subParser("ellipsis")(t,e,n),t=i.subParser("hashHTMLSpans")(t,e,n),t=i.subParser("encodeAmpsAndAngles")(t,e,n),e.simpleLineBreaks?/\n\n¨K/.test(t)||(t=t.replace(/\n+/g,"<br />\n")):t=t.replace(/  +\n/g,"<br />\n"),n.converter._dispatch("spanGamut.after",t,e,n)}),i.subParser("strikethrough",function(t,e,n){"use strict";return e.strikethrough&&(t=(t=n.converter._dispatch("strikethrough.before",t,e,n)).replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(t,r){return function(t){return e.simplifiedAutoLink&&(t=i.subParser("simplifiedAutoLinks")(t,e,n)),"<del>"+t+"</del>"}(r)}),t=n.converter._dispatch("strikethrough.after",t,e,n)),t}),i.subParser("stripLinkDefinitions",function(t,e,n){"use strict";var r=function(t,r,s,a,o,l,c){return r=r.toLowerCase(),s.match(/^data:.+?\/.+?;base64,/)?n.gUrls[r]=s.replace(/\s/g,""):n.gUrls[r]=i.subParser("encodeAmpsAndAngles")(s,e,n),l?l+c:(c&&(n.gTitles[r]=c.replace(/"|'/g,"&quot;")),e.parseImgDimensions&&a&&o&&(n.gDimensions[r]={width:a,height:o}),"")};return(t=(t=(t+="¨0").replace(/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm,r)).replace(/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,r)).replace(/¨0/,"")}),i.subParser("tables",function(t,e,n){"use strict";function r(t){return/^:[ \t]*--*$/.test(t)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(t)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(t)?' style="text-align:center;"':""}function s(t,r){var s="";return t=t.trim(),(e.tablesHeaderId||e.tableHeaderId)&&(s=' id="'+t.replace(/ /g,"_").toLowerCase()+'"'),"<th"+s+r+">"+(t=i.subParser("spanGamut")(t,e,n))+"</th>\n"}function a(t,r){return"<td"+r+">"+i.subParser("spanGamut")(t,e,n)+"</td>\n"}function o(t){var o,l=t.split("\n");for(o=0;o<l.length;++o)/^ {0,3}\|/.test(l[o])&&(l[o]=l[o].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(l[o])&&(l[o]=l[o].replace(/\|[ \t]*$/,"")),l[o]=i.subParser("codeSpans")(l[o],e,n);var c=l[0].split("|").map(function(t){return t.trim()}),u=l[1].split("|").map(function(t){return t.trim()}),d=[],p=[],h=[],f=[];for(l.shift(),l.shift(),o=0;o<l.length;++o)""!==l[o].trim()&&d.push(l[o].split("|").map(function(t){return t.trim()}));if(c.length<u.length)return t;for(o=0;o<u.length;++o)h.push(r(u[o]));for(o=0;o<c.length;++o)i.helper.isUndefined(h[o])&&(h[o]=""),p.push(s(c[o],h[o]));for(o=0;o<d.length;++o){for(var m=[],v=0;v<p.length;++v)i.helper.isUndefined(d[o][v]),m.push(a(d[o][v],h[v]));f.push(m)}return function(t,e){for(var n="<table>\n<thead>\n<tr>\n",i=t.length,r=0;r<i;++r)n+=t[r];for(n+="</tr>\n</thead>\n<tbody>\n",r=0;r<e.length;++r){n+="<tr>\n";for(var s=0;s<i;++s)n+=e[r][s];n+="</tr>\n"}return n+"</tbody>\n</table>\n"}(p,f)}return e.tables?(t=(t=(t=(t=n.converter._dispatch("tables.before",t,e,n)).replace(/\\(\|)/g,i.helper.escapeCharactersCallback)).replace(/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,o)).replace(/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm,o),n.converter._dispatch("tables.after",t,e,n)):t}),i.subParser("underline",function(t,e,n){"use strict";return e.underline?(t=n.converter._dispatch("underline.before",t,e,n),t=(t=e.literalMidWordUnderscores?(t=t.replace(/\b___(\S[\s\S]*?)___\b/g,function(t,e){return"<u>"+e+"</u>"})).replace(/\b__(\S[\s\S]*?)__\b/g,function(t,e){return"<u>"+e+"</u>"}):(t=t.replace(/___(\S[\s\S]*?)___/g,function(t,e){return/\S$/.test(e)?"<u>"+e+"</u>":t})).replace(/__(\S[\s\S]*?)__/g,function(t,e){return/\S$/.test(e)?"<u>"+e+"</u>":t})).replace(/(_)/g,i.helper.escapeCharactersCallback),t=n.converter._dispatch("underline.after",t,e,n)):t}),i.subParser("unescapeSpecialChars",function(t,e,n){"use strict";return t=(t=n.converter._dispatch("unescapeSpecialChars.before",t,e,n)).replace(/¨E(\d+)E/g,function(t,e){var n=parseInt(e);return String.fromCharCode(n)}),n.converter._dispatch("unescapeSpecialChars.after",t,e,n)}),i.subParser("makeMarkdown.blockquote",function(t,e){"use strict";var n="";if(t.hasChildNodes())for(var r=t.childNodes,s=r.length,a=0;a<s;++a){var o=i.subParser("makeMarkdown.node")(r[a],e);""!==o&&(n+=o)}return"> "+(n=n.trim()).split("\n").join("\n> ")}),i.subParser("makeMarkdown.codeBlock",function(t,e){"use strict";var n=t.getAttribute("language"),i=t.getAttribute("precodenum");return"```"+n+"\n"+e.preList[i]+"\n```"}),i.subParser("makeMarkdown.codeSpan",function(t){"use strict";return"`"+t.innerHTML+"`"}),i.subParser("makeMarkdown.emphasis",function(t,e){"use strict";var n="";if(t.hasChildNodes()){n+="*";for(var r=t.childNodes,s=r.length,a=0;a<s;++a)n+=i.subParser("makeMarkdown.node")(r[a],e);n+="*"}return n}),i.subParser("makeMarkdown.header",function(t,e,n){"use strict";var r=new Array(n+1).join("#"),s="";if(t.hasChildNodes()){s=r+" ";for(var a=t.childNodes,o=a.length,l=0;l<o;++l)s+=i.subParser("makeMarkdown.node")(a[l],e)}return s}),i.subParser("makeMarkdown.hr",function(){"use strict";return"---"}),i.subParser("makeMarkdown.image",function(t){"use strict";var e="";return t.hasAttribute("src")&&(e+="!["+t.getAttribute("alt")+"](",e+="<"+t.getAttribute("src")+">",t.hasAttribute("width")&&t.hasAttribute("height")&&(e+=" ="+t.getAttribute("width")+"x"+t.getAttribute("height")),t.hasAttribute("title")&&(e+=' "'+t.getAttribute("title")+'"'),e+=")"),e}),i.subParser("makeMarkdown.links",function(t,e){"use strict";var n="";if(t.hasChildNodes()&&t.hasAttribute("href")){var r=t.childNodes,s=r.length;n="[";for(var a=0;a<s;++a)n+=i.subParser("makeMarkdown.node")(r[a],e);n+="](",n+="<"+t.getAttribute("href")+">",t.hasAttribute("title")&&(n+=' "'+t.getAttribute("title")+'"'),n+=")"}return n}),i.subParser("makeMarkdown.list",function(t,e,n){"use strict";var r="";if(!t.hasChildNodes())return"";for(var s=t.childNodes,a=s.length,o=t.getAttribute("start")||1,l=0;l<a;++l)void 0!==s[l].tagName&&"li"===s[l].tagName.toLowerCase()&&(r+=("ol"===n?o.toString()+". ":"- ")+i.subParser("makeMarkdown.listItem")(s[l],e),++o);return(r+="\n\x3c!-- --\x3e\n").trim()}),i.subParser("makeMarkdown.listItem",function(t,e){"use strict";for(var n="",r=t.childNodes,s=r.length,a=0;a<s;++a)n+=i.subParser("makeMarkdown.node")(r[a],e);return/\n$/.test(n)?n=n.split("\n").join("\n    ").replace(/^ {4}$/gm,"").replace(/\n\n+/g,"\n\n"):n+="\n",n}),i.subParser("makeMarkdown.node",function(t,e,n){"use strict";n=n||!1;var r="";if(3===t.nodeType)return i.subParser("makeMarkdown.txt")(t,e);if(8===t.nodeType)return"\x3c!--"+t.data+"--\x3e\n\n";if(1!==t.nodeType)return"";switch(t.tagName.toLowerCase()){case"h1":n||(r=i.subParser("makeMarkdown.header")(t,e,1)+"\n\n");break;case"h2":n||(r=i.subParser("makeMarkdown.header")(t,e,2)+"\n\n");break;case"h3":n||(r=i.subParser("makeMarkdown.header")(t,e,3)+"\n\n");break;case"h4":n||(r=i.subParser("makeMarkdown.header")(t,e,4)+"\n\n");break;case"h5":n||(r=i.subParser("makeMarkdown.header")(t,e,5)+"\n\n");break;case"h6":n||(r=i.subParser("makeMarkdown.header")(t,e,6)+"\n\n");break;case"p":n||(r=i.subParser("makeMarkdown.paragraph")(t,e)+"\n\n");break;case"blockquote":n||(r=i.subParser("makeMarkdown.blockquote")(t,e)+"\n\n");break;case"hr":n||(r=i.subParser("makeMarkdown.hr")(t,e)+"\n\n");break;case"ol":n||(r=i.subParser("makeMarkdown.list")(t,e,"ol")+"\n\n");break;case"ul":n||(r=i.subParser("makeMarkdown.list")(t,e,"ul")+"\n\n");break;case"precode":n||(r=i.subParser("makeMarkdown.codeBlock")(t,e)+"\n\n");break;case"pre":n||(r=i.subParser("makeMarkdown.pre")(t,e)+"\n\n");break;case"table":n||(r=i.subParser("makeMarkdown.table")(t,e)+"\n\n");break;case"code":r=i.subParser("makeMarkdown.codeSpan")(t,e);break;case"em":case"i":r=i.subParser("makeMarkdown.emphasis")(t,e);break;case"strong":case"b":r=i.subParser("makeMarkdown.strong")(t,e);break;case"del":r=i.subParser("makeMarkdown.strikethrough")(t,e);break;case"a":r=i.subParser("makeMarkdown.links")(t,e);break;case"img":r=i.subParser("makeMarkdown.image")(t,e);break;default:r=t.outerHTML+"\n\n"}return r}),i.subParser("makeMarkdown.paragraph",function(t,e){"use strict";var n="";if(t.hasChildNodes())for(var r=t.childNodes,s=r.length,a=0;a<s;++a)n+=i.subParser("makeMarkdown.node")(r[a],e);return n.trim()}),i.subParser("makeMarkdown.pre",function(t,e){"use strict";var n=t.getAttribute("prenum");return"<pre>"+e.preList[n]+"</pre>"}),i.subParser("makeMarkdown.strikethrough",function(t,e){"use strict";var n="";if(t.hasChildNodes()){n+="~~";for(var r=t.childNodes,s=r.length,a=0;a<s;++a)n+=i.subParser("makeMarkdown.node")(r[a],e);n+="~~"}return n}),i.subParser("makeMarkdown.strong",function(t,e){"use strict";var n="";if(t.hasChildNodes()){n+="**";for(var r=t.childNodes,s=r.length,a=0;a<s;++a)n+=i.subParser("makeMarkdown.node")(r[a],e);n+="**"}return n}),i.subParser("makeMarkdown.table",function(t,e){"use strict";var n,r,s="",a=[[],[]],o=t.querySelectorAll("thead>tr>th"),l=t.querySelectorAll("tbody>tr");for(n=0;n<o.length;++n){var c=i.subParser("makeMarkdown.tableCell")(o[n],e),u="---";if(o[n].hasAttribute("style"))switch(o[n].getAttribute("style").toLowerCase().replace(/\s/g,"")){case"text-align:left;":u=":---";break;case"text-align:right;":u="---:";break;case"text-align:center;":u=":---:"}a[0][n]=c.trim(),a[1][n]=u}for(n=0;n<l.length;++n){var d=a.push([])-1,p=l[n].getElementsByTagName("td");for(r=0;r<o.length;++r){var h=" ";void 0!==p[r]&&(h=i.subParser("makeMarkdown.tableCell")(p[r],e)),a[d].push(h)}}var f=3;for(n=0;n<a.length;++n)for(r=0;r<a[n].length;++r){var m=a[n][r].length;m>f&&(f=m)}for(n=0;n<a.length;++n){for(r=0;r<a[n].length;++r)1===n?":"===a[n][r].slice(-1)?a[n][r]=i.helper.padEnd(a[n][r].slice(-1),f-1,"-")+":":a[n][r]=i.helper.padEnd(a[n][r],f,"-"):a[n][r]=i.helper.padEnd(a[n][r],f);s+="| "+a[n].join(" | ")+" |\n"}return s.trim()}),i.subParser("makeMarkdown.tableCell",function(t,e){"use strict";var n="";if(!t.hasChildNodes())return"";for(var r=t.childNodes,s=r.length,a=0;a<s;++a)n+=i.subParser("makeMarkdown.node")(r[a],e,!0);return n.trim()}),i.subParser("makeMarkdown.txt",function(t){"use strict";var e=t.nodeValue;return e=(e=e.replace(/ +/g," ")).replace(/¨NBSP;/g," "),(e=(e=(e=(e=(e=(e=(e=(e=i.helper.unescapeHTMLEntities(e)).replace(/([*_~|`])/g,"\\$1")).replace(/^(\s*)>/g,"\\$1>")).replace(/^#/gm,"\\#")).replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3")).replace(/^( {0,3}\d+)\./gm,"$1\\.")).replace(/^( {0,3})([+-])/gm,"$1\\$2")).replace(/]([\s]*)\(/g,"\\]$1\\(")).replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:")}),"function"==typeof define&&define.amd?define(function(){"use strict";return i}):"undefined"!=typeof module&&module.exports?module.exports=i:this.showdown=i}.call(this),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Vue=e()}(this,function(){"use strict";var t=Object.freeze({});function e(t){return void 0===t||null===t}function n(t){return void 0!==t&&null!==t}function i(t){return!0===t}function r(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function s(t){return null!==t&&"object"==typeof t}var a=Object.prototype.toString;function o(t){return a.call(t).slice(8,-1)}function l(t){return"[object Object]"===a.call(t)}function c(t){return"[object RegExp]"===a.call(t)}function u(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function d(t){return n(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function p(t){return null==t?"":Array.isArray(t)||l(t)&&t.toString===a?JSON.stringify(t,null,2):String(t)}function h(t){var e=parseFloat(t);return isNaN(e)?t:e}function f(t,e){for(var n=Object.create(null),i=t.split(","),r=0;r<i.length;r++)n[i[r]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}var m=f("slot,component",!0),v=f("key,ref,slot,slot-scope,is");function g(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var y=Object.prototype.hasOwnProperty;function b(t,e){return y.call(t,e)}function _(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}var x=/-(\w)/g,w=_(function(t){return t.replace(x,function(t,e){return e?e.toUpperCase():""})}),k=_(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),S=/\B([A-Z])/g,C=_(function(t){return t.replace(S,"-$1").toLowerCase()});var E=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function n(n){var i=arguments.length;return i?i>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n};function M(t,e){e=e||0;for(var n=t.length-e,i=new Array(n);n--;)i[n]=t[n+e];return i}function A(t,e){for(var n in e)t[n]=e[n];return t}function T(t){for(var e={},n=0;n<t.length;n++)t[n]&&A(e,t[n]);return e}function D(t,e,n){}var O=function(t,e,n){return!1},R=function(t){return t};function N(t,e){if(t===e)return!0;var n=s(t),i=s(e);if(!n||!i)return!n&&!i&&String(t)===String(e);try{var r=Array.isArray(t),a=Array.isArray(e);if(r&&a)return t.length===e.length&&t.every(function(t,n){return N(t,e[n])});if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(r||a)return!1;var o=Object.keys(t),l=Object.keys(e);return o.length===l.length&&o.every(function(n){return N(t[n],e[n])})}catch(t){return!1}}function I(t,e){for(var n=0;n<t.length;n++)if(N(t[n],e))return n;return-1}function $(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var j="data-server-rendered",L=["component","directive","filter"],V=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],P={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!0,devtools:!0,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:O,isReservedAttr:O,isUnknownElement:O,getTagNamespace:D,parsePlatformTagName:R,mustUseProp:O,async:!0,_lifecycleHooks:V},q=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function z(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function F(t,e,n,i){Object.defineProperty(t,e,{value:n,enumerable:!!i,writable:!0,configurable:!0})}var B=new RegExp("[^"+q.source+".$_\\d]");var H,U="__proto__"in{},K="undefined"!=typeof window,W="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,G=W&&WXEnvironment.platform.toLowerCase(),X=K&&window.navigator.userAgent.toLowerCase(),Y=X&&/msie|trident/.test(X),J=X&&X.indexOf("msie 9.0")>0,Z=X&&X.indexOf("edge/")>0,Q=(X&&X.indexOf("android"),X&&/iphone|ipad|ipod|ios/.test(X)||"ios"===G),tt=(X&&/chrome\/\d+/.test(X),X&&/phantomjs/.test(X),X&&X.match(/firefox\/(\d+)/)),et={}.watch,nt=!1;if(K)try{var it={};Object.defineProperty(it,"passive",{get:function(){nt=!0}}),window.addEventListener("test-passive",null,it)}catch(t){}var rt=function(){return void 0===H&&(H=!K&&!W&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),H},st=K&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function at(t){return"function"==typeof t&&/native code/.test(t.toString())}var ot,lt="undefined"!=typeof Symbol&&at(Symbol)&&"undefined"!=typeof Reflect&&at(Reflect.ownKeys);ot="undefined"!=typeof Set&&at(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var ct=D,ut=D,dt=D,pt=D,ht="undefined"!=typeof console,ft=/(?:^|[-_])(\w)/g;ct=function(t,e){var n=e?dt(e):"";P.warnHandler?P.warnHandler.call(null,t,e,n):ht&&!P.silent&&console.error("[Vue warn]: "+t+n)},ut=function(t,e){ht&&!P.silent&&console.warn("[Vue tip]: "+t+(e?dt(e):""))},pt=function(t,e){if(t.$root===t)return"<Root>";var n="function"==typeof t&&null!=t.cid?t.options:t._isVue?t.$options||t.constructor.options:t,i=n.name||n._componentTag,r=n.__file;if(!i&&r){var s=r.match(/([^/\\]+)\.vue$/);i=s&&s[1]}return(i?"<"+i.replace(ft,function(t){return t.toUpperCase()}).replace(/[-_]/g,"")+">":"<Anonymous>")+(r&&!1!==e?" at "+r:"")};dt=function(t){if(t._isVue&&t.$parent){for(var e=[],n=0;t;){if(e.length>0){var i=e[e.length-1];if(i.constructor===t.constructor){n++,t=t.$parent;continue}n>0&&(e[e.length-1]=[i,n],n=0)}e.push(t),t=t.$parent}return"\n\nfound in\n\n"+e.map(function(t,e){return""+(0===e?"---\x3e ":function(t,e){for(var n="";e;)e%2==1&&(n+=t),e>1&&(t+=t),e>>=1;return n}(" ",5+2*e))+(Array.isArray(t)?pt(t[0])+"... ("+t[1]+" recursive calls)":pt(t))}).join("\n")}return"\n\n(found in "+pt(t)+")"};var mt=0,vt=function(){this.id=mt++,this.subs=[]};vt.prototype.addSub=function(t){this.subs.push(t)},vt.prototype.removeSub=function(t){g(this.subs,t)},vt.prototype.depend=function(){vt.target&&vt.target.addDep(this)},vt.prototype.notify=function(){var t=this.subs.slice();P.async||t.sort(function(t,e){return t.id-e.id});for(var e=0,n=t.length;e<n;e++)t[e].update()},vt.target=null;var gt=[];function yt(t){gt.push(t),vt.target=t}function bt(){gt.pop(),vt.target=gt[gt.length-1]}var _t=function(t,e,n,i,r,s,a,o){this.tag=t,this.data=e,this.children=n,this.text=i,this.elm=r,this.ns=void 0,this.context=s,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=o,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},xt={child:{configurable:!0}};xt.child.get=function(){return this.componentInstance},Object.defineProperties(_t.prototype,xt);var wt=function(t){void 0===t&&(t="");var e=new _t;return e.text=t,e.isComment=!0,e};function kt(t){return new _t(void 0,void 0,void 0,String(t))}function St(t){var e=new _t(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var Ct=Array.prototype,Et=Object.create(Ct);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var e=Ct[t];F(Et,t,function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];var r,s=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":r=n;break;case"splice":r=n.slice(2)}return r&&a.observeArray(r),a.dep.notify(),s})});var Mt=Object.getOwnPropertyNames(Et),At=!0;function Tt(t){At=t}var Dt=function(t){var e;this.value=t,this.dep=new vt,this.vmCount=0,F(t,"__ob__",this),Array.isArray(t)?(U?(e=Et,t.__proto__=e):function(t,e,n){for(var i=0,r=n.length;i<r;i++){var s=n[i];F(t,s,e[s])}}(t,Et,Mt),this.observeArray(t)):this.walk(t)};function Ot(t,e){var n;if(s(t)&&!(t instanceof _t))return b(t,"__ob__")&&t.__ob__ instanceof Dt?n=t.__ob__:At&&!rt()&&(Array.isArray(t)||l(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new Dt(t)),e&&n&&n.vmCount++,n}function Rt(t,e,n,i,r){var s=new vt,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var o=a&&a.get,l=a&&a.set;o&&!l||2!==arguments.length||(n=t[e]);var c=!r&&Ot(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=o?o.call(t):n;return vt.target&&(s.depend(),c&&(c.dep.depend(),Array.isArray(e)&&function t(e){for(var n=void 0,i=0,r=e.length;i<r;i++)(n=e[i])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&t(n)}(e))),e},set:function(e){var a=o?o.call(t):n;e===a||e!=e&&a!=a||(i&&i(),o&&!l||(l?l.call(t,e):n=e,c=!r&&Ot(e),s.notify()))}})}}function Nt(t,n,i){if((e(t)||r(t))&&ct("Cannot set reactive property on undefined, null, or primitive value: "+t),Array.isArray(t)&&u(n))return t.length=Math.max(t.length,n),t.splice(n,1,i),i;if(n in t&&!(n in Object.prototype))return t[n]=i,i;var s=t.__ob__;return t._isVue||s&&s.vmCount?(ct("Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option."),i):s?(Rt(s.value,n,i),s.dep.notify(),i):(t[n]=i,i)}function It(t,n){if((e(t)||r(t))&&ct("Cannot delete reactive property on undefined, null, or primitive value: "+t),Array.isArray(t)&&u(n))t.splice(n,1);else{var i=t.__ob__;t._isVue||i&&i.vmCount?ct("Avoid deleting properties on a Vue instance or its root $data - just set it to null."):b(t,n)&&(delete t[n],i&&i.dep.notify())}}Dt.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)Rt(t,e[n])},Dt.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)Ot(t[e])};var $t=P.optionMergeStrategies;function jt(t,e){if(!e)return t;for(var n,i,r,s=lt?Reflect.ownKeys(e):Object.keys(e),a=0;a<s.length;a++)"__ob__"!==(n=s[a])&&(i=t[n],r=e[n],b(t,n)?i!==r&&l(i)&&l(r)&&jt(i,r):Nt(t,n,r));return t}function Lt(t,e,n){return n?function(){var i="function"==typeof e?e.call(n,n):e,r="function"==typeof t?t.call(n,n):t;return i?jt(i,r):r}:e?t?function(){return jt("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function Vt(t,e){var n=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return n?function(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}(n):n}function Pt(t,e,n,i){var r=Object.create(t||null);return e?(Ft(i,e,n),A(r,e)):r}$t.el=$t.propsData=function(t,e,n,i){return n||ct('option "'+i+'" can only be used during instance creation with the `new` keyword.'),qt(t,e)},$t.data=function(t,e,n){return n?Lt(t,e,n):e&&"function"!=typeof e?(ct('The "data" option should be a function that returns a per-instance value in component definitions.',n),t):Lt(t,e)},V.forEach(function(t){$t[t]=Vt}),L.forEach(function(t){$t[t+"s"]=Pt}),$t.watch=function(t,e,n,i){if(t===et&&(t=void 0),e===et&&(e=void 0),!e)return Object.create(t||null);if(Ft(i,e,n),!t)return e;var r={};for(var s in A(r,t),e){var a=r[s],o=e[s];a&&!Array.isArray(a)&&(a=[a]),r[s]=a?a.concat(o):Array.isArray(o)?o:[o]}return r},$t.props=$t.methods=$t.inject=$t.computed=function(t,e,n,i){if(e&&Ft(i,e,n),!t)return e;var r=Object.create(null);return A(r,t),e&&A(r,e),r},$t.provide=Lt;var qt=function(t,e){return void 0===e?t:e};function zt(t){new RegExp("^[a-zA-Z][\\-\\.0-9_"+q.source+"]*$").test(t)||ct('Invalid component name: "'+t+'". Component names should conform to valid custom element name in html5 specification.'),(m(t)||P.isReservedTag(t))&&ct("Do not use built-in or reserved HTML elements as component id: "+t)}function Ft(t,e,n){l(e)||ct('Invalid value for option "'+t+'": expected an Object, but got '+o(e)+".",n)}function Bt(t,e,n){if(function(t){for(var e in t.components)zt(e)}(e),"function"==typeof e&&(e=e.options),function(t,e){var n=t.props;if(n){var i,r,s={};if(Array.isArray(n))for(i=n.length;i--;)"string"==typeof(r=n[i])?s[w(r)]={type:null}:ct("props must be strings when using array syntax.");else if(l(n))for(var a in n)r=n[a],s[w(a)]=l(r)?r:{type:r};else ct('Invalid value for option "props": expected an Array or an Object, but got '+o(n)+".",e);t.props=s}}(e,n),function(t,e){var n=t.inject;if(n){var i=t.inject={};if(Array.isArray(n))for(var r=0;r<n.length;r++)i[n[r]]={from:n[r]};else if(l(n))for(var s in n){var a=n[s];i[s]=l(a)?A({from:s},a):{from:a}}else ct('Invalid value for option "inject": expected an Array or an Object, but got '+o(n)+".",e)}}(e,n),function(t){var e=t.directives;if(e)for(var n in e){var i=e[n];"function"==typeof i&&(e[n]={bind:i,update:i})}}(e),!e._base&&(e.extends&&(t=Bt(t,e.extends,n)),e.mixins))for(var i=0,r=e.mixins.length;i<r;i++)t=Bt(t,e.mixins[i],n);var s,a={};for(s in t)c(s);for(s in e)b(t,s)||c(s);function c(i){var r=$t[i]||qt;a[i]=r(t[i],e[i],n,i)}return a}function Ht(t,e,n,i){if("string"==typeof n){var r=t[e];if(b(r,n))return r[n];var s=w(n);if(b(r,s))return r[s];var a=k(s);if(b(r,a))return r[a];var o=r[n]||r[s]||r[a];return i&&!o&&ct("Failed to resolve "+e.slice(0,-1)+": "+n,t),o}}function Ut(t,e,n,i){var r=e[t],a=!b(n,t),l=n[t],c=Yt(Boolean,r.type);if(c>-1)if(a&&!b(r,"default"))l=!1;else if(""===l||l===C(t)){var u=Yt(String,r.type);(u<0||c<u)&&(l=!0)}if(void 0===l){l=function(t,e,n){if(!b(e,"default"))return;var i=e.default;s(i)&&ct('Invalid default value for prop "'+n+'": Props with type Object/Array must use a factory function to return the default value.',t);if(t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n])return t._props[n];return"function"==typeof i&&"Function"!==Gt(e.type)?i.call(t):i}(i,r,t);var d=At;Tt(!0),Ot(l),Tt(d)}return function(t,e,n,i,r){if(t.required&&r)return void ct('Missing required prop: "'+e+'"',i);if(null==n&&!t.required)return;var s=t.type,a=!s||!0===s,l=[];if(s){Array.isArray(s)||(s=[s]);for(var c=0;c<s.length&&!a;c++){var u=Wt(n,s[c]);l.push(u.expectedType||""),a=u.valid}}if(!a)return void ct(function(t,e,n){var i='Invalid prop: type check failed for prop "'+t+'". Expected '+n.map(k).join(", "),r=n[0],s=o(e),a=Jt(e,r),l=Jt(e,s);1===n.length&&Zt(r)&&!function(){var t=[],e=arguments.length;for(;e--;)t[e]=arguments[e];return t.some(function(t){return"boolean"===t.toLowerCase()})}(r,s)&&(i+=" with value "+a);i+=", got "+s+" ",Zt(s)&&(i+="with value "+l+".");return i}(e,n,l),i);var d=t.validator;d&&(d(n)||ct('Invalid prop: custom validator check failed for prop "'+e+'".',i))}(r,t,l,i,a),l}var Kt=/^(String|Number|Boolean|Function|Symbol)$/;function Wt(t,e){var n,i=Gt(e);if(Kt.test(i)){var r=typeof t;(n=r===i.toLowerCase())||"object"!==r||(n=t instanceof e)}else n="Object"===i?l(t):"Array"===i?Array.isArray(t):t instanceof e;return{valid:n,expectedType:i}}function Gt(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Xt(t,e){return Gt(t)===Gt(e)}function Yt(t,e){if(!Array.isArray(e))return Xt(e,t)?0:-1;for(var n=0,i=e.length;n<i;n++)if(Xt(e[n],t))return n;return-1}function Jt(t,e){return"String"===e?'"'+t+'"':"Number"===e?""+Number(t):""+t}function Zt(t){return["string","number","boolean"].some(function(e){return t.toLowerCase()===e})}function Qt(t,e,n){yt();try{if(e)for(var i=e;i=i.$parent;){var r=i.$options.errorCaptured;if(r)for(var s=0;s<r.length;s++)try{if(!1===r[s].call(i,t,e,n))return}catch(t){ee(t,i,"errorCaptured hook")}}ee(t,e,n)}finally{bt()}}function te(t,e,n,i,r){var s;try{(s=n?t.apply(e,n):t.call(e))&&!s._isVue&&d(s)&&!s._handled&&(s.catch(function(t){return Qt(t,i,r+" (Promise/async)")}),s._handled=!0)}catch(t){Qt(t,i,r)}return s}function ee(t,e,n){if(P.errorHandler)try{return P.errorHandler.call(null,t,e,n)}catch(e){e!==t&&ne(e,null,"config.errorHandler")}ne(t,e,n)}function ne(t,e,n){if(ct("Error in "+n+': "'+t.toString()+'"',e),!K&&!W||"undefined"==typeof console)throw t;console.error(t)}var ie,re,se,ae=!1,oe=[],le=!1;function ce(){le=!1;var t=oe.slice(0);oe.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!=typeof Promise&&at(Promise)){var ue=Promise.resolve();ie=function(){ue.then(ce),Q&&setTimeout(D)},ae=!0}else if(Y||"undefined"==typeof MutationObserver||!at(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())ie="undefined"!=typeof setImmediate&&at(setImmediate)?function(){setImmediate(ce)}:function(){setTimeout(ce,0)};else{var de=1,pe=new MutationObserver(ce),he=document.createTextNode(String(de));pe.observe(he,{characterData:!0}),ie=function(){de=(de+1)%2,he.data=String(de)},ae=!0}function fe(t,e){var n;if(oe.push(function(){if(t)try{t.call(e)}catch(t){Qt(t,e,"nextTick")}else n&&n(e)}),le||(le=!0,ie()),!t&&"undefined"!=typeof Promise)return new Promise(function(t){n=t})}var me,ve=K&&window.performance;ve&&ve.mark&&ve.measure&&ve.clearMarks&&ve.clearMeasures&&(re=function(t){return ve.mark(t)},se=function(t,e,n){ve.measure(t,e,n),ve.clearMarks(e),ve.clearMarks(n)});var ge=f("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,require"),ye=function(t,e){ct('Property or method "'+e+'" is not defined on the instance but referenced during render. Make sure that this property is reactive, either in the data option, or for class-based components, by initializing the property. See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.',t)},be=function(t,e){ct('Property "'+e+'" must be accessed with "$data.'+e+'" because properties starting with "$" or "_" are not proxied in the Vue instance to prevent conflicts with Vue internalsSee: https://vuejs.org/v2/api/#data',t)},_e="undefined"!=typeof Proxy&&at(Proxy);if(_e){var xe=f("stop,prevent,self,ctrl,shift,alt,meta,exact");P.keyCodes=new Proxy(P.keyCodes,{set:function(t,e,n){return xe(e)?(ct("Avoid overwriting built-in modifier in config.keyCodes: ."+e),!1):(t[e]=n,!0)}})}var we={has:function(t,e){var n=e in t,i=ge(e)||"string"==typeof e&&"_"===e.charAt(0)&&!(e in t.$data);return n||i||(e in t.$data?be(t,e):ye(t,e)),n||!i}},ke={get:function(t,e){return"string"!=typeof e||e in t||(e in t.$data?be(t,e):ye(t,e)),t[e]}};me=function(t){if(_e){var e=t.$options,n=e.render&&e.render._withStripped?ke:we;t._renderProxy=new Proxy(t,n)}else t._renderProxy=t};var Se=new ot;function Ce(t){!function t(e,n){var i,r;var a=Array.isArray(e);if(!a&&!s(e)||Object.isFrozen(e)||e instanceof _t)return;if(e.__ob__){var o=e.__ob__.dep.id;if(n.has(o))return;n.add(o)}if(a)for(i=e.length;i--;)t(e[i],n);else for(r=Object.keys(e),i=r.length;i--;)t(e[r[i]],n)}(t,Se),Se.clear()}var Ee=_(function(t){var e="&"===t.charAt(0),n="~"===(t=e?t.slice(1):t).charAt(0),i="!"===(t=n?t.slice(1):t).charAt(0);return{name:t=i?t.slice(1):t,once:n,capture:i,passive:e}});function Me(t,e){function n(){var t=arguments,i=n.fns;if(!Array.isArray(i))return te(i,null,arguments,e,"v-on handler");for(var r=i.slice(),s=0;s<r.length;s++)te(r[s],null,t,e,"v-on handler")}return n.fns=t,n}function Ae(t,n,r,s,a,o){var l,c,u,d;for(l in t)c=t[l],u=n[l],d=Ee(l),e(c)?ct('Invalid handler for event "'+d.name+'": got '+String(c),o):e(u)?(e(c.fns)&&(c=t[l]=Me(c,o)),i(d.once)&&(c=t[l]=a(d.name,c,d.capture)),r(d.name,c,d.capture,d.passive,d.params)):c!==u&&(u.fns=c,t[l]=u);for(l in n)e(t[l])&&s((d=Ee(l)).name,n[l],d.capture)}function Te(t,r,s){var a;t instanceof _t&&(t=t.data.hook||(t.data.hook={}));var o=t[r];function l(){s.apply(this,arguments),g(a.fns,l)}e(o)?a=Me([l]):n(o.fns)&&i(o.merged)?(a=o).fns.push(l):a=Me([o,l]),a.merged=!0,t[r]=a}function De(t,e,i,r,s){if(n(e)){if(b(e,i))return t[i]=e[i],s||delete e[i],!0;if(b(e,r))return t[i]=e[r],s||delete e[r],!0}return!1}function Oe(t){return r(t)?[kt(t)]:Array.isArray(t)?function t(s,a){var o=[];var l,c,u,d;for(l=0;l<s.length;l++)e(c=s[l])||"boolean"==typeof c||(u=o.length-1,d=o[u],Array.isArray(c)?c.length>0&&(Re((c=t(c,(a||"")+"_"+l))[0])&&Re(d)&&(o[u]=kt(d.text+c[0].text),c.shift()),o.push.apply(o,c)):r(c)?Re(d)?o[u]=kt(d.text+c):""!==c&&o.push(kt(c)):Re(c)&&Re(d)?o[u]=kt(d.text+c.text):(i(s._isVList)&&n(c.tag)&&e(c.key)&&n(a)&&(c.key="__vlist"+a+"_"+l+"__"),o.push(c)));return o}(t):void 0}function Re(t){return n(t)&&n(t.text)&&!1===t.isComment}function Ne(t,e){if(t){for(var n=Object.create(null),i=lt?Reflect.ownKeys(t):Object.keys(t),r=0;r<i.length;r++){var s=i[r];if("__ob__"!==s){for(var a=t[s].from,o=e;o;){if(o._provided&&b(o._provided,a)){n[s]=o._provided[a];break}o=o.$parent}if(!o)if("default"in t[s]){var l=t[s].default;n[s]="function"==typeof l?l.call(e):l}else ct('Injection "'+s+'" not found',e)}}return n}}function Ie(t,e){if(!t||!t.length)return{};for(var n={},i=0,r=t.length;i<r;i++){var s=t[i],a=s.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,s.context!==e&&s.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(s);else{var o=a.slot,l=n[o]||(n[o]=[]);"template"===s.tag?l.push.apply(l,s.children||[]):l.push(s)}}for(var c in n)n[c].every($e)&&delete n[c];return n}function $e(t){return t.isComment&&!t.asyncFactory||" "===t.text}function je(e,n,i){var r,s=Object.keys(n).length>0,a=e?!!e.$stable:!s,o=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&i&&i!==t&&o===i.$key&&!s&&!i.$hasNormal)return i;for(var l in r={},e)e[l]&&"$"!==l[0]&&(r[l]=Le(n,l,e[l]))}else r={};for(var c in n)c in r||(r[c]=Ve(n,c));return e&&Object.isExtensible(e)&&(e._normalized=r),F(r,"$stable",a),F(r,"$key",o),F(r,"$hasNormal",s),r}function Le(t,e,n){var i=function(){var t=arguments.length?n.apply(null,arguments):n({});return(t=t&&"object"==typeof t&&!Array.isArray(t)?[t]:Oe(t))&&(0===t.length||1===t.length&&t[0].isComment)?void 0:t};return n.proxy&&Object.defineProperty(t,e,{get:i,enumerable:!0,configurable:!0}),i}function Ve(t,e){return function(){return t[e]}}function Pe(t,e){var i,r,a,o,l;if(Array.isArray(t)||"string"==typeof t)for(i=new Array(t.length),r=0,a=t.length;r<a;r++)i[r]=e(t[r],r);else if("number"==typeof t)for(i=new Array(t),r=0;r<t;r++)i[r]=e(r+1,r);else if(s(t))if(lt&&t[Symbol.iterator]){i=[];for(var c=t[Symbol.iterator](),u=c.next();!u.done;)i.push(e(u.value,i.length)),u=c.next()}else for(o=Object.keys(t),i=new Array(o.length),r=0,a=o.length;r<a;r++)l=o[r],i[r]=e(t[l],l,r);return n(i)||(i=[]),i._isVList=!0,i}function qe(t,e,n,i){var r,a=this.$scopedSlots[t];a?(n=n||{},i&&(s(i)||ct("slot v-bind without argument expects an Object",this),n=A(A({},i),n)),r=a(n)||e):r=this.$slots[t]||e;var o=n&&n.slot;return o?this.$createElement("template",{slot:o},r):r}function ze(t){return Ht(this.$options,"filters",t,!0)||R}function Fe(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function Be(t,e,n,i,r){var s=P.keyCodes[e]||n;return r&&i&&!P.keyCodes[e]?Fe(r,i):s?Fe(s,t):i?C(i)!==e:void 0}function He(t,e,n,i,r){if(n)if(s(n)){var a;Array.isArray(n)&&(n=T(n));var o=function(s){if("class"===s||"style"===s||v(s))a=t;else{var o=t.attrs&&t.attrs.type;a=i||P.mustUseProp(e,o,s)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var l=w(s),c=C(s);l in a||c in a||(a[s]=n[s],r&&((t.on||(t.on={}))["update:"+s]=function(t){n[s]=t}))};for(var l in n)o(l)}else ct("v-bind without argument expects an Object or Array value",this);return t}function Ue(t,e){var n=this._staticTrees||(this._staticTrees=[]),i=n[t];return i&&!e?i:(We(i=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),"__static__"+t,!1),i)}function Ke(t,e,n){return We(t,"__once__"+e+(n?"_"+n:""),!0),t}function We(t,e,n){if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]&&"string"!=typeof t[i]&&Ge(t[i],e+"_"+i,n);else Ge(t,e,n)}function Ge(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function Xe(t,e){if(e)if(l(e)){var n=t.on=t.on?A({},t.on):{};for(var i in e){var r=n[i],s=e[i];n[i]=r?[].concat(r,s):s}}else ct("v-on without argument expects an Object value",this);return t}function Ye(t,e,n,i){e=e||{$stable:!n};for(var r=0;r<t.length;r++){var s=t[r];Array.isArray(s)?Ye(s,e,n):s&&(s.proxy&&(s.fn.proxy=!0),e[s.key]=s.fn)}return i&&(e.$key=i),e}function Je(t,e){for(var n=0;n<e.length;n+=2){var i=e[n];"string"==typeof i&&i?t[e[n]]=e[n+1]:""!==i&&null!==i&&ct("Invalid value for dynamic directive argument (expected string or null): "+i,this)}return t}function Ze(t,e){return"string"==typeof t?e+t:t}function Qe(t){t._o=Ke,t._n=h,t._s=p,t._l=Pe,t._t=qe,t._q=N,t._i=I,t._m=Ue,t._f=ze,t._k=Be,t._b=He,t._v=kt,t._e=wt,t._u=Ye,t._g=Xe,t._d=Je,t._p=Ze}function tn(e,n,r,s,a){var o,l=this,c=a.options;b(s,"_uid")?(o=Object.create(s))._original=s:(o=s,s=s._original);var u=i(c._compiled),d=!u;this.data=e,this.props=n,this.children=r,this.parent=s,this.listeners=e.on||t,this.injections=Ne(c.inject,s),this.slots=function(){return l.$slots||je(e.scopedSlots,l.$slots=Ie(r,s)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return je(e.scopedSlots,this.slots())}}),u&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=je(e.scopedSlots,this.$slots)),c._scopeId?this._c=function(t,e,n,i){var r=un(o,t,e,n,i,d);return r&&!Array.isArray(r)&&(r.fnScopeId=c._scopeId,r.fnContext=s),r}:this._c=function(t,e,n,i){return un(o,t,e,n,i,d)}}function en(t,e,n,i,r){var s=St(t);return s.fnContext=n,s.fnOptions=i,(s.devtoolsMeta=s.devtoolsMeta||{}).renderContext=r,e.slot&&((s.data||(s.data={})).slot=e.slot),s}function nn(t,e){for(var n in e)t[w(n)]=e[n]}Qe(tn.prototype);var rn={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var i=t;rn.prepatch(i,i)}else{(t.componentInstance=function(t,e){var i={_isComponent:!0,_parentVnode:t,parent:e},r=t.data.inlineTemplate;n(r)&&(i.render=r.render,i.staticRenderFns=r.staticRenderFns);return new t.componentOptions.Ctor(i)}(t,_n)).$mount(e?t.elm:void 0,e)}},prepatch:function(e,n){var i=n.componentOptions;!function(e,n,i,r,s){xn=!0;var a=r.data.scopedSlots,o=e.$scopedSlots,l=!!(a&&!a.$stable||o!==t&&!o.$stable||a&&e.$scopedSlots.$key!==a.$key),c=!!(s||e.$options._renderChildren||l);e.$options._parentVnode=r,e.$vnode=r,e._vnode&&(e._vnode.parent=r);if(e.$options._renderChildren=s,e.$attrs=r.data.attrs||t,e.$listeners=i||t,n&&e.$options.props){Tt(!1);for(var u=e._props,d=e.$options._propKeys||[],p=0;p<d.length;p++){var h=d[p],f=e.$options.props;u[h]=Ut(h,f,n,e)}Tt(!0),e.$options.propsData=n}i=i||t;var m=e.$options._parentListeners;e.$options._parentListeners=i,bn(e,i,m),c&&(e.$slots=Ie(s,r.context),e.$forceUpdate());xn=!1}(n.componentInstance=e.componentInstance,i.propsData,i.listeners,n,i.children)},insert:function(t){var e,n=t.context,i=t.componentInstance;i._isMounted||(i._isMounted=!0,Cn(i,"mounted")),t.data.keepAlive&&(n._isMounted?((e=i)._inactive=!1,An.push(e)):Sn(i,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?function t(e,n){if(n&&(e._directInactive=!0,kn(e)))return;if(!e._inactive){e._inactive=!0;for(var i=0;i<e.$children.length;i++)t(e.$children[i]);Cn(e,"deactivated")}}(e,!0):e.$destroy())}},sn=Object.keys(rn);function an(r,a,o,l,c){if(!e(r)){var u=o.$options._base;if(s(r)&&(r=u.extend(r)),"function"==typeof r){var p;if(e(r.cid)&&void 0===(r=function(t,r){if(i(t.error)&&n(t.errorComp))return t.errorComp;if(n(t.resolved))return t.resolved;var a=pn;a&&n(t.owners)&&-1===t.owners.indexOf(a)&&t.owners.push(a);if(i(t.loading)&&n(t.loadingComp))return t.loadingComp;if(a&&!n(t.owners)){var o=t.owners=[a],l=!0,c=null,u=null;a.$on("hook:destroyed",function(){return g(o,a)});var p=function(t){for(var e=0,n=o.length;e<n;e++)o[e].$forceUpdate();t&&(o.length=0,null!==c&&(clearTimeout(c),c=null),null!==u&&(clearTimeout(u),u=null))},h=$(function(e){t.resolved=hn(e,r),l?o.length=0:p(!0)}),f=$(function(e){ct("Failed to resolve async component: "+String(t)+(e?"\nReason: "+e:"")),n(t.errorComp)&&(t.error=!0,p(!0))}),m=t(h,f);return s(m)&&(d(m)?e(t.resolved)&&m.then(h,f):d(m.component)&&(m.component.then(h,f),n(m.error)&&(t.errorComp=hn(m.error,r)),n(m.loading)&&(t.loadingComp=hn(m.loading,r),0===m.delay?t.loading=!0:c=setTimeout(function(){c=null,e(t.resolved)&&e(t.error)&&(t.loading=!0,p(!1))},m.delay||200)),n(m.timeout)&&(u=setTimeout(function(){u=null,e(t.resolved)&&f("timeout ("+m.timeout+"ms)")},m.timeout)))),l=!1,t.loading?t.loadingComp:t.resolved}}(p=r,u)))return function(t,e,n,i,r){var s=wt();return s.asyncFactory=t,s.asyncMeta={data:e,context:n,children:i,tag:r},s}(p,a,o,l,c);a=a||{},Xn(r),n(a.model)&&function(t,e){var i=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[i]=e.model.value;var s=e.on||(e.on={}),a=s[r],o=e.model.callback;n(a)?(Array.isArray(a)?-1===a.indexOf(o):a!==o)&&(s[r]=[o].concat(a)):s[r]=o}(r.options,a);var h=function(t,i,r){var s=i.options.props;if(!e(s)){var a={},o=t.attrs,l=t.props;if(n(o)||n(l))for(var c in s){var u=C(c),d=c.toLowerCase();c!==d&&o&&b(o,d)&&ut('Prop "'+d+'" is passed to component '+pt(r||i)+', but the declared prop name is "'+c+'". Note that HTML attributes are case-insensitive and camelCased props need to use their kebab-case equivalents when using in-DOM templates. You should probably use "'+u+'" instead of "'+c+'".'),De(a,l,c,u,!0)||De(a,o,c,u,!1)}return a}}(a,r,c);if(i(r.options.functional))return function(e,i,r,s,a){var o=e.options,l={},c=o.props;if(n(c))for(var u in c)l[u]=Ut(u,c,i||t);else n(r.attrs)&&nn(l,r.attrs),n(r.props)&&nn(l,r.props);var d=new tn(r,l,a,s,e),p=o.render.call(null,d._c,d);if(p instanceof _t)return en(p,r,d.parent,o,d);if(Array.isArray(p)){for(var h=Oe(p)||[],f=new Array(h.length),m=0;m<h.length;m++)f[m]=en(h[m],r,d.parent,o,d);return f}}(r,h,a,o,l);var f=a.on;if(a.on=a.nativeOn,i(r.options.abstract)){var m=a.slot;a={},m&&(a.slot=m)}!function(t){for(var e=t.hook||(t.hook={}),n=0;n<sn.length;n++){var i=sn[n],r=e[i],s=rn[i];r===s||r&&r._merged||(e[i]=r?on(s,r):s)}}(a);var v=r.options.name||c;return new _t("vue-component-"+r.cid+(v?"-"+v:""),a,void 0,void 0,void 0,o,{Ctor:r,propsData:h,listeners:f,tag:c,children:l},p)}ct("Invalid Component definition: "+String(r),o)}}function on(t,e){var n=function(n,i){t(n,i),e(n,i)};return n._merged=!0,n}var ln=1,cn=2;function un(t,a,o,l,c,u){return(Array.isArray(o)||r(o))&&(c=l,l=o,o=void 0),i(u)&&(c=cn),function(t,a,o,l,c){if(n(o)&&n(o.__ob__))return ct("Avoid using observed data object as vnode data: "+JSON.stringify(o)+"\nAlways create fresh vnode data objects in each render!",t),wt();n(o)&&n(o.is)&&(a=o.is);if(!a)return wt();n(o)&&n(o.key)&&!r(o.key)&&ct("Avoid using non-primitive value as key, use string/number value instead.",t);Array.isArray(l)&&"function"==typeof l[0]&&((o=o||{}).scopedSlots={default:l[0]},l.length=0);c===cn?l=Oe(l):c===ln&&(l=function(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}(l));var u,d;if("string"==typeof a){var p;d=t.$vnode&&t.$vnode.ns||P.getTagNamespace(a),u=P.isReservedTag(a)?new _t(P.parsePlatformTagName(a),o,l,void 0,void 0,t):o&&o.pre||!n(p=Ht(t.$options,"components",a))?new _t(a,o,l,void 0,void 0,t):an(p,o,t,l,a)}else u=an(a,o,t,l);return Array.isArray(u)?u:n(u)?(n(d)&&function t(r,s,a){r.ns=s;"foreignObject"===r.tag&&(s=void 0,a=!0);if(n(r.children))for(var o=0,l=r.children.length;o<l;o++){var c=r.children[o];n(c.tag)&&(e(c.ns)||i(a)&&"svg"!==c.tag)&&t(c,s,a)}}(u,d),n(o)&&function(t){s(t.style)&&Ce(t.style);s(t.class)&&Ce(t.class)}(o),u):wt()}(t,a,o,l,c)}var dn,pn=null;function hn(t,e){return(t.__esModule||lt&&"Module"===t[Symbol.toStringTag])&&(t=t.default),s(t)?e.extend(t):t}function fn(t){return t.isComment&&t.asyncFactory}function mn(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var i=t[e];if(n(i)&&(n(i.componentOptions)||fn(i)))return i}}function vn(t,e){dn.$on(t,e)}function gn(t,e){dn.$off(t,e)}function yn(t,e){var n=dn;return function i(){null!==e.apply(null,arguments)&&n.$off(t,i)}}function bn(t,e,n){dn=t,Ae(e,n||{},vn,gn,yn,t),dn=void 0}var _n=null,xn=!1;function wn(t){var e=_n;return _n=t,function(){_n=e}}function kn(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function Sn(t,e){if(e){if(t._directInactive=!1,kn(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Sn(t.$children[n]);Cn(t,"activated")}}function Cn(t,e){yt();var n=t.$options[e],i=e+" hook";if(n)for(var r=0,s=n.length;r<s;r++)te(n[r],t,null,t,i);t._hasHookEvent&&t.$emit("hook:"+e),bt()}var En=100,Mn=[],An=[],Tn={},Dn={},On=!1,Rn=!1,Nn=0;var In=0,$n=Date.now;if(K&&!Y){var jn=window.performance;jn&&"function"==typeof jn.now&&$n()>document.createEvent("Event").timeStamp&&($n=function(){return jn.now()})}function Ln(){var t,e;for(In=$n(),Rn=!0,Mn.sort(function(t,e){return t.id-e.id}),Nn=0;Nn<Mn.length;Nn++)if((t=Mn[Nn]).before&&t.before(),e=t.id,Tn[e]=null,t.run(),null!=Tn[e]&&(Dn[e]=(Dn[e]||0)+1,Dn[e]>En)){ct("You may have an infinite update loop "+(t.user?'in watcher with expression "'+t.expression+'"':"in a component render function."),t.vm);break}var n=An.slice(),i=Mn.slice();Nn=Mn.length=An.length=0,Tn={},Dn={},On=Rn=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Sn(t[e],!0)}(n),function(t){var e=t.length;for(;e--;){var n=t[e],i=n.vm;i._watcher===n&&i._isMounted&&!i._isDestroyed&&Cn(i,"updated")}}(i),st&&P.devtools&&st.emit("flush")}var Vn=0,Pn=function(t,e,n,i,r){this.vm=t,r&&(t._watcher=this),t._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++Vn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ot,this.newDepIds=new ot,this.expression=e.toString(),"function"==typeof e?this.getter=e:(this.getter=function(t){if(!B.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}(e),this.getter||(this.getter=D,ct('Failed watching path: "'+e+'" Watcher only accepts simple dot-delimited paths. For full control, use a function instead.',t))),this.value=this.lazy?void 0:this.get()};Pn.prototype.get=function(){var t;yt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;Qt(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&Ce(t),bt(),this.cleanupDeps()}return t},Pn.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},Pn.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Pn.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==Tn[e]){if(Tn[e]=!0,Rn){for(var n=Mn.length-1;n>Nn&&Mn[n].id>t.id;)n--;Mn.splice(n+1,0,t)}else Mn.push(t);if(!On){if(On=!0,!P.async)return void Ln();fe(Ln)}}}(this)},Pn.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||s(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){Qt(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},Pn.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},Pn.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},Pn.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||g(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var qn={enumerable:!0,configurable:!0,get:D,set:D};function zn(t,e,n){qn.get=function(){return this[e][n]},qn.set=function(t){this[e][n]=t},Object.defineProperty(t,n,qn)}function Fn(t){t._watchers=[];var e=t.$options;e.props&&function(t,e){var n=t.$options.propsData||{},i=t._props={},r=t.$options._propKeys=[],s=!t.$parent;s||Tt(!1);var a=function(a){r.push(a);var o=Ut(a,e,n,t),l=C(a);(v(l)||P.isReservedAttr(l))&&ct('"'+l+'" is a reserved attribute and cannot be used as component prop.',t),Rt(i,a,o,function(){s||xn||ct("Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's value. Prop being mutated: \""+a+'"',t)}),a in t||zn(t,"_props",a)};for(var o in e)a(o);Tt(!0)}(t,e.props),e.methods&&function(t,e){var n=t.$options.props;for(var i in e)"function"!=typeof e[i]&&ct('Method "'+i+'" has type "'+typeof e[i]+'" in the component definition. Did you reference the function correctly?',t),n&&b(n,i)&&ct('Method "'+i+'" has already been defined as a prop.',t),i in t&&z(i)&&ct('Method "'+i+'" conflicts with an existing Vue instance method. Avoid defining component methods that start with _ or $.'),t[i]="function"!=typeof e[i]?D:E(e[i],t)}(t,e.methods),e.data?function(t){var e=t.$options.data;l(e=t._data="function"==typeof e?function(t,e){yt();try{return t.call(e,e)}catch(t){return Qt(t,e,"data()"),{}}finally{bt()}}(e,t):e||{})||(e={},ct("data functions should return an object:\nhttps://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function",t));var n=Object.keys(e),i=t.$options.props,r=t.$options.methods,s=n.length;for(;s--;){var a=n[s];r&&b(r,a)&&ct('Method "'+a+'" has already been defined as a data property.',t),i&&b(i,a)?ct('The data property "'+a+'" is already declared as a prop. Use prop default value instead.',t):z(a)||zn(t,"_data",a)}Ot(e,!0)}(t):Ot(t._data={},!0),e.computed&&function(t,e){var n=t._computedWatchers=Object.create(null),i=rt();for(var r in e){var s=e[r],a="function"==typeof s?s:s.get;null==a&&ct('Getter is missing for computed property "'+r+'".',t),i||(n[r]=new Pn(t,a||D,D,Bn)),r in t?r in t.$data?ct('The computed property "'+r+'" is already defined in data.',t):t.$options.props&&r in t.$options.props&&ct('The computed property "'+r+'" is already defined as a prop.',t):Hn(t,r,s)}}(t,e.computed),e.watch&&e.watch!==et&&function(t,e){for(var n in e){var i=e[n];if(Array.isArray(i))for(var r=0;r<i.length;r++)Wn(t,n,i[r]);else Wn(t,n,i)}}(t,e.watch)}var Bn={lazy:!0};function Hn(t,e,n){var i=!rt();"function"==typeof n?(qn.get=i?Un(e):Kn(n),qn.set=D):(qn.get=n.get?i&&!1!==n.cache?Un(e):Kn(n.get):D,qn.set=n.set||D),qn.set===D&&(qn.set=function(){ct('Computed property "'+e+'" was assigned to but it has no setter.',this)}),Object.defineProperty(t,e,qn)}function Un(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),vt.target&&e.depend(),e.value}}function Kn(t){return function(){return t.call(this,this)}}function Wn(t,e,n,i){return l(n)&&(i=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,i)}var Gn=0;function Xn(t){var e=t.options;if(t.super){var n=Xn(t.super);if(n!==t.superOptions){t.superOptions=n;var i=function(t){var e,n=t.options,i=t.sealedOptions;for(var r in n)n[r]!==i[r]&&(e||(e={}),e[r]=n[r]);return e}(t);i&&A(t.extendOptions,i),(e=t.options=Bt(n,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function Yn(t){this instanceof Yn||ct("Vue is a constructor and should be called with the `new` keyword"),this._init(t)}function Jn(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,i=n.cid,r=t._Ctor||(t._Ctor={});if(r[i])return r[i];var s=t.name||n.options.name;s&&zt(s);var a=function(t){this._init(t)};return(a.prototype=Object.create(n.prototype)).constructor=a,a.cid=e++,a.options=Bt(n.options,t),a.super=n,a.options.props&&function(t){var e=t.options.props;for(var n in e)zn(t.prototype,"_props",n)}(a),a.options.computed&&function(t){var e=t.options.computed;for(var n in e)Hn(t.prototype,n,e[n])}(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,L.forEach(function(t){a[t]=n[t]}),s&&(a.options.components[s]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=A({},a.options),r[i]=a,a}}function Zn(t){return t&&(t.Ctor.options.name||t.tag)}function Qn(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!c(t)&&t.test(e)}function ti(t,e){var n=t.cache,i=t.keys,r=t._vnode;for(var s in n){var a=n[s];if(a){var o=Zn(a.componentOptions);o&&!e(o)&&ei(n,s,i,r)}}}function ei(t,e,n,i){var r=t[e];!r||i&&r.tag===i.tag||r.componentInstance.$destroy(),t[e]=null,g(n,e)}!function(e){e.prototype._init=function(e){var n,i,r=this;r._uid=Gn++,P.performance&&re&&(n="vue-perf-start:"+r._uid,i="vue-perf-end:"+r._uid,re(n)),r._isVue=!0,e&&e._isComponent?function(t,e){var n=t.$options=Object.create(t.constructor.options),i=e._parentVnode;n.parent=e.parent,n._parentVnode=i;var r=i.componentOptions;n.propsData=r.propsData,n._parentListeners=r.listeners,n._renderChildren=r.children,n._componentTag=r.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}(r,e):r.$options=Bt(Xn(r.constructor),e||{},r),me(r),r._self=r,function(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(r),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&bn(t,e)}(r),function(e){e._vnode=null,e._staticTrees=null;var n=e.$options,i=e.$vnode=n._parentVnode,r=i&&i.context;e.$slots=Ie(n._renderChildren,r),e.$scopedSlots=t,e._c=function(t,n,i,r){return un(e,t,n,i,r,!1)},e.$createElement=function(t,n,i,r){return un(e,t,n,i,r,!0)};var s=i&&i.data;Rt(e,"$attrs",s&&s.attrs||t,function(){!xn&&ct("$attrs is readonly.",e)},!0),Rt(e,"$listeners",n._parentListeners||t,function(){!xn&&ct("$listeners is readonly.",e)},!0)}(r),Cn(r,"beforeCreate"),function(t){var e=Ne(t.$options.inject,t);e&&(Tt(!1),Object.keys(e).forEach(function(n){Rt(t,n,e[n],function(){ct('Avoid mutating an injected value directly since the changes will be overwritten whenever the provided component re-renders. injection being mutated: "'+n+'"',t)})}),Tt(!0))}(r),Fn(r),function(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}(r),Cn(r,"created"),P.performance&&re&&(r._name=pt(r,!1),re(i),se("vue "+r._name+" init",n,i)),r.$options.el&&r.$mount(r.$options.el)}}(Yn),function(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};e.set=function(){ct("Avoid replacing instance root $data. Use nested data properties instead.",this)},n.set=function(){ct("$props is readonly.",this)},Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=Nt,t.prototype.$delete=It,t.prototype.$watch=function(t,e,n){if(l(e))return Wn(this,t,e,n);(n=n||{}).user=!0;var i=new Pn(this,t,e,n);if(n.immediate)try{e.call(this,i.value)}catch(t){Qt(t,this,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}(Yn),function(t){var e=/^hook:/;t.prototype.$on=function(t,n){var i=this;if(Array.isArray(t))for(var r=0,s=t.length;r<s;r++)i.$on(t[r],n);else(i._events[t]||(i._events[t]=[])).push(n),e.test(t)&&(i._hasHookEvent=!0);return i},t.prototype.$once=function(t,e){var n=this;function i(){n.$off(t,i),e.apply(n,arguments)}return i.fn=e,n.$on(t,i),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var i=0,r=t.length;i<r;i++)n.$off(t[i],e);return n}var s,a=n._events[t];if(!a)return n;if(!e)return n._events[t]=null,n;for(var o=a.length;o--;)if((s=a[o])===e||s.fn===e){a.splice(o,1);break}return n},t.prototype.$emit=function(t){var e=this,n=t.toLowerCase();n!==t&&e._events[n]&&ut('Event "'+n+'" is emitted in component '+pt(e)+' but the handler is registered for "'+t+'". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "'+C(t)+'" instead of "'+t+'".');var i=e._events[t];if(i){i=i.length>1?M(i):i;for(var r=M(arguments,1),s='event handler for "'+t+'"',a=0,o=i.length;a<o;a++)te(i[a],e,r,e,s)}return e}}(Yn),function(t){t.prototype._update=function(t,e){var n=this,i=n.$el,r=n._vnode,s=wn(n);n._vnode=t,n.$el=r?n.__patch__(r,t):n.__patch__(n.$el,t,e,!1),s(),i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Cn(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||g(e.$children,t),t._watcher&&t._watcher.teardown();for(var n=t._watchers.length;n--;)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Cn(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(Yn),function(t){Qe(t.prototype),t.prototype.$nextTick=function(t){return fe(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,i=n.render,r=n._parentVnode;r&&(e.$scopedSlots=je(r.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=r;try{pn=e,t=i.call(e._renderProxy,e.$createElement)}catch(n){if(Qt(n,e,"render"),e.$options.renderError)try{t=e.$options.renderError.call(e._renderProxy,e.$createElement,n)}catch(n){Qt(n,e,"renderError"),t=e._vnode}else t=e._vnode}finally{pn=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof _t||(Array.isArray(t)&&ct("Multiple root nodes returned from render function. Render function should return a single root node.",e),t=wt()),t.parent=r,t}}(Yn);var ni=[String,RegExp,Array],ii={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:ni,exclude:ni,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)ei(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",function(e){ti(t,function(t){return Qn(e,t)})}),this.$watch("exclude",function(e){ti(t,function(t){return!Qn(e,t)})})},render:function(){var t=this.$slots.default,e=mn(t),n=e&&e.componentOptions;if(n){var i=Zn(n),r=this.include,s=this.exclude;if(r&&(!i||!Qn(r,i))||s&&i&&Qn(s,i))return e;var a=this.cache,o=this.keys,l=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;a[l]?(e.componentInstance=a[l].componentInstance,g(o,l),o.push(l)):(a[l]=e,o.push(l),this.max&&o.length>parseInt(this.max)&&ei(a,o[0],o,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={get:function(){return P},set:function(){ct("Do not replace the Vue.config object, set individual fields instead.")}};Object.defineProperty(t,"config",e),t.util={warn:ct,extend:A,mergeOptions:Bt,defineReactive:Rt},t.set=Nt,t.delete=It,t.nextTick=fe,t.observable=function(t){return Ot(t),t},t.options=Object.create(null),L.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,A(t.options.components,ii),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=M(arguments,1);return n.unshift(this),"function"==typeof t.install?t.install.apply(t,n):"function"==typeof t&&t.apply(null,n),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=Bt(this.options,t),this}}(t),Jn(t),function(t){L.forEach(function(e){t[e]=function(t,n){return n?("component"===e&&zt(t),"component"===e&&l(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"==typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}})}(t)}(Yn),Object.defineProperty(Yn.prototype,"$isServer",{get:rt}),Object.defineProperty(Yn.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Yn,"FunctionalRenderContext",{value:tn}),Yn.version="2.6.10";var ri=f("style,class"),si=f("input,textarea,option,select,progress"),ai=function(t,e,n){return"value"===n&&si(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},oi=f("contenteditable,draggable,spellcheck"),li=f("events,caret,typing,plaintext-only"),ci=function(t,e){return fi(e)||"false"===e?"false":"contenteditable"===t&&li(e)?e:"true"},ui=f("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),di="http://www.w3.org/1999/xlink",pi=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},hi=function(t){return pi(t)?t.slice(6,t.length):""},fi=function(t){return null==t||!1===t};function mi(t){for(var e=t.data,i=t,r=t;n(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(e=vi(r.data,e));for(;n(i=i.parent);)i&&i.data&&(e=vi(e,i.data));return function(t,e){if(n(t)||n(e))return gi(t,yi(e));return""}(e.staticClass,e.class)}function vi(t,e){return{staticClass:gi(t.staticClass,e.staticClass),class:n(t.class)?[t.class,e.class]:e.class}}function gi(t,e){return t?e?t+" "+e:t:e||""}function yi(t){return Array.isArray(t)?function(t){for(var e,i="",r=0,s=t.length;r<s;r++)n(e=yi(t[r]))&&""!==e&&(i&&(i+=" "),i+=e);return i}(t):s(t)?function(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}(t):"string"==typeof t?t:""}var bi={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},_i=f("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),xi=f("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),wi=function(t){return _i(t)||xi(t)};function ki(t){return xi(t)?"svg":"math"===t?"math":void 0}var Si=Object.create(null);var Ci=f("text,number,password,search,email,tel,url");function Ei(t){if("string"==typeof t){var e=document.querySelector(t);return e||(ct("Cannot find element: "+t),document.createElement("div"))}return t}var Mi=Object.freeze({createElement:function(t,e){var n=document.createElement(t);return"select"!==t?n:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)},createElementNS:function(t,e){return document.createElementNS(bi[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),Ai={create:function(t,e){Ti(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Ti(t,!0),Ti(e))},destroy:function(t){Ti(t,!0)}};function Ti(t,e){var i=t.data.ref;if(n(i)){var r=t.context,s=t.componentInstance||t.elm,a=r.$refs;e?Array.isArray(a[i])?g(a[i],s):a[i]===s&&(a[i]=void 0):t.data.refInFor?Array.isArray(a[i])?a[i].indexOf(s)<0&&a[i].push(s):a[i]=[s]:a[i]=s}}var Di=new _t("",{},[]),Oi=["create","activate","update","remove","destroy"];function Ri(t,r){return t.key===r.key&&(t.tag===r.tag&&t.isComment===r.isComment&&n(t.data)===n(r.data)&&function(t,e){if("input"!==t.tag)return!0;var i,r=n(i=t.data)&&n(i=i.attrs)&&i.type,s=n(i=e.data)&&n(i=i.attrs)&&i.type;return r===s||Ci(r)&&Ci(s)}(t,r)||i(t.isAsyncPlaceholder)&&t.asyncFactory===r.asyncFactory&&e(r.asyncFactory.error))}function Ni(t,e,i){var r,s,a={};for(r=e;r<=i;++r)n(s=t[r].key)&&(a[s]=r);return a}var Ii={create:$i,update:$i,destroy:function(t){$i(t,Di)}};function $i(t,e){(t.data.directives||e.data.directives)&&function(t,e){var n,i,r,s=t===Di,a=e===Di,o=Li(t.data.directives,t.context),l=Li(e.data.directives,e.context),c=[],u=[];for(n in l)i=o[n],r=l[n],i?(r.oldValue=i.value,r.oldArg=i.arg,Pi(r,"update",e,t),r.def&&r.def.componentUpdated&&u.push(r)):(Pi(r,"bind",e,t),r.def&&r.def.inserted&&c.push(r));if(c.length){var d=function(){for(var n=0;n<c.length;n++)Pi(c[n],"inserted",e,t)};s?Te(e,"insert",d):d()}u.length&&Te(e,"postpatch",function(){for(var n=0;n<u.length;n++)Pi(u[n],"componentUpdated",e,t)});if(!s)for(n in o)l[n]||Pi(o[n],"unbind",t,t,a)}(t,e)}var ji=Object.create(null);function Li(t,e){var n,i,r=Object.create(null);if(!t)return r;for(n=0;n<t.length;n++)(i=t[n]).modifiers||(i.modifiers=ji),r[Vi(i)]=i,i.def=Ht(e.$options,"directives",i.name,!0);return r}function Vi(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Pi(t,e,n,i,r){var s=t.def&&t.def[e];if(s)try{s(n.elm,t,n,i,r)}catch(i){Qt(i,n.context,"directive "+t.name+" "+e+" hook")}}var qi=[Ai,Ii];function zi(t,i){var r=i.componentOptions;if(!(n(r)&&!1===r.Ctor.options.inheritAttrs||e(t.data.attrs)&&e(i.data.attrs))){var s,a,o=i.elm,l=t.data.attrs||{},c=i.data.attrs||{};for(s in n(c.__ob__)&&(c=i.data.attrs=A({},c)),c)a=c[s],l[s]!==a&&Fi(o,s,a);for(s in(Y||Z)&&c.value!==l.value&&Fi(o,"value",c.value),l)e(c[s])&&(pi(s)?o.removeAttributeNS(di,hi(s)):oi(s)||o.removeAttribute(s))}}function Fi(t,e,n){t.tagName.indexOf("-")>-1?Bi(t,e,n):ui(e)?fi(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):oi(e)?t.setAttribute(e,ci(e,n)):pi(e)?fi(n)?t.removeAttributeNS(di,hi(e)):t.setAttributeNS(di,e,n):Bi(t,e,n)}function Bi(t,e,n){if(fi(n))t.removeAttribute(e);else{if(Y&&!J&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var i=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",i)};t.addEventListener("input",i),t.__ieph=!0}t.setAttribute(e,n)}}var Hi={create:zi,update:zi};function Ui(t,i){var r=i.elm,s=i.data,a=t.data;if(!(e(s.staticClass)&&e(s.class)&&(e(a)||e(a.staticClass)&&e(a.class)))){var o=mi(i),l=r._transitionClasses;n(l)&&(o=gi(o,yi(l))),o!==r._prevClass&&(r.setAttribute("class",o),r._prevClass=o)}}var Ki,Wi,Gi,Xi,Yi,Ji,Zi,Qi={create:Ui,update:Ui},tr=/[\w).+\-_$\]]/;function er(t){var e,n,i,r,s,a=!1,o=!1,l=!1,c=!1,u=0,d=0,p=0,h=0;for(i=0;i<t.length;i++)if(n=e,e=t.charCodeAt(i),a)39===e&&92!==n&&(a=!1);else if(o)34===e&&92!==n&&(o=!1);else if(l)96===e&&92!==n&&(l=!1);else if(c)47===e&&92!==n&&(c=!1);else if(124!==e||124===t.charCodeAt(i+1)||124===t.charCodeAt(i-1)||u||d||p){switch(e){case 34:o=!0;break;case 39:a=!0;break;case 96:l=!0;break;case 40:p++;break;case 41:p--;break;case 91:d++;break;case 93:d--;break;case 123:u++;break;case 125:u--}if(47===e){for(var f=i-1,m=void 0;f>=0&&" "===(m=t.charAt(f));f--);m&&tr.test(m)||(c=!0)}}else void 0===r?(h=i+1,r=t.slice(0,i).trim()):v();function v(){(s||(s=[])).push(t.slice(h,i).trim()),h=i+1}if(void 0===r?r=t.slice(0,i).trim():0!==h&&v(),s)for(i=0;i<s.length;i++)r=nr(r,s[i]);return r}function nr(t,e){var n=e.indexOf("(");if(n<0)return'_f("'+e+'")('+t+")";var i=e.slice(0,n),r=e.slice(n+1);return'_f("'+i+'")('+t+(")"!==r?","+r:r)}function ir(t,e){console.error("[Vue compiler]: "+t)}function rr(t,e){return t?t.map(function(t){return t[e]}).filter(function(t){return t}):[]}function sr(t,e,n,i,r){(t.props||(t.props=[])).push(mr({name:e,value:n,dynamic:r},i)),t.plain=!1}function ar(t,e,n,i,r){(r?t.dynamicAttrs||(t.dynamicAttrs=[]):t.attrs||(t.attrs=[])).push(mr({name:e,value:n,dynamic:r},i)),t.plain=!1}function or(t,e,n,i){t.attrsMap[e]=n,t.attrsList.push(mr({name:e,value:n},i))}function lr(t,e,n,i,r,s,a,o){(t.directives||(t.directives=[])).push(mr({name:e,rawName:n,value:i,arg:r,isDynamicArg:s,modifiers:a},o)),t.plain=!1}function cr(t,e,n){return n?"_p("+e+',"'+t+'")':t+e}function ur(e,n,i,r,s,a,o,l){var c;r=r||t,a&&r.prevent&&r.passive&&a("passive and prevent can't be used together. Passive handler can't prevent default event.",o),r.right?l?n="("+n+")==='click'?'contextmenu':("+n+")":"click"===n&&(n="contextmenu",delete r.right):r.middle&&(l?n="("+n+")==='click'?'mouseup':("+n+")":"click"===n&&(n="mouseup")),r.capture&&(delete r.capture,n=cr("!",n,l)),r.once&&(delete r.once,n=cr("~",n,l)),r.passive&&(delete r.passive,n=cr("&",n,l)),r.native?(delete r.native,c=e.nativeEvents||(e.nativeEvents={})):c=e.events||(e.events={});var u=mr({value:i.trim(),dynamic:l},o);r!==t&&(u.modifiers=r);var d=c[n];Array.isArray(d)?s?d.unshift(u):d.push(u):c[n]=d?s?[u,d]:[d,u]:u,e.plain=!1}function dr(t,e){return t.rawAttrsMap[":"+e]||t.rawAttrsMap["v-bind:"+e]||t.rawAttrsMap[e]}function pr(t,e,n){var i=hr(t,":"+e)||hr(t,"v-bind:"+e);if(null!=i)return er(i);if(!1!==n){var r=hr(t,e);if(null!=r)return JSON.stringify(r)}}function hr(t,e,n){var i;if(null!=(i=t.attrsMap[e]))for(var r=t.attrsList,s=0,a=r.length;s<a;s++)if(r[s].name===e){r.splice(s,1);break}return n&&delete t.attrsMap[e],i}function fr(t,e){for(var n=t.attrsList,i=0,r=n.length;i<r;i++){var s=n[i];if(e.test(s.name))return n.splice(i,1),s}}function mr(t,e){return e&&(null!=e.start&&(t.start=e.start),null!=e.end&&(t.end=e.end)),t}function vr(t,e,n){var i=n||{},r=i.number,s="$$v";i.trim&&(s="(typeof $$v === 'string'? $$v.trim(): $$v)"),r&&(s="_n("+s+")");var a=gr(e,s);t.model={value:"("+e+")",expression:JSON.stringify(e),callback:"function ($$v) {"+a+"}"}}function gr(t,e){var n=function(t){if(t=t.trim(),Ki=t.length,t.indexOf("[")<0||t.lastIndexOf("]")<Ki-1)return(Xi=t.lastIndexOf("."))>-1?{exp:t.slice(0,Xi),key:'"'+t.slice(Xi+1)+'"'}:{exp:t,key:null};Wi=t,Xi=Yi=Ji=0;for(;!br();)_r(Gi=yr())?wr(Gi):91===Gi&&xr(Gi);return{exp:t.slice(0,Yi),key:t.slice(Yi+1,Ji)}}(t);return null===n.key?t+"="+e:"$set("+n.exp+", "+n.key+", "+e+")"}function yr(){return Wi.charCodeAt(++Xi)}function br(){return Xi>=Ki}function _r(t){return 34===t||39===t}function xr(t){var e=1;for(Yi=Xi;!br();)if(_r(t=yr()))wr(t);else if(91===t&&e++,93===t&&e--,0===e){Ji=Xi;break}}function wr(t){for(var e=t;!br()&&(t=yr())!==e;);}var kr,Sr="__r",Cr="__c";function Er(t,e,n){var i=kr;return function r(){null!==e.apply(null,arguments)&&Tr(t,r,n,i)}}var Mr=ae&&!(tt&&Number(tt[1])<=53);function Ar(t,e,n,i){if(Mr){var r=In,s=e;e=s._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=r||t.timeStamp<=0||t.target.ownerDocument!==document)return s.apply(this,arguments)}}kr.addEventListener(t,e,nt?{capture:n,passive:i}:n)}function Tr(t,e,n,i){(i||kr).removeEventListener(t,e._wrapper||e,n)}function Dr(t,i){if(!e(t.data.on)||!e(i.data.on)){var r=i.data.on||{},s=t.data.on||{};kr=i.elm,function(t){if(n(t[Sr])){var e=Y?"change":"input";t[e]=[].concat(t[Sr],t[e]||[]),delete t[Sr]}n(t[Cr])&&(t.change=[].concat(t[Cr],t.change||[]),delete t[Cr])}(r),Ae(r,s,Ar,Tr,Er,i.context),kr=void 0}}var Or,Rr={create:Dr,update:Dr};function Nr(t,i){if(!e(t.data.domProps)||!e(i.data.domProps)){var r,s,a=i.elm,o=t.data.domProps||{},l=i.data.domProps||{};for(r in n(l.__ob__)&&(l=i.data.domProps=A({},l)),o)r in l||(a[r]="");for(r in l){if(s=l[r],"textContent"===r||"innerHTML"===r){if(i.children&&(i.children.length=0),s===o[r])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===r&&"PROGRESS"!==a.tagName){a._value=s;var c=e(s)?"":String(s);Ir(a,c)&&(a.value=c)}else if("innerHTML"===r&&xi(a.tagName)&&e(a.innerHTML)){(Or=Or||document.createElement("div")).innerHTML="<svg>"+s+"</svg>";for(var u=Or.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;u.firstChild;)a.appendChild(u.firstChild)}else if(s!==o[r])try{a[r]=s}catch(t){}}}}function Ir(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}(t,e)||function(t,e){var i=t.value,r=t._vModifiers;if(n(r)){if(r.number)return h(i)!==h(e);if(r.trim)return i.trim()!==e.trim()}return i!==e}(t,e))}var $r={create:Nr,update:Nr},jr=_(function(t){var e={},n=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach(function(t){if(t){var i=t.split(n);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e});function Lr(t){var e=Vr(t.style);return t.staticStyle?A(t.staticStyle,e):e}function Vr(t){return Array.isArray(t)?T(t):"string"==typeof t?jr(t):t}var Pr,qr=/^--/,zr=/\s*!important$/,Fr=function(t,e,n){if(qr.test(e))t.style.setProperty(e,n);else if(zr.test(n))t.style.setProperty(C(e),n.replace(zr,""),"important");else{var i=Hr(e);if(Array.isArray(n))for(var r=0,s=n.length;r<s;r++)t.style[i]=n[r];else t.style[i]=n}},Br=["Webkit","Moz","ms"],Hr=_(function(t){if(Pr=Pr||document.createElement("div").style,"filter"!==(t=w(t))&&t in Pr)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<Br.length;n++){var i=Br[n]+e;if(i in Pr)return i}});function Ur(t,i){var r=i.data,s=t.data;if(!(e(r.staticStyle)&&e(r.style)&&e(s.staticStyle)&&e(s.style))){var a,o,l=i.elm,c=s.staticStyle,u=s.normalizedStyle||s.style||{},d=c||u,p=Vr(i.data.style)||{};i.data.normalizedStyle=n(p.__ob__)?A({},p):p;var h=function(t,e){var n,i={};if(e)for(var r=t;r.componentInstance;)(r=r.componentInstance._vnode)&&r.data&&(n=Lr(r.data))&&A(i,n);(n=Lr(t.data))&&A(i,n);for(var s=t;s=s.parent;)s.data&&(n=Lr(s.data))&&A(i,n);return i}(i,!0);for(o in d)e(h[o])&&Fr(l,o,"");for(o in h)(a=h[o])!==d[o]&&Fr(l,o,null==a?"":a)}}var Kr={create:Ur,update:Ur},Wr=/\s+/;function Gr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Wr).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function Xr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Wr).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";n.indexOf(i)>=0;)n=n.replace(i," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}function Yr(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&A(e,Jr(t.name||"v")),A(e,t),e}return"string"==typeof t?Jr(t):void 0}}var Jr=_(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),Zr=K&&!J,Qr="transition",ts="animation",es="transition",ns="transitionend",is="animation",rs="animationend";Zr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(es="WebkitTransition",ns="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(is="WebkitAnimation",rs="webkitAnimationEnd"));var ss=K?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function as(t){ss(function(){ss(t)})}function os(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),Gr(t,e))}function ls(t,e){t._transitionClasses&&g(t._transitionClasses,e),Xr(t,e)}function cs(t,e,n){var i=ds(t,e),r=i.type,s=i.timeout,a=i.propCount;if(!r)return n();var o=r===Qr?ns:rs,l=0,c=function(){t.removeEventListener(o,u),n()},u=function(e){e.target===t&&++l>=a&&c()};setTimeout(function(){l<a&&c()},s+1),t.addEventListener(o,u)}var us=/\b(transform|all)(,|$)/;function ds(t,e){var n,i=window.getComputedStyle(t),r=(i[es+"Delay"]||"").split(", "),s=(i[es+"Duration"]||"").split(", "),a=ps(r,s),o=(i[is+"Delay"]||"").split(", "),l=(i[is+"Duration"]||"").split(", "),c=ps(o,l),u=0,d=0;return e===Qr?a>0&&(n=Qr,u=a,d=s.length):e===ts?c>0&&(n=ts,u=c,d=l.length):d=(n=(u=Math.max(a,c))>0?a>c?Qr:ts:null)?n===Qr?s.length:l.length:0,{type:n,timeout:u,propCount:d,hasTransform:n===Qr&&us.test(i[es+"Property"])}}function ps(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,n){return hs(e)+hs(t[n])}))}function hs(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function fs(t,i){var r=t.elm;n(r._leaveCb)&&(r._leaveCb.cancelled=!0,r._leaveCb());var a=Yr(t.data.transition);if(!e(a)&&!n(r._enterCb)&&1===r.nodeType){for(var o=a.css,l=a.type,c=a.enterClass,u=a.enterToClass,d=a.enterActiveClass,p=a.appearClass,f=a.appearToClass,m=a.appearActiveClass,v=a.beforeEnter,g=a.enter,y=a.afterEnter,b=a.enterCancelled,_=a.beforeAppear,x=a.appear,w=a.afterAppear,k=a.appearCancelled,S=a.duration,C=_n,E=_n.$vnode;E&&E.parent;)C=E.context,E=E.parent;var M=!C._isMounted||!t.isRootInsert;if(!M||x||""===x){var A=M&&p?p:c,T=M&&m?m:d,D=M&&f?f:u,O=M&&_||v,R=M&&"function"==typeof x?x:g,N=M&&w||y,I=M&&k||b,j=h(s(S)?S.enter:S);null!=j&&vs(j,"enter",t);var L=!1!==o&&!J,V=ys(R),P=r._enterCb=$(function(){L&&(ls(r,D),ls(r,T)),P.cancelled?(L&&ls(r,A),I&&I(r)):N&&N(r),r._enterCb=null});t.data.show||Te(t,"insert",function(){var e=r.parentNode,n=e&&e._pending&&e._pending[t.key];n&&n.tag===t.tag&&n.elm._leaveCb&&n.elm._leaveCb(),R&&R(r,P)}),O&&O(r),L&&(os(r,A),os(r,T),as(function(){ls(r,A),P.cancelled||(os(r,D),V||(gs(j)?setTimeout(P,j):cs(r,l,P)))})),t.data.show&&(i&&i(),R&&R(r,P)),L||V||P()}}}function ms(t,i){var r=t.elm;n(r._enterCb)&&(r._enterCb.cancelled=!0,r._enterCb());var a=Yr(t.data.transition);if(e(a)||1!==r.nodeType)return i();if(!n(r._leaveCb)){var o=a.css,l=a.type,c=a.leaveClass,u=a.leaveToClass,d=a.leaveActiveClass,p=a.beforeLeave,f=a.leave,m=a.afterLeave,v=a.leaveCancelled,g=a.delayLeave,y=a.duration,b=!1!==o&&!J,_=ys(f),x=h(s(y)?y.leave:y);n(x)&&vs(x,"leave",t);var w=r._leaveCb=$(function(){r.parentNode&&r.parentNode._pending&&(r.parentNode._pending[t.key]=null),b&&(ls(r,u),ls(r,d)),w.cancelled?(b&&ls(r,c),v&&v(r)):(i(),m&&m(r)),r._leaveCb=null});g?g(k):k()}function k(){w.cancelled||(!t.data.show&&r.parentNode&&((r.parentNode._pending||(r.parentNode._pending={}))[t.key]=t),p&&p(r),b&&(os(r,c),os(r,d),as(function(){ls(r,c),w.cancelled||(os(r,u),_||(gs(x)?setTimeout(w,x):cs(r,l,w)))})),f&&f(r,w),b||_||w())}}function vs(t,e,n){"number"!=typeof t?ct("<transition> explicit "+e+" duration is not a valid number - got "+JSON.stringify(t)+".",n.context):isNaN(t)&&ct("<transition> explicit "+e+" duration is NaN - the duration expression might be incorrect.",n.context)}function gs(t){return"number"==typeof t&&!isNaN(t)}function ys(t){if(e(t))return!1;var i=t.fns;return n(i)?ys(Array.isArray(i)?i[0]:i):(t._length||t.length)>1}function bs(t,e){!0!==e.data.show&&fs(e)}var _s=function(t){var s,a,o={},l=t.modules,u=t.nodeOps;for(s=0;s<Oi.length;++s)for(o[Oi[s]]=[],a=0;a<l.length;++a)n(l[a][Oi[s]])&&o[Oi[s]].push(l[a][Oi[s]]);function d(t){var e=u.parentNode(t);n(e)&&u.removeChild(e,t)}function p(t,e){return!e&&!t.ns&&!(P.ignoredElements.length&&P.ignoredElements.some(function(e){return c(e)?e.test(t.tag):e===t.tag}))&&P.isUnknownElement(t.tag)}var h=0;function m(t,e,r,s,a,l,c){if(n(t.elm)&&n(l)&&(t=l[c]=St(t)),t.isRootInsert=!a,!function(t,e,r,s){var a=t.data;if(n(a)){var l=n(t.componentInstance)&&a.keepAlive;if(n(a=a.hook)&&n(a=a.init)&&a(t,!1),n(t.componentInstance))return v(t,e),g(r,t.elm,s),i(l)&&function(t,e,i,r){for(var s,a=t;a.componentInstance;)if(a=a.componentInstance._vnode,n(s=a.data)&&n(s=s.transition)){for(s=0;s<o.activate.length;++s)o.activate[s](Di,a);e.push(a);break}g(i,t.elm,r)}(t,e,r,s),!0}}(t,e,r,s)){var d=t.data,f=t.children,m=t.tag;n(m)?(d&&d.pre&&h++,p(t,h)&&ct("Unknown custom element: <"+m+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.',t.context),t.elm=t.ns?u.createElementNS(t.ns,m):u.createElement(m,t),x(t),y(t,f,e),n(d)&&_(t,e),g(r,t.elm,s),d&&d.pre&&h--):i(t.isComment)?(t.elm=u.createComment(t.text),g(r,t.elm,s)):(t.elm=u.createTextNode(t.text),g(r,t.elm,s))}}function v(t,e){n(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,b(t)?(_(t,e),x(t)):(Ti(t),e.push(t))}function g(t,e,i){n(t)&&(n(i)?u.parentNode(i)===t&&u.insertBefore(t,e,i):u.appendChild(t,e))}function y(t,e,n){if(Array.isArray(e)){E(e);for(var i=0;i<e.length;++i)m(e[i],n,t.elm,null,!0,e,i)}else r(t.text)&&u.appendChild(t.elm,u.createTextNode(String(t.text)))}function b(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return n(t.tag)}function _(t,e){for(var i=0;i<o.create.length;++i)o.create[i](Di,t);n(s=t.data.hook)&&(n(s.create)&&s.create(Di,t),n(s.insert)&&e.push(t))}function x(t){var e;if(n(e=t.fnScopeId))u.setStyleScope(t.elm,e);else for(var i=t;i;)n(e=i.context)&&n(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e),i=i.parent;n(e=_n)&&e!==t.context&&e!==t.fnContext&&n(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e)}function w(t,e,n,i,r,s){for(;i<=r;++i)m(n[i],s,t,e,!1,n,i)}function k(t){var e,i,r=t.data;if(n(r))for(n(e=r.hook)&&n(e=e.destroy)&&e(t),e=0;e<o.destroy.length;++e)o.destroy[e](t);if(n(e=t.children))for(i=0;i<t.children.length;++i)k(t.children[i])}function S(t,e,i,r){for(;i<=r;++i){var s=e[i];n(s)&&(n(s.tag)?(C(s),k(s)):d(s.elm))}}function C(t,e){if(n(e)||n(t.data)){var i,r=o.remove.length+1;for(n(e)?e.listeners+=r:e=function(t,e){function n(){0==--n.listeners&&d(t)}return n.listeners=e,n}(t.elm,r),n(i=t.componentInstance)&&n(i=i._vnode)&&n(i.data)&&C(i,e),i=0;i<o.remove.length;++i)o.remove[i](t,e);n(i=t.data.hook)&&n(i=i.remove)?i(t,e):e()}else d(t.elm)}function E(t){for(var e={},i=0;i<t.length;i++){var r=t[i],s=r.key;n(s)&&(e[s]?ct("Duplicate keys detected: '"+s+"'. This may cause an update error.",r.context):e[s]=!0)}}function M(t,e,i,r){for(var s=i;s<r;s++){var a=e[s];if(n(a)&&Ri(t,a))return s}}function A(t,r,s,a,l,c){if(t!==r){n(r.elm)&&n(a)&&(r=a[l]=St(r));var d=r.elm=t.elm;if(i(t.isAsyncPlaceholder))n(r.asyncFactory.resolved)?R(t.elm,r,s):r.isAsyncPlaceholder=!0;else if(i(r.isStatic)&&i(t.isStatic)&&r.key===t.key&&(i(r.isCloned)||i(r.isOnce)))r.componentInstance=t.componentInstance;else{var p,h=r.data;n(h)&&n(p=h.hook)&&n(p=p.prepatch)&&p(t,r);var f=t.children,v=r.children;if(n(h)&&b(r)){for(p=0;p<o.update.length;++p)o.update[p](t,r);n(p=h.hook)&&n(p=p.update)&&p(t,r)}e(r.text)?n(f)&&n(v)?f!==v&&function(t,i,r,s,a){var o,l,c,d=0,p=0,h=i.length-1,f=i[0],v=i[h],g=r.length-1,y=r[0],b=r[g],_=!a;for(E(r);d<=h&&p<=g;)e(f)?f=i[++d]:e(v)?v=i[--h]:Ri(f,y)?(A(f,y,s,r,p),f=i[++d],y=r[++p]):Ri(v,b)?(A(v,b,s,r,g),v=i[--h],b=r[--g]):Ri(f,b)?(A(f,b,s,r,g),_&&u.insertBefore(t,f.elm,u.nextSibling(v.elm)),f=i[++d],b=r[--g]):Ri(v,y)?(A(v,y,s,r,p),_&&u.insertBefore(t,v.elm,f.elm),v=i[--h],y=r[++p]):(e(o)&&(o=Ni(i,d,h)),e(l=n(y.key)?o[y.key]:M(y,i,d,h))?m(y,s,t,f.elm,!1,r,p):Ri(c=i[l],y)?(A(c,y,s,r,p),i[l]=void 0,_&&u.insertBefore(t,c.elm,f.elm)):m(y,s,t,f.elm,!1,r,p),y=r[++p]);d>h?w(t,e(r[g+1])?null:r[g+1].elm,r,p,g,s):p>g&&S(0,i,d,h)}(d,f,v,s,c):n(v)?(E(v),n(t.text)&&u.setTextContent(d,""),w(d,null,v,0,v.length-1,s)):n(f)?S(0,f,0,f.length-1):n(t.text)&&u.setTextContent(d,""):t.text!==r.text&&u.setTextContent(d,r.text),n(h)&&n(p=h.hook)&&n(p=p.postpatch)&&p(t,r)}}}function T(t,e,r){if(i(r)&&n(t.parent))t.parent.data.pendingInsert=e;else for(var s=0;s<e.length;++s)e[s].data.hook.insert(e[s])}var D=!1,O=f("attrs,class,staticClass,staticStyle,key");function R(t,e,r,s){var a,o=e.tag,l=e.data,c=e.children;if(s=s||l&&l.pre,e.elm=t,i(e.isComment)&&n(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(!function(t,e,i){return n(e.tag)?0===e.tag.indexOf("vue-component")||!p(e,i)&&e.tag.toLowerCase()===(t.tagName&&t.tagName.toLowerCase()):t.nodeType===(e.isComment?8:3)}(t,e,s))return!1;if(n(l)&&(n(a=l.hook)&&n(a=a.init)&&a(e,!0),n(a=e.componentInstance)))return v(e,r),!0;if(n(o)){if(n(c))if(t.hasChildNodes())if(n(a=l)&&n(a=a.domProps)&&n(a=a.innerHTML)){if(a!==t.innerHTML)return"undefined"==typeof console||D||(D=!0,console.warn("Parent: ",t),console.warn("server innerHTML: ",a),console.warn("client innerHTML: ",t.innerHTML)),!1}else{for(var u=!0,d=t.firstChild,h=0;h<c.length;h++){if(!d||!R(d,c[h],r,s)){u=!1;break}d=d.nextSibling}if(!u||d)return"undefined"==typeof console||D||(D=!0,console.warn("Parent: ",t),console.warn("Mismatching childNodes vs. VNodes: ",t.childNodes,c)),!1}else y(e,c,r);if(n(l)){var f=!1;for(var m in l)if(!O(m)){f=!0,_(e,r);break}!f&&l.class&&Ce(l.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,r,s,a){if(!e(r)){var l,c=!1,d=[];if(e(t))c=!0,m(r,d);else{var p=n(t.nodeType);if(!p&&Ri(t,r))A(t,r,d,null,null,a);else{if(p){if(1===t.nodeType&&t.hasAttribute(j)&&(t.removeAttribute(j),s=!0),i(s)){if(R(t,r,d))return T(r,d,!0),t;ct("The client-side rendered virtual DOM tree is not matching server-rendered content. This is likely caused by incorrect HTML markup, for example nesting block-level elements inside <p>, or missing <tbody>. Bailing hydration and performing full client-side render.")}l=t,t=new _t(u.tagName(l).toLowerCase(),{},[],void 0,l)}var h=t.elm,f=u.parentNode(h);if(m(r,d,h._leaveCb?null:f,u.nextSibling(h)),n(r.parent))for(var v=r.parent,g=b(r);v;){for(var y=0;y<o.destroy.length;++y)o.destroy[y](v);if(v.elm=r.elm,g){for(var _=0;_<o.create.length;++_)o.create[_](Di,v);var x=v.data.hook.insert;if(x.merged)for(var w=1;w<x.fns.length;w++)x.fns[w]()}else Ti(v);v=v.parent}n(f)?S(0,[t],0,0):n(t.tag)&&k(t)}}return T(r,d,c),r.elm}n(t)&&k(t)}}({nodeOps:Mi,modules:[Hi,Qi,Rr,$r,Kr,K?{create:bs,activate:bs,remove:function(t,e){!0!==t.data.show?ms(t,e):e()}}:{}].concat(qi)});J&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&As(t,"input")});var xs={inserted:function(t,e,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?Te(n,"postpatch",function(){xs.componentUpdated(t,e,n)}):ws(t,e,n.context),t._vOptions=[].map.call(t.options,Cs)):("textarea"===n.tag||Ci(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",Es),t.addEventListener("compositionend",Ms),t.addEventListener("change",Ms),J&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){ws(t,e,n.context);var i=t._vOptions,r=t._vOptions=[].map.call(t.options,Cs);if(r.some(function(t,e){return!N(t,i[e])}))(t.multiple?e.value.some(function(t){return Ss(t,r)}):e.value!==e.oldValue&&Ss(e.value,r))&&As(t,"change")}}};function ws(t,e,n){ks(t,e,n),(Y||Z)&&setTimeout(function(){ks(t,e,n)},0)}function ks(t,e,n){var i=e.value,r=t.multiple;if(!r||Array.isArray(i)){for(var s,a,o=0,l=t.options.length;o<l;o++)if(a=t.options[o],r)s=I(i,Cs(a))>-1,a.selected!==s&&(a.selected=s);else if(N(Cs(a),i))return void(t.selectedIndex!==o&&(t.selectedIndex=o));r||(t.selectedIndex=-1)}else ct('<select multiple v-model="'+e.expression+'"> expects an Array value for its binding, but got '+Object.prototype.toString.call(i).slice(8,-1),n)}function Ss(t,e){return e.every(function(e){return!N(e,t)})}function Cs(t){return"_value"in t?t._value:t.value}function Es(t){t.target.composing=!0}function Ms(t){t.target.composing&&(t.target.composing=!1,As(t.target,"input"))}function As(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function Ts(t){return!t.componentInstance||t.data&&t.data.transition?t:Ts(t.componentInstance._vnode)}var Ds={model:xs,show:{bind:function(t,e,n){var i=e.value,r=(n=Ts(n)).data&&n.data.transition,s=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;i&&r?(n.data.show=!0,fs(n,function(){t.style.display=s})):t.style.display=i?s:"none"},update:function(t,e,n){var i=e.value;!i!=!e.oldValue&&((n=Ts(n)).data&&n.data.transition?(n.data.show=!0,i?fs(n,function(){t.style.display=t.__vOriginalDisplay}):ms(n,function(){t.style.display="none"})):t.style.display=i?t.__vOriginalDisplay:"none")},unbind:function(t,e,n,i,r){r||(t.style.display=t.__vOriginalDisplay)}}},Os={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Rs(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?Rs(mn(e.children)):t}function Ns(t){var e={},n=t.$options;for(var i in n.propsData)e[i]=t[i];var r=n._parentListeners;for(var s in r)e[w(s)]=r[s];return e}function Is(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var $s=function(t){return t.tag||fn(t)},js=function(t){return"show"===t.name},Ls={name:"transition",props:Os,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter($s)).length){n.length>1&&ct("<transition> can only be used on a single element. Use <transition-group> for lists.",this.$parent);var i=this.mode;i&&"in-out"!==i&&"out-in"!==i&&ct("invalid <transition> mode: "+i,this.$parent);var s=n[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return s;var a=Rs(s);if(!a)return s;if(this._leaving)return Is(t,s);var o="__transition-"+this._uid+"-";a.key=null==a.key?a.isComment?o+"comment":o+a.tag:r(a.key)?0===String(a.key).indexOf(o)?a.key:o+a.key:a.key;var l=(a.data||(a.data={})).transition=Ns(this),c=this._vnode,u=Rs(c);if(a.data.directives&&a.data.directives.some(js)&&(a.data.show=!0),u&&u.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(a,u)&&!fn(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var d=u.data.transition=A({},l);if("out-in"===i)return this._leaving=!0,Te(d,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),Is(t,s);if("in-out"===i){if(fn(a))return c;var p,h=function(){p()};Te(l,"afterEnter",h),Te(l,"enterCancelled",h),Te(d,"delayLeave",function(t){p=t})}}return s}}},Vs=A({tag:String,moveClass:String},Os);function Ps(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function qs(t){t.data.newPos=t.elm.getBoundingClientRect()}function zs(t){var e=t.data.pos,n=t.data.newPos,i=e.left-n.left,r=e.top-n.top;if(i||r){t.data.moved=!0;var s=t.elm.style;s.transform=s.WebkitTransform="translate("+i+"px,"+r+"px)",s.transitionDuration="0s"}}delete Vs.mode;var Fs={Transition:Ls,TransitionGroup:{props:Vs,beforeMount:function(){var t=this,e=this._update;this._update=function(n,i){var r=wn(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,r(),e.call(t,n,i)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,r=this.$slots.default||[],s=this.children=[],a=Ns(this),o=0;o<r.length;o++){var l=r[o];if(l.tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))s.push(l),n[l.key]=l,(l.data||(l.data={})).transition=a;else{var c=l.componentOptions,u=c?c.Ctor.options.name||c.tag||"":l.tag;ct("<transition-group> children must be keyed: <"+u+">")}}if(i){for(var d=[],p=[],h=0;h<i.length;h++){var f=i[h];f.data.transition=a,f.data.pos=f.elm.getBoundingClientRect(),n[f.key]?d.push(f):p.push(f)}this.kept=t(e,null,d),this.removed=p}return t(e,null,s)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Ps),t.forEach(qs),t.forEach(zs),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var n=t.elm,i=n.style;os(n,e),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(ns,n._moveCb=function t(i){i&&i.target!==n||i&&!/transform$/.test(i.propertyName)||(n.removeEventListener(ns,t),n._moveCb=null,ls(n,e))})}}))},methods:{hasMove:function(t,e){if(!Zr)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){Xr(n,t)}),Gr(n,e),n.style.display="none",this.$el.appendChild(n);var i=ds(n);return this.$el.removeChild(n),this._hasMove=i.hasTransform}}}};Yn.config.mustUseProp=ai,Yn.config.isReservedTag=wi,Yn.config.isReservedAttr=ri,Yn.config.getTagNamespace=ki,Yn.config.isUnknownElement=function(t){if(!K)return!0;if(wi(t))return!1;if(t=t.toLowerCase(),null!=Si[t])return Si[t];var e=document.createElement(t);return t.indexOf("-")>-1?Si[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Si[t]=/HTMLUnknownElement/.test(e.toString())},A(Yn.options.directives,Ds),A(Yn.options.components,Fs),Yn.prototype.__patch__=K?_s:D,Yn.prototype.$mount=function(t,e){return function(t,e,n){var i;return t.$el=e,t.$options.render||(t.$options.render=wt,t.$options.template&&"#"!==t.$options.template.charAt(0)||t.$options.el||e?ct("You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.",t):ct("Failed to mount component: template or render function not defined.",t)),Cn(t,"beforeMount"),i=P.performance&&re?function(){var e=t._name,i=t._uid,r="vue-perf-start:"+i,s="vue-perf-end:"+i;re(r);var a=t._render();re(s),se("vue "+e+" render",r,s),re(r),t._update(a,n),re(s),se("vue "+e+" patch",r,s)}:function(){t._update(t._render(),n)},new Pn(t,i,D,{before:function(){t._isMounted&&!t._isDestroyed&&Cn(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,Cn(t,"mounted")),t}(this,t=t&&K?Ei(t):void 0,e)},K&&setTimeout(function(){P.devtools&&(st?st.emit("init",Yn):console[console.info?"info":"log"]("Download the Vue Devtools extension for a better development experience:\nhttps://github.com/vuejs/vue-devtools")),!1!==P.productionTip&&"undefined"!=typeof console&&console[console.info?"info":"log"]("You are running Vue in development mode.\nMake sure to turn on production mode when deploying for production.\nSee more tips at https://vuejs.org/guide/deployment.html")},0);var Bs=/\{\{((?:.|\r?\n)+?)\}\}/g,Hs=/[-.*+?^${}()|[\]\/\\]/g,Us=_(function(t){var e=t[0].replace(Hs,"\\$&"),n=t[1].replace(Hs,"\\$&");return new RegExp(e+"((?:.|\\n)+?)"+n,"g")});function Ks(t,e){var n=e?Us(e):Bs;if(n.test(t)){for(var i,r,s,a=[],o=[],l=n.lastIndex=0;i=n.exec(t);){(r=i.index)>l&&(o.push(s=t.slice(l,r)),a.push(JSON.stringify(s)));var c=er(i[1].trim());a.push("_s("+c+")"),o.push({"@binding":c}),l=r+i[0].length}return l<t.length&&(o.push(s=t.slice(l)),a.push(JSON.stringify(s))),{expression:a.join("+"),tokens:o}}}var Ws={staticKeys:["staticClass"],transformNode:function(t,e){var n=e.warn||ir,i=hr(t,"class");i&&Ks(i,e.delimiters)&&n('class="'+i+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div class="{{ val }}">, use <div :class="val">.',t.rawAttrsMap.class),i&&(t.staticClass=JSON.stringify(i));var r=pr(t,"class",!1);r&&(t.classBinding=r)},genData:function(t){var e="";return t.staticClass&&(e+="staticClass:"+t.staticClass+","),t.classBinding&&(e+="class:"+t.classBinding+","),e}};var Gs,Xs={staticKeys:["staticStyle"],transformNode:function(t,e){var n=e.warn||ir,i=hr(t,"style");i&&(Ks(i,e.delimiters)&&n('style="'+i+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div style="{{ val }}">, use <div :style="val">.',t.rawAttrsMap.style),t.staticStyle=JSON.stringify(jr(i)));var r=pr(t,"style",!1);r&&(t.styleBinding=r)},genData:function(t){var e="";return t.staticStyle&&(e+="staticStyle:"+t.staticStyle+","),t.styleBinding&&(e+="style:("+t.styleBinding+"),"),e}},Ys=function(t){return(Gs=Gs||document.createElement("div")).innerHTML=t,Gs.textContent},Js=f("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),Zs=f("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),Qs=f("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),ta=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,ea=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,na="[a-zA-Z_][\\-\\.0-9_a-zA-Z"+q.source+"]*",ia="((?:"+na+"\\:)?"+na+")",ra=new RegExp("^<"+ia),sa=/^\s*(\/?)>/,aa=new RegExp("^<\\/"+ia+"[^>]*>"),oa=/^<!DOCTYPE [^>]+>/i,la=/^<!\--/,ca=/^<!\[/,ua=f("script,style,textarea",!0),da={},pa={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},ha=/&(?:lt|gt|quot|amp|#39);/g,fa=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,ma=f("pre,textarea",!0),va=function(t,e){return t&&ma(t)&&"\n"===e[0]};function ga(t,e){var n=e?fa:ha;return t.replace(n,function(t){return pa[t]})}var ya,ba,_a,xa,wa,ka,Sa,Ca,Ea,Ma=/^@|^v-on:/,Aa=/^v-|^@|^:/,Ta=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Da=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Oa=/^\(|\)$/g,Ra=/^\[.*\]$/,Na=/:(.*)$/,Ia=/^:|^\.|^v-bind:/,$a=/\.[^.\]]+(?=[^\]]*$)/g,ja=/^v-slot(:|$)|^#/,La=/[\r\n]/,Va=/\s+/g,Pa=/[\s"'<>\/=]/,qa=_(Ys),za="_empty_";function Fa(t,e,n){return{type:1,tag:t,attrsList:e,attrsMap:function(t){for(var e={},n=0,i=t.length;n<i;n++)!e[t[n].name]||Y||Z||ya("duplicate attribute: "+t[n].name,t[n]),e[t[n].name]=t[n].value;return e}(e),rawAttrsMap:{},parent:n,children:[]}}function Ba(t,e){ya=e.warn||ir,ka=e.isPreTag||O,Sa=e.mustUseProp||O,Ca=e.getTagNamespace||O;var n=e.isReservedTag||O;Ea=function(t){return!!t.component||!n(t.tag)},_a=rr(e.modules,"transformNode"),xa=rr(e.modules,"preTransformNode"),wa=rr(e.modules,"postTransformNode"),ba=e.delimiters;var i,r,s=[],a=!1!==e.preserveWhitespace,o=e.whitespace,l=!1,c=!1,u=!1;function d(t,e){u||(u=!0,ya(t,e))}function p(t){if(h(t),l||t.processed||(t=Ha(t,e)),s.length||t===i||(i.if&&(t.elseif||t.else)?(f(t),Ka(i,{exp:t.elseif,block:t})):d("Component template should contain exactly one root element. If you are using v-if on multiple elements, use v-else-if to chain them instead.",{start:t.start})),r&&!t.forbidden)if(t.elseif||t.else)a=t,(o=function(t){var e=t.length;for(;e--;){if(1===t[e].type)return t[e];" "!==t[e].text&&ya('text "'+t[e].text.trim()+'" between v-if and v-else(-if) will be ignored.',t[e]),t.pop()}}(r.children))&&o.if?Ka(o,{exp:a.elseif,block:a}):ya("v-"+(a.elseif?'else-if="'+a.elseif+'"':"else")+" used on element <"+a.tag+"> without corresponding v-if.",a.rawAttrsMap[a.elseif?"v-else-if":"v-else"]);else{if(t.slotScope){var n=t.slotTarget||'"default"';(r.scopedSlots||(r.scopedSlots={}))[n]=t}r.children.push(t),t.parent=r}var a,o;t.children=t.children.filter(function(t){return!t.slotScope}),h(t),t.pre&&(l=!1),ka(t.tag)&&(c=!1);for(var u=0;u<wa.length;u++)wa[u](t,e)}function h(t){if(!c)for(var e;(e=t.children[t.children.length-1])&&3===e.type&&" "===e.text;)t.children.pop()}function f(t){"slot"!==t.tag&&"template"!==t.tag||d("Cannot use <"+t.tag+"> as component root element because it may contain multiple nodes.",{start:t.start}),t.attrsMap.hasOwnProperty("v-for")&&d("Cannot use v-for on stateful component root element because it renders multiple elements.",t.rawAttrsMap["v-for"])}return function(t,e){for(var n,i,r=[],s=e.expectHTML,a=e.isUnaryTag||O,o=e.canBeLeftOpenTag||O,l=0;t;){if(n=t,i&&ua(i)){var c=0,u=i.toLowerCase(),d=da[u]||(da[u]=new RegExp("([\\s\\S]*?)(</"+u+"[^>]*>)","i")),p=t.replace(d,function(t,n,i){return c=i.length,ua(u)||"noscript"===u||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),va(u,n)&&(n=n.slice(1)),e.chars&&e.chars(n),""});l+=t.length-p.length,t=p,E(u,l-c,l)}else{var h=t.indexOf("<");if(0===h){if(la.test(t)){var f=t.indexOf("--\x3e");if(f>=0){e.shouldKeepComment&&e.comment(t.substring(4,f),l,l+f+3),k(f+3);continue}}if(ca.test(t)){var m=t.indexOf("]>");if(m>=0){k(m+2);continue}}var v=t.match(oa);if(v){k(v[0].length);continue}var g=t.match(aa);if(g){var y=l;k(g[0].length),E(g[1],y,l);continue}var b=S();if(b){C(b),va(b.tagName,t)&&k(1);continue}}var _=void 0,x=void 0,w=void 0;if(h>=0){for(x=t.slice(h);!(aa.test(x)||ra.test(x)||la.test(x)||ca.test(x)||(w=x.indexOf("<",1))<0);)h+=w,x=t.slice(h);_=t.substring(0,h)}h<0&&(_=t),_&&k(_.length),e.chars&&_&&e.chars(_,l-_.length,l)}if(t===n){e.chars&&e.chars(t),!r.length&&e.warn&&e.warn('Mal-formatted tag at end of template: "'+t+'"',{start:l+t.length});break}}function k(e){l+=e,t=t.substring(e)}function S(){var e=t.match(ra);if(e){var n,i,r={tagName:e[1],attrs:[],start:l};for(k(e[0].length);!(n=t.match(sa))&&(i=t.match(ea)||t.match(ta));)i.start=l,k(i[0].length),i.end=l,r.attrs.push(i);if(n)return r.unarySlash=n[1],k(n[0].length),r.end=l,r}}function C(t){var n=t.tagName,l=t.unarySlash;s&&("p"===i&&Qs(n)&&E(i),o(n)&&i===n&&E(n));for(var c=a(n)||!!l,u=t.attrs.length,d=new Array(u),p=0;p<u;p++){var h=t.attrs[p],f=h[3]||h[4]||h[5]||"",m="a"===n&&"href"===h[1]?e.shouldDecodeNewlinesForHref:e.shouldDecodeNewlines;d[p]={name:h[1],value:ga(f,m)},e.outputSourceRange&&(d[p].start=h.start+h[0].match(/^\s*/).length,d[p].end=h.end)}c||(r.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:d,start:t.start,end:t.end}),i=n),e.start&&e.start(n,d,c,t.start,t.end)}function E(t,n,s){var a,o;if(null==n&&(n=l),null==s&&(s=l),t)for(o=t.toLowerCase(),a=r.length-1;a>=0&&r[a].lowerCasedTag!==o;a--);else a=0;if(a>=0){for(var c=r.length-1;c>=a;c--)(c>a||!t&&e.warn)&&e.warn("tag <"+r[c].tag+"> has no matching end tag.",{start:r[c].start,end:r[c].end}),e.end&&e.end(r[c].tag,n,s);r.length=a,i=a&&r[a-1].tag}else"br"===o?e.start&&e.start(t,[],!0,n,s):"p"===o&&(e.start&&e.start(t,[],!1,n,s),e.end&&e.end(t,n,s))}E()}(t,{warn:ya,expectHTML:e.expectHTML,isUnaryTag:e.isUnaryTag,canBeLeftOpenTag:e.canBeLeftOpenTag,shouldDecodeNewlines:e.shouldDecodeNewlines,shouldDecodeNewlinesForHref:e.shouldDecodeNewlinesForHref,shouldKeepComment:e.comments,outputSourceRange:e.outputSourceRange,start:function(t,n,a,o,u){var d=r&&r.ns||Ca(t);Y&&"svg"===d&&(n=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];Xa.test(i.name)||(i.name=i.name.replace(Ya,""),e.push(i))}return e}(n));var h,m=Fa(t,n,r);d&&(m.ns=d),e.outputSourceRange&&(m.start=o,m.end=u,m.rawAttrsMap=m.attrsList.reduce(function(t,e){return t[e.name]=e,t},{})),n.forEach(function(t){Pa.test(t.name)&&ya("Invalid dynamic argument expression: attribute names cannot contain spaces, quotes, <, >, / or =.",{start:t.start+t.name.indexOf("["),end:t.start+t.name.length})}),"style"!==(h=m).tag&&("script"!==h.tag||h.attrsMap.type&&"text/javascript"!==h.attrsMap.type)||rt()||(m.forbidden=!0,ya("Templates should only be responsible for mapping the state to the UI. Avoid placing tags with side-effects in your templates, such as <"+t+">, as they will not be parsed.",{start:m.start}));for(var v=0;v<xa.length;v++)m=xa[v](m,e)||m;l||(!function(t){null!=hr(t,"v-pre")&&(t.pre=!0)}(m),m.pre&&(l=!0)),ka(m.tag)&&(c=!0),l?function(t){var e=t.attrsList,n=e.length;if(n)for(var i=t.attrs=new Array(n),r=0;r<n;r++)i[r]={name:e[r].name,value:JSON.stringify(e[r].value)},null!=e[r].start&&(i[r].start=e[r].start,i[r].end=e[r].end);else t.pre||(t.plain=!0)}(m):m.processed||(Ua(m),function(t){var e=hr(t,"v-if");if(e)t.if=e,Ka(t,{exp:e,block:t});else{null!=hr(t,"v-else")&&(t.else=!0);var n=hr(t,"v-else-if");n&&(t.elseif=n)}}(m),function(t){null!=hr(t,"v-once")&&(t.once=!0)}(m)),i||f(i=m),a?p(m):(r=m,s.push(m))},end:function(t,n,i){var a=s[s.length-1];s.length-=1,r=s[s.length-1],e.outputSourceRange&&(a.end=i),p(a)},chars:function(n,i,s){if(r){if(!Y||"textarea"!==r.tag||r.attrsMap.placeholder!==n){var u,p,h,f=r.children;if(n=c||n.trim()?"script"===(u=r).tag||"style"===u.tag?n:qa(n):f.length?o?"condense"===o&&La.test(n)?"":" ":a?" ":"":"")c||"condense"!==o||(n=n.replace(Va," ")),!l&&" "!==n&&(p=Ks(n,ba))?h={type:2,expression:p.expression,tokens:p.tokens,text:n}:" "===n&&f.length&&" "===f[f.length-1].text||(h={type:3,text:n}),h&&(e.outputSourceRange&&(h.start=i,h.end=s),f.push(h))}}else n===t?d("Component template requires a root element, rather than just text.",{start:i}):(n=n.trim())&&d('text "'+n+'" outside root element will be ignored.',{start:i})},comment:function(t,n,i){if(r){var s={type:3,text:t,isComment:!0};e.outputSourceRange&&(s.start=n,s.end=i),r.children.push(s)}}}),i}function Ha(t,e){var n,i;!function(t){var e=pr(t,"key");if(e){if("template"===t.tag&&ya("<template> cannot be keyed. Place the key on real elements instead.",dr(t,"key")),t.for){var n=t.iterator2||t.iterator1,i=t.parent;n&&n===e&&i&&"transition-group"===i.tag&&ya("Do not use v-for index as key on <transition-group> children, this is the same as not using keys.",dr(t,"key"),!0)}t.key=e}}(t),t.plain=!t.key&&!t.scopedSlots&&!t.attrsList.length,(i=pr(n=t,"ref"))&&(n.ref=i,n.refInFor=function(t){for(var e=t;e;){if(void 0!==e.for)return!0;e=e.parent}return!1}(n)),function(t){var e;"template"===t.tag?((e=hr(t,"scope"))&&ya('the "scope" attribute for scoped slots have been deprecated and replaced by "slot-scope" since 2.5. The new "slot-scope" attribute can also be used on plain elements in addition to <template> to denote scoped slots.',t.rawAttrsMap.scope,!0),t.slotScope=e||hr(t,"slot-scope")):(e=hr(t,"slot-scope"))&&(t.attrsMap["v-for"]&&ya("Ambiguous combined usage of slot-scope and v-for on <"+t.tag+"> (v-for takes higher priority). Use a wrapper <template> for the scoped slot to make it clearer.",t.rawAttrsMap["slot-scope"],!0),t.slotScope=e);var n=pr(t,"slot");n&&(t.slotTarget='""'===n?'"default"':n,t.slotTargetDynamic=!(!t.attrsMap[":slot"]&&!t.attrsMap["v-bind:slot"]),"template"===t.tag||t.slotScope||ar(t,"slot",n,dr(t,"slot")));if("template"===t.tag){var i=fr(t,ja);if(i){(t.slotTarget||t.slotScope)&&ya("Unexpected mixed usage of different slot syntaxes.",t),t.parent&&!Ea(t.parent)&&ya("<template v-slot> can only appear at the root level inside the receiving the component",t);var r=Wa(i),s=r.name,a=r.dynamic;t.slotTarget=s,t.slotTargetDynamic=a,t.slotScope=i.value||za}}else{var o=fr(t,ja);if(o){Ea(t)||ya("v-slot can only be used on components or <template>.",o),(t.slotScope||t.slotTarget)&&ya("Unexpected mixed usage of different slot syntaxes.",t),t.scopedSlots&&ya("To avoid scope ambiguity, the default slot should also use <template> syntax when there are other named slots.",o);var l=t.scopedSlots||(t.scopedSlots={}),c=Wa(o),u=c.name,d=c.dynamic,p=l[u]=Fa("template",[],t);p.slotTarget=u,p.slotTargetDynamic=d,p.children=t.children.filter(function(t){if(!t.slotScope)return t.parent=p,!0}),p.slotScope=o.value||za,t.children=[],t.plain=!1}}}(t),function(t){"slot"===t.tag&&(t.slotName=pr(t,"name"),t.key&&ya("`key` does not work on <slot> because slots are abstract outlets and can possibly expand into multiple elements. Use the key on a wrapping element instead.",dr(t,"key")))}(t),function(t){var e;(e=pr(t,"is"))&&(t.component=e);null!=hr(t,"inline-template")&&(t.inlineTemplate=!0)}(t);for(var r=0;r<_a.length;r++)t=_a[r](t,e)||t;return function(t){var e,n,i,r,s,a,o,l,c=t.attrsList;for(e=0,n=c.length;e<n;e++)if(i=r=c[e].name,s=c[e].value,Aa.test(i))if(t.hasBindings=!0,(a=Ga(i.replace(Aa,"")))&&(i=i.replace($a,"")),Ia.test(i))i=i.replace(Ia,""),s=er(s),(l=Ra.test(i))&&(i=i.slice(1,-1)),0===s.trim().length&&ya('The value for a v-bind expression cannot be empty. Found in "v-bind:'+i+'"'),a&&(a.prop&&!l&&"innerHtml"===(i=w(i))&&(i="innerHTML"),a.camel&&!l&&(i=w(i)),a.sync&&(o=gr(s,"$event"),l?ur(t,'"update:"+('+i+")",o,null,!1,ya,c[e],!0):(ur(t,"update:"+w(i),o,null,!1,ya,c[e]),C(i)!==w(i)&&ur(t,"update:"+C(i),o,null,!1,ya,c[e])))),a&&a.prop||!t.component&&Sa(t.tag,t.attrsMap.type,i)?sr(t,i,s,c[e],l):ar(t,i,s,c[e],l);else if(Ma.test(i))i=i.replace(Ma,""),(l=Ra.test(i))&&(i=i.slice(1,-1)),ur(t,i,s,a,!1,ya,c[e],l);else{var u=(i=i.replace(Aa,"")).match(Na),d=u&&u[1];l=!1,d&&(i=i.slice(0,-(d.length+1)),Ra.test(d)&&(d=d.slice(1,-1),l=!0)),lr(t,i,r,s,d,l,a,c[e]),"model"===i&&Ja(t,s)}else{var p=Ks(s,ba);p&&ya(i+'="'+s+'": Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div id="{{ val }}">, use <div :id="val">.',c[e]),ar(t,i,JSON.stringify(s),c[e]),!t.component&&"muted"===i&&Sa(t.tag,t.attrsMap.type,i)&&sr(t,i,"true",c[e])}}(t),t}function Ua(t){var e;if(e=hr(t,"v-for")){var n=function(t){var e=t.match(Ta);if(!e)return;var n={};n.for=e[2].trim();var i=e[1].trim().replace(Oa,""),r=i.match(Da);r?(n.alias=i.replace(Da,"").trim(),n.iterator1=r[1].trim(),r[2]&&(n.iterator2=r[2].trim())):n.alias=i;return n}(e);n?A(t,n):ya("Invalid v-for expression: "+e,t.rawAttrsMap["v-for"])}}function Ka(t,e){t.ifConditions||(t.ifConditions=[]),t.ifConditions.push(e)}function Wa(t){var e=t.name.replace(ja,"");return e||("#"!==t.name[0]?e="default":ya("v-slot shorthand syntax requires a slot name.",t)),Ra.test(e)?{name:e.slice(1,-1),dynamic:!0}:{name:'"'+e+'"',dynamic:!1}}function Ga(t){var e=t.match($a);if(e){var n={};return e.forEach(function(t){n[t.slice(1)]=!0}),n}}var Xa=/^xmlns:NS\d+/,Ya=/^NS\d+:/;function Ja(t,e){for(var n=t;n;)n.for&&n.alias===e&&ya("<"+t.tag+' v-model="'+e+'">: You are binding v-model directly to a v-for iteration alias. This will not be able to modify the v-for source array because writing to the alias is like modifying a function local variable. Consider using an array of objects and use v-model on an object property instead.',t.rawAttrsMap["v-model"]),n=n.parent}function Za(t){return Fa(t.tag,t.attrsList.slice(),t.parent)}var Qa=[Ws,Xs,{preTransformNode:function(t,e){if("input"===t.tag){var n,i=t.attrsMap;if(!i["v-model"])return;if((i[":type"]||i["v-bind:type"])&&(n=pr(t,"type")),i.type||n||!i["v-bind"]||(n="("+i["v-bind"]+").type"),n){var r=hr(t,"v-if",!0),s=r?"&&("+r+")":"",a=null!=hr(t,"v-else",!0),o=hr(t,"v-else-if",!0),l=Za(t);Ua(l),or(l,"type","checkbox"),Ha(l,e),l.processed=!0,l.if="("+n+")==='checkbox'"+s,Ka(l,{exp:l.if,block:l});var c=Za(t);hr(c,"v-for",!0),or(c,"type","radio"),Ha(c,e),Ka(l,{exp:"("+n+")==='radio'"+s,block:c});var u=Za(t);return hr(u,"v-for",!0),or(u,":type",n),Ha(u,e),Ka(l,{exp:r,block:u}),a?l.else=!0:o&&(l.elseif=o),l}}}}];var to,eo,no={expectHTML:!0,modules:Qa,directives:{model:function(t,e,n){Zi=n;var i=e.value,r=e.modifiers,s=t.tag,a=t.attrsMap.type;if("input"===s&&"file"===a&&Zi("<"+t.tag+' v-model="'+i+'" type="file">:\nFile inputs are read only. Use a v-on:change listener instead.',t.rawAttrsMap["v-model"]),t.component)return vr(t,i,r),!1;if("select"===s)!function(t,e,n){var i='var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(n&&n.number?"_n(val)":"val")+"});";i=i+" "+gr(e,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),ur(t,"change",i,null,!0)}(t,i,r);else if("input"===s&&"checkbox"===a)!function(t,e,n){var i=n&&n.number,r=pr(t,"value")||"null",s=pr(t,"true-value")||"true",a=pr(t,"false-value")||"false";sr(t,"checked","Array.isArray("+e+")?_i("+e+","+r+")>-1"+("true"===s?":("+e+")":":_q("+e+","+s+")")),ur(t,"change","var $$a="+e+",$$el=$event.target,$$c=$$el.checked?("+s+"):("+a+");if(Array.isArray($$a)){var $$v="+(i?"_n("+r+")":r)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+gr(e,"$$a.concat([$$v])")+")}else{$$i>-1&&("+gr(e,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+gr(e,"$$c")+"}",null,!0)}(t,i,r);else if("input"===s&&"radio"===a)!function(t,e,n){var i=n&&n.number,r=pr(t,"value")||"null";sr(t,"checked","_q("+e+","+(r=i?"_n("+r+")":r)+")"),ur(t,"change",gr(e,r),null,!0)}(t,i,r);else if("input"===s||"textarea"===s)!function(t,e,n){var i=t.attrsMap.type,r=t.attrsMap["v-bind:value"]||t.attrsMap[":value"],s=t.attrsMap["v-bind:type"]||t.attrsMap[":type"];if(r&&!s){var a=t.attrsMap["v-bind:value"]?"v-bind:value":":value";Zi(a+'="'+r+'" conflicts with v-model on the same element because the latter already expands to a value binding internally',t.rawAttrsMap[a])}var o=n||{},l=o.lazy,c=o.number,u=o.trim,d=!l&&"range"!==i,p=l?"change":"range"===i?Sr:"input",h="$event.target.value";u&&(h="$event.target.value.trim()"),c&&(h="_n("+h+")");var f=gr(e,h);d&&(f="if($event.target.composing)return;"+f),sr(t,"value","("+e+")"),ur(t,p,f,null,!0),(u||c)&&ur(t,"blur","$forceUpdate()")}(t,i,r);else{if(!P.isReservedTag(s))return vr(t,i,r),!1;Zi("<"+t.tag+' v-model="'+i+"\">: v-model is not supported on this element type. If you are working with contenteditable, it's recommended to wrap a library dedicated for that purpose inside a custom component.",t.rawAttrsMap["v-model"])}return!0},text:function(t,e){e.value&&sr(t,"textContent","_s("+e.value+")",e)},html:function(t,e){e.value&&sr(t,"innerHTML","_s("+e.value+")",e)}},isPreTag:function(t){return"pre"===t},isUnaryTag:Js,mustUseProp:ai,canBeLeftOpenTag:Zs,isReservedTag:wi,getTagNamespace:ki,staticKeys:function(t){return t.reduce(function(t,e){return t.concat(e.staticKeys||[])},[]).join(",")}(Qa)},io=_(function(t){return f("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(t?","+t:""))});function ro(t,e){t&&(to=io(e.staticKeys||""),eo=e.isReservedTag||O,function t(e){e.static=function(t){if(2===t.type)return!1;if(3===t.type)return!0;return!(!t.pre&&(t.hasBindings||t.if||t.for||m(t.tag)||!eo(t.tag)||function(t){for(;t.parent;){if("template"!==(t=t.parent).tag)return!1;if(t.for)return!0}return!1}(t)||!Object.keys(t).every(to)))}(e);if(1===e.type){if(!eo(e.tag)&&"slot"!==e.tag&&null==e.attrsMap["inline-template"])return;for(var n=0,i=e.children.length;n<i;n++){var r=e.children[n];t(r),r.static||(e.static=!1)}if(e.ifConditions)for(var s=1,a=e.ifConditions.length;s<a;s++){var o=e.ifConditions[s].block;t(o),o.static||(e.static=!1)}}}(t),function t(e,n){if(1===e.type){if((e.static||e.once)&&(e.staticInFor=n),e.static&&e.children.length&&(1!==e.children.length||3!==e.children[0].type))return void(e.staticRoot=!0);if(e.staticRoot=!1,e.children)for(var i=0,r=e.children.length;i<r;i++)t(e.children[i],n||!!e.for);if(e.ifConditions)for(var s=1,a=e.ifConditions.length;s<a;s++)t(e.ifConditions[s].block,n)}}(t,!1))}var so=/^([\w$_]+|\([^)]*?\))\s*=>|^function\s*(?:[\w$]+)?\s*\(/,ao=/\([^)]*?\);*$/,oo=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,lo={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},co={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},uo=function(t){return"if("+t+")return null;"},po={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:uo("$event.target !== $event.currentTarget"),ctrl:uo("!$event.ctrlKey"),shift:uo("!$event.shiftKey"),alt:uo("!$event.altKey"),meta:uo("!$event.metaKey"),left:uo("'button' in $event && $event.button !== 0"),middle:uo("'button' in $event && $event.button !== 1"),right:uo("'button' in $event && $event.button !== 2")};function ho(t,e){var n=e?"nativeOn:":"on:",i="",r="";for(var s in t){var a=fo(t[s]);t[s]&&t[s].dynamic?r+=s+","+a+",":i+='"'+s+'":'+a+","}return i="{"+i.slice(0,-1)+"}",r?n+"_d("+i+",["+r.slice(0,-1)+"])":n+i}function fo(t){if(!t)return"function(){}";if(Array.isArray(t))return"["+t.map(function(t){return fo(t)}).join(",")+"]";var e=oo.test(t.value),n=so.test(t.value),i=oo.test(t.value.replace(ao,""));if(t.modifiers){var r="",s="",a=[];for(var o in t.modifiers)if(po[o])s+=po[o],lo[o]&&a.push(o);else if("exact"===o){var l=t.modifiers;s+=uo(["ctrl","shift","alt","meta"].filter(function(t){return!l[t]}).map(function(t){return"$event."+t+"Key"}).join("||"))}else a.push(o);return a.length&&(r+=function(t){return"if(!$event.type.indexOf('key')&&"+t.map(mo).join("&&")+")return null;"}(a)),s&&(r+=s),"function($event){"+r+(e?"return "+t.value+"($event)":n?"return ("+t.value+")($event)":i?"return "+t.value:t.value)+"}"}return e||n?t.value:"function($event){"+(i?"return "+t.value:t.value)+"}"}function mo(t){var e=parseInt(t,10);if(e)return"$event.keyCode!=="+e;var n=lo[t],i=co[t];return"_k($event.keyCode,"+JSON.stringify(t)+","+JSON.stringify(n)+",$event.key,"+JSON.stringify(i)+")"}var vo={on:function(t,e){e.modifiers&&ct("v-on without argument does not support modifiers."),t.wrapListeners=function(t){return"_g("+t+","+e.value+")"}},bind:function(t,e){t.wrapData=function(n){return"_b("+n+",'"+t.tag+"',"+e.value+","+(e.modifiers&&e.modifiers.prop?"true":"false")+(e.modifiers&&e.modifiers.sync?",true":"")+")"}},cloak:D},go=function(t){this.options=t,this.warn=t.warn||ir,this.transforms=rr(t.modules,"transformCode"),this.dataGenFns=rr(t.modules,"genData"),this.directives=A(A({},vo),t.directives);var e=t.isReservedTag||O;this.maybeComponent=function(t){return!!t.component||!e(t.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function yo(t,e){var n=new go(e);return{render:"with(this){return "+(t?bo(t,n):'_c("div")')+"}",staticRenderFns:n.staticRenderFns}}function bo(t,e){if(t.parent&&(t.pre=t.pre||t.parent.pre),t.staticRoot&&!t.staticProcessed)return _o(t,e);if(t.once&&!t.onceProcessed)return xo(t,e);if(t.for&&!t.forProcessed)return ko(t,e);if(t.if&&!t.ifProcessed)return wo(t,e);if("template"!==t.tag||t.slotTarget||e.pre){if("slot"===t.tag)return function(t,e){var n=t.slotName||'"default"',i=Mo(t,e),r="_t("+n+(i?","+i:""),s=t.attrs||t.dynamicAttrs?Do((t.attrs||[]).concat(t.dynamicAttrs||[]).map(function(t){return{name:w(t.name),value:t.value,dynamic:t.dynamic}})):null,a=t.attrsMap["v-bind"];!s&&!a||i||(r+=",null");s&&(r+=","+s);a&&(r+=(s?"":",null")+","+a);return r+")"}(t,e);var n;if(t.component)n=function(t,e,n){var i=e.inlineTemplate?null:Mo(e,n,!0);return"_c("+t+","+So(e,n)+(i?","+i:"")+")"}(t.component,t,e);else{var i;(!t.plain||t.pre&&e.maybeComponent(t))&&(i=So(t,e));var r=t.inlineTemplate?null:Mo(t,e,!0);n="_c('"+t.tag+"'"+(i?","+i:"")+(r?","+r:"")+")"}for(var s=0;s<e.transforms.length;s++)n=e.transforms[s](t,n);return n}return Mo(t,e)||"void 0"}function _o(t,e){t.staticProcessed=!0;var n=e.pre;return t.pre&&(e.pre=t.pre),e.staticRenderFns.push("with(this){return "+bo(t,e)+"}"),e.pre=n,"_m("+(e.staticRenderFns.length-1)+(t.staticInFor?",true":"")+")"}function xo(t,e){if(t.onceProcessed=!0,t.if&&!t.ifProcessed)return wo(t,e);if(t.staticInFor){for(var n="",i=t.parent;i;){if(i.for){n=i.key;break}i=i.parent}return n?"_o("+bo(t,e)+","+e.onceId+++","+n+")":(e.warn("v-once can only be used inside v-for that is keyed. ",t.rawAttrsMap["v-once"]),bo(t,e))}return _o(t,e)}function wo(t,e,n,i){return t.ifProcessed=!0,function t(e,n,i,r){if(!e.length)return r||"_e()";var s=e.shift();return s.exp?"("+s.exp+")?"+a(s.block)+":"+t(e,n,i,r):""+a(s.block);function a(t){return i?i(t,n):t.once?xo(t,n):bo(t,n)}}(t.ifConditions.slice(),e,n,i)}function ko(t,e,n,i){var r=t.for,s=t.alias,a=t.iterator1?","+t.iterator1:"",o=t.iterator2?","+t.iterator2:"";return e.maybeComponent(t)&&"slot"!==t.tag&&"template"!==t.tag&&!t.key&&e.warn("<"+t.tag+' v-for="'+s+" in "+r+'">: component lists rendered with v-for should have explicit keys. See https://vuejs.org/guide/list.html#key for more info.',t.rawAttrsMap["v-for"],!0),t.forProcessed=!0,(i||"_l")+"(("+r+"),function("+s+a+o+"){return "+(n||bo)(t,e)+"})"}function So(t,e){var n="{",i=function(t,e){var n=t.directives;if(!n)return;var i,r,s,a,o="directives:[",l=!1;for(i=0,r=n.length;i<r;i++){s=n[i],a=!0;var c=e.directives[s.name];c&&(a=!!c(t,s,e.warn)),a&&(l=!0,o+='{name:"'+s.name+'",rawName:"'+s.rawName+'"'+(s.value?",value:("+s.value+"),expression:"+JSON.stringify(s.value):"")+(s.arg?",arg:"+(s.isDynamicArg?s.arg:'"'+s.arg+'"'):"")+(s.modifiers?",modifiers:"+JSON.stringify(s.modifiers):"")+"},")}if(l)return o.slice(0,-1)+"]"}(t,e);i&&(n+=i+","),t.key&&(n+="key:"+t.key+","),t.ref&&(n+="ref:"+t.ref+","),t.refInFor&&(n+="refInFor:true,"),t.pre&&(n+="pre:true,"),t.component&&(n+='tag:"'+t.tag+'",');for(var r=0;r<e.dataGenFns.length;r++)n+=e.dataGenFns[r](t);if(t.attrs&&(n+="attrs:"+Do(t.attrs)+","),t.props&&(n+="domProps:"+Do(t.props)+","),t.events&&(n+=ho(t.events,!1)+","),t.nativeEvents&&(n+=ho(t.nativeEvents,!0)+","),t.slotTarget&&!t.slotScope&&(n+="slot:"+t.slotTarget+","),t.scopedSlots&&(n+=function(t,e,n){var i=t.for||Object.keys(e).some(function(t){var n=e[t];return n.slotTargetDynamic||n.if||n.for||Co(n)}),r=!!t.if;if(!i)for(var s=t.parent;s;){if(s.slotScope&&s.slotScope!==za||s.for){i=!0;break}s.if&&(r=!0),s=s.parent}var a=Object.keys(e).map(function(t){return Eo(e[t],n)}).join(",");return"scopedSlots:_u(["+a+"]"+(i?",null,true":"")+(!i&&r?",null,false,"+function(t){var e=5381,n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return e>>>0}(a):"")+")"}(t,t.scopedSlots,e)+","),t.model&&(n+="model:{value:"+t.model.value+",callback:"+t.model.callback+",expression:"+t.model.expression+"},"),t.inlineTemplate){var s=function(t,e){var n=t.children[0];1===t.children.length&&1===n.type||e.warn("Inline-template components must have exactly one child element.",{start:t.start});if(n&&1===n.type){var i=yo(n,e.options);return"inlineTemplate:{render:function(){"+i.render+"},staticRenderFns:["+i.staticRenderFns.map(function(t){return"function(){"+t+"}"}).join(",")+"]}"}}(t,e);s&&(n+=s+",")}return n=n.replace(/,$/,"")+"}",t.dynamicAttrs&&(n="_b("+n+',"'+t.tag+'",'+Do(t.dynamicAttrs)+")"),t.wrapData&&(n=t.wrapData(n)),t.wrapListeners&&(n=t.wrapListeners(n)),n}function Co(t){return 1===t.type&&("slot"===t.tag||t.children.some(Co))}function Eo(t,e){var n=t.attrsMap["slot-scope"];if(t.if&&!t.ifProcessed&&!n)return wo(t,e,Eo,"null");if(t.for&&!t.forProcessed)return ko(t,e,Eo);var i=t.slotScope===za?"":String(t.slotScope),r="function("+i+"){return "+("template"===t.tag?t.if&&n?"("+t.if+")?"+(Mo(t,e)||"undefined")+":undefined":Mo(t,e)||"undefined":bo(t,e))+"}",s=i?"":",proxy:true";return"{key:"+(t.slotTarget||'"default"')+",fn:"+r+s+"}"}function Mo(t,e,n,i,r){var s=t.children;if(s.length){var a=s[0];if(1===s.length&&a.for&&"template"!==a.tag&&"slot"!==a.tag){var o=n?e.maybeComponent(a)?",1":",0":"";return""+(i||bo)(a,e)+o}var l=n?function(t,e){for(var n=0,i=0;i<t.length;i++){var r=t[i];if(1===r.type){if(Ao(r)||r.ifConditions&&r.ifConditions.some(function(t){return Ao(t.block)})){n=2;break}(e(r)||r.ifConditions&&r.ifConditions.some(function(t){return e(t.block)}))&&(n=1)}}return n}(s,e.maybeComponent):0,c=r||To;return"["+s.map(function(t){return c(t,e)}).join(",")+"]"+(l?","+l:"")}}function Ao(t){return void 0!==t.for||"template"===t.tag||"slot"===t.tag}function To(t,e){return 1===t.type?bo(t,e):3===t.type&&t.isComment?(i=t,"_e("+JSON.stringify(i.text)+")"):"_v("+(2===(n=t).type?n.expression:Oo(JSON.stringify(n.text)))+")";var n,i}function Do(t){for(var e="",n="",i=0;i<t.length;i++){var r=t[i],s=Oo(r.value);r.dynamic?n+=r.name+","+s+",":e+='"'+r.name+'":'+s+","}return e="{"+e.slice(0,-1)+"}",n?"_d("+e+",["+n.slice(0,-1)+"])":e}function Oo(t){return t.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}var Ro=new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),No=new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)"),Io=/'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`/g;function $o(t,e){t&&function t(e,n){if(1===e.type){for(var i in e.attrsMap)if(Aa.test(i)){var r=e.attrsMap[i];if(r){var s=e.rawAttrsMap[i];"v-for"===i?Lo(e,'v-for="'+r+'"',n,s):Ma.test(i)?jo(r,i+'="'+r+'"',n,s):Po(r,i+'="'+r+'"',n,s)}}if(e.children)for(var a=0;a<e.children.length;a++)t(e.children[a],n)}else 2===e.type&&Po(e.expression,e.text,n,e)}(t,e)}function jo(t,e,n,i){var r=t.replace(Io,""),s=r.match(No);s&&"$"!==r.charAt(s.index-1)&&n('avoid using JavaScript unary operator as property name: "'+s[0]+'" in expression '+e.trim(),i),Po(t,e,n,i)}function Lo(t,e,n,i){Po(t.for||"",e,n,i),Vo(t.alias,"v-for alias",e,n,i),Vo(t.iterator1,"v-for iterator",e,n,i),Vo(t.iterator2,"v-for iterator",e,n,i)}function Vo(t,e,n,i,r){if("string"==typeof t)try{new Function("var "+t+"=_")}catch(s){i("invalid "+e+' "'+t+'" in expression: '+n.trim(),r)}}function Po(t,e,n,i){try{new Function("return "+t)}catch(s){var r=t.replace(Io,"").match(Ro);n(r?'avoid using JavaScript keyword as property name: "'+r[0]+'"\n  Raw expression: '+e.trim():"invalid expression: "+s.message+" in\n\n    "+t+"\n\n  Raw expression: "+e.trim()+"\n",i)}}var qo=2;function zo(t,e){var n="";if(e>0)for(;1&e&&(n+=t),!((e>>>=1)<=0);)t+=t;return n}function Fo(t,e){try{return new Function(t)}catch(n){return e.push({err:n,code:t}),D}}function Bo(t){var e=Object.create(null);return function(n,i,r){var s=(i=A({},i)).warn||ct;delete i.warn;try{new Function("return 1")}catch(t){t.toString().match(/unsafe-eval|CSP/)&&s("It seems you are using the standalone build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. The template compiler cannot work in this environment. Consider relaxing the policy to allow unsafe-eval or pre-compiling your templates into render functions.")}var a=i.delimiters?String(i.delimiters)+n:n;if(e[a])return e[a];var o=t(n,i);o.errors&&o.errors.length&&(i.outputSourceRange?o.errors.forEach(function(t){s("Error compiling template:\n\n"+t.msg+"\n\n"+function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length);for(var i=t.split(/\r?\n/),r=0,s=[],a=0;a<i.length;a++)if((r+=i[a].length+1)>=e){for(var o=a-qo;o<=a+qo||n>r;o++)if(!(o<0||o>=i.length)){s.push(""+(o+1)+zo(" ",3-String(o+1).length)+"|  "+i[o]);var l=i[o].length;if(o===a){var c=e-(r-l)+1,u=n>r?l-c:n-e;s.push("   |  "+zo(" ",c)+zo("^",u))}else if(o>a){if(n>r){var d=Math.min(n-r,l);s.push("   |  "+zo("^",d))}r+=l+1}}break}return s.join("\n")}(n,t.start,t.end),r)}):s("Error compiling template:\n\n"+n+"\n\n"+o.errors.map(function(t){return"- "+t}).join("\n")+"\n",r)),o.tips&&o.tips.length&&(i.outputSourceRange?o.tips.forEach(function(t){return ut(t.msg,r)}):o.tips.forEach(function(t){return ut(t,r)}));var l={},c=[];return l.render=Fo(o.render,c),l.staticRenderFns=o.staticRenderFns.map(function(t){return Fo(t,c)}),o.errors&&o.errors.length||!c.length||s("Failed to generate render function:\n\n"+c.map(function(t){var e=t.err,n=t.code;return e.toString()+" in\n\n"+n+"\n"}).join("\n"),r),e[a]=l}}var Ho,Uo,Ko=(Ho=function(t,e){var n=Ba(t.trim(),e);!1!==e.optimize&&ro(n,e);var i=yo(n,e);return{ast:n,render:i.render,staticRenderFns:i.staticRenderFns}},function(t){function e(e,n){var i=Object.create(t),r=[],s=[],a=function(t,e,n){(n?s:r).push(t)};if(n){if(n.outputSourceRange){var o=e.match(/^\s*/)[0].length;a=function(t,e,n){var i={msg:t};e&&(null!=e.start&&(i.start=e.start+o),null!=e.end&&(i.end=e.end+o)),(n?s:r).push(i)}}for(var l in n.modules&&(i.modules=(t.modules||[]).concat(n.modules)),n.directives&&(i.directives=A(Object.create(t.directives||null),n.directives)),n)"modules"!==l&&"directives"!==l&&(i[l]=n[l])}i.warn=a;var c=Ho(e.trim(),i);return $o(c.ast,a),c.errors=r,c.tips=s,c}return{compile:e,compileToFunctions:Bo(e)}})(no),Wo=(Ko.compile,Ko.compileToFunctions);function Go(t){return(Uo=Uo||document.createElement("div")).innerHTML=t?'<a href="\n"/>':'<div a="\n"/>',Uo.innerHTML.indexOf("&#10;")>0}var Xo=!!K&&Go(!1),Yo=!!K&&Go(!0),Jo=_(function(t){var e=Ei(t);return e&&e.innerHTML}),Zo=Yn.prototype.$mount;return Yn.prototype.$mount=function(t,e){if((t=t&&Ei(t))===document.body||t===document.documentElement)return ct("Do not mount Vue to <html> or <body> - mount to normal elements instead."),this;var n=this.$options;if(!n.render){var i=n.template;if(i)if("string"==typeof i)"#"===i.charAt(0)&&((i=Jo(i))||ct("Template element not found or is empty: "+n.template,this));else{if(!i.nodeType)return ct("invalid template option:"+i,this),this;i=i.innerHTML}else t&&(i=function(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}(t));if(i){P.performance&&re&&re("compile");var r=Wo(i,{outputSourceRange:!0,shouldDecodeNewlines:Xo,shouldDecodeNewlinesForHref:Yo,delimiters:n.delimiters,comments:n.comments},this),s=r.render,a=r.staticRenderFns;n.render=s,n.staticRenderFns=a,P.performance&&re&&(re("compile end"),se("vue "+this._name+" compile","compile","compile end"))}}return Zo.call(this,t,e)},Yn.compile=Wo,Yn}),function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";var n=[],i=Object.getPrototypeOf,r=n.slice,s=n.flat?function(t){return n.flat.call(t)}:function(t){return n.concat.apply([],t)},a=n.push,o=n.indexOf,l={},c=l.toString,u=l.hasOwnProperty,d=u.toString,p=d.call(Object),h={},f=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},m=function(t){return null!=t&&t===t.window},v=t.document,g={type:!0,src:!0,nonce:!0,noModule:!0};function y(t,e,n){var i,r,s=(n=n||v).createElement("script");if(s.text=t,e)for(i in g)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&s.setAttribute(i,r);n.head.appendChild(s).parentNode.removeChild(s)}function b(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?l[c.call(t)]||"object":typeof t}var _="3.5.1",x=function(t,e){return new x.fn.init(t,e)};function w(t){var e=!!t&&"length"in t&&t.length,n=b(t);return!f(t)&&!m(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}x.fn=x.prototype={jquery:_,constructor:x,length:0,toArray:function(){return r.call(this)},get:function(t){return null==t?r.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=x.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return x.each(this,t)},map:function(t){return this.pushStack(x.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(x.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},x.extend=x.fn.extend=function(){var t,e,n,i,r,s,a=arguments[0]||{},o=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[o]||{},o++),"object"==typeof a||f(a)||(a={}),o===l&&(a=this,o--);o<l;o++)if(null!=(t=arguments[o]))for(e in t)i=t[e],"__proto__"!==e&&a!==i&&(c&&i&&(x.isPlainObject(i)||(r=Array.isArray(i)))?(n=a[e],s=r&&!Array.isArray(n)?[]:r||x.isPlainObject(n)?n:{},r=!1,a[e]=x.extend(c,s,i)):void 0!==i&&(a[e]=i));return a},x.extend({expando:"jQuery"+(_+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==c.call(t)||(e=i(t))&&("function"!=typeof(n=u.call(e,"constructor")&&e.constructor)||d.call(n)!==p))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){y(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,i=0;if(w(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(w(Object(t))?x.merge(n,"string"==typeof t?[t]:t):a.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:o.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,s=t.length,a=!n;r<s;r++)!e(t[r],r)!==a&&i.push(t[r]);return i},map:function(t,e,n){var i,r,a=0,o=[];if(w(t))for(i=t.length;a<i;a++)null!=(r=e(t[a],a,n))&&o.push(r);else for(a in t)null!=(r=e(t[a],a,n))&&o.push(r);return s(o)},guid:1,support:h}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=n[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){l["[object "+e+"]"]=e.toLowerCase()});var k=function(t){var e,n,i,r,s,a,o,l,c,u,d,p,h,f,m,v,g,y,b,_="sizzle"+1*new Date,x=t.document,w=0,k=0,S=lt(),C=lt(),E=lt(),M=lt(),A=function(t,e){return t===e&&(d=!0),0},T={}.hasOwnProperty,D=[],O=D.pop,R=D.push,N=D.push,I=D.slice,$=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",V="(?:\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",P="\\["+L+"*("+V+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+V+"))|)"+L+"*\\]",q=":("+V+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",z=new RegExp(L+"+","g"),F=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),B=new RegExp("^"+L+"*,"+L+"*"),H=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp(L+"|>"),K=new RegExp(q),W=new RegExp("^"+V+"$"),G={ID:new RegExp("^#("+V+")"),CLASS:new RegExp("^\\.("+V+")"),TAG:new RegExp("^("+V+"|[*])"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},it=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},st=function(){p()},at=_t(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{N.apply(D=I.call(x.childNodes),x.childNodes),D[x.childNodes.length].nodeType}catch(e){N={apply:D.length?function(t,e){R.apply(t,I.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function ot(t,e,i,r){var s,o,c,u,d,f,g,y=e&&e.ownerDocument,x=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==x&&9!==x&&11!==x)return i;if(!r&&(p(e),e=e||h,m)){if(11!==x&&(d=Q.exec(t)))if(s=d[1]){if(9===x){if(!(c=e.getElementById(s)))return i;if(c.id===s)return i.push(c),i}else if(y&&(c=y.getElementById(s))&&b(e,c)&&c.id===s)return i.push(c),i}else{if(d[2])return N.apply(i,e.getElementsByTagName(t)),i;if((s=d[3])&&n.getElementsByClassName&&e.getElementsByClassName)return N.apply(i,e.getElementsByClassName(s)),i}if(n.qsa&&!M[t+" "]&&(!v||!v.test(t))&&(1!==x||"object"!==e.nodeName.toLowerCase())){if(g=t,y=e,1===x&&(U.test(t)||H.test(t))){for((y=tt.test(t)&&gt(e.parentNode)||e)===e&&n.scope||((u=e.getAttribute("id"))?u=u.replace(it,rt):e.setAttribute("id",u=_)),o=(f=a(t)).length;o--;)f[o]=(u?"#"+u:":scope")+" "+bt(f[o]);g=f.join(",")}try{return N.apply(i,y.querySelectorAll(g)),i}catch(e){M(t,!0)}finally{u===_&&e.removeAttribute("id")}}}return l(t.replace(F,"$1"),e,i,r)}function lt(){var t=[];return function e(n,r){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=r}}function ct(t){return t[_]=!0,t}function ut(t){var e=h.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function dt(t,e){for(var n=t.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=e}function pt(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ht(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function mt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&at(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function vt(t){return ct(function(e){return e=+e,ct(function(n,i){for(var r,s=t([],n.length,e),a=s.length;a--;)n[r=s[a]]&&(n[r]=!(i[r]=n[r]))})})}function gt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=ot.support={},s=ot.isXML=function(t){var e=t.namespaceURI,n=(t.ownerDocument||t).documentElement;return!X.test(e||n&&n.nodeName||"HTML")},p=ot.setDocument=function(t){var e,r,a=t?t.ownerDocument||t:x;return a!=h&&9===a.nodeType&&a.documentElement&&(f=(h=a).documentElement,m=!s(h),x!=h&&(r=h.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",st,!1):r.attachEvent&&r.attachEvent("onunload",st)),n.scope=ut(function(t){return f.appendChild(t).appendChild(h.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length}),n.attributes=ut(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=ut(function(t){return t.appendChild(h.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(h.getElementsByClassName),n.getById=ut(function(t){return f.appendChild(t).id=_,!h.getElementsByName||!h.getElementsByName(_).length}),n.getById?(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n=e.getElementById(t);return n?[n]:[]}}):(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n,i,r,s=e.getElementById(t);if(s){if((n=s.getAttributeNode("id"))&&n.value===t)return[s];for(r=e.getElementsByName(t),i=0;s=r[i++];)if((n=s.getAttributeNode("id"))&&n.value===t)return[s]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,s=e.getElementsByTagName(t);if("*"===t){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&m)return e.getElementsByClassName(t)},g=[],v=[],(n.qsa=Z.test(h.querySelectorAll))&&(ut(function(t){var e;f.appendChild(t).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+L+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||v.push("\\["+L+"*(?:value|"+j+")"),t.querySelectorAll("[id~="+_+"-]").length||v.push("~="),(e=h.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||v.push("\\["+L+"*name"+L+"*="+L+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||v.push(":checked"),t.querySelectorAll("a#"+_+"+*").length||v.push(".#.+[+~]"),t.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ut(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=h.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&v.push("name"+L+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),f.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),v.push(",.*:")})),(n.matchesSelector=Z.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ut(function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),g.push("!=",q)}),v=v.length&&new RegExp(v.join("|")),g=g.length&&new RegExp(g.join("|")),e=Z.test(f.compareDocumentPosition),b=e||Z.test(f.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},A=e?function(t,e){if(t===e)return d=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t==h||t.ownerDocument==x&&b(x,t)?-1:e==h||e.ownerDocument==x&&b(x,e)?1:u?$(u,t)-$(u,e):0:4&i?-1:1)}:function(t,e){if(t===e)return d=!0,0;var n,i=0,r=t.parentNode,s=e.parentNode,a=[t],o=[e];if(!r||!s)return t==h?-1:e==h?1:r?-1:s?1:u?$(u,t)-$(u,e):0;if(r===s)return pt(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)o.unshift(n);for(;a[i]===o[i];)i++;return i?pt(a[i],o[i]):a[i]==x?-1:o[i]==x?1:0}),h},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if(p(t),n.matchesSelector&&m&&!M[e+" "]&&(!g||!g.test(e))&&(!v||!v.test(e)))try{var i=y.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){M(e,!0)}return 0<ot(e,h,null,[t]).length},ot.contains=function(t,e){return(t.ownerDocument||t)!=h&&p(t),b(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!=h&&p(t);var r=i.attrHandle[e.toLowerCase()],s=r&&T.call(i.attrHandle,e.toLowerCase())?r(t,e,!m):void 0;return void 0!==s?s:n.attributes||!m?t.getAttribute(e):(s=t.getAttributeNode(e))&&s.specified?s.value:null},ot.escape=function(t){return(t+"").replace(it,rt)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,i=[],r=0,s=0;if(d=!n.detectDuplicates,u=!n.sortStable&&t.slice(0),t.sort(A),d){for(;e=t[s++];)e===t[s]&&(r=i.push(s));for(;r--;)t.splice(i[r],1)}return u=null,t},r=ot.getText=function(t){var e,n="",i=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[i++];)n+=r(e);return n},(i=ot.selectors={cacheLength:50,createPseudo:ct,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return G.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&K.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=S[t+" "];return e||(e=new RegExp("(^|"+L+")"+t+"("+L+"|$)"))&&S(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=ot.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&-1<r.indexOf(n):"$="===e?n&&r.slice(-n.length)===n:"~="===e?-1<(" "+r.replace(z," ")+" ").indexOf(n):"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var s="nth"!==t.slice(0,3),a="last"!==t.slice(-4),o="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var c,u,d,p,h,f,m=s!==a?"nextSibling":"previousSibling",v=e.parentNode,g=o&&e.nodeName.toLowerCase(),y=!l&&!o,b=!1;if(v){if(s){for(;m;){for(p=e;p=p[m];)if(o?p.nodeName.toLowerCase()===g:1===p.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[a?v.firstChild:v.lastChild],a&&y){for(b=(h=(c=(u=(d=(p=v)[_]||(p[_]={}))[p.uniqueID]||(d[p.uniqueID]={}))[t]||[])[0]===w&&c[1])&&c[2],p=h&&v.childNodes[h];p=++h&&p&&p[m]||(b=h=0)||f.pop();)if(1===p.nodeType&&++b&&p===e){u[t]=[w,h,b];break}}else if(y&&(b=h=(c=(u=(d=(p=e)[_]||(p[_]={}))[p.uniqueID]||(d[p.uniqueID]={}))[t]||[])[0]===w&&c[1]),!1===b)for(;(p=++h&&p&&p[m]||(b=h=0)||f.pop())&&((o?p.nodeName.toLowerCase()!==g:1!==p.nodeType)||!++b||(y&&((u=(d=p[_]||(p[_]={}))[p.uniqueID]||(d[p.uniqueID]={}))[t]=[w,b]),p!==e)););return(b-=r)===i||b%i==0&&0<=b/i}}},PSEUDO:function(t,e){var n,r=i.pseudos[t]||i.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return r[_]?r(e):1<r.length?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?ct(function(t,n){for(var i,s=r(t,e),a=s.length;a--;)t[i=$(t,s[a])]=!(n[i]=s[a])}):function(t){return r(t,0,n)}):r}},pseudos:{not:ct(function(t){var e=[],n=[],i=o(t.replace(F,"$1"));return i[_]?ct(function(t,e,n,r){for(var s,a=i(t,null,r,[]),o=t.length;o--;)(s=a[o])&&(t[o]=!(e[o]=s))}):function(t,r,s){return e[0]=t,i(e,null,s,n),e[0]=null,!n.pop()}}),has:ct(function(t){return function(e){return 0<ot(t,e).length}}),contains:ct(function(t){return t=t.replace(et,nt),function(e){return-1<(e.textContent||r(e)).indexOf(t)}}),lang:ct(function(t){return W.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:mt(!1),disabled:mt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return J.test(t.nodeName)},input:function(t){return Y.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:vt(function(){return[0]}),last:vt(function(t,e){return[e-1]}),eq:vt(function(t,e,n){return[n<0?n+e:n]}),even:vt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:vt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:vt(function(t,e,n){for(var i=n<0?n+e:e<n?e:n;0<=--i;)t.push(i);return t}),gt:vt(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=ht(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=ft(e);function yt(){}function bt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function _t(t,e,n){var i=e.dir,r=e.next,s=r||i,a=n&&"parentNode"===s,o=k++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||a)return t(e,n,r);return!1}:function(e,n,l){var c,u,d,p=[w,o];if(l){for(;e=e[i];)if((1===e.nodeType||a)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||a)if(u=(d=e[_]||(e[_]={}))[e.uniqueID]||(d[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((c=u[s])&&c[0]===w&&c[1]===o)return p[2]=c[2];if((u[s]=p)[2]=t(e,n,l))return!0}return!1}}function xt(t){return 1<t.length?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function wt(t,e,n,i,r){for(var s,a=[],o=0,l=t.length,c=null!=e;o<l;o++)(s=t[o])&&(n&&!n(s,i,r)||(a.push(s),c&&e.push(o)));return a}function kt(t,e,n,i,r,s){return i&&!i[_]&&(i=kt(i)),r&&!r[_]&&(r=kt(r,s)),ct(function(s,a,o,l){var c,u,d,p=[],h=[],f=a.length,m=s||function(t,e,n){for(var i=0,r=e.length;i<r;i++)ot(t,e[i],n);return n}(e||"*",o.nodeType?[o]:o,[]),v=!t||!s&&e?m:wt(m,p,t,o,l),g=n?r||(s?t:f||i)?[]:a:v;if(n&&n(v,g,o,l),i)for(c=wt(g,h),i(c,[],o,l),u=c.length;u--;)(d=c[u])&&(g[h[u]]=!(v[h[u]]=d));if(s){if(r||t){if(r){for(c=[],u=g.length;u--;)(d=g[u])&&c.push(v[u]=d);r(null,g=[],c,l)}for(u=g.length;u--;)(d=g[u])&&-1<(c=r?$(s,d):p[u])&&(s[c]=!(a[c]=d))}}else g=wt(g===a?g.splice(f,g.length):g),r?r(null,a,g,l):N.apply(a,g)})}function St(t){for(var e,n,r,s=t.length,a=i.relative[t[0].type],o=a||i.relative[" "],l=a?1:0,u=_t(function(t){return t===e},o,!0),d=_t(function(t){return-1<$(e,t)},o,!0),p=[function(t,n,i){var r=!a&&(i||n!==c)||((e=n).nodeType?u(t,n,i):d(t,n,i));return e=null,r}];l<s;l++)if(n=i.relative[t[l].type])p=[_t(xt(p),n)];else{if((n=i.filter[t[l].type].apply(null,t[l].matches))[_]){for(r=++l;r<s&&!i.relative[t[r].type];r++);return kt(1<l&&xt(p),1<l&&bt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(F,"$1"),n,l<r&&St(t.slice(l,r)),r<s&&St(t=t.slice(r)),r<s&&bt(t))}p.push(n)}return xt(p)}return yt.prototype=i.filters=i.pseudos,i.setFilters=new yt,a=ot.tokenize=function(t,e){var n,r,s,a,o,l,c,u=C[t+" "];if(u)return e?0:u.slice(0);for(o=t,l=[],c=i.preFilter;o;){for(a in n&&!(r=B.exec(o))||(r&&(o=o.slice(r[0].length)||o),l.push(s=[])),n=!1,(r=H.exec(o))&&(n=r.shift(),s.push({value:n,type:r[0].replace(F," ")}),o=o.slice(n.length)),i.filter)!(r=G[a].exec(o))||c[a]&&!(r=c[a](r))||(n=r.shift(),s.push({value:n,type:a,matches:r}),o=o.slice(n.length));if(!n)break}return e?o.length:o?ot.error(t):C(t,l).slice(0)},o=ot.compile=function(t,e){var n,r,s,o,l,u,d=[],f=[],v=E[t+" "];if(!v){for(e||(e=a(t)),n=e.length;n--;)(v=St(e[n]))[_]?d.push(v):f.push(v);(v=E(t,(r=f,o=0<(s=d).length,l=0<r.length,u=function(t,e,n,a,u){var d,f,v,g=0,y="0",b=t&&[],_=[],x=c,k=t||l&&i.find.TAG("*",u),S=w+=null==x?1:Math.random()||.1,C=k.length;for(u&&(c=e==h||e||u);y!==C&&null!=(d=k[y]);y++){if(l&&d){for(f=0,e||d.ownerDocument==h||(p(d),n=!m);v=r[f++];)if(v(d,e||h,n)){a.push(d);break}u&&(w=S)}o&&((d=!v&&d)&&g--,t&&b.push(d))}if(g+=y,o&&y!==g){for(f=0;v=s[f++];)v(b,_,e,n);if(t){if(0<g)for(;y--;)b[y]||_[y]||(_[y]=O.call(a));_=wt(_)}N.apply(a,_),u&&!t&&0<_.length&&1<g+s.length&&ot.uniqueSort(a)}return u&&(w=S,c=x),b},o?ct(u):u))).selector=t}return v},l=ot.select=function(t,e,n,r){var s,l,c,u,d,p="function"==typeof t&&t,h=!r&&a(t=p.selector||t);if(n=n||[],1===h.length){if(2<(l=h[0]=h[0].slice(0)).length&&"ID"===(c=l[0]).type&&9===e.nodeType&&m&&i.relative[l[1].type]){if(!(e=(i.find.ID(c.matches[0].replace(et,nt),e)||[])[0]))return n;p&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(s=G.needsContext.test(t)?0:l.length;s--&&(c=l[s],!i.relative[u=c.type]);)if((d=i.find[u])&&(r=d(c.matches[0].replace(et,nt),tt.test(l[0].type)&&gt(e.parentNode)||e))){if(l.splice(s,1),!(t=r.length&&bt(l)))return N.apply(n,r),n;break}}return(p||o(t,h))(r,e,!m,n,!e||tt.test(t)&&gt(e.parentNode)||e),n},n.sortStable=_.split("").sort(A).join("")===_,n.detectDuplicates=!!d,p(),n.sortDetached=ut(function(t){return 1&t.compareDocumentPosition(h.createElement("fieldset"))}),ut(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||dt("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&ut(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||dt("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ut(function(t){return null==t.getAttribute("disabled")})||dt(j,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),ot}(t);x.find=k,x.expr=k.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=k.uniqueSort,x.text=k.getText,x.isXMLDoc=k.isXML,x.contains=k.contains,x.escapeSelector=k.escape;var S=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&x(t).is(n))break;i.push(t)}return i},C=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},E=x.expr.match.needsContext;function M(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function T(t,e,n){return f(e)?x.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?x.grep(t,function(t){return t===e!==n}):"string"!=typeof e?x.grep(t,function(t){return-1<o.call(e,t)!==n}):x.filter(e,t,n)}x.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?x.find.matchesSelector(i,t)?[i]:[]:x.find.matches(t,x.grep(e,function(t){return 1===t.nodeType}))},x.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(x(t).filter(function(){for(e=0;e<i;e++)if(x.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)x.find(t,r[e],n);return 1<i?x.uniqueSort(n):n},filter:function(t){return this.pushStack(T(this,t||[],!1))},not:function(t){return this.pushStack(T(this,t||[],!0))},is:function(t){return!!T(this,"string"==typeof t&&E.test(t)?x(t):t||[],!1).length}});var D,O=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||D,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:O.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof x?e[0]:e,x.merge(this,x.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:v,!0)),A.test(i[1])&&x.isPlainObject(e))for(i in e)f(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=v.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):f(t)?void 0!==n.ready?n.ready(t):t(x):x.makeArray(t,this)}).prototype=x.fn,D=x(v);var R=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function I(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}x.fn.extend({has:function(t){var e=x(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(x.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,s=[],a="string"!=typeof t&&x(t);if(!E.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&x.find.matchesSelector(n,t))){s.push(n);break}return this.pushStack(1<s.length?x.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?o.call(x(t),this[0]):o.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),x.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return S(t,"parentNode")},parentsUntil:function(t,e,n){return S(t,"parentNode",n)},next:function(t){return I(t,"nextSibling")},prev:function(t){return I(t,"previousSibling")},nextAll:function(t){return S(t,"nextSibling")},prevAll:function(t){return S(t,"previousSibling")},nextUntil:function(t,e,n){return S(t,"nextSibling",n)},prevUntil:function(t,e,n){return S(t,"previousSibling",n)},siblings:function(t){return C((t.parentNode||{}).firstChild,t)},children:function(t){return C(t.firstChild)},contents:function(t){return null!=t.contentDocument&&i(t.contentDocument)?t.contentDocument:(M(t,"template")&&(t=t.content||t),x.merge([],t.childNodes))}},function(t,e){x.fn[t]=function(n,i){var r=x.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=x.filter(i,r)),1<this.length&&(N[t]||x.uniqueSort(r),R.test(t)&&r.reverse()),this.pushStack(r)}});var $=/[^\x20\t\r\n\f]+/g;function j(t){return t}function L(t){throw t}function V(t,e,n,i){var r;try{t&&f(r=t.promise)?r.call(t).done(e).fail(n):t&&f(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}x.Callbacks=function(t){var e,n;t="string"==typeof t?(e=t,n={},x.each(e.match($)||[],function(t,e){n[e]=!0}),n):x.extend({},t);var i,r,s,a,o=[],l=[],c=-1,u=function(){for(a=a||t.once,s=i=!0;l.length;c=-1)for(r=l.shift();++c<o.length;)!1===o[c].apply(r[0],r[1])&&t.stopOnFalse&&(c=o.length,r=!1);t.memory||(r=!1),i=!1,a&&(o=r?[]:"")},d={add:function(){return o&&(r&&!i&&(c=o.length-1,l.push(r)),function e(n){x.each(n,function(n,i){f(i)?t.unique&&d.has(i)||o.push(i):i&&i.length&&"string"!==b(i)&&e(i)})}(arguments),r&&!i&&u()),this},remove:function(){return x.each(arguments,function(t,e){for(var n;-1<(n=x.inArray(e,o,n));)o.splice(n,1),n<=c&&c--}),this},has:function(t){return t?-1<x.inArray(t,o):0<o.length},empty:function(){return o&&(o=[]),this},disable:function(){return a=l=[],o=r="",this},disabled:function(){return!o},lock:function(){return a=l=[],r||i||(o=r=""),this},locked:function(){return!!a},fireWith:function(t,e){return a||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),i||u()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!s}};return d},x.extend({Deferred:function(e){var n=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return x.Deferred(function(e){x.each(n,function(n,i){var r=f(t[i[4]])&&t[i[4]];s[i[1]](function(){var t=r&&r.apply(this,arguments);t&&f(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[i[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(e,i,r){var s=0;function a(e,n,i,r){return function(){var o=this,l=arguments,c=function(){var t,c;if(!(e<s)){if((t=i.apply(o,l))===n.promise())throw new TypeError("Thenable self-resolution");c=t&&("object"==typeof t||"function"==typeof t)&&t.then,f(c)?r?c.call(t,a(s,n,j,r),a(s,n,L,r)):(s++,c.call(t,a(s,n,j,r),a(s,n,L,r),a(s,n,j,n.notifyWith))):(i!==j&&(o=void 0,l=[t]),(r||n.resolveWith)(o,l))}},u=r?c:function(){try{c()}catch(t){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(t,u.stackTrace),s<=e+1&&(i!==L&&(o=void 0,l=[t]),n.rejectWith(o,l))}};e?u():(x.Deferred.getStackHook&&(u.stackTrace=x.Deferred.getStackHook()),t.setTimeout(u))}}return x.Deferred(function(t){n[0][3].add(a(0,t,f(r)?r:j,t.notifyWith)),n[1][3].add(a(0,t,f(e)?e:j)),n[2][3].add(a(0,t,f(i)?i:L))}).promise()},promise:function(t){return null!=t?x.extend(t,r):r}},s={};return x.each(n,function(t,e){var a=e[2],o=e[5];r[e[1]]=a.add,o&&a.add(function(){i=o},n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),a.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?void 0:this,arguments),this},s[e[0]+"With"]=a.fireWith}),r.promise(s),e&&e.call(s,s),s},when:function(t){var e=arguments.length,n=e,i=Array(n),s=r.call(arguments),a=x.Deferred(),o=function(t){return function(n){i[t]=this,s[t]=1<arguments.length?r.call(arguments):n,--e||a.resolveWith(i,s)}};if(e<=1&&(V(t,a.done(o(n)).resolve,a.reject,!e),"pending"===a.state()||f(s[n]&&s[n].then)))return a.then();for(;n--;)V(s[n],o(n),a.reject);return a.promise()}});var P=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&P.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},x.readyException=function(e){t.setTimeout(function(){throw e})};var q=x.Deferred();function z(){v.removeEventListener("DOMContentLoaded",z),t.removeEventListener("load",z),x.ready()}x.fn.ready=function(t){return q.then(t).catch(function(t){x.readyException(t)}),this},x.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--x.readyWait:x.isReady)||(x.isReady=!0)!==t&&0<--x.readyWait||q.resolveWith(v,[x])}}),x.ready.then=q.then,"complete"===v.readyState||"loading"!==v.readyState&&!v.documentElement.doScroll?t.setTimeout(x.ready):(v.addEventListener("DOMContentLoaded",z),t.addEventListener("load",z));var F=function(t,e,n,i,r,s,a){var o=0,l=t.length,c=null==n;if("object"===b(n))for(o in r=!0,n)F(t,e,o,n[o],!0,s,a);else if(void 0!==i&&(r=!0,f(i)||(a=!0),c&&(a?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(x(t),n)})),e))for(;o<l;o++)e(t[o],n,a?i:i.call(t[o],o,e(t[o],n)));return r?t:c?e.call(t):l?e(t[0],n):s},B=/^-ms-/,H=/-([a-z])/g;function U(t,e){return e.toUpperCase()}function K(t){return t.replace(B,"ms-").replace(H,U)}var W=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function G(){this.expando=x.expando+G.uid++}G.uid=1,G.prototype={cache:function(t){var e=t[this.expando];return e||(e={},W(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[K(e)]=n;else for(i in e)r[K(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][K(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(K):(e=K(e))in i?[e]:e.match($)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||x.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!x.isEmptyObject(e)}};var X=new G,Y=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function Q(t,e,n){var i,r;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(Z,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n="true"===(r=n)||"false"!==r&&("null"===r?null:r===+r+""?+r:J.test(r)?JSON.parse(r):r)}catch(t){}Y.set(t,e,n)}else n=void 0;return n}x.extend({hasData:function(t){return Y.hasData(t)||X.hasData(t)},data:function(t,e,n){return Y.access(t,e,n)},removeData:function(t,e){Y.remove(t,e)},_data:function(t,e,n){return X.access(t,e,n)},_removeData:function(t,e){X.remove(t,e)}}),x.fn.extend({data:function(t,e){var n,i,r,s=this[0],a=s&&s.attributes;if(void 0===t){if(this.length&&(r=Y.get(s),1===s.nodeType&&!X.get(s,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=K(i.slice(5)),Q(s,i,r[i]));X.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Y.set(this,t)}):F(this,function(e){var n;if(s&&void 0===e)return void 0!==(n=Y.get(s,t))?n:void 0!==(n=Q(s,t))?n:void 0;this.each(function(){Y.set(this,t,e)})},null,e,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){Y.remove(this,t)})}}),x.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=X.get(t,e),n&&(!i||Array.isArray(n)?i=X.access(t,e,x.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=x.queue(t,e),i=n.length,r=n.shift(),s=x._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,function(){x.dequeue(t,e)},s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return X.get(t,n)||X.access(t,n,{empty:x.Callbacks("once memory").add(function(){X.remove(t,[e+"queue",n])})})}}),x.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?x.queue(this[0],t):void 0===e?this:this.each(function(){var n=x.queue(this,t,e);x._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&x.dequeue(this,t)})},dequeue:function(t){return this.each(function(){x.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=x.Deferred(),s=this,a=this.length,o=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=X.get(s[a],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(o));return o(),r.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],it=v.documentElement,rt=function(t){return x.contains(t.ownerDocument,t)},st={composed:!0};it.getRootNode&&(rt=function(t){return x.contains(t.ownerDocument,t)||t.getRootNode(st)===t.ownerDocument});var at=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&rt(t)&&"none"===x.css(t,"display")};function ot(t,e,n,i){var r,s,a=20,o=i?function(){return i.cur()}:function(){return x.css(t,e,"")},l=o(),c=n&&n[3]||(x.cssNumber[e]?"":"px"),u=t.nodeType&&(x.cssNumber[e]||"px"!==c&&+l)&&et.exec(x.css(t,e));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)x.style(t,e,u+c),(1-s)*(1-(s=o()/l||.5))<=0&&(a=0),u/=s;u*=2,x.style(t,e,u+c),n=n||[]}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=r)),r}var lt={};function ct(t,e){for(var n,i,r,s,a,o,l,c=[],u=0,d=t.length;u<d;u++)(i=t[u]).style&&(n=i.style.display,e?("none"===n&&(c[u]=X.get(i,"display")||null,c[u]||(i.style.display="")),""===i.style.display&&at(i)&&(c[u]=(l=a=s=void 0,a=(r=i).ownerDocument,o=r.nodeName,(l=lt[o])||(s=a.body.appendChild(a.createElement(o)),l=x.css(s,"display"),s.parentNode.removeChild(s),"none"===l&&(l="block"),lt[o]=l)))):"none"!==n&&(c[u]="none",X.set(i,"display",n)));for(u=0;u<d;u++)null!=c[u]&&(t[u].style.display=c[u]);return t}x.fn.extend({show:function(){return ct(this,!0)},hide:function(){return ct(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){at(this)?x(this).show():x(this).hide()})}});var ut,dt,pt=/^(?:checkbox|radio)$/i,ht=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ft=/^$|^module$|\/(?:java|ecma)script/i;ut=v.createDocumentFragment().appendChild(v.createElement("div")),(dt=v.createElement("input")).setAttribute("type","radio"),dt.setAttribute("checked","checked"),dt.setAttribute("name","t"),ut.appendChild(dt),h.checkClone=ut.cloneNode(!0).cloneNode(!0).lastChild.checked,ut.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!ut.cloneNode(!0).lastChild.defaultValue,ut.innerHTML="<option></option>",h.option=!!ut.lastChild;var mt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function vt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&M(t,e)?x.merge([t],n):n}function gt(t,e){for(var n=0,i=t.length;n<i;n++)X.set(t[n],"globalEval",!e||X.get(e[n],"globalEval"))}mt.tbody=mt.tfoot=mt.colgroup=mt.caption=mt.thead,mt.th=mt.td,h.option||(mt.optgroup=mt.option=[1,"<select multiple='multiple'>","</select>"]);var yt=/<|&#?\w+;/;function bt(t,e,n,i,r){for(var s,a,o,l,c,u,d=e.createDocumentFragment(),p=[],h=0,f=t.length;h<f;h++)if((s=t[h])||0===s)if("object"===b(s))x.merge(p,s.nodeType?[s]:s);else if(yt.test(s)){for(a=a||d.appendChild(e.createElement("div")),o=(ht.exec(s)||["",""])[1].toLowerCase(),l=mt[o]||mt._default,a.innerHTML=l[1]+x.htmlPrefilter(s)+l[2],u=l[0];u--;)a=a.lastChild;x.merge(p,a.childNodes),(a=d.firstChild).textContent=""}else p.push(e.createTextNode(s));for(d.textContent="",h=0;s=p[h++];)if(i&&-1<x.inArray(s,i))r&&r.push(s);else if(c=rt(s),a=vt(d.appendChild(s),"script"),c&&gt(a),n)for(u=0;s=a[u++];)ft.test(s.type||"")&&n.push(s);return d}var _t=/^key/,xt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,wt=/^([^.]*)(?:\.(.+)|)/;function kt(){return!0}function St(){return!1}function Ct(t,e){return t===function(){try{return v.activeElement}catch(t){}}()==("focus"===e)}function Et(t,e,n,i,r,s){var a,o;if("object"==typeof e){for(o in"string"!=typeof n&&(i=i||n,n=void 0),e)Et(t,o,n,i,e[o],s);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=St;else if(!r)return t;return 1===s&&(a=r,(r=function(t){return x().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=x.guid++)),t.each(function(){x.event.add(this,e,r,i,n)})}function Mt(t,e,n){n?(X.set(t,e,!1),x.event.add(t,e,{namespace:!1,handler:function(t){var i,s,a=X.get(this,e);if(1&t.isTrigger&&this[e]){if(a.length)(x.event.special[e]||{}).delegateType&&t.stopPropagation();else if(a=r.call(arguments),X.set(this,e,a),i=n(this,e),this[e](),a!==(s=X.get(this,e))||i?X.set(this,e,!1):s={},a!==s)return t.stopImmediatePropagation(),t.preventDefault(),s.value}else a.length&&(X.set(this,e,{value:x.event.trigger(x.extend(a[0],x.Event.prototype),a.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===X.get(t,e)&&x.event.add(t,e,kt)}x.event={global:{},add:function(t,e,n,i,r){var s,a,o,l,c,u,d,p,h,f,m,v=X.get(t);if(W(t))for(n.handler&&(n=(s=n).handler,r=s.selector),r&&x.find.matchesSelector(it,r),n.guid||(n.guid=x.guid++),(l=v.events)||(l=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return void 0!==x&&x.event.triggered!==e.type?x.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match($)||[""]).length;c--;)h=m=(o=wt.exec(e[c])||[])[1],f=(o[2]||"").split(".").sort(),h&&(d=x.event.special[h]||{},h=(r?d.delegateType:d.bindType)||h,d=x.event.special[h]||{},u=x.extend({type:h,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&x.expr.match.needsContext.test(r),namespace:f.join(".")},s),(p=l[h])||((p=l[h]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,i,f,a)||t.addEventListener&&t.addEventListener(h,a)),d.add&&(d.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?p.splice(p.delegateCount++,0,u):p.push(u),x.event.global[h]=!0)},remove:function(t,e,n,i,r){var s,a,o,l,c,u,d,p,h,f,m,v=X.hasData(t)&&X.get(t);if(v&&(l=v.events)){for(c=(e=(e||"").match($)||[""]).length;c--;)if(h=m=(o=wt.exec(e[c])||[])[1],f=(o[2]||"").split(".").sort(),h){for(d=x.event.special[h]||{},p=l[h=(i?d.delegateType:d.bindType)||h]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=p.length;s--;)u=p[s],!r&&m!==u.origType||n&&n.guid!==u.guid||o&&!o.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(p.splice(s,1),u.selector&&p.delegateCount--,d.remove&&d.remove.call(t,u));a&&!p.length&&(d.teardown&&!1!==d.teardown.call(t,f,v.handle)||x.removeEvent(t,h,v.handle),delete l[h])}else for(h in l)x.event.remove(t,h+e[c],n,i,!0);x.isEmptyObject(l)&&X.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,s,a,o=new Array(arguments.length),l=x.event.fix(t),c=(X.get(this,"events")||Object.create(null))[l.type]||[],u=x.event.special[l.type]||{};for(o[0]=l,e=1;e<arguments.length;e++)o[e]=arguments[e];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(a=x.event.handlers.call(this,l,c),e=0;(r=a[e++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==s.namespace&&!l.rnamespace.test(s.namespace)||(l.handleObj=s,l.data=s.data,void 0!==(i=((x.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,o))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(t,e){var n,i,r,s,a,o=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&1<=t.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(s=[],a={},n=0;n<l;n++)void 0===a[r=(i=e[n]).selector+" "]&&(a[r]=i.needsContext?-1<x(r,this).index(c):x.find(r,this,null,[c]).length),a[r]&&s.push(i);s.length&&o.push({elem:c,handlers:s})}return c=this,l<e.length&&o.push({elem:c,handlers:e.slice(l)}),o},addProp:function(t,e){Object.defineProperty(x.Event.prototype,t,{enumerable:!0,configurable:!0,get:f(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[x.expando]?t:new x.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return pt.test(e.type)&&e.click&&M(e,"input")&&Mt(e,"click",kt),!1},trigger:function(t){var e=this||t;return pt.test(e.type)&&e.click&&M(e,"input")&&Mt(e,"click"),!0},_default:function(t){var e=t.target;return pt.test(e.type)&&e.click&&M(e,"input")&&X.get(e,"click")||M(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},x.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},x.Event=function(t,e){if(!(this instanceof x.Event))return new x.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?kt:St,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&x.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:St,isPropagationStopped:St,isImmediatePropagationStopped:St,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=kt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=kt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=kt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&_t.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&xt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},function(t,e){x.event.special[t]={setup:function(){return Mt(this,t,Ct),!1},trigger:function(){return Mt(this,t),!0},delegateType:e}}),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){x.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=t.relatedTarget,r=t.handleObj;return i&&(i===this||x.contains(this,i))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),x.fn.extend({on:function(t,e,n,i){return Et(this,t,e,n,i)},one:function(t,e,n,i){return Et(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,x(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=St),this.each(function(){x.event.remove(this,t,n,e)})}});var At=/<script|<style|<link/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Dt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ot(t,e){return M(t,"table")&&M(11!==e.nodeType?e:e.firstChild,"tr")&&x(t).children("tbody")[0]||t}function Rt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Nt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function It(t,e){var n,i,r,s,a,o;if(1===e.nodeType){if(X.hasData(t)&&(o=X.get(t).events))for(r in X.remove(e,"handle events"),o)for(n=0,i=o[r].length;n<i;n++)x.event.add(e,r,o[r][n]);Y.hasData(t)&&(s=Y.access(t),a=x.extend({},s),Y.set(e,a))}}function $t(t,e,n,i){e=s(e);var r,a,o,l,c,u,d=0,p=t.length,m=p-1,v=e[0],g=f(v);if(g||1<p&&"string"==typeof v&&!h.checkClone&&Tt.test(v))return t.each(function(r){var s=t.eq(r);g&&(e[0]=v.call(this,r,s.html())),$t(s,e,n,i)});if(p&&(a=(r=bt(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=a),a||i)){for(l=(o=x.map(vt(r,"script"),Rt)).length;d<p;d++)c=r,d!==m&&(c=x.clone(c,!0,!0),l&&x.merge(o,vt(c,"script"))),n.call(t[d],c,d);if(l)for(u=o[o.length-1].ownerDocument,x.map(o,Nt),d=0;d<l;d++)c=o[d],ft.test(c.type||"")&&!X.access(c,"globalEval")&&x.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?x._evalUrl&&!c.noModule&&x._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):y(c.textContent.replace(Dt,""),c,u))}return t}function jt(t,e,n){for(var i,r=e?x.filter(e,t):t,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||x.cleanData(vt(i)),i.parentNode&&(n&&rt(i)&&gt(vt(i,"script")),i.parentNode.removeChild(i));return t}x.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var i,r,s,a,o,l,c,u=t.cloneNode(!0),d=rt(t);if(!(h.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||x.isXMLDoc(t)))for(a=vt(u),i=0,r=(s=vt(t)).length;i<r;i++)o=s[i],"input"===(c=(l=a[i]).nodeName.toLowerCase())&&pt.test(o.type)?l.checked=o.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=o.defaultValue);if(e)if(n)for(s=s||vt(t),a=a||vt(u),i=0,r=s.length;i<r;i++)It(s[i],a[i]);else It(t,u);return 0<(a=vt(u,"script")).length&&gt(a,!d&&vt(t,"script")),u},cleanData:function(t){for(var e,n,i,r=x.event.special,s=0;void 0!==(n=t[s]);s++)if(W(n)){if(e=n[X.expando]){if(e.events)for(i in e.events)r[i]?x.event.remove(n,i):x.removeEvent(n,i,e.handle);n[X.expando]=void 0}n[Y.expando]&&(n[Y.expando]=void 0)}}}),x.fn.extend({detach:function(t){return jt(this,t,!0)},remove:function(t){return jt(this,t)},text:function(t){return F(this,function(t){return void 0===t?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return $t(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ot(this,t).appendChild(t)})},prepend:function(){return $t(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ot(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return $t(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return $t(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(x.cleanData(vt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return x.clone(this,t,e)})},html:function(t){return F(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!At.test(t)&&!mt[(ht.exec(t)||["",""])[1].toLowerCase()]){t=x.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(x.cleanData(vt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return $t(this,arguments,function(e){var n=this.parentNode;x.inArray(this,t)<0&&(x.cleanData(vt(this)),n&&n.replaceChild(e,this))},t)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){x.fn[t]=function(t){for(var n,i=[],r=x(t),s=r.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),x(r[o])[e](n),a.apply(i,n.get());return this.pushStack(i)}});var Lt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),Vt=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Pt=function(t,e,n){var i,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];for(r in i=n.call(t),e)t.style[r]=s[r];return i},qt=new RegExp(nt.join("|"),"i");function zt(t,e,n){var i,r,s,a,o=t.style;return(n=n||Vt(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||rt(t)||(a=x.style(t,e)),!h.pixelBoxStyles()&&Lt.test(a)&&qt.test(e)&&(i=o.width,r=o.minWidth,s=o.maxWidth,o.minWidth=o.maxWidth=o.width=a,a=n.width,o.width=i,o.minWidth=r,o.maxWidth=s)),void 0!==a?a+"":a}function Ft(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",it.appendChild(c).appendChild(u);var e=t.getComputedStyle(u);i="1%"!==e.top,l=12===n(e.marginLeft),u.style.right="60%",a=36===n(e.right),r=36===n(e.width),u.style.position="absolute",s=12===n(u.offsetWidth/3),it.removeChild(c),u=null}}function n(t){return Math.round(parseFloat(t))}var i,r,s,a,o,l,c=v.createElement("div"),u=v.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===u.style.backgroundClip,x.extend(h,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),s},reliableTrDimensions:function(){var e,n,i,r;return null==o&&(e=v.createElement("table"),n=v.createElement("tr"),i=v.createElement("div"),e.style.cssText="position:absolute;left:-11111px",n.style.height="1px",i.style.height="9px",it.appendChild(e).appendChild(n).appendChild(i),r=t.getComputedStyle(n),o=3<parseInt(r.height),it.removeChild(e)),o}}))}();var Bt=["Webkit","Moz","ms"],Ht=v.createElement("div").style,Ut={};function Kt(t){return x.cssProps[t]||Ut[t]||(t in Ht?t:Ut[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Bt.length;n--;)if((t=Bt[n]+e)in Ht)return t}(t)||t)}var Wt=/^(none|table(?!-c[ea]).+)/,Gt=/^--/,Xt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:"0",fontWeight:"400"};function Jt(t,e,n){var i=et.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function Zt(t,e,n,i,r,s){var a="width"===e?1:0,o=0,l=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=x.css(t,n+nt[a],!0,r)),i?("content"===n&&(l-=x.css(t,"padding"+nt[a],!0,r)),"margin"!==n&&(l-=x.css(t,"border"+nt[a]+"Width",!0,r))):(l+=x.css(t,"padding"+nt[a],!0,r),"padding"!==n?l+=x.css(t,"border"+nt[a]+"Width",!0,r):o+=x.css(t,"border"+nt[a]+"Width",!0,r));return!i&&0<=s&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-s-l-o-.5))||0),l}function Qt(t,e,n){var i=Vt(t),r=(!h.boxSizingReliable()||n)&&"border-box"===x.css(t,"boxSizing",!1,i),s=r,a=zt(t,e,i),o="offset"+e[0].toUpperCase()+e.slice(1);if(Lt.test(a)){if(!n)return a;a="auto"}return(!h.boxSizingReliable()&&r||!h.reliableTrDimensions()&&M(t,"tr")||"auto"===a||!parseFloat(a)&&"inline"===x.css(t,"display",!1,i))&&t.getClientRects().length&&(r="border-box"===x.css(t,"boxSizing",!1,i),(s=o in t)&&(a=t[o])),(a=parseFloat(a)||0)+Zt(t,e,n||(r?"border":"content"),s,i,a)+"px"}function te(t,e,n,i,r){return new te.prototype.init(t,e,n,i,r)}x.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=zt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,a,o=K(e),l=Gt.test(e),c=t.style;if(l||(e=Kt(o)),a=x.cssHooks[e]||x.cssHooks[o],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(t,!1,i))?r:c[e];"string"==(s=typeof n)&&(r=et.exec(n))&&r[1]&&(n=ot(t,e,r),s="number"),null!=n&&n==n&&("number"!==s||l||(n+=r&&r[3]||(x.cssNumber[o]?"":"px")),h.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(l?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,i){var r,s,a,o=K(e);return Gt.test(e)||(e=Kt(o)),(a=x.cssHooks[e]||x.cssHooks[o])&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=zt(t,e,i)),"normal"===r&&e in Yt&&(r=Yt[e]),""===n||n?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),x.each(["height","width"],function(t,e){x.cssHooks[e]={get:function(t,n,i){if(n)return!Wt.test(x.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Qt(t,e,i):Pt(t,Xt,function(){return Qt(t,e,i)})},set:function(t,n,i){var r,s=Vt(t),a=!h.scrollboxSize()&&"absolute"===s.position,o=(a||i)&&"border-box"===x.css(t,"boxSizing",!1,s),l=i?Zt(t,e,i,o,s):0;return o&&a&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(s[e])-Zt(t,e,"border",!1,s)-.5)),l&&(r=et.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=x.css(t,e)),Jt(0,n,l)}}}),x.cssHooks.marginLeft=Ft(h.reliableMarginLeft,function(t,e){if(e)return(parseFloat(zt(t,"marginLeft"))||t.getBoundingClientRect().left-Pt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(t,e){x.cssHooks[t+e]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+nt[i]+e]=s[i]||s[i-2]||s[0];return r}},"margin"!==t&&(x.cssHooks[t+e].set=Jt)}),x.fn.extend({css:function(t,e){return F(this,function(t,e,n){var i,r,s={},a=0;if(Array.isArray(e)){for(i=Vt(t),r=e.length;a<r;a++)s[e[a]]=x.css(t,e[a],!1,i);return s}return void 0!==n?x.style(t,e,n):x.css(t,e)},t,e,1<arguments.length)}}),((x.Tween=te).prototype={constructor:te,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||x.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(x.cssNumber[n]?"":"px")},cur:function(){var t=te.propHooks[this.prop];return t&&t.get?t.get(this):te.propHooks._default.get(this)},run:function(t){var e,n=te.propHooks[this.prop];return this.options.duration?this.pos=e=x.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):te.propHooks._default.set(this),this}}).init.prototype=te.prototype,(te.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=x.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){x.fx.step[t.prop]?x.fx.step[t.prop](t):1!==t.elem.nodeType||!x.cssHooks[t.prop]&&null==t.elem.style[Kt(t.prop)]?t.elem[t.prop]=t.now:x.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=te.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},x.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},x.fx=te.prototype.init,x.fx.step={};var ee,ne,ie,re,se=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;function oe(){ne&&(!1===v.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(oe):t.setTimeout(oe,x.fx.interval),x.fx.tick())}function le(){return t.setTimeout(function(){ee=void 0}),ee=Date.now()}function ce(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=nt[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function ue(t,e,n){for(var i,r=(de.tweeners[e]||[]).concat(de.tweeners["*"]),s=0,a=r.length;s<a;s++)if(i=r[s].call(n,e,t))return i}function de(t,e,n){var i,r,s=0,a=de.prefilters.length,o=x.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=ee||le(),n=Math.max(0,c.startTime+c.duration-e),i=1-(n/c.duration||0),s=0,a=c.tweens.length;s<a;s++)c.tweens[s].run(i);return o.notifyWith(t,[c,i,n]),i<1&&a?n:(a||o.notifyWith(t,[c,1,0]),o.resolveWith(t,[c]),!1)},c=o.promise({elem:t,props:x.extend({},e),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},n),originalProperties:e,originalOptions:n,startTime:ee||le(),duration:n.duration,tweens:[],createTween:function(e,n){var i=x.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)c.tweens[n].run(1);return e?(o.notifyWith(t,[c,1,0]),o.resolveWith(t,[c,e])):o.rejectWith(t,[c,e]),this}}),u=c.props;for(function(t,e){var n,i,r,s,a;for(n in t)if(r=e[i=K(n)],s=t[n],Array.isArray(s)&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),(a=x.cssHooks[i])&&"expand"in a)for(n in s=a.expand(s),delete t[i],s)n in t||(t[n]=s[n],e[n]=r);else e[i]=r}(u,c.opts.specialEasing);s<a;s++)if(i=de.prefilters[s].call(c,t,u,c.opts))return f(i.stop)&&(x._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return x.map(u,ue,c),f(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),x.fx.timer(x.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}x.Animation=x.extend(de,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ot(n.elem,t,et.exec(e),n),n}]},tweener:function(t,e){f(t)?(e=t,t=["*"]):t=t.match($);for(var n,i=0,r=t.length;i<r;i++)n=t[i],de.tweeners[n]=de.tweeners[n]||[],de.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,s,a,o,l,c,u,d="width"in e||"height"in e,p=this,h={},f=t.style,m=t.nodeType&&at(t),v=X.get(t,"fxshow");for(i in n.queue||(null==(a=x._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,o=a.empty.fire,a.empty.fire=function(){a.unqueued||o()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,x.queue(t,"fx").length||a.empty.fire()})})),e)if(r=e[i],se.test(r)){if(delete e[i],s=s||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!v||void 0===v[i])continue;m=!0}h[i]=v&&v[i]||x.style(t,i)}if((l=!x.isEmptyObject(e))||!x.isEmptyObject(h))for(i in d&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=v&&v.display)&&(c=X.get(t,"display")),"none"===(u=x.css(t,"display"))&&(c?u=c:(ct([t],!0),c=t.style.display||c,u=x.css(t,"display"),ct([t]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===x.css(t,"float")&&(l||(p.done(function(){f.display=c}),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",p.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1,h)l||(v?"hidden"in v&&(m=v.hidden):v=X.access(t,"fxshow",{display:c}),s&&(v.hidden=!m),m&&ct([t],!0),p.done(function(){for(i in m||ct([t]),X.remove(t,"fxshow"),h)x.style(t,i,h[i])})),l=ue(m?v[i]:0,i,p),i in v||(v[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?de.prefilters.unshift(t):de.prefilters.push(t)}}),x.speed=function(t,e,n){var i=t&&"object"==typeof t?x.extend({},t):{complete:n||!n&&e||f(t)&&t,duration:t,easing:n&&e||e&&!f(e)&&e};return x.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in x.fx.speeds?i.duration=x.fx.speeds[i.duration]:i.duration=x.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){f(i.old)&&i.old.call(this),i.queue&&x.dequeue(this,i.queue)},i},x.fn.extend({fadeTo:function(t,e,n,i){return this.filter(at).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=x.isEmptyObject(t),s=x.speed(e,n,i),a=function(){var e=de(this,x.extend({},t),s);(r||X.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||!1===s.queue?this.each(a):this.queue(s.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",s=x.timers,a=X.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&ae.test(r)&&i(a[r]);for(r=s.length;r--;)s[r].elem!==this||null!=t&&s[r].queue!==t||(s[r].anim.stop(n),e=!1,s.splice(r,1));!e&&n||x.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=X.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],s=x.timers,a=i?i.length:0;for(n.finish=!0,x.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<a;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),x.each(["toggle","show","hide"],function(t,e){var n=x.fn[e];x.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ce(e,!0),t,i,r)}}),x.each({slideDown:ce("show"),slideUp:ce("hide"),slideToggle:ce("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){x.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),x.timers=[],x.fx.tick=function(){var t,e=0,n=x.timers;for(ee=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||x.fx.stop(),ee=void 0},x.fx.timer=function(t){x.timers.push(t),x.fx.start()},x.fx.interval=13,x.fx.start=function(){ne||(ne=!0,oe())},x.fx.stop=function(){ne=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(e,n){return e=x.fx&&x.fx.speeds[e]||e,n=n||"fx",this.queue(n,function(n,i){var r=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(r)}})},ie=v.createElement("input"),re=v.createElement("select").appendChild(v.createElement("option")),ie.type="checkbox",h.checkOn=""!==ie.value,h.optSelected=re.selected,(ie=v.createElement("input")).value="t",ie.type="radio",h.radioValue="t"===ie.value;var pe,he=x.expr.attrHandle;x.fn.extend({attr:function(t,e){return F(this,x.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){x.removeAttr(this,t)})}}),x.extend({attr:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?x.prop(t,e,n):(1===s&&x.isXMLDoc(t)||(r=x.attrHooks[e.toLowerCase()]||(x.expr.match.bool.test(e)?pe:void 0)),void 0!==n?null===n?void x.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=x.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!h.radioValue&&"radio"===e&&M(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match($);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),pe={set:function(t,e,n){return!1===e?x.removeAttr(t,n):t.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(t,e){var n=he[e]||x.find.attr;he[e]=function(t,e,i){var r,s,a=e.toLowerCase();return i||(s=he[a],he[a]=r,r=null!=n(t,e,i)?a:null,he[a]=s),r}});var fe=/^(?:input|select|textarea|button)$/i,me=/^(?:a|area)$/i;function ve(t){return(t.match($)||[]).join(" ")}function ge(t){return t.getAttribute&&t.getAttribute("class")||""}function ye(t){return Array.isArray(t)?t:"string"==typeof t&&t.match($)||[]}x.fn.extend({prop:function(t,e){return F(this,x.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[x.propFix[t]||t]})}}),x.extend({prop:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&x.isXMLDoc(t)||(e=x.propFix[e]||e,r=x.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=x.find.attr(t,"tabindex");return e?parseInt(e,10):fe.test(t.nodeName)||me.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),h.optSelected||(x.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(t){var e,n,i,r,s,a,o,l=0;if(f(t))return this.each(function(e){x(this).addClass(t.call(this,e,ge(this)))});if((e=ye(t)).length)for(;n=this[l++];)if(r=ge(n),i=1===n.nodeType&&" "+ve(r)+" "){for(a=0;s=e[a++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");r!==(o=ve(i))&&n.setAttribute("class",o)}return this},removeClass:function(t){var e,n,i,r,s,a,o,l=0;if(f(t))return this.each(function(e){x(this).removeClass(t.call(this,e,ge(this)))});if(!arguments.length)return this.attr("class","");if((e=ye(t)).length)for(;n=this[l++];)if(r=ge(n),i=1===n.nodeType&&" "+ve(r)+" "){for(a=0;s=e[a++];)for(;-1<i.indexOf(" "+s+" ");)i=i.replace(" "+s+" "," ");r!==(o=ve(i))&&n.setAttribute("class",o)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):f(t)?this.each(function(n){x(this).toggleClass(t.call(this,n,ge(this),e),e)}):this.each(function(){var e,r,s,a;if(i)for(r=0,s=x(this),a=ye(t);e=a[r++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else void 0!==t&&"boolean"!==n||((e=ge(this))&&X.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":X.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+ve(ge(n))+" ").indexOf(e))return!0;return!1}});var be=/\r/g;x.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=f(t),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,x(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=x.map(r,function(t){return null==t?"":t+""})),(e=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=x.valHooks[r.type]||x.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(be,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(t){var e=x.find.attr(t,"value");return null!=e?e:ve(x.text(t))}},select:{get:function(t){var e,n,i,r=t.options,s=t.selectedIndex,a="select-one"===t.type,o=a?null:[],l=a?s+1:r.length;for(i=s<0?l:a?s:0;i<l;i++)if(((n=r[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!M(n.parentNode,"optgroup"))){if(e=x(n).val(),a)return e;o.push(e)}return o},set:function(t,e){for(var n,i,r=t.options,s=x.makeArray(e),a=r.length;a--;)((i=r[a]).selected=-1<x.inArray(x.valHooks.option.get(i),s))&&(n=!0);return n||(t.selectedIndex=-1),s}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<x.inArray(x(t).val(),e)}},h.checkOn||(x.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),h.focusin="onfocusin"in t;var _e=/^(?:focusinfocus|focusoutblur)$/,xe=function(t){t.stopPropagation()};x.extend(x.event,{trigger:function(e,n,i,r){var s,a,o,l,c,d,p,h,g=[i||v],y=u.call(e,"type")?e.type:e,b=u.call(e,"namespace")?e.namespace.split("."):[];if(a=h=o=i=i||v,3!==i.nodeType&&8!==i.nodeType&&!_e.test(y+x.event.triggered)&&(-1<y.indexOf(".")&&(y=(b=y.split(".")).shift(),b.sort()),c=y.indexOf(":")<0&&"on"+y,(e=e[x.expando]?e:new x.Event(y,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=b.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:x.makeArray(n,[e]),p=x.event.special[y]||{},r||!p.trigger||!1!==p.trigger.apply(i,n))){if(!r&&!p.noBubble&&!m(i)){for(l=p.delegateType||y,_e.test(l+y)||(a=a.parentNode);a;a=a.parentNode)g.push(a),o=a;o===(i.ownerDocument||v)&&g.push(o.defaultView||o.parentWindow||t)}for(s=0;(a=g[s++])&&!e.isPropagationStopped();)h=a,e.type=1<s?l:p.bindType||y,(d=(X.get(a,"events")||Object.create(null))[e.type]&&X.get(a,"handle"))&&d.apply(a,n),(d=c&&a[c])&&d.apply&&W(a)&&(e.result=d.apply(a,n),!1===e.result&&e.preventDefault());return e.type=y,r||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(g.pop(),n)||!W(i)||c&&f(i[y])&&!m(i)&&((o=i[c])&&(i[c]=null),x.event.triggered=y,e.isPropagationStopped()&&h.addEventListener(y,xe),i[y](),e.isPropagationStopped()&&h.removeEventListener(y,xe),x.event.triggered=void 0,o&&(i[c]=o)),e.result}},simulate:function(t,e,n){var i=x.extend(new x.Event,n,{type:t,isSimulated:!0});x.event.trigger(i,null,e)}}),x.fn.extend({trigger:function(t,e){return this.each(function(){x.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return x.event.trigger(t,e,n,!0)}}),h.focusin||x.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){x.event.simulate(e,t.target,x.event.fix(t))};x.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,r=X.access(i,e);r||i.addEventListener(t,n,!0),X.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=X.access(i,e)-1;r?X.access(i,e,r):(i.removeEventListener(t,n,!0),X.remove(i,e))}}});var we=t.location,ke={guid:Date.now()},Se=/\?/;x.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+e),n};var Ce=/\[\]$/,Ee=/\r?\n/g,Me=/^(?:submit|button|image|reset|file)$/i,Ae=/^(?:input|select|textarea|keygen)/i;function Te(t,e,n,i){var r;if(Array.isArray(e))x.each(e,function(e,r){n||Ce.test(t)?i(t,r):Te(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)});else if(n||"object"!==b(e))i(t,e);else for(r in e)Te(t+"["+r+"]",e[r],n,i)}x.param=function(t,e){var n,i=[],r=function(t,e){var n=f(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!x.isPlainObject(t))x.each(t,function(){r(this.name,this.value)});else for(n in t)Te(n,t[n],e,r);return i.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=x.prop(this,"elements");return t?x.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!x(this).is(":disabled")&&Ae.test(this.nodeName)&&!Me.test(t)&&(this.checked||!pt.test(t))}).map(function(t,e){var n=x(this).val();return null==n?null:Array.isArray(n)?x.map(n,function(t){return{name:e.name,value:t.replace(Ee,"\r\n")}}):{name:e.name,value:n.replace(Ee,"\r\n")}}).get()}});var De=/%20/g,Oe=/#.*$/,Re=/([?&])_=[^&]*/,Ne=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ie=/^(?:GET|HEAD)$/,$e=/^\/\//,je={},Le={},Ve="*/".concat("*"),Pe=v.createElement("a");function qe(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,s=e.toLowerCase().match($)||[];if(f(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function ze(t,e,n,i){var r={},s=t===Le;function a(o){var l;return r[o]=!0,x.each(t[o]||[],function(t,o){var c=o(e,n,i);return"string"!=typeof c||s||r[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),a(c),!1)}),l}return a(e.dataTypes[0])||!r["*"]&&a("*")}function Fe(t,e){var n,i,r=x.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&x.extend(!0,t,i),t}Pe.href=we.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:we.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(we.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ve,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Fe(Fe(t,x.ajaxSettings),e):Fe(x.ajaxSettings,t)},ajaxPrefilter:qe(je),ajaxTransport:qe(Le),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0),n=n||{};var i,r,s,a,o,l,c,u,d,p,h=x.ajaxSetup({},n),f=h.context||h,m=h.context&&(f.nodeType||f.jquery)?x(f):x.event,g=x.Deferred(),y=x.Callbacks("once memory"),b=h.statusCode||{},_={},w={},k="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(c){if(!a)for(a={};e=Ne.exec(s);)a[e[1].toLowerCase()+" "]=(a[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=a[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(t,e){return null==c&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,_[t]=e),this},overrideMimeType:function(t){return null==c&&(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)S.always(t[S.status]);else for(e in t)b[e]=[b[e],t[e]];return this},abort:function(t){var e=t||k;return i&&i.abort(e),C(0,e),this}};if(g.promise(S),h.url=((e||h.url||we.href)+"").replace($e,we.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match($)||[""],null==h.crossDomain){l=v.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=Pe.protocol+"//"+Pe.host!=l.protocol+"//"+l.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=x.param(h.data,h.traditional)),ze(je,h,n,S),c)return S;for(d in(u=x.event&&h.global)&&0==x.active++&&x.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Ie.test(h.type),r=h.url.replace(Oe,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(De,"+")):(p=h.url.slice(r.length),h.data&&(h.processData||"string"==typeof h.data)&&(r+=(Se.test(r)?"&":"?")+h.data,delete h.data),!1===h.cache&&(r=r.replace(Re,"$1"),p=(Se.test(r)?"&":"?")+"_="+ke.guid+++p),h.url=r+p),h.ifModified&&(x.lastModified[r]&&S.setRequestHeader("If-Modified-Since",x.lastModified[r]),x.etag[r]&&S.setRequestHeader("If-None-Match",x.etag[r])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&S.setRequestHeader("Content-Type",h.contentType),S.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ve+"; q=0.01":""):h.accepts["*"]),h.headers)S.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(!1===h.beforeSend.call(f,S,h)||c))return S.abort();if(k="abort",y.add(h.complete),S.done(h.success),S.fail(h.error),i=ze(Le,h,n,S)){if(S.readyState=1,u&&m.trigger("ajaxSend",[S,h]),c)return S;h.async&&0<h.timeout&&(o=t.setTimeout(function(){S.abort("timeout")},h.timeout));try{c=!1,i.send(_,C)}catch(e){if(c)throw e;C(-1,e)}}else C(-1,"No Transport");function C(e,n,a,l){var d,p,v,_,w,k=n;c||(c=!0,o&&t.clearTimeout(o),i=void 0,s=l||"",S.readyState=0<e?4:0,d=200<=e&&e<300||304===e,a&&(_=function(t,e,n){for(var i,r,s,a,o=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in o)if(o[r]&&o[r].test(i)){l.unshift(r);break}if(l[0]in n)s=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){s=r;break}a||(a=r)}s=s||a}if(s)return s!==l[0]&&l.unshift(s),n[s]}(h,S,a)),!d&&-1<x.inArray("script",h.dataTypes)&&(h.converters["text script"]=function(){}),_=function(t,e,n,i){var r,s,a,o,l,c={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(s=u.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(a=c[l+" "+s]||c["* "+s]))for(r in c)if((o=r.split(" "))[1]===s&&(a=c[l+" "+o[0]]||c["* "+o[0]])){!0===a?a=c[r]:!0!==c[r]&&(s=o[0],u.unshift(o[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}(h,_,S,d),d?(h.ifModified&&((w=S.getResponseHeader("Last-Modified"))&&(x.lastModified[r]=w),(w=S.getResponseHeader("etag"))&&(x.etag[r]=w)),204===e||"HEAD"===h.type?k="nocontent":304===e?k="notmodified":(k=_.state,p=_.data,d=!(v=_.error))):(v=k,!e&&k||(k="error",e<0&&(e=0))),S.status=e,S.statusText=(n||k)+"",d?g.resolveWith(f,[p,k,S]):g.rejectWith(f,[S,k,v]),S.statusCode(b),b=void 0,u&&m.trigger(d?"ajaxSuccess":"ajaxError",[S,h,d?p:v]),y.fireWith(f,[S,k]),u&&(m.trigger("ajaxComplete",[S,h]),--x.active||x.event.trigger("ajaxStop")))}return S},getJSON:function(t,e,n){return x.get(t,e,n,"json")},getScript:function(t,e){return x.get(t,void 0,e,"script")}}),x.each(["get","post"],function(t,e){x[e]=function(t,n,i,r){return f(n)&&(r=r||i,i=n,n=void 0),x.ajax(x.extend({url:t,type:e,dataType:r,data:n,success:i},x.isPlainObject(t)&&t))}}),x.ajaxPrefilter(function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),x._evalUrl=function(t,e,n){return x.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){x.globalEval(t,e,n)}})},x.fn.extend({wrapAll:function(t){var e;return this[0]&&(f(t)&&(t=t.call(this[0])),e=x(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return f(t)?this.each(function(e){x(this).wrapInner(t.call(this,e))}):this.each(function(){var e=x(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=f(t);return this.each(function(n){x(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(t){return!x.expr.pseudos.visible(t)},x.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var Be={0:200,1223:204},He=x.ajaxSettings.xhr();h.cors=!!He&&"withCredentials"in He,h.ajax=He=!!He,x.ajaxTransport(function(e){var n,i;if(h.cors||He&&!e.crossDomain)return{send:function(r,s){var a,o=e.xhr();if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)o[a]=e.xhrFields[a];for(a in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)o.setRequestHeader(a,r[a]);n=function(t){return function(){n&&(n=i=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===t?o.abort():"error"===t?"number"!=typeof o.status?s(0,"error"):s(o.status,o.statusText):s(Be[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=n(),i=o.onerror=o.ontimeout=n("error"),void 0!==o.onabort?o.onabort=i:o.onreadystatechange=function(){4===o.readyState&&t.setTimeout(function(){n&&i()})},n=n("abort");try{o.send(e.hasContent&&e.data||null)}catch(r){if(n)throw r}},abort:function(){n&&n()}}}),x.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return x.globalEval(t),t}}}),x.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),x.ajaxTransport("script",function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,r){e=x("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),v.head.appendChild(e[0])},abort:function(){n&&n()}}});var Ue,Ke=[],We=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ke.pop()||x.expando+"_"+ke.guid++;return this[t]=!0,t}}),x.ajaxPrefilter("json jsonp",function(e,n,i){var r,s,a,o=!1!==e.jsonp&&(We.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&We.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=f(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(We,"$1"+r):!1!==e.jsonp&&(e.url+=(Se.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||x.error(r+" was not called"),a[0]},e.dataTypes[0]="json",s=t[r],t[r]=function(){a=arguments},i.always(function(){void 0===s?x(t).removeProp(r):t[r]=s,e[r]&&(e.jsonpCallback=n.jsonpCallback,Ke.push(r)),a&&f(s)&&s(a[0]),a=s=void 0}),"script"}),h.createHTMLDocument=((Ue=v.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ue.childNodes.length),x.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(h.createHTMLDocument?((i=(e=v.implementation.createHTMLDocument("")).createElement("base")).href=v.location.href,e.head.appendChild(i)):e=v),s=!n&&[],(r=A.exec(t))?[e.createElement(r[1])]:(r=bt([t],e,s),s&&s.length&&x(s).remove(),x.merge([],r.childNodes)));var i,r,s},x.fn.load=function(t,e,n){var i,r,s,a=this,o=t.indexOf(" ");return-1<o&&(i=ve(t.slice(o)),t=t.slice(0,o)),f(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),0<a.length&&x.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){s=arguments,a.html(i?x("<div>").append(x.parseHTML(t)).find(i):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,s||[t.responseText,e,t])})}),this},x.expr.pseudos.animated=function(t){return x.grep(x.timers,function(e){return t===e.elem}).length},x.offset={setOffset:function(t,e,n){var i,r,s,a,o,l,c=x.css(t,"position"),u=x(t),d={};"static"===c&&(t.style.position="relative"),o=u.offset(),s=x.css(t,"top"),l=x.css(t,"left"),("absolute"===c||"fixed"===c)&&-1<(s+l).indexOf("auto")?(a=(i=u.position()).top,r=i.left):(a=parseFloat(s)||0,r=parseFloat(l)||0),f(e)&&(e=e.call(t,n,x.extend({},o))),null!=e.top&&(d.top=e.top-o.top+a),null!=e.left&&(d.left=e.left-o.left+r),"using"in e?e.using.call(t,d):("number"==typeof d.top&&(d.top+="px"),"number"==typeof d.left&&(d.left+="px"),u.css(d))}},x.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){x.offset.setOffset(this,t,e)});var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===x.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===x.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=x(t).offset()).top+=x.css(t,"borderTopWidth",!0),r.left+=x.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-x.css(i,"marginTop",!0),left:e.left-r.left-x.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===x.css(t,"position");)t=t.offsetParent;return t||it})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;x.fn[t]=function(i){return F(this,function(t,i,r){var s;if(m(t)?s=t:9===t.nodeType&&(s=t.defaultView),void 0===r)return s?s[e]:t[i];s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):t[i]=r},t,i,arguments.length)}}),x.each(["top","left"],function(t,e){x.cssHooks[e]=Ft(h.pixelPosition,function(t,n){if(n)return n=zt(t,e),Lt.test(n)?x(t).position()[e]+"px":n})}),x.each({Height:"height",Width:"width"},function(t,e){x.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){x.fn[i]=function(r,s){var a=arguments.length&&(n||"boolean"!=typeof r),o=n||(!0===r||!0===s?"margin":"border");return F(this,function(e,n,r){var s;return m(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===r?x.css(e,n,o):x.style(e,n,r,o)},e,a?r:void 0,a)}})}),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){x.fn[e]=function(t){return this.on(e,t)}}),x.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){x.fn[e]=function(t,n){return 0<arguments.length?this.on(e,null,t,n):this.trigger(e)}});var Ge=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;x.proxy=function(t,e){var n,i,s;if("string"==typeof e&&(n=t[e],e=t,t=n),f(t))return i=r.call(arguments,2),(s=function(){return t.apply(e||this,i.concat(r.call(arguments)))}).guid=t.guid=t.guid||x.guid++,s},x.holdReady=function(t){t?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=M,x.isFunction=f,x.isWindow=m,x.camelCase=K,x.type=b,x.now=Date.now,x.isNumeric=function(t){var e=x.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},x.trim=function(t){return null==t?"":(t+"").replace(Ge,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return x});var Xe=t.jQuery,Ye=t.$;return x.noConflict=function(e){return t.$===x&&(t.$=Ye),e&&t.jQuery===x&&(t.jQuery=Xe),x},void 0===e&&(t.jQuery=t.$=x),x}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).VueRouter=e()}(this,function(){"use strict";function t(t,e){if(!t)throw new Error("[vue-router] "+e)}function e(t,e){t||"undefined"!=typeof console&&console.warn("[vue-router] "+e)}function n(t){return Object.prototype.toString.call(t).indexOf("Error")>-1}function i(t,e){return e instanceof t||e&&(e.name===t.name||e._name===t._name)}function r(t,e){for(var n in e)t[n]=e[n];return t}var s={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(t,n){var i=n.props,s=n.children,a=n.parent,o=n.data;o.routerView=!0;for(var l=a.$createElement,c=i.name,u=a.$route,d=a._routerViewCache||(a._routerViewCache={}),p=0,h=!1;a&&a._routerRoot!==a;){var f=a.$vnode&&a.$vnode.data;f&&(f.routerView&&p++,f.keepAlive&&a._inactive&&(h=!0)),a=a.$parent}if(o.routerViewDepth=p,h)return l(d[c],o,s);var m=u.matched[p];if(!m)return d[c]=null,l();var v=d[c]=m.components[c];o.registerRouteInstance=function(t,e){var n=m.instances[c];(e&&n!==t||!e&&n===t)&&(m.instances[c]=e)},(o.hook||(o.hook={})).prepatch=function(t,e){m.instances[c]=e.componentInstance},o.hook.init=function(t){t.data.keepAlive&&t.componentInstance&&t.componentInstance!==m.instances[c]&&(m.instances[c]=t.componentInstance)};var g=o.props=function(t,n){switch(typeof n){case"undefined":return;case"object":return n;case"function":return n(t);case"boolean":return n?t.params:void 0;default:e(!1,'props in "'+t.path+'" is a '+typeof n+", expecting an object, function or boolean.")}}(u,m.props&&m.props[c]);if(g){g=o.props=r({},g);var y=o.attrs=o.attrs||{};for(var b in g)v.props&&b in v.props||(y[b]=g[b],delete g[b])}return l(v,o,s)}};var a=/[!'()*]/g,o=function(t){return"%"+t.charCodeAt(0).toString(16)},l=/%2C/g,c=function(t){return encodeURIComponent(t).replace(a,o).replace(l,",")},u=decodeURIComponent;function d(t){var e={};return(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach(function(t){var n=t.replace(/\+/g," ").split("="),i=u(n.shift()),r=n.length>0?u(n.join("=")):null;void 0===e[i]?e[i]=r:Array.isArray(e[i])?e[i].push(r):e[i]=[e[i],r]}),e):e}function p(t){var e=t?Object.keys(t).map(function(e){var n=t[e];if(void 0===n)return"";if(null===n)return c(e);if(Array.isArray(n)){var i=[];return n.forEach(function(t){void 0!==t&&(null===t?i.push(c(e)):i.push(c(e)+"="+c(t)))}),i.join("&")}return c(e)+"="+c(n)}).filter(function(t){return t.length>0}).join("&"):null;return e?"?"+e:""}var h=/\/?$/;function f(t,e,n,i){var r=i&&i.options.stringifyQuery,s=e.query||{};try{s=m(s)}catch(t){}var a={name:e.name||t&&t.name,meta:t&&t.meta||{},path:e.path||"/",hash:e.hash||"",query:s,params:e.params||{},fullPath:g(e,r),matched:t?function(t){var e=[];for(;t;)e.unshift(t),t=t.parent;return e}(t):[]};return n&&(a.redirectedFrom=g(n,r)),Object.freeze(a)}function m(t){if(Array.isArray(t))return t.map(m);if(t&&"object"==typeof t){var e={};for(var n in t)e[n]=m(t[n]);return e}return t}var v=f(null,{path:"/"});function g(t,e){var n=t.path,i=t.query;void 0===i&&(i={});var r=t.hash;return void 0===r&&(r=""),(n||"/")+(e||p)(i)+r}function y(t,e){return e===v?t===e:!!e&&(t.path&&e.path?t.path.replace(h,"")===e.path.replace(h,"")&&t.hash===e.hash&&b(t.query,e.query):!(!t.name||!e.name)&&(t.name===e.name&&t.hash===e.hash&&b(t.query,e.query)&&b(t.params,e.params)))}function b(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),!t||!e)return t===e;var n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every(function(n){var i=t[n],r=e[n];return"object"==typeof i&&"object"==typeof r?b(i,r):String(i)===String(r)})}function _(t,e,n){var i=t.charAt(0);if("/"===i)return t;if("?"===i||"#"===i)return e+t;var r=e.split("/");n&&r[r.length-1]||r.pop();for(var s=t.replace(/^\//,"").split("/"),a=0;a<s.length;a++){var o=s[a];".."===o?r.pop():"."!==o&&r.push(o)}return""!==r[0]&&r.unshift(""),r.join("/")}function x(t){return t.replace(/\/\//g,"/")}var w=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},k=L,S=T,C=function(t,e){return O(T(t,e))},E=O,M=j,A=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function T(t,e){for(var n,i=[],r=0,s=0,a="",o=e&&e.delimiter||"/";null!=(n=A.exec(t));){var l=n[0],c=n[1],u=n.index;if(a+=t.slice(s,u),s=u+l.length,c)a+=c[1];else{var d=t[s],p=n[2],h=n[3],f=n[4],m=n[5],v=n[6],g=n[7];a&&(i.push(a),a="");var y=null!=p&&null!=d&&d!==p,b="+"===v||"*"===v,_="?"===v||"*"===v,x=n[2]||o,w=f||m;i.push({name:h||r++,prefix:p||"",delimiter:x,optional:_,repeat:b,partial:y,asterisk:!!g,pattern:w?N(w):g?".*":"[^"+R(x)+"]+?"})}}return s<t.length&&(a+=t.substr(s)),a&&i.push(a),i}function D(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function O(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,i){for(var r="",s=n||{},a=(i||{}).pretty?D:encodeURIComponent,o=0;o<t.length;o++){var l=t[o];if("string"!=typeof l){var c,u=s[l.name];if(null==u){if(l.optional){l.partial&&(r+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(w(u)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<u.length;d++){if(c=a(u[d]),!e[o].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(c)+"`");r+=(0===d?l.prefix:l.delimiter)+c}}else{if(c=l.asterisk?encodeURI(u).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}):a(u),!e[o].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+c+'"');r+=l.prefix+c}}else r+=l}return r}}function R(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function N(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function I(t,e){return t.keys=e,t}function $(t){return t.sensitive?"":"i"}function j(t,e,n){w(e)||(n=e||n,e=[]);for(var i=(n=n||{}).strict,r=!1!==n.end,s="",a=0;a<t.length;a++){var o=t[a];if("string"==typeof o)s+=R(o);else{var l=R(o.prefix),c="(?:"+o.pattern+")";e.push(o),o.repeat&&(c+="(?:"+l+c+")*"),s+=c=o.optional?o.partial?l+"("+c+")?":"(?:"+l+"("+c+"))?":l+"("+c+")"}}var u=R(n.delimiter||"/"),d=s.slice(-u.length)===u;return i||(s=(d?s.slice(0,-u.length):s)+"(?:"+u+"(?=$))?"),s+=r?"$":i&&d?"":"(?="+u+"|$)",I(new RegExp("^"+s,$(n)),e)}function L(t,e,n){return w(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return I(t,e)}(t,e):w(t)?function(t,e,n){for(var i=[],r=0;r<t.length;r++)i.push(L(t[r],e,n).source);return I(new RegExp("(?:"+i.join("|")+")",$(n)),e)}(t,e,n):function(t,e,n){return j(T(t,n),e,n)}(t,e,n)}k.parse=S,k.compile=C,k.tokensToFunction=E,k.tokensToRegExp=M;var V=Object.create(null);function P(t,n,i){n=n||{};try{var r=V[t]||(V[t]=k.compile(t));return n.pathMatch&&(n[0]=n.pathMatch),r(n,{pretty:!0})}catch(t){return e(!1,"missing param for "+i+": "+t.message),""}finally{delete n[0]}}function q(t,n,i,s){var a="string"==typeof t?{path:t}:t;if(a._normalized)return a;if(a.name)return r({},t);if(!a.path&&a.params&&n){(a=r({},a))._normalized=!0;var o=r(r({},n.params),a.params);if(n.name)a.name=n.name,a.params=o;else if(n.matched.length){var l=n.matched[n.matched.length-1].path;a.path=P(l,o,"path "+n.path)}else e(!1,"relative params navigation requires a current route.");return a}var c=function(t){var e="",n="",i=t.indexOf("#");i>=0&&(e=t.slice(i),t=t.slice(0,i));var r=t.indexOf("?");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{path:t,query:n,hash:e}}(a.path||""),u=n&&n.path||"/",p=c.path?_(c.path,u,i||a.append):u,h=function(t,n,i){void 0===n&&(n={});var r,s=i||d;try{r=s(t||"")}catch(t){e(!1,t.message),r={}}for(var a in n)r[a]=n[a];return r}(c.query,a.query,s&&s.options.parseQuery),f=a.hash||c.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:p,query:h,hash:f}}var z,F=[String,Object],B=[String,Array],H=function(){},U={name:"RouterLink",props:{to:{type:F,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:B,default:"click"}},render:function(t){var n=this,i=this.$router,s=this.$route,a=i.resolve(this.to,s,this.append),o=a.location,l=a.route,c=a.href,u={},d=i.options.linkActiveClass,p=i.options.linkExactActiveClass,m=null==d?"router-link-active":d,v=null==p?"router-link-exact-active":p,g=null==this.activeClass?m:this.activeClass,b=null==this.exactActiveClass?v:this.exactActiveClass,_=l.redirectedFrom?f(null,q(l.redirectedFrom),null,i):l;u[b]=y(s,_),u[g]=this.exact?u[b]:function(t,e){return 0===t.path.replace(h,"/").indexOf(e.path.replace(h,"/"))&&(!e.hash||t.hash===e.hash)&&function(t,e){for(var n in e)if(!(n in t))return!1;return!0}(t.query,e.query)}(s,_);var x=function(t){K(t)&&(n.replace?i.replace(o,H):i.push(o,H))},w={click:K};Array.isArray(this.event)?this.event.forEach(function(t){w[t]=x}):w[this.event]=x;var k={class:u},S=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:c,route:l,navigate:x,isActive:u[g],isExactActive:u[b]});if(S){if(1===S.length)return S[0];if(S.length>1||!S.length)return e(!1,'RouterLink with to="'+this.props.to+"\" is trying to use a scoped slot but it didn't provide exactly one child."),0===S.length?t():t("span",{},S)}if("a"===this.tag)k.on=w,k.attrs={href:c};else{var C=function t(e){if(e)for(var n,i=0;i<e.length;i++){if("a"===(n=e[i]).tag)return n;if(n.children&&(n=t(n.children)))return n}}(this.$slots.default);if(C){C.isStatic=!1;var E=C.data=r({},C.data);for(var M in E.on=E.on||{},E.on){var A=E.on[M];M in w&&(E.on[M]=Array.isArray(A)?A:[A])}for(var T in w)T in E.on?E.on[T].push(w[T]):E.on[T]=x;(C.data.attrs=r({},C.data.attrs)).href=c}else k.on=w}return t(this.tag,k,this.$slots.default)}};function K(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented||void 0!==t.button&&0!==t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){var e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function W(t){if(!W.installed||z!==t){W.installed=!0,z=t;var e=function(t){return void 0!==t},n=function(t,n){var i=t.$options._parentVnode;e(i)&&e(i=i.data)&&e(i=i.registerRouteInstance)&&i(t,n)};t.mixin({beforeCreate:function(){e(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("RouterView",s),t.component("RouterLink",U);var i=t.config.optionMergeStrategies;i.beforeRouteEnter=i.beforeRouteLeave=i.beforeRouteUpdate=i.created}}var G="undefined"!=typeof window;function X(n,i,r,s){var a=i||[],o=r||Object.create(null),l=s||Object.create(null);n.forEach(function(n){!function n(i,r,s,a,o,l){var c=a.path;var u=a.name;t(null!=c,'"path" is required in a route configuration.'),t("string"!=typeof a.component,'route config "component" for path: '+String(c||u)+" cannot be a string id. Use an actual component instead.");var d=a.pathToRegexpOptions||{};var p=function(t,e,n){n||(t=t.replace(/\/$/,""));if("/"===t[0])return t;if(null==e)return t;return x(e.path+"/"+t)}(c,o,d.strict);"boolean"==typeof a.caseSensitive&&(d.sensitive=a.caseSensitive);var h={path:p,regex:function(t,n){var i=k(t,[],n),r=Object.create(null);return i.keys.forEach(function(n){e(!r[n.name],'Duplicate param keys in route with path: "'+t+'"'),r[n.name]=!0}),i}(p,d),components:a.components||{default:a.component},instances:{},name:u,parent:o,matchAs:l,redirect:a.redirect,beforeEnter:a.beforeEnter,meta:a.meta||{},props:null==a.props?{}:a.components?a.props:{default:a.props}};a.children&&(a.name&&!a.redirect&&a.children.some(function(t){return/^\/?$/.test(t.path)})&&e(!1,"Named Route '"+a.name+"' has a default child route. When navigating to this named route (:to=\"{name: '"+a.name+"'\"), the default child route will not be rendered. Remove the name from this route and use the name of the default child route for named links instead."),a.children.forEach(function(t){var e=l?x(l+"/"+t.path):void 0;n(i,r,s,t,h,e)}));r[h.path]||(i.push(h.path),r[h.path]=h);if(void 0!==a.alias)for(var f=Array.isArray(a.alias)?a.alias:[a.alias],m=0;m<f.length;++m){var v=f[m];if(v!==c){var g={path:v,children:a.children};n(i,r,s,g,o,h.path||"/")}else e(!1,'Found an alias with the same value as the path: "'+c+'". You have to remove that alias. It will be ignored in development.')}u&&(s[u]?l||e(!1,'Duplicate named routes definition: { name: "'+u+'", path: "'+h.path+'" }'):s[u]=h)}(a,o,l,n)});for(var c=0,u=a.length;c<u;c++)"*"===a[c]&&(a.push(a.splice(c,1)[0]),u--,c--);var d=a.filter(function(t){return t&&"*"!==t.charAt(0)&&"/"!==t.charAt(0)});d.length>0&&e(!1,"Non-nested routes must include a leading slash character. Fix the following routes: \n"+d.map(function(t){return"- "+t}).join("\n"));return{pathList:a,pathMap:o,nameMap:l}}function Y(n,i){var r=X(n),s=r.pathList,a=r.pathMap,o=r.nameMap;function l(t,n,r){var l=q(t,n,!1,i),c=l.name;if(c){var d=o[c];if(e(d,"Route with name '"+c+"' does not exist"),!d)return u(null,l);var p=d.regex.keys.filter(function(t){return!t.optional}).map(function(t){return t.name});if("object"!=typeof l.params&&(l.params={}),n&&"object"==typeof n.params)for(var h in n.params)!(h in l.params)&&p.indexOf(h)>-1&&(l.params[h]=n.params[h]);return l.path=P(d.path,l.params,'named route "'+c+'"'),u(d,l,r)}if(l.path){l.params={};for(var f=0;f<s.length;f++){var m=s[f],v=a[m];if(J(v.regex,l.path,l.params))return u(v,l,r)}}return u(null,l)}function c(n,r){var s=n.redirect,a="function"==typeof s?s(f(n,r,null,i)):s;if("string"==typeof a&&(a={path:a}),!a||"object"!=typeof a)return e(!1,"invalid redirect option: "+JSON.stringify(a)),u(null,r);var c=a,d=c.name,p=c.path,h=r.query,m=r.hash,v=r.params;if(h=c.hasOwnProperty("query")?c.query:h,m=c.hasOwnProperty("hash")?c.hash:m,v=c.hasOwnProperty("params")?c.params:v,d)return t(o[d],'redirect failed: named route "'+d+'" not found.'),l({_normalized:!0,name:d,query:h,hash:m,params:v},void 0,r);if(p){var g=function(t,e){return _(t,e.parent?e.parent.path:"/",!0)}(p,n);return l({_normalized:!0,path:P(g,v,'redirect route with path "'+g+'"'),query:h,hash:m},void 0,r)}return e(!1,"invalid redirect option: "+JSON.stringify(a)),u(null,r)}function u(t,e,n){return t&&t.redirect?c(t,n||e):t&&t.matchAs?function(t,e,n){var i=l({_normalized:!0,path:P(n,e.params,'aliased route with path "'+n+'"')});if(i){var r=i.matched,s=r[r.length-1];return e.params=i.params,u(s,e)}return u(null,e)}(0,e,t.matchAs):f(t,e,n,i)}return{match:l,addRoutes:function(t){X(t,s,a,o)}}}function J(t,e,n){var i=e.match(t);if(!i)return!1;if(!n)return!0;for(var r=1,s=i.length;r<s;++r){var a=t.keys[r-1],o="string"==typeof i[r]?decodeURIComponent(i[r]):i[r];a&&(n[a.name||"pathMatch"]=o)}return!0}var Z=G&&window.performance&&window.performance.now?window.performance:Date;function Q(){return Z.now().toFixed(3)}var tt=Q();function et(){return tt}function nt(t){return tt=t}var it=Object.create(null);function rt(){var t=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(t,"");window.history.replaceState({key:et()},"",e),window.addEventListener("popstate",function(t){at(),t.state&&t.state.key&&nt(t.state.key)})}function st(e,n,i,r){if(e.app){var s=e.options.scrollBehavior;s&&(t("function"==typeof s,"scrollBehavior must be a function"),e.app.$nextTick(function(){var a=function(){var t=et();if(t)return it[t]}(),o=s.call(e,n,i,r?a:null);o&&("function"==typeof o.then?o.then(function(t){dt(t,a)}).catch(function(e){t(!1,e.toString())}):dt(o,a))}))}}function at(){var t=et();t&&(it[t]={x:window.pageXOffset,y:window.pageYOffset})}function ot(t){return ct(t.x)||ct(t.y)}function lt(t){return{x:ct(t.x)?t.x:window.pageXOffset,y:ct(t.y)?t.y:window.pageYOffset}}function ct(t){return"number"==typeof t}var ut=/^#\d/;function dt(t,e){var n,i="object"==typeof t;if(i&&"string"==typeof t.selector){var r=ut.test(t.selector)?document.getElementById(t.selector.slice(1)):document.querySelector(t.selector);if(r){var s=t.offset&&"object"==typeof t.offset?t.offset:{};e=function(t,e){var n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{x:i.left-n.left-e.x,y:i.top-n.top-e.y}}(r,s={x:ct((n=s).x)?n.x:0,y:ct(n.y)?n.y:0})}else ot(t)&&(e=lt(t))}else i&&ot(t)&&(e=lt(t));e&&window.scrollTo(e.x,e.y)}var pt,ht=G&&((-1===(pt=window.navigator.userAgent).indexOf("Android 2.")&&-1===pt.indexOf("Android 4.0")||-1===pt.indexOf("Mobile Safari")||-1!==pt.indexOf("Chrome")||-1!==pt.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history);function ft(t,e){at();var n=window.history;try{e?n.replaceState({key:et()},"",t):n.pushState({key:nt(Q())},"",t)}catch(n){window.location[e?"replace":"assign"](t)}}function mt(t){ft(t,!0)}function vt(t,e,n){var i=function(r){r>=t.length?n():t[r]?e(t[r],function(){i(r+1)}):i(r+1)};i(0)}function gt(t){return function(i,r,s){var a=!1,o=0,l=null;yt(t,function(t,i,r,c){if("function"==typeof t&&void 0===t.cid){a=!0,o++;var u,d=xt(function(e){var n;((n=e).__esModule||_t&&"Module"===n[Symbol.toStringTag])&&(e=e.default),t.resolved="function"==typeof e?e:z.extend(e),r.components[c]=e,--o<=0&&s()}),p=xt(function(t){var i="Failed to resolve async component "+c+": "+t;e(!1,i),l||(l=n(t)?t:new Error(i),s(l))});try{u=t(d,p)}catch(t){p(t)}if(u)if("function"==typeof u.then)u.then(d,p);else{var h=u.component;h&&"function"==typeof h.then&&h.then(d,p)}}}),a||s()}}function yt(t,e){return bt(t.map(function(t){return Object.keys(t.components).map(function(n){return e(t.components[n],t.instances[n],t,n)})}))}function bt(t){return Array.prototype.concat.apply([],t)}var _t="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function xt(t){var e=!1;return function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];if(!e)return e=!0,t.apply(this,n)}}var wt=function(t){function e(e){t.call(this),this.name=this._name="NavigationDuplicated",this.message='Navigating to current location ("'+e.fullPath+'") is not allowed',Object.defineProperty(this,"stack",{value:(new t).stack,writable:!0,configurable:!0})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);wt._name="NavigationDuplicated";var kt=function(t,e){this.router=t,this.base=function(t){if(!t)if(G){var e=document.querySelector("base");t=(t=e&&e.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else t="/";"/"!==t.charAt(0)&&(t="/"+t);return t.replace(/\/$/,"")}(e),this.current=v,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};function St(t,e,n,i){var r=yt(t,function(t,i,r,s){var a=function(t,e){"function"!=typeof t&&(t=z.extend(t));return t.options[e]}(t,e);if(a)return Array.isArray(a)?a.map(function(t){return n(t,i,r,s)}):n(a,i,r,s)});return bt(i?r.reverse():r)}function Ct(t,e){if(e)return function(){return t.apply(e,arguments)}}kt.prototype.listen=function(t){this.cb=t},kt.prototype.onReady=function(t,e){this.ready?t():(this.readyCbs.push(t),e&&this.readyErrorCbs.push(e))},kt.prototype.onError=function(t){this.errorCbs.push(t)},kt.prototype.transitionTo=function(t,e,n){var i=this,r=this.router.match(t,this.current);this.confirmTransition(r,function(){i.updateRoute(r),e&&e(r),i.ensureURL(),i.ready||(i.ready=!0,i.readyCbs.forEach(function(t){t(r)}))},function(t){n&&n(t),t&&!i.ready&&(i.ready=!0,i.readyErrorCbs.forEach(function(e){e(t)}))})},kt.prototype.confirmTransition=function(t,r,s){var a=this,o=this.current,l=function(t){!i(wt,t)&&n(t)&&(a.errorCbs.length?a.errorCbs.forEach(function(e){e(t)}):(e(!1,"uncaught error during route navigation:"),console.error(t))),s&&s(t)};if(y(t,o)&&t.matched.length===o.matched.length)return this.ensureURL(),l(new wt(t));var c=function(t,e){var n,i=Math.max(t.length,e.length);for(n=0;n<i&&t[n]===e[n];n++);return{updated:e.slice(0,n),activated:e.slice(n),deactivated:t.slice(n)}}(this.current.matched,t.matched),u=c.updated,d=c.deactivated,p=c.activated,h=[].concat(function(t){return St(t,"beforeRouteLeave",Ct,!0)}(d),this.router.beforeHooks,function(t){return St(t,"beforeRouteUpdate",Ct)}(u),p.map(function(t){return t.beforeEnter}),gt(p));this.pending=t;var f=function(e,i){if(a.pending!==t)return l();try{e(t,o,function(t){!1===t||n(t)?(a.ensureURL(!0),l(t)):"string"==typeof t||"object"==typeof t&&("string"==typeof t.path||"string"==typeof t.name)?(l(),"object"==typeof t&&t.replace?a.replace(t):a.push(t)):i(t)})}catch(t){l(t)}};vt(h,f,function(){var e=[];vt(function(t,e,n){return St(t,"beforeRouteEnter",function(t,i,r,s){return function(t,e,n,i,r){return function(s,a,o){return t(s,a,function(t){"function"==typeof t&&i.push(function(){!function t(e,n,i,r){n[i]&&!n[i]._isBeingDestroyed?e(n[i]):r()&&setTimeout(function(){t(e,n,i,r)},16)}(t,e.instances,n,r)}),o(t)})}}(t,r,s,e,n)})}(p,e,function(){return a.current===t}).concat(a.router.resolveHooks),f,function(){if(a.pending!==t)return l();a.pending=null,r(t),a.router.app&&a.router.app.$nextTick(function(){e.forEach(function(t){t()})})})})},kt.prototype.updateRoute=function(t){var e=this.current;this.current=t,this.cb&&this.cb(t),this.router.afterHooks.forEach(function(n){n&&n(t,e)})};var Et=function(t){function e(e,n){var i=this;t.call(this,e,n);var r=e.options.scrollBehavior,s=ht&&r;s&&rt();var a=Mt(this.base);window.addEventListener("popstate",function(t){var n=i.current,r=Mt(i.base);i.current===v&&r===a||i.transitionTo(r,function(t){s&&st(e,t,n,!0)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.go=function(t){window.history.go(t)},e.prototype.push=function(t,e,n){var i=this,r=this.current;this.transitionTo(t,function(t){ft(x(i.base+t.fullPath)),st(i.router,t,r,!1),e&&e(t)},n)},e.prototype.replace=function(t,e,n){var i=this,r=this.current;this.transitionTo(t,function(t){mt(x(i.base+t.fullPath)),st(i.router,t,r,!1),e&&e(t)},n)},e.prototype.ensureURL=function(t){if(Mt(this.base)!==this.current.fullPath){var e=x(this.base+this.current.fullPath);t?ft(e):mt(e)}},e.prototype.getCurrentLocation=function(){return Mt(this.base)},e}(kt);function Mt(t){var e=decodeURI(window.location.pathname);return t&&0===e.indexOf(t)&&(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}var At=function(t){function e(e,n,i){t.call(this,e,n),i&&function(t){var e=Mt(t);if(!/^\/#/.test(e))return window.location.replace(x(t+"/#"+e)),!0}(this.base)||Tt()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this,e=this.router.options.scrollBehavior,n=ht&&e;n&&rt(),window.addEventListener(ht?"popstate":"hashchange",function(){var e=t.current;Tt()&&t.transitionTo(Dt(),function(i){n&&st(t.router,i,e,!0),ht||Nt(i.fullPath)})})},e.prototype.push=function(t,e,n){var i=this,r=this.current;this.transitionTo(t,function(t){Rt(t.fullPath),st(i.router,t,r,!1),e&&e(t)},n)},e.prototype.replace=function(t,e,n){var i=this,r=this.current;this.transitionTo(t,function(t){Nt(t.fullPath),st(i.router,t,r,!1),e&&e(t)},n)},e.prototype.go=function(t){window.history.go(t)},e.prototype.ensureURL=function(t){var e=this.current.fullPath;Dt()!==e&&(t?Rt(e):Nt(e))},e.prototype.getCurrentLocation=function(){return Dt()},e}(kt);function Tt(){var t=Dt();return"/"===t.charAt(0)||(Nt("/"+t),!1)}function Dt(){var t=window.location.href,e=t.indexOf("#");if(e<0)return"";var n=(t=t.slice(e+1)).indexOf("?");if(n<0){var i=t.indexOf("#");t=i>-1?decodeURI(t.slice(0,i))+t.slice(i):decodeURI(t)}else n>-1&&(t=decodeURI(t.slice(0,n))+t.slice(n));return t}function Ot(t){var e=window.location.href,n=e.indexOf("#");return(n>=0?e.slice(0,n):e)+"#"+t}function Rt(t){ht?ft(Ot(t)):window.location.hash=t}function Nt(t){ht?mt(Ot(t)):window.location.replace(Ot(t))}var It=function(t){function e(e,n){t.call(this,e,n),this.stack=[],this.index=-1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e,n){var i=this;this.transitionTo(t,function(t){i.stack=i.stack.slice(0,i.index+1).concat(t),i.index++,e&&e(t)},n)},e.prototype.replace=function(t,e,n){var i=this;this.transitionTo(t,function(t){i.stack=i.stack.slice(0,i.index).concat(t),e&&e(t)},n)},e.prototype.go=function(t){var e=this,n=this.index+t;if(!(n<0||n>=this.stack.length)){var r=this.stack[n];this.confirmTransition(r,function(){e.index=n,e.updateRoute(r)},function(t){i(wt,t)&&(e.index=n)})}},e.prototype.getCurrentLocation=function(){var t=this.stack[this.stack.length-1];return t?t.fullPath:"/"},e.prototype.ensureURL=function(){},e}(kt),$t=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=Y(e.routes||[],this);var n=e.mode||"hash";switch(this.fallback="history"===n&&!ht&&!1!==e.fallback,this.fallback&&(n="hash"),G||(n="abstract"),this.mode=n,n){case"history":this.history=new Et(this,e.base);break;case"hash":this.history=new At(this,e.base,this.fallback);break;case"abstract":this.history=new It(this,e.base);break;default:t(!1,"invalid mode: "+n)}},jt={currentRoute:{configurable:!0}};function Lt(t,e){return t.push(e),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}return $t.prototype.match=function(t,e,n){return this.matcher.match(t,e,n)},jt.currentRoute.get=function(){return this.history&&this.history.current},$t.prototype.init=function(e){var n=this;if(t(W.installed,"not installed. Make sure to call `Vue.use(VueRouter)` before creating root instance."),this.apps.push(e),e.$once("hook:destroyed",function(){var t=n.apps.indexOf(e);t>-1&&n.apps.splice(t,1),n.app===e&&(n.app=n.apps[0]||null)}),!this.app){this.app=e;var i=this.history;if(i instanceof Et)i.transitionTo(i.getCurrentLocation());else if(i instanceof At){var r=function(){i.setupListeners()};i.transitionTo(i.getCurrentLocation(),r,r)}i.listen(function(t){n.apps.forEach(function(e){e._route=t})})}},$t.prototype.beforeEach=function(t){return Lt(this.beforeHooks,t)},$t.prototype.beforeResolve=function(t){return Lt(this.resolveHooks,t)},$t.prototype.afterEach=function(t){return Lt(this.afterHooks,t)},$t.prototype.onReady=function(t,e){this.history.onReady(t,e)},$t.prototype.onError=function(t){this.history.onError(t)},$t.prototype.push=function(t,e,n){var i=this;if(!e&&!n&&"undefined"!=typeof Promise)return new Promise(function(e,n){i.history.push(t,e,n)});this.history.push(t,e,n)},$t.prototype.replace=function(t,e,n){var i=this;if(!e&&!n&&"undefined"!=typeof Promise)return new Promise(function(e,n){i.history.replace(t,e,n)});this.history.replace(t,e,n)},$t.prototype.go=function(t){this.history.go(t)},$t.prototype.back=function(){this.go(-1)},$t.prototype.forward=function(){this.go(1)},$t.prototype.getMatchedComponents=function(t){var e=t?t.matched?t:this.resolve(t).route:this.currentRoute;return e?[].concat.apply([],e.matched.map(function(t){return Object.keys(t.components).map(function(e){return t.components[e]})})):[]},$t.prototype.resolve=function(t,e,n){var i=q(t,e=e||this.history.current,n,this),r=this.match(i,e),s=r.redirectedFrom||r.fullPath;return{location:i,route:r,href:function(t,e,n){var i="hash"===n?"#"+e:e;return t?x(t+"/"+i):i}(this.history.base,s,this.mode),normalizedTo:i,resolved:r}},$t.prototype.addRoutes=function(t){this.matcher.addRoutes(t),this.history.current!==v&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties($t.prototype,jt),$t.install=W,$t.version="3.1.3",G&&window.Vue&&window.Vue.use($t),$t}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).d3=t.d3||{})}(this,function(t){"use strict";function e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function n(t){var n;return 1===t.length&&(n=t,t=function(t,i){return e(n(t),i)}),{left:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var s=i+r>>>1;t(e[s],n)<0?i=s+1:r=s}return i},right:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var s=i+r>>>1;t(e[s],n)>0?r=s:i=s+1}return i}}}var i=n(e),r=i.right,s=i.left;function a(t,e){return[t,e]}function o(t){return null===t?NaN:+t}function l(t,e){var n,i,r=t.length,s=0,a=-1,l=0,c=0;if(null==e)for(;++a<r;)isNaN(n=o(t[a]))||(c+=(i=n-l)*(n-(l+=i/++s)));else for(;++a<r;)isNaN(n=o(e(t[a],a,t)))||(c+=(i=n-l)*(n-(l+=i/++s)));if(s>1)return c/(s-1)}function c(t,e){var n=l(t,e);return n?Math.sqrt(n):n}function u(t,e){var n,i,r,s=t.length,a=-1;if(null==e){for(;++a<s;)if(null!=(n=t[a])&&n>=n)for(i=r=n;++a<s;)null!=(n=t[a])&&(i>n&&(i=n),r<n&&(r=n))}else for(;++a<s;)if(null!=(n=e(t[a],a,t))&&n>=n)for(i=r=n;++a<s;)null!=(n=e(t[a],a,t))&&(i>n&&(i=n),r<n&&(r=n));return[i,r]}var d=Array.prototype,p=d.slice,h=d.map;function f(t){return function(){return t}}function m(t){return t}function v(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),s=new Array(r);++i<r;)s[i]=t+i*n;return s}var g=Math.sqrt(50),y=Math.sqrt(10),b=Math.sqrt(2);function _(t,e,n){var i,r,s,a,o=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(a=x(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),s=new Array(r=Math.ceil(e-t+1));++o<r;)s[o]=(t+o)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),s=new Array(r=Math.ceil(t-e+1));++o<r;)s[o]=(t-o)/a;return i&&s.reverse(),s}function x(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,r);return r>=0?(s>=g?10:s>=y?5:s>=b?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=g?10:s>=y?5:s>=b?2:1)}function w(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/r;return s>=g?r*=10:s>=y?r*=5:s>=b&&(r*=2),e<t?-r:r}function k(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function S(t,e,n){if(null==n&&(n=o),i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,s=Math.floor(r),a=+n(t[s],s,t);return a+(+n(t[s+1],s+1,t)-a)*(r-s)}}function C(t,e){var n,i,r=t.length,s=-1;if(null==e){for(;++s<r;)if(null!=(n=t[s])&&n>=n)for(i=n;++s<r;)null!=(n=t[s])&&n>i&&(i=n)}else for(;++s<r;)if(null!=(n=e(t[s],s,t))&&n>=n)for(i=n;++s<r;)null!=(n=e(t[s],s,t))&&n>i&&(i=n);return i}function E(t){for(var e,n,i,r=t.length,s=-1,a=0;++s<r;)a+=t[s].length;for(n=new Array(a);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--a]=i[e];return n}function M(t,e){var n,i,r=t.length,s=-1;if(null==e){for(;++s<r;)if(null!=(n=t[s])&&n>=n)for(i=n;++s<r;)null!=(n=t[s])&&i>n&&(i=n)}else for(;++s<r;)if(null!=(n=e(t[s],s,t))&&n>=n)for(i=n;++s<r;)null!=(n=e(t[s],s,t))&&i>n&&(i=n);return i}function A(t){if(!(r=t.length))return[];for(var e=-1,n=M(t,T),i=new Array(n);++e<n;)for(var r,s=-1,a=i[e]=new Array(r);++s<r;)a[s]=t[s][e];return i}function T(t){return t.length}var D=Array.prototype.slice;function O(t){return t}var R=1,N=2,I=3,$=4,j=1e-6;function L(t){return"translate("+(t+.5)+",0)"}function V(t){return"translate(0,"+(t+.5)+")"}function P(){return!this.__axis}function q(t,e){var n=[],i=null,r=null,s=6,a=6,o=3,l=t===R||t===$?-1:1,c=t===$||t===N?"x":"y",u=t===R||t===I?L:V;function d(d){var p=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,h=null==r?e.tickFormat?e.tickFormat.apply(e,n):O:r,f=Math.max(s,0)+o,m=e.range(),v=+m[0]+.5,g=+m[m.length-1]+.5,y=(e.bandwidth?function(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}:function(t){return function(e){return+t(e)}})(e.copy()),b=d.selection?d.selection():d,_=b.selectAll(".domain").data([null]),x=b.selectAll(".tick").data(p,e).order(),w=x.exit(),k=x.enter().append("g").attr("class","tick"),S=x.select("line"),C=x.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(k),S=S.merge(k.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),C=C.merge(k.append("text").attr("fill","currentColor").attr(c,l*f).attr("dy",t===R?"0em":t===I?"0.71em":"0.32em")),d!==b&&(_=_.transition(d),x=x.transition(d),S=S.transition(d),C=C.transition(d),w=w.transition(d).attr("opacity",j).attr("transform",function(t){return isFinite(t=y(t))?u(t):this.getAttribute("transform")}),k.attr("opacity",j).attr("transform",function(t){var e=this.parentNode.__axis;return u(e&&isFinite(e=e(t))?e:y(t))})),w.remove(),_.attr("d",t===$||t==N?a?"M"+l*a+","+v+"H0.5V"+g+"H"+l*a:"M0.5,"+v+"V"+g:a?"M"+v+","+l*a+"V0.5H"+g+"V"+l*a:"M"+v+",0.5H"+g),x.attr("opacity",1).attr("transform",function(t){return u(y(t))}),S.attr(c+"2",l*s),C.attr(c,l*f).text(h),b.filter(P).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===N?"start":t===$?"end":"middle"),b.each(function(){this.__axis=y})}return d.scale=function(t){return arguments.length?(e=t,d):e},d.ticks=function(){return n=D.call(arguments),d},d.tickArguments=function(t){return arguments.length?(n=null==t?[]:D.call(t),d):n.slice()},d.tickValues=function(t){return arguments.length?(i=null==t?null:D.call(t),d):i&&i.slice()},d.tickFormat=function(t){return arguments.length?(r=t,d):r},d.tickSize=function(t){return arguments.length?(s=a=+t,d):s},d.tickSizeInner=function(t){return arguments.length?(s=+t,d):s},d.tickSizeOuter=function(t){return arguments.length?(a=+t,d):a},d.tickPadding=function(t){return arguments.length?(o=+t,d):o},d}var z={value:function(){}};function F(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new B(i)}function B(t){this._=t}function H(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function U(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=z,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}B.prototype=F.prototype={constructor:B,on:function(t,e){var n,i=this._,r=function(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}(t+"",i),s=-1,a=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<a;)if(n=(t=r[s]).type)i[n]=U(i[n],t.name,e);else if(null==e)for(n in i)i[n]=U(i[n],t.name,null);return this}for(;++s<a;)if((n=(t=r[s]).type)&&(n=H(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new B(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),s=0;s<n;++s)r[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(i=this._[t]).length;s<n;++s)i[s].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};var K="http://www.w3.org/1999/xhtml",W={svg:"http://www.w3.org/2000/svg",xhtml:K,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function G(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),W.hasOwnProperty(e)?{space:W[e],local:t}:t}function X(t){var e=G(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===K&&e.documentElement.namespaceURI===K?e.createElement(t):e.createElementNS(n,t)}})(e)}function Y(){}function J(t){return null==t?Y:function(){return this.querySelector(t)}}function Z(){return[]}function Q(t){return null==t?Z:function(){return this.querySelectorAll(t)}}function tt(t){return function(){return this.matches(t)}}function et(t){return new Array(t.length)}function nt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}nt.prototype={constructor:nt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var it="$";function rt(t,e,n,i,r,s){for(var a,o=0,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):n[o]=new nt(t,s[o]);for(;o<l;++o)(a=e[o])&&(r[o]=a)}function st(t,e,n,i,r,s,a){var o,l,c,u={},d=e.length,p=s.length,h=new Array(d);for(o=0;o<d;++o)(l=e[o])&&(h[o]=c=it+a.call(l,l.__data__,o,e),c in u?r[o]=l:u[c]=l);for(o=0;o<p;++o)(l=u[c=it+a.call(t,s[o],o,s)])?(i[o]=l,l.__data__=s[o],u[c]=null):n[o]=new nt(t,s[o]);for(o=0;o<d;++o)(l=e[o])&&u[h[o]]===l&&(r[o]=l)}function at(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ot(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function lt(t,e){return t.style.getPropertyValue(e)||ot(t).getComputedStyle(t,null).getPropertyValue(e)}function ct(t){return t.trim().split(/^|\s+/)}function ut(t){return t.classList||new dt(t)}function dt(t){this._node=t,this._names=ct(t.getAttribute("class")||"")}function pt(t,e){for(var n=ut(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function ht(t,e){for(var n=ut(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function ft(){this.textContent=""}function mt(){this.innerHTML=""}function vt(){this.nextSibling&&this.parentNode.appendChild(this)}function gt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yt(){return null}function bt(){var t=this.parentNode;t&&t.removeChild(this)}function _t(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function xt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}dt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var wt={};function kt(t,e,n){return t=St(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function St(e,n,i){return function(r){var s=t.event;t.event=r;try{e.call(this,this.__data__,n,i)}finally{t.event=s}}}function Ct(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,s=e.length;i<s;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?e.length=r:delete this.__on}}}function Et(t,e,n){var i=wt.hasOwnProperty(t.type)?kt:St;return function(r,s,a){var o,l=this.__on,c=i(e,s,a);if(l)for(var u=0,d=l.length;u<d;++u)if((o=l[u]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=c,o.capture=n),void(o.value=e);this.addEventListener(t.type,c,n),o={type:t.type,name:t.name,value:e,listener:c,capture:n},l?l.push(o):this.__on=[o]}}function Mt(e,n,i,r){var s=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(i,r)}finally{t.event=s}}function At(t,e,n){var i=ot(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}t.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(wt={mouseenter:"mouseover",mouseleave:"mouseout"}));var Tt=[null];function Dt(t,e){this._groups=t,this._parents=e}function Ot(){return new Dt([[document.documentElement]],Tt)}function Rt(t){return"string"==typeof t?new Dt([[document.querySelector(t)]],[document.documentElement]):new Dt([[t]],Tt)}Dt.prototype=Ot.prototype={constructor:Dt,select:function(t){"function"!=typeof t&&(t=J(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,a,o=e[r],l=o.length,c=i[r]=new Array(l),u=0;u<l;++u)(s=o[u])&&(a=t.call(s,s.__data__,u,o))&&("__data__"in s&&(a.__data__=s.__data__),c[u]=a);return new Dt(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Q(t));for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var a,o=e[s],l=o.length,c=0;c<l;++c)(a=o[c])&&(i.push(t.call(a,a.__data__,c,o)),r.push(a));return new Dt(i,r)},filter:function(t){"function"!=typeof t&&(t=tt(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,a=e[r],o=a.length,l=i[r]=[],c=0;c<o;++c)(s=a[c])&&t.call(s,s.__data__,c,a)&&l.push(s);return new Dt(i,this._parents)},data:function(t,e){if(!t)return h=new Array(this.size()),c=-1,this.each(function(t){h[++c]=t}),h;var n=e?st:rt,i=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var s=r.length,a=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var u=i[c],d=r[c],p=d.length,h=t.call(u,u&&u.__data__,c,i),f=h.length,m=o[c]=new Array(f),v=a[c]=new Array(f);n(u,d,m,v,l[c]=new Array(p),h,e);for(var g,y,b=0,_=0;b<f;++b)if(g=m[b]){for(b>=_&&(_=b+1);!(y=v[_])&&++_<f;);g._next=y||null}}return(a=new Dt(a,i))._enter=o,a._exit=l,a},enter:function(){return new Dt(this._enter||this._groups.map(et),this._parents)},exit:function(){return new Dt(this._exit||this._groups.map(et),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,s=this.exit();return i="function"==typeof t?t(i):i.append(t+""),null!=e&&(r=e(r)),null==n?s.remove():n(s),i&&r?i.merge(r).order():r},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),a=new Array(i),o=0;o<s;++o)for(var l,c=e[o],u=n[o],d=c.length,p=a[o]=new Array(d),h=0;h<d;++h)(l=c[h]||u[h])&&(p[h]=l);for(;o<i;++o)a[o]=e[o];return new Dt(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],s=r.length-1,a=r[s];--s>=0;)(i=r[s])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=at);for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a,o=n[s],l=o.length,c=r[s]=new Array(l),u=0;u<l;++u)(a=o[u])&&(c[u]=a);c.sort(e)}return new Dt(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,s=e[n],a=0,o=s.length;a<o;++a)(r=s[a])&&t.call(r,r.__data__,a,s);return this},attr:function(t,e){var n=G(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):lt(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=ct(t+"");if(arguments.length<2){for(var i=ut(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?pt:ht)(this,t)}}:e?function(t){return function(){pt(this,t)}}:function(t){return function(){ht(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?ft:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?mt:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(vt)},lower:function(){return this.each(gt)},append:function(t){var e="function"==typeof t?t:X(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:X(t),i=null==e?yt:"function"==typeof e?e:J(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(bt)},clone:function(t){return this.select(t?xt:_t)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,s=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=s.length;if(!(arguments.length<2)){for(o=e?Et:Ct,null==n&&(n=!1),i=0;i<a;++i)this.each(o(s[i],e,n));return this}var o=this.node().__on;if(o)for(var l,c=0,u=o.length;c<u;++c)for(i=0,l=o[c];i<a;++i)if((r=s[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return At(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return At(this,t,e)}})(t,e))}};var Nt=0;function It(){return new $t}function $t(){this._="@"+(++Nt).toString(36)}function jt(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function Lt(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}function Vt(t){var e=jt();return e.changedTouches&&(e=e.changedTouches[0]),Lt(t,e)}function Pt(t,e,n){arguments.length<3&&(n=e,e=jt().changedTouches);for(var i,r=0,s=e?e.length:0;r<s;++r)if((i=e[r]).identifier===n)return Lt(t,i);return null}function qt(){t.event.stopImmediatePropagation()}function zt(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function Ft(t){var e=t.document.documentElement,n=Rt(t).on("dragstart.drag",zt,!0);"onselectstart"in e?n.on("selectstart.drag",zt,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Bt(t,e){var n=t.document.documentElement,i=Rt(t).on("dragstart.drag",null);e&&(i.on("click.drag",zt,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Ht(t){return function(){return t}}function Ut(t,e,n,i,r,s,a,o,l,c){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=r,this.x=s,this.y=a,this.dx=o,this.dy=l,this._=c}function Kt(){return!t.event.ctrlKey&&!t.event.button}function Wt(){return this.parentNode}function Gt(e){return null==e?{x:t.event.x,y:t.event.y}:e}function Xt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Yt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Jt(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Zt(){}$t.prototype=It.prototype={constructor:$t,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},Ut.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Qt="\\s*([+-]?\\d+)\\s*",te="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ee="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ne=/^#([0-9a-f]{3,8})$/,ie=new RegExp("^rgb\\("+[Qt,Qt,Qt]+"\\)$"),re=new RegExp("^rgb\\("+[ee,ee,ee]+"\\)$"),se=new RegExp("^rgba\\("+[Qt,Qt,Qt,te]+"\\)$"),ae=new RegExp("^rgba\\("+[ee,ee,ee,te]+"\\)$"),oe=new RegExp("^hsl\\("+[te,ee,ee]+"\\)$"),le=new RegExp("^hsla\\("+[te,ee,ee,te]+"\\)$"),ce={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ue(){return this.rgb().formatHex()}function de(){return this.rgb().formatRgb()}function pe(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ne.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?he(e):3===n?new ge(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?fe(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?fe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ie.exec(t))?new ge(e[1],e[2],e[3],1):(e=re.exec(t))?new ge(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=se.exec(t))?fe(e[1],e[2],e[3],e[4]):(e=ae.exec(t))?fe(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=oe.exec(t))?xe(e[1],e[2]/100,e[3]/100,1):(e=le.exec(t))?xe(e[1],e[2]/100,e[3]/100,e[4]):ce.hasOwnProperty(t)?he(ce[t]):"transparent"===t?new ge(NaN,NaN,NaN,0):null}function he(t){return new ge(t>>16&255,t>>8&255,255&t,1)}function fe(t,e,n,i){return i<=0&&(t=e=n=NaN),new ge(t,e,n,i)}function me(t){return t instanceof Zt||(t=pe(t)),t?new ge((t=t.rgb()).r,t.g,t.b,t.opacity):new ge}function ve(t,e,n,i){return 1===arguments.length?me(t):new ge(t,e,n,null==i?1:i)}function ge(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function ye(){return"#"+_e(this.r)+_e(this.g)+_e(this.b)}function be(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function _e(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function xe(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Se(t,e,n,i)}function we(t){if(t instanceof Se)return new Se(t.h,t.s,t.l,t.opacity);if(t instanceof Zt||(t=pe(t)),!t)return new Se;if(t instanceof Se)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,o=s-r,l=(s+r)/2;return o?(a=e===s?(n-i)/o+6*(n<i):n===s?(i-e)/o+2:(e-n)/o+4,o/=l<.5?s+r:2-s-r,a*=60):o=l>0&&l<1?0:a,new Se(a,o,l,t.opacity)}function ke(t,e,n,i){return 1===arguments.length?we(t):new Se(t,e,n,null==i?1:i)}function Se(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Ce(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Yt(Zt,pe,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ue,formatHex:ue,formatHsl:function(){return we(this).formatHsl()},formatRgb:de,toString:de}),Yt(ge,ve,Jt(Zt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ge(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ge(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ye,formatHex:ye,formatRgb:be,toString:be})),Yt(Se,ke,Jt(Zt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Se(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Se(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new ge(Ce(t>=240?t-240:t+120,r,i),Ce(t,r,i),Ce(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Ee=Math.PI/180,Me=180/Math.PI,Ae=.96422,Te=1,De=.82521,Oe=4/29,Re=6/29,Ne=3*Re*Re,Ie=Re*Re*Re;function $e(t){if(t instanceof Le)return new Le(t.l,t.a,t.b,t.opacity);if(t instanceof He)return Ue(t);t instanceof ge||(t=me(t));var e,n,i=ze(t.r),r=ze(t.g),s=ze(t.b),a=Ve((.2225045*i+.7168786*r+.0606169*s)/Te);return i===r&&r===s?e=n=a:(e=Ve((.4360747*i+.3850649*r+.1430804*s)/Ae),n=Ve((.0139322*i+.0971045*r+.7141733*s)/De)),new Le(116*a-16,500*(e-a),200*(a-n),t.opacity)}function je(t,e,n,i){return 1===arguments.length?$e(t):new Le(t,e,n,null==i?1:i)}function Le(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function Ve(t){return t>Ie?Math.pow(t,1/3):t/Ne+Oe}function Pe(t){return t>Re?t*t*t:Ne*(t-Oe)}function qe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ze(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Fe(t){if(t instanceof He)return new He(t.h,t.c,t.l,t.opacity);if(t instanceof Le||(t=$e(t)),0===t.a&&0===t.b)return new He(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Me;return new He(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Be(t,e,n,i){return 1===arguments.length?Fe(t):new He(t,e,n,null==i?1:i)}function He(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Ue(t){if(isNaN(t.h))return new Le(t.l,0,0,t.opacity);var e=t.h*Ee;return new Le(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Yt(Le,je,Jt(Zt,{brighter:function(t){return new Le(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Le(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new ge(qe(3.1338561*(e=Ae*Pe(e))-1.6168667*(t=Te*Pe(t))-.4906146*(n=De*Pe(n))),qe(-.9787684*e+1.9161415*t+.033454*n),qe(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Yt(He,Be,Jt(Zt,{brighter:function(t){return new He(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new He(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Ue(this).rgb()}}));var Ke=1.78277,We=-.29227,Ge=-.90649,Xe=1.97294,Ye=Xe*Ge,Je=Xe*Ke,Ze=Ke*We- -.14861*Ge;function Qe(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof tn)return new tn(t.h,t.s,t.l,t.opacity);t instanceof ge||(t=me(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Ze*i+Ye*e-Je*n)/(Ze+Ye-Je),s=i-r,a=(Xe*(n-r)-We*s)/Ge,o=Math.sqrt(a*a+s*s)/(Xe*r*(1-r)),l=o?Math.atan2(a,s)*Me-120:NaN;return new tn(l<0?l+360:l,o,r,t.opacity)}(t):new tn(t,e,n,null==i?1:i)}function tn(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function en(t,e,n,i,r){var s=t*t,a=s*t;return((1-3*t+3*s-a)*e+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*i+a*r)/6}function nn(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],s=t[i+1],a=i>0?t[i-1]:2*r-s,o=i<e-1?t[i+2]:2*s-r;return en((n-i/e)*e,a,r,s,o)}}function rn(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],s=t[i%e],a=t[(i+1)%e],o=t[(i+2)%e];return en((n-i/e)*e,r,s,a,o)}}function sn(t){return function(){return t}}function an(t,e){return function(n){return t+n*e}}function on(t,e){var n=e-t;return n?an(t,n>180||n<-180?n-360*Math.round(n/360):n):sn(isNaN(t)?e:t)}function ln(t,e){var n=e-t;return n?an(t,n):sn(isNaN(t)?e:t)}Yt(tn,Qe,Jt(Zt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new tn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new tn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Ee,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new ge(255*(e+n*(-.14861*i+Ke*r)),255*(e+n*(We*i+Ge*r)),255*(e+n*(Xe*i)),this.opacity)}}));var cn=function t(e){var n=function(t){return 1==(t=+t)?ln:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):sn(isNaN(e)?n:e)}}(e);function i(t,e){var i=n((t=ve(t)).r,(e=ve(e)).r),r=n(t.g,e.g),s=n(t.b,e.b),a=ln(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=s(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);function un(t){return function(e){var n,i,r=e.length,s=new Array(r),a=new Array(r),o=new Array(r);for(n=0;n<r;++n)i=ve(e[n]),s[n]=i.r||0,a[n]=i.g||0,o[n]=i.b||0;return s=t(s),a=t(a),o=t(o),i.opacity=1,function(t){return i.r=s(t),i.g=a(t),i.b=o(t),i+""}}}var dn=un(nn),pn=un(rn);function hn(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function fn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function mn(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,s=new Array(r),a=new Array(i);for(n=0;n<r;++n)s[n]=wn(t[n],e[n]);for(;n<i;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=s[n](t);return a}}function vn(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function gn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function yn(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=wn(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var bn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_n=new RegExp(bn.source,"g");function xn(t,e){var n,i,r,s=bn.lastIndex=_n.lastIndex=0,a=-1,o=[],l=[];for(t+="",e+="";(n=bn.exec(t))&&(i=_n.exec(e));)(r=i.index)>s&&(r=e.slice(s,r),o[a]?o[a]+=r:o[++a]=r),(n=n[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:gn(n,i)})),s=_n.lastIndex;return s<e.length&&(r=e.slice(s),o[a]?o[a]+=r:o[++a]=r),o.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)o[(n=l[i]).i]=n.x(t);return o.join("")})}function wn(t,e){var n,i=typeof e;return null==e||"boolean"===i?sn(e):("number"===i?gn:"string"===i?(n=pe(e))?(e=n,cn):xn:e instanceof pe?cn:e instanceof Date?vn:fn(e)?hn:Array.isArray(e)?mn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?yn:gn)(t,e)}function kn(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Sn,Cn,En,Mn,An=180/Math.PI,Tn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Dn(t,e,n,i,r,s){var a,o,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),t*i<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*An,skewX:Math.atan(l)*An,scaleX:a,scaleY:o}}function On(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(s,a){var o=[],l=[];return s=t(s),a=t(a),function(t,i,r,s,a,o){if(t!==r||i!==s){var l=a.push("translate(",null,e,null,n);o.push({i:l-4,x:gn(t,r)},{i:l-2,x:gn(i,s)})}else(r||s)&&a.push("translate("+r+e+s+n)}(s.translateX,s.translateY,a.translateX,a.translateY,o,l),function(t,e,n,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),l.push({i:n.push(r(n)+"rotate(",null,i)-2,x:gn(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(s.rotate,a.rotate,o),function(t,e,n,s){t!==e?l.push({i:n.push(r(n)+"skewX(",null,i)-2,x:gn(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(s.skewX,a.skewX,o),function(t,e,n,i,s,a){if(t!==n||e!==i){var o=s.push(r(s)+"scale(",null,",",null,")");a.push({i:o-4,x:gn(t,n)},{i:o-2,x:gn(e,i)})}else 1===n&&1===i||s.push(r(s)+"scale("+n+","+i+")")}(s.scaleX,s.scaleY,a.scaleX,a.scaleY,o,l),s=a=null,function(t){for(var e,n=-1,i=l.length;++n<i;)o[(e=l[n]).i]=e.x(t);return o.join("")}}}var Rn=On(function(t){return"none"===t?Tn:(Sn||(Sn=document.createElement("DIV"),Cn=document.documentElement,En=document.defaultView),Sn.style.transform=t,t=En.getComputedStyle(Cn.appendChild(Sn),null).getPropertyValue("transform"),Cn.removeChild(Sn),Dn(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Nn=On(function(t){return null==t?Tn:(Mn||(Mn=document.createElementNS("http://www.w3.org/2000/svg","g")),Mn.setAttribute("transform",t),(t=Mn.transform.baseVal.consolidate())?Dn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Tn)},", ",")",")"),In=Math.SQRT2,$n=2,jn=4,Ln=1e-12;function Vn(t){return((t=Math.exp(t))+1/t)/2}function Pn(t,e){var n,i,r=t[0],s=t[1],a=t[2],o=e[0],l=e[1],c=e[2],u=o-r,d=l-s,p=u*u+d*d;if(p<Ln)i=Math.log(c/a)/In,n=function(t){return[r+t*u,s+t*d,a*Math.exp(In*t*i)]};else{var h=Math.sqrt(p),f=(c*c-a*a+jn*p)/(2*a*$n*h),m=(c*c-a*a-jn*p)/(2*c*$n*h),v=Math.log(Math.sqrt(f*f+1)-f),g=Math.log(Math.sqrt(m*m+1)-m);i=(g-v)/In,n=function(t){var e=t*i,n=Vn(v),o=a/($n*h)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(In*e+v)-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[r+o*u,s+o*d,a*n/Vn(In*e+v)]}}return n.duration=1e3*i,n}function qn(t){return function(e,n){var i=t((e=ke(e)).h,(n=ke(n)).h),r=ln(e.s,n.s),s=ln(e.l,n.l),a=ln(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=r(t),e.l=s(t),e.opacity=a(t),e+""}}}var zn=qn(on),Fn=qn(ln);function Bn(t){return function(e,n){var i=t((e=Be(e)).h,(n=Be(n)).h),r=ln(e.c,n.c),s=ln(e.l,n.l),a=ln(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=r(t),e.l=s(t),e.opacity=a(t),e+""}}}var Hn=Bn(on),Un=Bn(ln);function Kn(t){return function e(n){function i(e,i){var r=t((e=Qe(e)).h,(i=Qe(i)).h),s=ln(e.s,i.s),a=ln(e.l,i.l),o=ln(e.opacity,i.opacity);return function(t){return e.h=r(t),e.s=s(t),e.l=a(Math.pow(t,n)),e.opacity=o(t),e+""}}return n=+n,i.gamma=e,i}(1)}var Wn,Gn,Xn=Kn(on),Yn=Kn(ln),Jn=0,Zn=0,Qn=0,ti=1e3,ei=0,ni=0,ii=0,ri="object"==typeof performance&&performance.now?performance:Date,si="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ai(){return ni||(si(oi),ni=ri.now()+ii)}function oi(){ni=0}function li(){this._call=this._time=this._next=null}function ci(t,e,n){var i=new li;return i.restart(t,e,n),i}function ui(){ai(),++Jn;for(var t,e=Wn;e;)(t=ni-e._time)>=0&&e._call.call(null,t),e=e._next;--Jn}function di(){ni=(ei=ri.now())+ii,Jn=Zn=0;try{ui()}finally{Jn=0,function(){for(var t,e,n=Wn,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Wn=e);Gn=t,hi(i)}(),ni=0}}function pi(){var t=ri.now(),e=t-ei;e>ti&&(ii-=e,ei=t)}function hi(t){Jn||(Zn&&(Zn=clearTimeout(Zn)),t-ni>24?(t<1/0&&(Zn=setTimeout(di,t-ri.now()-ii)),Qn&&(Qn=clearInterval(Qn))):(Qn||(ei=ri.now(),Qn=setInterval(pi,ti)),Jn=1,si(di)))}function fi(t,e,n){var i=new li;return e=null==e?0:+e,i.restart(function(n){i.stop(),t(n+e)},e,n),i}li.prototype=ci.prototype={constructor:li,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ai():+n)+(null==e?0:+e),this._next||Gn===this||(Gn?Gn._next=this:Wn=this,Gn=this),this._call=t,this._time=n,hi()},stop:function(){this._call&&(this._call=null,this._time=1/0,hi())}};var mi=F("start","end","cancel","interrupt"),vi=[],gi=0,yi=1,bi=2,_i=3,xi=4,wi=5,ki=6;function Si(t,e,n,i,r,s){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function s(l){var c,u,d,p;if(n.state!==yi)return o();for(c in r)if((p=r[c]).name===n.name){if(p.state===_i)return fi(s);p.state===xi?(p.state=ki,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[c]):+c<e&&(p.state=ki,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[c])}if(fi(function(){n.state===_i&&(n.state=xi,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=bi,n.on.call("start",t,t.__data__,n.index,n.group),n.state===bi){for(n.state=_i,i=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(p=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++u]=p);i.length=u+1}}function a(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(o),n.state=wi,1),s=-1,a=i.length;++s<a;)i[s].call(t,r);n.state===wi&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){for(var i in n.state=ki,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=ci(function(t){n.state=yi,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)},0,n.time)}(t,n,{name:e,index:i,group:r,on:mi,tween:vi,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:gi})}function Ci(t,e){var n=Mi(t,e);if(n.state>gi)throw new Error("too late; already scheduled");return n}function Ei(t,e){var n=Mi(t,e);if(n.state>_i)throw new Error("too late; already running");return n}function Mi(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ai(t,e){var n,i,r,s=t.__transition,a=!0;if(s){for(r in e=null==e?null:e+"",s)(n=s[r]).name===e?(i=n.state>bi&&n.state<wi,n.state=ki,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[r]):a=!1;a&&delete t.__transition}}function Ti(t,e,n){var i=t._id;return t.each(function(){var t=Ei(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return Mi(t,i).value[e]}}function Di(t,e){var n;return("number"==typeof e?gn:e instanceof pe?cn:(n=pe(e))?(e=n,cn):xn)(t,e)}var Oi=Ot.prototype.constructor;function Ri(t){return function(){this.style.removeProperty(t)}}var Ni=0;function Ii(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function $i(t){return Ot().transition(t)}function ji(){return++Ni}var Li=Ot.prototype;function Vi(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function Pi(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Ii.prototype=$i.prototype={constructor:Ii,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=J(t));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var o,l,c=i[a],u=c.length,d=s[a]=new Array(u),p=0;p<u;++p)(o=c[p])&&(l=t.call(o,o.__data__,p,c))&&("__data__"in o&&(l.__data__=o.__data__),d[p]=l,Si(d[p],e,n,p,d,Mi(o,n)));return new Ii(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Q(t));for(var i=this._groups,r=i.length,s=[],a=[],o=0;o<r;++o)for(var l,c=i[o],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var p,h=t.call(l,l.__data__,d,c),f=Mi(l,n),m=0,v=h.length;m<v;++m)(p=h[m])&&Si(p,e,n,m,h,f);s.push(h),a.push(l)}return new Ii(s,a,e,n)},filter:function(t){"function"!=typeof t&&(t=tt(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,a=e[r],o=a.length,l=i[r]=[],c=0;c<o;++c)(s=a[c])&&t.call(s,s.__data__,c,a)&&l.push(s);return new Ii(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),a=new Array(i),o=0;o<s;++o)for(var l,c=e[o],u=n[o],d=c.length,p=a[o]=new Array(d),h=0;h<d;++h)(l=c[h]||u[h])&&(p[h]=l);for(;o<i;++o)a[o]=e[o];return new Ii(a,this._parents,this._name,this._id)},selection:function(){return new Oi(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ji(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a,o=i[s],l=o.length,c=0;c<l;++c)if(a=o[c]){var u=Mi(a,e);Si(a,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ii(i,this._parents,t,n)},call:Li.call,nodes:Li.nodes,node:Li.node,size:Li.size,empty:Li.empty,each:Li.each,on:function(t,e){var n=this._id;return arguments.length<2?Mi(this.node(),n).on.on(t):this.each(function(t,e,n){var i,r,s=(e+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})?Ci:Ei;return function(){var a=s(this,t),o=a.on;o!==i&&(r=(i=o).copy()).on(e,n),a.on=r}}(n,t,e))},attr:function(t,e){var n=G(t),i="transform"===n?Nn:Di;return this.attrTween(t,"function"==typeof e?(n.local?function(t,e,n){var i,r,s;return function(){var a,o,l=n(this);if(null!=l)return(a=this.getAttributeNS(t.space,t.local))===(o=l+"")?null:a===i&&o===r?s:(r=o,s=e(i=a,l));this.removeAttributeNS(t.space,t.local)}}:function(t,e,n){var i,r,s;return function(){var a,o,l=n(this);if(null!=l)return(a=this.getAttribute(t))===(o=l+"")?null:a===i&&o===r?s:(r=o,s=e(i=a,l));this.removeAttribute(t)}})(n,i,Ti(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(t,e,n){var i,r,s=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===s?null:a===i?r:r=e(i=a,n)}}:function(t,e,n){var i,r,s=n+"";return function(){var a=this.getAttribute(t);return a===s?null:a===i?r:r=e(i=a,n)}})(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=G(t);return this.tween(n,(i.local?function(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,r)),n}return r._value=e,r}:function(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,r)),n}return r._value=e,r})(i,e))},style:function(t,e,n){var i="transform"==(t+="")?Rn:Di;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var s=lt(this,t),a=(this.style.removeProperty(t),lt(this,t));return s===a?null:s===n&&a===i?r:r=e(n=s,i=a)}}(t,i)).on("end.style."+t,Ri(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,s;return function(){var a=lt(this,t),o=n(this),l=o+"";return null==o&&(this.style.removeProperty(t),l=o=lt(this,t)),a===l?null:a===i&&l===r?s:(r=l,s=e(i=a,o))}}(t,i,Ti(this,"style."+t,e))).each(function(t,e){var n,i,r,s,a="style."+e,o="end."+a;return function(){var l=Ei(this,t),c=l.on,u=null==l.value[a]?s||(s=Ri(e)):void 0;c===n&&r===u||(i=(n=c).copy()).on(o,r=u),l.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,s=n+"";return function(){var a=lt(this,t);return a===s?null:a===i?r:r=e(i=a,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,function(t,e,n){var i,r;function s(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&function(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}(t,s,n)),i}return s._value=e,s}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Ti(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&function(t){return function(e){this.textContent=t.call(this,e)}}(i)),e}return i._value=t,i}(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=Mi(this.node(),n).tween,s=0,a=r.length;s<a;++s)if((i=r[s]).name===t)return i.value;return null}return this.each((null==e?function(t,e){var n,i;return function(){var r=Ei(this,t),s=r.tween;if(s!==n)for(var a=0,o=(i=n=s).length;a<o;++a)if(i[a].name===e){(i=i.slice()).splice(a,1);break}r.tween=i}}:function(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var s=Ei(this,t),a=s.tween;if(a!==i){r=(i=a).slice();for(var o={name:e,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=o;break}l===c&&r.push(o)}s.tween=r}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Ci(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Ci(this,t).delay=e}})(e,t)):Mi(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Ei(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Ei(this,t).duration=e}})(e,t)):Mi(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Ei(this,t).ease=e}}(e,t)):Mi(this.node(),e).ease},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){0==--r&&s()}};n.each(function(){var n=Ei(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),n.on=e})})}};var qi=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),zi=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Fi=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Bi=Math.PI,Hi=Bi/2;function Ui(t){return(1-Math.cos(Bi*t))/2}function Ki(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function Wi(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Gi=4/11,Xi=6/11,Yi=8/11,Ji=.75,Zi=9/11,Qi=10/11,tr=.9375,er=21/22,nr=63/64,ir=1/Gi/Gi;function rr(t){return(t=+t)<Gi?ir*t*t:t<Yi?ir*(t-=Xi)*t+Ji:t<Qi?ir*(t-=Zi)*t+tr:ir*(t-=er)*t+nr}var sr=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),ar=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),or=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),lr=2*Math.PI,cr=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=lr);function r(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/n)}return r.amplitude=function(e){return t(e,n*lr)},r.period=function(n){return t(e,n)},r}(1,.3),ur=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=lr);function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}return r.amplitude=function(e){return t(e,n*lr)},r.period=function(n){return t(e,n)},r}(1,.3),dr=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=lr);function r(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/n))/2}return r.amplitude=function(e){return t(e,n*lr)},r.period=function(n){return t(e,n)},r}(1,.3),pr={time:null,delay:0,duration:250,ease:Pi};function hr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return pr.time=ai(),pr;return n}Ot.prototype.interrupt=function(t){return this.each(function(){Ai(this,t)})},Ot.prototype.transition=function(t){var e,n;t instanceof Ii?(e=t._id,t=t._name):(e=ji(),(n=pr).time=ai(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a,o=i[s],l=o.length,c=0;c<l;++c)(a=o[c])&&Si(a,t,e,c,o,n||hr(a,e));return new Ii(i,this._parents,t,e)};var fr=[null];function mr(t){return function(){return t}}function vr(){t.event.stopImmediatePropagation()}function gr(){t.event.preventDefault(),t.event.stopImmediatePropagation()}var yr={name:"drag"},br={name:"space"},_r={name:"handle"},xr={name:"center"};function wr(t){return[+t[0],+t[1]]}function kr(t){return[wr(t[0]),wr(t[1])]}var Sr={name:"x",handles:["w","e"].map(Rr),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Cr={name:"y",handles:["n","s"].map(Rr),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Er={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Rr),input:function(t){return null==t?null:kr(t)},output:function(t){return t}},Mr={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ar={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Tr={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Dr={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Or={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Rr(t){return{type:t}}function Nr(){return!t.event.ctrlKey&&!t.event.button}function Ir(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function $r(){return navigator.maxTouchPoints||"ontouchstart"in this}function jr(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Lr(e){var n,i=Ir,r=Nr,s=$r,a=!0,o=F("start","brush","end"),l=6;function c(t){var n=t.property("__brush",v).selectAll(".overlay").data([Rr("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Mr.overlay).merge(n).each(function(){var t=jr(this).extent;Rt(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([Rr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Mr.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(e.handles,function(t){return t.type});i.exit().remove(),i.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return Mr[t.type]}),t.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(s).on("touchstart.brush",h).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(){var t=Rt(this),e=jr(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-l/2:e[0][0]-l/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-l/2:e[0][1]-l/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+l:l}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+l:l})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function d(t,e,n){return!n&&t.__brush.emitter||new p(t,e)}function p(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function h(){if((!n||t.event.touches)&&r.apply(this,arguments)){var i,s,o,l,c,p,h,f,m,v,g,y,b=this,_=t.event.target.__data__.type,x="selection"===(a&&t.event.metaKey?_="overlay":_)?yr:a&&t.event.altKey?xr:_r,w=e===Cr?null:Dr[_],k=e===Sr?null:Or[_],S=jr(b),C=S.extent,E=S.selection,M=C[0][0],A=C[0][1],T=C[1][0],D=C[1][1],O=0,R=0,N=w&&k&&a&&t.event.shiftKey,I=t.event.touches?(y=t.event.changedTouches[0].identifier,function(e){return Pt(e,t.event.touches,y)}):Vt,$=I(b),j=$,L=d(b,arguments,!0).beforestart();"overlay"===_?(E&&(m=!0),S.selection=E=[[i=e===Cr?M:$[0],o=e===Sr?A:$[1]],[c=e===Cr?T:i,h=e===Sr?D:o]]):(i=E[0][0],o=E[0][1],c=E[1][0],h=E[1][1]),s=i,l=o,p=c,f=h;var V=Rt(b).attr("pointer-events","none"),P=V.selectAll(".overlay").attr("cursor",Mr[_]);if(t.event.touches)L.moved=z,L.ended=B;else{var q=Rt(t.event.view).on("mousemove.brush",z,!0).on("mouseup.brush",B,!0);a&&q.on("keydown.brush",function(){switch(t.event.keyCode){case 16:N=w&&k;break;case 18:x===_r&&(w&&(c=p-O*w,i=s+O*w),k&&(h=f-R*k,o=l+R*k),x=xr,F());break;case 32:x!==_r&&x!==xr||(w<0?c=p-O:w>0&&(i=s-O),k<0?h=f-R:k>0&&(o=l-R),x=br,P.attr("cursor",Mr.selection),F());break;default:return}gr()},!0).on("keyup.brush",function(){switch(t.event.keyCode){case 16:N&&(v=g=N=!1,F());break;case 18:x===xr&&(w<0?c=p:w>0&&(i=s),k<0?h=f:k>0&&(o=l),x=_r,F());break;case 32:x===br&&(t.event.altKey?(w&&(c=p-O*w,i=s+O*w),k&&(h=f-R*k,o=l+R*k),x=xr):(w<0?c=p:w>0&&(i=s),k<0?h=f:k>0&&(o=l),x=_r),P.attr("cursor",Mr[_]),F());break;default:return}gr()},!0),Ft(t.event.view)}vr(),Ai(b),u.call(b),L.start()}function z(){var t=I(b);!N||v||g||(Math.abs(t[0]-j[0])>Math.abs(t[1]-j[1])?g=!0:v=!0),j=t,m=!0,gr(),F()}function F(){var t;switch(O=j[0]-$[0],R=j[1]-$[1],x){case br:case yr:w&&(O=Math.max(M-i,Math.min(T-c,O)),s=i+O,p=c+O),k&&(R=Math.max(A-o,Math.min(D-h,R)),l=o+R,f=h+R);break;case _r:w<0?(O=Math.max(M-i,Math.min(T-i,O)),s=i+O,p=c):w>0&&(O=Math.max(M-c,Math.min(T-c,O)),s=i,p=c+O),k<0?(R=Math.max(A-o,Math.min(D-o,R)),l=o+R,f=h):k>0&&(R=Math.max(A-h,Math.min(D-h,R)),l=o,f=h+R);break;case xr:w&&(s=Math.max(M,Math.min(T,i-O*w)),p=Math.max(M,Math.min(T,c+O*w))),k&&(l=Math.max(A,Math.min(D,o-R*k)),f=Math.max(A,Math.min(D,h+R*k)))}p<s&&(w*=-1,t=i,i=c,c=t,t=s,s=p,p=t,_ in Ar&&P.attr("cursor",Mr[_=Ar[_]])),f<l&&(k*=-1,t=o,o=h,h=t,t=l,l=f,f=t,_ in Tr&&P.attr("cursor",Mr[_=Tr[_]])),S.selection&&(E=S.selection),v&&(s=E[0][0],p=E[1][0]),g&&(l=E[0][1],f=E[1][1]),E[0][0]===s&&E[0][1]===l&&E[1][0]===p&&E[1][1]===f||(S.selection=[[s,l],[p,f]],u.call(b),L.brush())}function B(){if(vr(),t.event.touches){if(t.event.touches.length)return;n&&clearTimeout(n),n=setTimeout(function(){n=null},500)}else Bt(t.event.view,m),q.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);V.attr("pointer-events","all"),P.attr("cursor",Mr.overlay),S.selection&&(E=S.selection),function(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}(E)&&(S.selection=null,u.call(b)),L.end()}}function f(){d(this,arguments).moved()}function m(){d(this,arguments).ended()}function v(){var t=this.__brush||{selection:null};return t.extent=kr(i.apply(this,arguments)),t.dim=e,t}return c.move=function(t,n){t.selection?t.on("start.brush",function(){d(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){d(this,arguments).end()}).tween("brush",function(){var t=this,i=t.__brush,r=d(t,arguments),s=i.selection,a=e.input("function"==typeof n?n.apply(this,arguments):n,i.extent),o=wn(s,a);function l(e){i.selection=1===e&&null===a?null:o(e),u.call(t),r.brush()}return null!==s&&null!==a?l:l(1)}):t.each(function(){var t=this,i=arguments,r=t.__brush,s=e.input("function"==typeof n?n.apply(t,i):n,r.extent),a=d(t,i).beforestart();Ai(t),r.selection=null===s?null:s,u.call(t),a.start().brush().end()})},c.clear=function(t){c.move(t,null)},p.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){Mt(new function(t,e,n){this.target=t,this.type=e,this.selection=n}(c,t,e.output(this.state.selection)),o.apply,o,[t,this.that,this.args])}},c.extent=function(t){return arguments.length?(i="function"==typeof t?t:mr(kr(t)),c):i},c.filter=function(t){return arguments.length?(r="function"==typeof t?t:mr(!!t),c):r},c.touchable=function(t){return arguments.length?(s="function"==typeof t?t:mr(!!t),c):s},c.handleSize=function(t){return arguments.length?(l=+t,c):l},c.keyModifiers=function(t){return arguments.length?(a=!!t,c):a},c.on=function(){var t=o.on.apply(o,arguments);return t===o?c:t},c}var Vr=Math.cos,Pr=Math.sin,qr=Math.PI,zr=qr/2,Fr=2*qr,Br=Math.max;var Hr=Array.prototype.slice;function Ur(t){return function(){return t}}var Kr=Math.PI,Wr=2*Kr,Gr=Wr-1e-6;function Xr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Yr(){return new Xr}function Jr(t){return t.source}function Zr(t){return t.target}function Qr(t){return t.radius}function ts(t){return t.startAngle}function es(t){return t.endAngle}function ns(){}function is(t,e){var n=new ns;if(t instanceof ns)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,r=-1,s=t.length;if(null==e)for(;++r<s;)n.set(r,t[r]);else for(;++r<s;)n.set(e(i=t[r],r,t),i)}else if(t)for(var a in t)n.set(a,t[a]);return n}function rs(){return{}}function ss(t,e,n){t[e]=n}function as(){return is()}function os(t,e,n){t.set(e,n)}function ls(){}Xr.prototype=Yr.prototype={constructor:Xr,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+s)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var s=this._x1,a=this._y1,o=n-t,l=i-e,c=s-t,u=a-e,d=c*c+u*u;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(d>1e-6)if(Math.abs(u*o-l*c)>1e-6&&r){var p=n-s,h=i-a,f=o*o+l*l,m=p*p+h*h,v=Math.sqrt(f),g=Math.sqrt(d),y=r*Math.tan((Kr-Math.acos((f+d-m)/(2*v*g)))/2),b=y/g,_=y/v;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*c)+","+(e+b*u)),this._+="A"+r+","+r+",0,0,"+ +(u*p>c*h)+","+(this._x1=t+_*o)+","+(this._y1=e+_*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,i,r,s){t=+t,e=+e,s=!!s;var a=(n=+n)*Math.cos(i),o=n*Math.sin(i),l=t+a,c=e+o,u=1^s,d=s?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+l+","+c),n&&(d<0&&(d=d%Wr+Wr),d>Gr?this._+="A"+n+","+n+",0,1,"+u+","+(t-a)+","+(e-o)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):d>1e-6&&(this._+="A"+n+","+n+",0,"+ +(d>=Kr)+","+u+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}},ns.prototype=is.prototype={constructor:ns,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var cs=is.prototype;function us(t,e){var n=new ls;if(t instanceof ls)t.each(function(t){n.add(t)});else if(t){var i=-1,r=t.length;if(null==e)for(;++i<r;)n.add(t[i]);else for(;++i<r;)n.add(e(t[i],i,t))}return n}ls.prototype=us.prototype={constructor:ls,has:cs.has,add:function(t){return this["$"+(t+="")]=t,this},remove:cs.remove,clear:cs.clear,values:cs.keys,size:cs.size,empty:cs.empty,each:cs.each};var ds=Array.prototype.slice;function ps(t,e){return t-e}function hs(t){return function(){return t}}function fs(t,e){for(var n,i=-1,r=e.length;++i<r;)if(n=ms(t,e[i]))return n;return 0}function ms(t,e){for(var n=e[0],i=e[1],r=-1,s=0,a=t.length,o=a-1;s<a;o=s++){var l=t[s],c=l[0],u=l[1],d=t[o],p=d[0],h=d[1];if(vs(l,d,e))return 0;u>i!=h>i&&n<(p-c)*(i-u)/(h-u)+c&&(r=-r)}return r}function vs(t,e,n){var i,r,s,a;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(r=t[i=+(t[0]===e[0])],s=n[i],a=e[i],r<=s&&s<=a||a<=s&&s<=r)}function gs(){}var ys=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function bs(){var t=1,e=1,n=k,i=o;function r(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(ps);else{var i=u(t),r=i[0],a=i[1];e=w(r,a,e),e=v(Math.floor(r/e)*e,Math.floor(a/e)*e,e)}return e.map(function(e){return s(t,e)})}function s(n,r){var s=[],o=[];return function(n,i,r){var s,o,l,c,u,d,p=new Array,h=new Array;for(s=o=-1,c=n[0]>=i,ys[c<<1].forEach(f);++s<t-1;)l=c,c=n[s+1]>=i,ys[l|c<<1].forEach(f);for(ys[c<<0].forEach(f);++o<e-1;){for(s=-1,c=n[o*t+t]>=i,u=n[o*t]>=i,ys[c<<1|u<<2].forEach(f);++s<t-1;)l=c,c=n[o*t+t+s+1]>=i,d=u,u=n[o*t+s+1]>=i,ys[l|c<<1|u<<2|d<<3].forEach(f);ys[c|u<<3].forEach(f)}for(s=-1,u=n[o*t]>=i,ys[u<<2].forEach(f);++s<t-1;)d=u,u=n[o*t+s+1]>=i,ys[u<<2|d<<3].forEach(f);function f(t){var e,n,i=[t[0][0]+s,t[0][1]+o],l=[t[1][0]+s,t[1][1]+o],c=a(i),u=a(l);(e=h[c])?(n=p[u])?(delete h[e.end],delete p[n.start],e===n?(e.ring.push(l),r(e.ring)):p[e.start]=h[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete h[e.end],e.ring.push(l),h[e.end=u]=e):(e=p[u])?(n=h[c])?(delete p[e.start],delete h[n.end],e===n?(e.ring.push(l),r(e.ring)):p[n.start]=h[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete p[e.start],e.ring.unshift(i),p[e.start=c]=e):p[c]=h[u]={start:c,end:u,ring:[i,l]}}ys[u<<3].forEach(f)}(n,r,function(t){i(t,n,r),function(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}(t)>0?s.push([t]):o.push(t)}),o.forEach(function(t){for(var e,n=0,i=s.length;n<i;++n)if(-1!==fs((e=s[n])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:r,coordinates:s}}function a(e){return 2*e[0]+e[1]*(t+1)*4}function o(n,i,r){n.forEach(function(n){var s,a=n[0],o=n[1],l=0|a,c=0|o,u=i[c*t+l];a>0&&a<t&&l===a&&(s=i[c*t+l-1],n[0]=a+(r-s)/(u-s)-.5),o>0&&o<e&&c===o&&(s=i[(c-1)*t+l],n[1]=o+(r-s)/(u-s)-.5)})}return r.contour=s,r.size=function(n){if(!arguments.length)return[t,e];var i=Math.ceil(n[0]),s=Math.ceil(n[1]);if(!(i>0&&s>0))throw new Error("invalid size");return t=i,e=s,r},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?hs(ds.call(t)):hs(t),r):n},r.smooth=function(t){return arguments.length?(i=t?o:gs,r):i===o},r}function _s(t,e,n){for(var i=t.width,r=t.height,s=1+(n<<1),a=0;a<r;++a)for(var o=0,l=0;o<i+n;++o)o<i&&(l+=t.data[o+a*i]),o>=n&&(o>=s&&(l-=t.data[o-s+a*i]),e.data[o-n+a*i]=l/Math.min(o+1,i-1+s-o,s))}function xs(t,e,n){for(var i=t.width,r=t.height,s=1+(n<<1),a=0;a<i;++a)for(var o=0,l=0;o<r+n;++o)o<r&&(l+=t.data[a+o*i]),o>=n&&(o>=s&&(l-=t.data[a+(o-s)*i]),e.data[a+(o-n)*i]=l/Math.min(o+1,r-1+s-o,s))}function ws(t){return t[0]}function ks(t){return t[1]}function Ss(){return 1}var Cs={},Es={},Ms=34,As=10,Ts=13;function Ds(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function Os(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var i in t)i in e||n.push(e[i]=i)}),n}function Rs(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function Ns(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function i(t,e){var i,r=[],s=t.length,a=0,o=0,l=s<=0,c=!1;function u(){if(l)return Es;if(c)return c=!1,Cs;var e,i,r=a;if(t.charCodeAt(r)===Ms){for(;a++<s&&t.charCodeAt(a)!==Ms||t.charCodeAt(++a)===Ms;);return(e=a)>=s?l=!0:(i=t.charCodeAt(a++))===As?c=!0:i===Ts&&(c=!0,t.charCodeAt(a)===As&&++a),t.slice(r+1,e-1).replace(/""/g,'"')}for(;a<s;){if((i=t.charCodeAt(e=a++))===As)c=!0;else if(i===Ts)c=!0,t.charCodeAt(a)===As&&++a;else if(i!==n)continue;return t.slice(r,e)}return l=!0,t.slice(r,s)}for(t.charCodeAt(s-1)===As&&--s,t.charCodeAt(s-1)===Ts&&--s;(i=u())!==Es;){for(var d=[];i!==Cs&&i!==Es;)d.push(i),i=u();e&&null==(d=e(d,o++))||r.push(d)}return r}function r(e,n){return e.map(function(e){return n.map(function(t){return a(e[t])}).join(t)})}function s(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?function(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+Rs(-t,6):t>9999?"+"+Rs(t,6):Rs(t,4)}(t.getUTCFullYear())+"-"+Rs(t.getUTCMonth()+1,2)+"-"+Rs(t.getUTCDate(),2)+(r?"T"+Rs(e,2)+":"+Rs(n,2)+":"+Rs(i,2)+"."+Rs(r,3)+"Z":i?"T"+Rs(e,2)+":"+Rs(n,2)+":"+Rs(i,2)+"Z":n||e?"T"+Rs(e,2)+":"+Rs(n,2)+"Z":"")}(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,s=i(t,function(t,i){if(n)return n(t,i-1);r=t,n=e?function(t,e){var n=Ds(t);return function(i,r){return e(n(i),r,t)}}(t,e):Ds(t)});return s.columns=r||[],s},parseRows:i,format:function(e,n){return null==n&&(n=Os(e)),[n.map(a).join(t)].concat(r(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Os(t)),r(t,e).join("\n")},formatRows:function(t){return t.map(s).join("\n")},formatRow:s,formatValue:a}}var Is=Ns(","),$s=Is.parse,js=Is.parseRows,Ls=Is.format,Vs=Is.formatBody,Ps=Is.formatRows,qs=Is.formatRow,zs=Is.formatValue,Fs=Ns("\t"),Bs=Fs.parse,Hs=Fs.parseRows,Us=Fs.format,Ks=Fs.formatBody,Ws=Fs.formatRows,Gs=Fs.formatRow,Xs=Fs.formatValue,Ys=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Js(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function Zs(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function Qs(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function ta(t,e){return fetch(t,e).then(Qs)}function ea(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=void 0),ta(e,n).then(function(e){return t(e,i)})}}var na=ea($s),ia=ea(Bs);function ra(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}function sa(t){return function(e,n){return ta(e,n).then(function(e){return(new DOMParser).parseFromString(e,t)})}}var aa=sa("application/xml"),oa=sa("text/html"),la=sa("image/svg+xml");function ca(t){return function(){return t}}function ua(){return 1e-6*(Math.random()-.5)}function da(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,s,a,o,l,c,u,d,p,h=t._root,f={data:i},m=t._x0,v=t._y0,g=t._x1,y=t._y1;if(!h)return t._root=f,t;for(;h.length;)if((c=e>=(s=(m+g)/2))?m=s:g=s,(u=n>=(a=(v+y)/2))?v=a:y=a,r=h,!(h=h[d=u<<1|c]))return r[d]=f,t;if(o=+t._x.call(null,h.data),l=+t._y.call(null,h.data),e===o&&n===l)return f.next=h,r?r[d]=f:t._root=f,t;do{r=r?r[d]=new Array(4):t._root=new Array(4),(c=e>=(s=(m+g)/2))?m=s:g=s,(u=n>=(a=(v+y)/2))?v=a:y=a}while((d=u<<1|c)==(p=(l>=a)<<1|o>=s));return r[p]=h,r[d]=f,t}function pa(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function ha(t){return t[0]}function fa(t){return t[1]}function ma(t,e,n){var i=new va(null==e?ha:e,null==n?fa:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function va(t,e,n,i,r,s){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=s,this._root=void 0}function ga(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var ya=ma.prototype=va.prototype;function ba(t){return t.x+t.vx}function _a(t){return t.y+t.vy}function xa(t){return t.index}function wa(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function ka(t){return t.x}function Sa(t){return t.y}ya.copy=function(){var t,e,n=new va(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=ga(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=ga(e));return n},ya.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return da(this.cover(e,n),e,n,t)},ya.addAll=function(t){var e,n,i,r,s=t.length,a=new Array(s),o=new Array(s),l=1/0,c=1/0,u=-1/0,d=-1/0;for(n=0;n<s;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(a[n]=i,o[n]=r,i<l&&(l=i),i>u&&(u=i),r<c&&(c=r),r>d&&(d=r));if(l>u||c>d)return this;for(this.cover(l,c).cover(u,d),n=0;n<s;++n)da(this,a[n],o[n],t[n]);return this},ya.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,s=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,s=(i=Math.floor(e))+1;else{for(var a,o,l=r-n,c=this._root;n>t||t>=r||i>e||e>=s;)switch(o=(e<i)<<1|t<n,(a=new Array(4))[o]=c,c=a,l*=2,o){case 0:r=n+l,s=i+l;break;case 1:n=r-l,s=i+l;break;case 2:r=n+l,i=s-l;break;case 3:n=r-l,i=s-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._x1=r,this._y1=s,this},ya.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},ya.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},ya.find=function(t,e,n){var i,r,s,a,o,l,c,u=this._x0,d=this._y0,p=this._x1,h=this._y1,f=[],m=this._root;for(m&&f.push(new pa(m,u,d,p,h)),null==n?n=1/0:(u=t-n,d=e-n,p=t+n,h=e+n,n*=n);l=f.pop();)if(!(!(m=l.node)||(r=l.x0)>p||(s=l.y0)>h||(a=l.x1)<u||(o=l.y1)<d))if(m.length){var v=(r+a)/2,g=(s+o)/2;f.push(new pa(m[3],v,g,a,o),new pa(m[2],r,g,v,o),new pa(m[1],v,s,a,g),new pa(m[0],r,s,v,g)),(c=(e>=g)<<1|t>=v)&&(l=f[f.length-1],f[f.length-1]=f[f.length-1-c],f[f.length-1-c]=l)}else{var y=t-+this._x.call(null,m.data),b=e-+this._y.call(null,m.data),_=y*y+b*b;if(_<n){var x=Math.sqrt(n=_);u=t-x,d=e-x,p=t+x,h=e+x,i=m.data}}return i},ya.remove=function(t){if(isNaN(s=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,i,r,s,a,o,l,c,u,d,p,h=this._root,f=this._x0,m=this._y0,v=this._x1,g=this._y1;if(!h)return this;if(h.length)for(;;){if((c=s>=(o=(f+v)/2))?f=o:v=o,(u=a>=(l=(m+g)/2))?m=l:g=l,e=h,!(h=h[d=u<<1|c]))return this;if(!h.length)break;(e[d+1&3]||e[d+2&3]||e[d+3&3])&&(n=e,p=d)}for(;h.data!==t;)if(i=h,!(h=h.next))return this;return(r=h.next)&&delete h.next,i?(r?i.next=r:delete i.next,this):e?(r?e[d]=r:delete e[d],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[p]=h:this._root=h),this):(this._root=r,this)},ya.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},ya.root=function(){return this._root},ya.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},ya.visit=function(t){var e,n,i,r,s,a,o=[],l=this._root;for(l&&o.push(new pa(l,this._x0,this._y0,this._x1,this._y1));e=o.pop();)if(!t(l=e.node,i=e.x0,r=e.y0,s=e.x1,a=e.y1)&&l.length){var c=(i+s)/2,u=(r+a)/2;(n=l[3])&&o.push(new pa(n,c,u,s,a)),(n=l[2])&&o.push(new pa(n,i,u,c,a)),(n=l[1])&&o.push(new pa(n,c,r,s,u)),(n=l[0])&&o.push(new pa(n,i,r,c,u))}return this},ya.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new pa(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var s,a=e.x0,o=e.y0,l=e.x1,c=e.y1,u=(a+l)/2,d=(o+c)/2;(s=r[0])&&n.push(new pa(s,a,o,u,d)),(s=r[1])&&n.push(new pa(s,u,o,l,d)),(s=r[2])&&n.push(new pa(s,a,d,u,c)),(s=r[3])&&n.push(new pa(s,u,d,l,c))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},ya.x=function(t){return arguments.length?(this._x=t,this):this._x},ya.y=function(t){return arguments.length?(this._y=t,this):this._y};var Ca=10,Ea=Math.PI*(3-Math.sqrt(5));function Ma(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Aa(t){return(t=Ma(Math.abs(t)))?t[1]:NaN}var Ta,Da=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Oa(t){if(!(e=Da.exec(t)))throw new Error("invalid format: "+t);var e;return new Ra({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ra(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Na(t,e){var n=Ma(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Oa.prototype=Ra.prototype,Ra.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ia={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Na(100*t,e)},r:Na,s:function(t,e){var n=Ma(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(Ta=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Ma(t,Math.max(0,e+s-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function $a(t){return t}var ja,La=Array.prototype.map,Va=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Pa(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?$a:(e=La.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,s=[],a=0,o=e[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),s.push(t.substring(r-=o,r+o)),!((l+=o+1)>i));)o=e[a=(a+1)%e.length];return s.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",s=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?$a:function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(La.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"-":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function d(t){var e=(t=Oa(t)).fill,n=t.align,d=t.sign,p=t.symbol,h=t.zero,f=t.width,m=t.comma,v=t.precision,g=t.trim,y=t.type;"n"===y?(m=!0,y="g"):Ia[y]||(void 0===v&&(v=12),g=!0,y="g"),(h||"0"===e&&"="===n)&&(h=!0,e="0",n="=");var b="$"===p?r:"#"===p&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===p?s:/[%p]/.test(y)?l:"",x=Ia[y],w=/[defgprs%]/.test(y);function k(t){var r,s,l,p=b,k=_;if("c"===y)k=x(t)+k,t="";else{var S=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:x(Math.abs(t),v),g&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),S&&0==+t&&"+"!==d&&(S=!1),p=(S?"("===d?d:c:"-"===d||"("===d?"":d)+p,k=("s"===y?Va[8+Ta/3]:"")+k+(S&&"("===d?")":""),w)for(r=-1,s=t.length;++r<s;)if(48>(l=t.charCodeAt(r))||l>57){k=(46===l?a+t.slice(r+1):t.slice(r))+k,t=t.slice(0,r);break}}m&&!h&&(t=i(t,1/0));var C=p.length+t.length+k.length,E=C<f?new Array(f-C+1).join(e):"";switch(m&&h&&(t=i(E+t,E.length?f-k.length:1/0),E=""),n){case"<":t=p+t+k+E;break;case"=":t=p+E+t+k;break;case"^":t=E.slice(0,C=E.length>>1)+p+t+k+E.slice(C);break;default:t=E+p+t+k}return o(t)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),k.toString=function(){return t+""},k}return{format:d,formatPrefix:function(t,e){var n=d(((t=Oa(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Aa(e)/3))),r=Math.pow(10,-i),s=Va[8+i/3];return function(t){return n(r*t)+s}}}}function qa(e){return ja=Pa(e),t.format=ja.format,t.formatPrefix=ja.formatPrefix,ja}function za(t){return Math.max(0,-Aa(Math.abs(t)))}function Fa(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Aa(e)/3)))-Aa(Math.abs(t)))}function Ba(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Aa(e)-Aa(t))+1}function Ha(){return new Ua}function Ua(){this.reset()}qa({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Ua.prototype={constructor:Ua,reset:function(){this.s=this.t=0},add:function(t){Wa(Ka,t,this.t),Wa(this,Ka.s,this.s),this.s?this.t+=Ka.t:this.s=Ka.t},valueOf:function(){return this.s}};var Ka=new Ua;function Wa(t,e,n){var i=t.s=e+n,r=i-e,s=i-r;t.t=e-s+(n-r)}var Ga=1e-6,Xa=1e-12,Ya=Math.PI,Ja=Ya/2,Za=Ya/4,Qa=2*Ya,to=180/Ya,eo=Ya/180,no=Math.abs,io=Math.atan,ro=Math.atan2,so=Math.cos,ao=Math.ceil,oo=Math.exp,lo=Math.log,co=Math.pow,uo=Math.sin,po=Math.sign||function(t){return t>0?1:t<0?-1:0},ho=Math.sqrt,fo=Math.tan;function mo(t){return t>1?0:t<-1?Ya:Math.acos(t)}function vo(t){return t>1?Ja:t<-1?-Ja:Math.asin(t)}function go(t){return(t=uo(t/2))*t}function yo(){}function bo(t,e){t&&xo.hasOwnProperty(t.type)&&xo[t.type](t,e)}var _o={Feature:function(t,e){bo(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)bo(n[i].geometry,e)}},xo={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){wo(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)wo(n[i],e,0)},Polygon:function(t,e){ko(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)ko(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)bo(n[i],e)}};function wo(t,e,n){var i,r=-1,s=t.length-n;for(e.lineStart();++r<s;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function ko(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)wo(t[n],e,1);e.polygonEnd()}function So(t,e){t&&_o.hasOwnProperty(t.type)?_o[t.type](t,e):bo(t,e)}var Co,Eo,Mo,Ao,To,Do=Ha(),Oo=Ha(),Ro={point:yo,lineStart:yo,lineEnd:yo,polygonStart:function(){Do.reset(),Ro.lineStart=No,Ro.lineEnd=Io},polygonEnd:function(){var t=+Do;Oo.add(t<0?Qa+t:t),this.lineStart=this.lineEnd=this.point=yo},sphere:function(){Oo.add(Qa)}};function No(){Ro.point=$o}function Io(){jo(Co,Eo)}function $o(t,e){Ro.point=jo,Co=t,Eo=e,Mo=t*=eo,Ao=so(e=(e*=eo)/2+Za),To=uo(e)}function jo(t,e){var n=(t*=eo)-Mo,i=n>=0?1:-1,r=i*n,s=so(e=(e*=eo)/2+Za),a=uo(e),o=To*a,l=Ao*s+o*so(r),c=o*i*uo(r);Do.add(ro(c,l)),Mo=t,Ao=s,To=a}function Lo(t){return[ro(t[1],t[0]),vo(t[2])]}function Vo(t){var e=t[0],n=t[1],i=so(n);return[i*so(e),i*uo(e),uo(n)]}function Po(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function qo(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function zo(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Fo(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Bo(t){var e=ho(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Ho,Uo,Ko,Wo,Go,Xo,Yo,Jo,Zo,Qo,tl,el,nl,il,rl,sl,al,ol,ll,cl,ul,dl,pl,hl,fl,ml,vl=Ha(),gl={point:yl,lineStart:_l,lineEnd:xl,polygonStart:function(){gl.point=wl,gl.lineStart=kl,gl.lineEnd=Sl,vl.reset(),Ro.polygonStart()},polygonEnd:function(){Ro.polygonEnd(),gl.point=yl,gl.lineStart=_l,gl.lineEnd=xl,Do<0?(Ho=-(Ko=180),Uo=-(Wo=90)):vl>Ga?Wo=90:vl<-Ga&&(Uo=-90),Qo[0]=Ho,Qo[1]=Ko},sphere:function(){Ho=-(Ko=180),Uo=-(Wo=90)}};function yl(t,e){Zo.push(Qo=[Ho=t,Ko=t]),e<Uo&&(Uo=e),e>Wo&&(Wo=e)}function bl(t,e){var n=Vo([t*eo,e*eo]);if(Jo){var i=qo(Jo,n),r=qo([i[1],-i[0],0],i);Bo(r),r=Lo(r);var s,a=t-Go,o=a>0?1:-1,l=r[0]*to*o,c=no(a)>180;c^(o*Go<l&&l<o*t)?(s=r[1]*to)>Wo&&(Wo=s):c^(o*Go<(l=(l+360)%360-180)&&l<o*t)?(s=-r[1]*to)<Uo&&(Uo=s):(e<Uo&&(Uo=e),e>Wo&&(Wo=e)),c?t<Go?Cl(Ho,t)>Cl(Ho,Ko)&&(Ko=t):Cl(t,Ko)>Cl(Ho,Ko)&&(Ho=t):Ko>=Ho?(t<Ho&&(Ho=t),t>Ko&&(Ko=t)):t>Go?Cl(Ho,t)>Cl(Ho,Ko)&&(Ko=t):Cl(t,Ko)>Cl(Ho,Ko)&&(Ho=t)}else Zo.push(Qo=[Ho=t,Ko=t]);e<Uo&&(Uo=e),e>Wo&&(Wo=e),Jo=n,Go=t}function _l(){gl.point=bl}function xl(){Qo[0]=Ho,Qo[1]=Ko,gl.point=yl,Jo=null}function wl(t,e){if(Jo){var n=t-Go;vl.add(no(n)>180?n+(n>0?360:-360):n)}else Xo=t,Yo=e;Ro.point(t,e),bl(t,e)}function kl(){Ro.lineStart()}function Sl(){wl(Xo,Yo),Ro.lineEnd(),no(vl)>Ga&&(Ho=-(Ko=180)),Qo[0]=Ho,Qo[1]=Ko,Jo=null}function Cl(t,e){return(e-=t)<0?e+360:e}function El(t,e){return t[0]-e[0]}function Ml(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Al={sphere:yo,point:Tl,lineStart:Ol,lineEnd:Il,polygonStart:function(){Al.lineStart=$l,Al.lineEnd=jl},polygonEnd:function(){Al.lineStart=Ol,Al.lineEnd=Il}};function Tl(t,e){t*=eo;var n=so(e*=eo);Dl(n*so(t),n*uo(t),uo(e))}function Dl(t,e,n){nl+=(t-nl)/++tl,il+=(e-il)/tl,rl+=(n-rl)/tl}function Ol(){Al.point=Rl}function Rl(t,e){t*=eo;var n=so(e*=eo);hl=n*so(t),fl=n*uo(t),ml=uo(e),Al.point=Nl,Dl(hl,fl,ml)}function Nl(t,e){t*=eo;var n=so(e*=eo),i=n*so(t),r=n*uo(t),s=uo(e),a=ro(ho((a=fl*s-ml*r)*a+(a=ml*i-hl*s)*a+(a=hl*r-fl*i)*a),hl*i+fl*r+ml*s);el+=a,sl+=a*(hl+(hl=i)),al+=a*(fl+(fl=r)),ol+=a*(ml+(ml=s)),Dl(hl,fl,ml)}function Il(){Al.point=Tl}function $l(){Al.point=Ll}function jl(){Vl(dl,pl),Al.point=Tl}function Ll(t,e){dl=t,pl=e,t*=eo,e*=eo,Al.point=Vl;var n=so(e);hl=n*so(t),fl=n*uo(t),ml=uo(e),Dl(hl,fl,ml)}function Vl(t,e){t*=eo;var n=so(e*=eo),i=n*so(t),r=n*uo(t),s=uo(e),a=fl*s-ml*r,o=ml*i-hl*s,l=hl*r-fl*i,c=ho(a*a+o*o+l*l),u=vo(c),d=c&&-u/c;ll+=d*a,cl+=d*o,ul+=d*l,el+=u,sl+=u*(hl+(hl=i)),al+=u*(fl+(fl=r)),ol+=u*(ml+(ml=s)),Dl(hl,fl,ml)}function Pl(t){return function(){return t}}function ql(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function zl(t,e){return[no(t)>Ya?t+Math.round(-t/Qa)*Qa:t,e]}function Fl(t,e,n){return(t%=Qa)?e||n?ql(Hl(t),Ul(e,n)):Hl(t):e||n?Ul(e,n):zl}function Bl(t){return function(e,n){return[(e+=t)>Ya?e-Qa:e<-Ya?e+Qa:e,n]}}function Hl(t){var e=Bl(t);return e.invert=Bl(-t),e}function Ul(t,e){var n=so(t),i=uo(t),r=so(e),s=uo(e);function a(t,e){var a=so(e),o=so(t)*a,l=uo(t)*a,c=uo(e),u=c*n+o*i;return[ro(l*r-u*s,o*n-c*i),vo(u*r+l*s)]}return a.invert=function(t,e){var a=so(e),o=so(t)*a,l=uo(t)*a,c=uo(e),u=c*r-l*s;return[ro(l*r+c*s,o*n+u*i),vo(u*n-o*i)]},a}function Kl(t){function e(e){return(e=t(e[0]*eo,e[1]*eo))[0]*=to,e[1]*=to,e}return t=Fl(t[0]*eo,t[1]*eo,t.length>2?t[2]*eo:0),e.invert=function(e){return(e=t.invert(e[0]*eo,e[1]*eo))[0]*=to,e[1]*=to,e},e}function Wl(t,e,n,i,r,s){if(n){var a=so(e),o=uo(e),l=i*n;null==r?(r=e+i*Qa,s=e-l/2):(r=Gl(a,r),s=Gl(a,s),(i>0?r<s:r>s)&&(r+=i*Qa));for(var c,u=r;i>0?u>s:u<s;u-=l)c=Lo([a,-o*so(u),-o*uo(u)]),t.point(c[0],c[1])}}function Gl(t,e){(e=Vo(e))[0]-=t,Bo(e);var n=mo(-e[1]);return((-e[2]<0?-n:n)+Qa-Ga)%Qa}function Xl(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:yo,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Yl(t,e){return no(t[0]-e[0])<Ga&&no(t[1]-e[1])<Ga}function Jl(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Zl(t,e,n,i,r){var s,a,o=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],a=t[e];if(Yl(i,a)){for(r.lineStart(),s=0;s<e;++s)r.point((i=t[s])[0],i[1]);r.lineEnd()}else o.push(n=new Jl(i,t,null,!0)),l.push(n.o=new Jl(i,null,n,!1)),o.push(n=new Jl(a,t,null,!1)),l.push(n.o=new Jl(a,null,n,!0))}}),o.length){for(l.sort(e),Ql(o),Ql(l),s=0,a=l.length;s<a;++s)l[s].e=n=!n;for(var c,u,d=o[0];;){for(var p=d,h=!0;p.v;)if((p=p.n)===d)return;c=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(h)for(s=0,a=c.length;s<a;++s)r.point((u=c[s])[0],u[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(h)for(c=p.p.z,s=c.length-1;s>=0;--s)r.point((u=c[s])[0],u[1]);else i(p.x,p.p.x,-1,r);p=p.p}c=(p=p.o).z,h=!h}while(!p.v);r.lineEnd()}}}function Ql(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}zl.invert=zl;var tc=Ha();function ec(t){return no(t[0])<=Ya?t[0]:po(t[0])*((no(t[0])+Ya)%Qa-Ya)}function nc(t,e){var n=ec(e),i=e[1],r=uo(i),s=[uo(n),-so(n),0],a=0,o=0;tc.reset(),1===r?i=Ja+Ga:-1===r&&(i=-Ja-Ga);for(var l=0,c=t.length;l<c;++l)if(d=(u=t[l]).length)for(var u,d,p=u[d-1],h=ec(p),f=p[1]/2+Za,m=uo(f),v=so(f),g=0;g<d;++g,h=b,m=x,v=w,p=y){var y=u[g],b=ec(y),_=y[1]/2+Za,x=uo(_),w=so(_),k=b-h,S=k>=0?1:-1,C=S*k,E=C>Ya,M=m*x;if(tc.add(ro(M*S*uo(C),v*w+M*so(C))),a+=E?k+S*Qa:k,E^h>=n^b>=n){var A=qo(Vo(p),Vo(y));Bo(A);var T=qo(s,A);Bo(T);var D=(E^k>=0?-1:1)*vo(T[2]);(i>D||i===D&&(A[0]||A[1]))&&(o+=E^k>=0?1:-1)}}return(a<-Ga||a<Ga&&tc<-Ga)^1&o}function ic(t,e,n,i){return function(r){var s,a,o,l=e(r),c=Xl(),u=e(c),d=!1,p={point:h,lineStart:m,lineEnd:v,polygonStart:function(){p.point=g,p.lineStart=y,p.lineEnd=b,a=[],s=[]},polygonEnd:function(){p.point=h,p.lineStart=m,p.lineEnd=v,a=E(a);var t=nc(s,i);a.length?(d||(r.polygonStart(),d=!0),Zl(a,sc,t,n,r)):t&&(d||(r.polygonStart(),d=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),d&&(r.polygonEnd(),d=!1),a=s=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function h(e,n){t(e,n)&&r.point(e,n)}function f(t,e){l.point(t,e)}function m(){p.point=f,l.lineStart()}function v(){p.point=h,l.lineEnd()}function g(t,e){o.push([t,e]),u.point(t,e)}function y(){u.lineStart(),o=[]}function b(){g(o[0][0],o[0][1]),u.lineEnd();var t,e,n,i,l=u.clean(),p=c.result(),h=p.length;if(o.pop(),s.push(o),o=null,h)if(1&l){if((e=(n=p[0]).length-1)>0){for(d||(r.polygonStart(),d=!0),r.lineStart(),t=0;t<e;++t)r.point((i=n[t])[0],i[1]);r.lineEnd()}}else h>1&&2&l&&p.push(p.pop().concat(p.shift())),a.push(p.filter(rc))}return p}}function rc(t){return t.length>1}function sc(t,e){return((t=t.x)[0]<0?t[1]-Ja-Ga:Ja-t[1])-((e=e.x)[0]<0?e[1]-Ja-Ga:Ja-e[1])}var ac=ic(function(){return!0},function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(s,a){var o=s>0?Ya:-Ya,l=no(s-n);no(l-Ya)<Ga?(t.point(n,i=(i+a)/2>0?Ja:-Ja),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(o,i),t.point(s,i),e=0):r!==o&&l>=Ya&&(no(n-r)<Ga&&(n-=r*Ga),no(s-o)<Ga&&(s-=o*Ga),i=function(t,e,n,i){var r,s,a=uo(t-n);return no(a)>Ga?io((uo(e)*(s=so(i))*uo(n)-uo(i)*(r=so(e))*uo(t))/(r*s*a)):(e+i)/2}(n,i,s,a),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(o,i),e=0),t.point(n=s,i=a),r=o},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}},function(t,e,n,i){var r;if(null==t)r=n*Ja,i.point(-Ya,r),i.point(0,r),i.point(Ya,r),i.point(Ya,0),i.point(Ya,-r),i.point(0,-r),i.point(-Ya,-r),i.point(-Ya,0),i.point(-Ya,r);else if(no(t[0]-e[0])>Ga){var s=t[0]<e[0]?Ya:-Ya;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(e[0],e[1])},[-Ya,-Ja]);function oc(t){var e=so(t),n=6*eo,i=e>0,r=no(e)>Ga;function s(t,n){return so(t)*so(n)>e}function a(t,n,i){var r=[1,0,0],s=qo(Vo(t),Vo(n)),a=Po(s,s),o=s[0],l=a-o*o;if(!l)return!i&&t;var c=e*a/l,u=-e*o/l,d=qo(r,s),p=Fo(r,c);zo(p,Fo(s,u));var h=d,f=Po(p,h),m=Po(h,h),v=f*f-m*(Po(p,p)-1);if(!(v<0)){var g=ho(v),y=Fo(h,(-f-g)/m);if(zo(y,p),y=Lo(y),!i)return y;var b,_=t[0],x=n[0],w=t[1],k=n[1];x<_&&(b=_,_=x,x=b);var S=x-_,C=no(S-Ya)<Ga;if(!C&&k<w&&(b=w,w=k,k=b),C||S<Ga?C?w+k>0^y[1]<(no(y[0]-_)<Ga?w:k):w<=y[1]&&y[1]<=k:S>Ya^(_<=y[0]&&y[0]<=x)){var E=Fo(h,(-f+g)/m);return zo(E,p),[y,Lo(E)]}}}function o(e,n){var r=i?t:Ya-t,s=0;return e<-r?s|=1:e>r&&(s|=2),n<-r?s|=4:n>r&&(s|=8),s}return ic(s,function(t){var e,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(d,p){var h,f=[d,p],m=s(d,p),v=i?m?0:o(d,p):m?o(d+(d<0?Ya:-Ya),p):0;if(!e&&(c=l=m)&&t.lineStart(),m!==l&&(!(h=a(e,f))||Yl(e,h)||Yl(f,h))&&(f[0]+=Ga,f[1]+=Ga,m=s(f[0],f[1])),m!==l)u=0,m?(t.lineStart(),h=a(f,e),t.point(h[0],h[1])):(h=a(e,f),t.point(h[0],h[1]),t.lineEnd()),e=h;else if(r&&e&&i^m){var g;v&n||!(g=a(f,e,!0))||(u=0,i?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1])))}!m||e&&Yl(e,f)||t.point(f[0],f[1]),e=f,l=m,n=v},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(c&&l)<<1}}},function(e,i,r,s){Wl(s,t,n,r,e,i)},i?[0,-t]:[-Ya,t-Ya])}var lc=1e9,cc=-lc;function uc(t,e,n,i){function r(r,s){return t<=r&&r<=n&&e<=s&&s<=i}function s(r,s,o,c){var u=0,d=0;if(null==r||(u=a(r,o))!==(d=a(s,o))||l(r,s)<0^o>0)do{c.point(0===u||3===u?t:n,u>1?i:e)}while((u=(u+o+4)%4)!==d);else c.point(s[0],s[1])}function a(i,r){return no(i[0]-t)<Ga?r>0?0:3:no(i[0]-n)<Ga?r>0?2:1:no(i[1]-e)<Ga?r>0?1:0:r>0?3:2}function o(t,e){return l(t.x,e.x)}function l(t,e){var n=a(t,1),i=a(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var l,c,u,d,p,h,f,m,v,g,y,b=a,_=Xl(),x={point:w,lineStart:function(){x.point=k,c&&c.push(u=[]),g=!0,v=!1,f=m=NaN},lineEnd:function(){l&&(k(d,p),h&&v&&_.rejoin(),l.push(_.result())),x.point=w,v&&b.lineEnd()},polygonStart:function(){b=_,l=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=c.length;n<r;++n)for(var s,a,o=c[n],l=1,u=o.length,d=o[0],p=d[0],h=d[1];l<u;++l)s=p,a=h,p=(d=o[l])[0],h=d[1],a<=i?h>i&&(p-s)*(i-a)>(h-a)*(t-s)&&++e:h<=i&&(p-s)*(i-a)<(h-a)*(t-s)&&--e;return e}(),n=y&&e,r=(l=E(l)).length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),s(null,null,1,a),a.lineEnd()),r&&Zl(l,o,e,s,a),a.polygonEnd()),b=a,l=c=u=null}};function w(t,e){r(t,e)&&b.point(t,e)}function k(s,a){var o=r(s,a);if(c&&u.push([s,a]),g)d=s,p=a,h=o,g=!1,o&&(b.lineStart(),b.point(s,a));else if(o&&v)b.point(s,a);else{var l=[f=Math.max(cc,Math.min(lc,f)),m=Math.max(cc,Math.min(lc,m))],_=[s=Math.max(cc,Math.min(lc,s)),a=Math.max(cc,Math.min(lc,a))];!function(t,e,n,i,r,s){var a,o=t[0],l=t[1],c=0,u=1,d=e[0]-o,p=e[1]-l;if(a=n-o,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<u&&(u=a)}else if(d>0){if(a>u)return;a>c&&(c=a)}if(a=r-o,d||!(a<0)){if(a/=d,d<0){if(a>u)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<u&&(u=a)}if(a=i-l,p||!(a>0)){if(a/=p,p<0){if(a<c)return;a<u&&(u=a)}else if(p>0){if(a>u)return;a>c&&(c=a)}if(a=s-l,p||!(a<0)){if(a/=p,p<0){if(a>u)return;a>c&&(c=a)}else if(p>0){if(a<c)return;a<u&&(u=a)}return c>0&&(t[0]=o+c*d,t[1]=l+c*p),u<1&&(e[0]=o+u*d,e[1]=l+u*p),!0}}}}}(l,_,t,e,n,i)?o&&(b.lineStart(),b.point(s,a),y=!1):(v||(b.lineStart(),b.point(l[0],l[1])),b.point(_[0],_[1]),o||b.lineEnd(),y=!1)}f=s,m=a,v=o}return x}}var dc,pc,hc,fc=Ha(),mc={sphere:yo,point:yo,lineStart:function(){mc.point=gc,mc.lineEnd=vc},lineEnd:yo,polygonStart:yo,polygonEnd:yo};function vc(){mc.point=mc.lineEnd=yo}function gc(t,e){dc=t*=eo,pc=uo(e*=eo),hc=so(e),mc.point=yc}function yc(t,e){t*=eo;var n=uo(e*=eo),i=so(e),r=no(t-dc),s=so(r),a=i*uo(r),o=hc*n-pc*i*s,l=pc*n+hc*i*s;fc.add(ro(ho(a*a+o*o),l)),dc=t,pc=n,hc=i}function bc(t){return fc.reset(),So(t,mc),+fc}var _c=[null,null],xc={type:"LineString",coordinates:_c};function wc(t,e){return _c[0]=t,_c[1]=e,bc(xc)}var kc={Feature:function(t,e){return Cc(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)if(Cc(n[i].geometry,e))return!0;return!1}},Sc={Sphere:function(){return!0},Point:function(t,e){return Ec(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Ec(n[i],e))return!0;return!1},LineString:function(t,e){return Mc(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Mc(n[i],e))return!0;return!1},Polygon:function(t,e){return Ac(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Ac(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)if(Cc(n[i],e))return!0;return!1}};function Cc(t,e){return!(!t||!Sc.hasOwnProperty(t.type))&&Sc[t.type](t,e)}function Ec(t,e){return 0===wc(t,e)}function Mc(t,e){for(var n,i,r,s=0,a=t.length;s<a;s++){if(0===(i=wc(t[s],e)))return!0;if(s>0&&(r=wc(t[s],t[s-1]))>0&&n<=r&&i<=r&&(n+i-r)*(1-Math.pow((n-i)/r,2))<Xa*r)return!0;n=i}return!1}function Ac(t,e){return!!nc(t.map(Tc),Dc(e))}function Tc(t){return(t=t.map(Dc)).pop(),t}function Dc(t){return[t[0]*eo,t[1]*eo]}function Oc(t,e,n){var i=v(t,e-Ga,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function Rc(t,e,n){var i=v(t,e-Ga,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function Nc(){var t,e,n,i,r,s,a,o,l,c,u,d,p=10,h=p,f=90,m=360,g=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return v(ao(i/f)*f,n,f).map(u).concat(v(ao(o/m)*m,a,m).map(d)).concat(v(ao(e/p)*p,t,p).filter(function(t){return no(t%f)>Ga}).map(l)).concat(v(ao(s/h)*h,r,h).filter(function(t){return no(t%m)>Ga}).map(c))}return y.lines=function(){return b().map(function(t){return{type:"LineString",coordinates:t}})},y.outline=function(){return{type:"Polygon",coordinates:[u(i).concat(d(a).slice(1),u(n).reverse().slice(1),d(o).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.extentMajor(t).extentMinor(t):y.extentMinor()},y.extentMajor=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],o=+t[0][1],a=+t[1][1],i>n&&(t=i,i=n,n=t),o>a&&(t=o,o=a,a=t),y.precision(g)):[[i,o],[n,a]]},y.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],s=+n[0][1],r=+n[1][1],e>t&&(n=e,e=t,t=n),s>r&&(n=s,s=r,r=n),y.precision(g)):[[e,s],[t,r]]},y.step=function(t){return arguments.length?y.stepMajor(t).stepMinor(t):y.stepMinor()},y.stepMajor=function(t){return arguments.length?(f=+t[0],m=+t[1],y):[f,m]},y.stepMinor=function(t){return arguments.length?(p=+t[0],h=+t[1],y):[p,h]},y.precision=function(p){return arguments.length?(g=+p,l=Oc(s,r,90),c=Rc(e,t,g),u=Oc(o,a,90),d=Rc(i,n,g),y):g},y.extentMajor([[-180,-90+Ga],[180,90-Ga]]).extentMinor([[-180,-80-Ga],[180,80+Ga]])}function Ic(t){return t}var $c,jc,Lc,Vc,Pc=Ha(),qc=Ha(),zc={point:yo,lineStart:yo,lineEnd:yo,polygonStart:function(){zc.lineStart=Fc,zc.lineEnd=Uc},polygonEnd:function(){zc.lineStart=zc.lineEnd=zc.point=yo,Pc.add(no(qc)),qc.reset()},result:function(){var t=Pc/2;return Pc.reset(),t}};function Fc(){zc.point=Bc}function Bc(t,e){zc.point=Hc,$c=Lc=t,jc=Vc=e}function Hc(t,e){qc.add(Vc*t-Lc*e),Lc=t,Vc=e}function Uc(){Hc($c,jc)}var Kc,Wc,Gc,Xc,Yc=1/0,Jc=Yc,Zc=-Yc,Qc=Zc,tu={point:function(t,e){t<Yc&&(Yc=t),t>Zc&&(Zc=t),e<Jc&&(Jc=e),e>Qc&&(Qc=e)},lineStart:yo,lineEnd:yo,polygonStart:yo,polygonEnd:yo,result:function(){var t=[[Yc,Jc],[Zc,Qc]];return Zc=Qc=-(Jc=Yc=1/0),t}},eu=0,nu=0,iu=0,ru=0,su=0,au=0,ou=0,lu=0,cu=0,uu={point:du,lineStart:pu,lineEnd:mu,polygonStart:function(){uu.lineStart=vu,uu.lineEnd=gu},polygonEnd:function(){uu.point=du,uu.lineStart=pu,uu.lineEnd=mu},result:function(){var t=cu?[ou/cu,lu/cu]:au?[ru/au,su/au]:iu?[eu/iu,nu/iu]:[NaN,NaN];return eu=nu=iu=ru=su=au=ou=lu=cu=0,t}};function du(t,e){eu+=t,nu+=e,++iu}function pu(){uu.point=hu}function hu(t,e){uu.point=fu,du(Gc=t,Xc=e)}function fu(t,e){var n=t-Gc,i=e-Xc,r=ho(n*n+i*i);ru+=r*(Gc+t)/2,su+=r*(Xc+e)/2,au+=r,du(Gc=t,Xc=e)}function mu(){uu.point=du}function vu(){uu.point=yu}function gu(){bu(Kc,Wc)}function yu(t,e){uu.point=bu,du(Kc=Gc=t,Wc=Xc=e)}function bu(t,e){var n=t-Gc,i=e-Xc,r=ho(n*n+i*i);ru+=r*(Gc+t)/2,su+=r*(Xc+e)/2,au+=r,ou+=(r=Xc*t-Gc*e)*(Gc+t),lu+=r*(Xc+e),cu+=3*r,du(Gc=t,Xc=e)}function _u(t){this._context=t}_u.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Qa)}},result:yo};var xu,wu,ku,Su,Cu,Eu=Ha(),Mu={point:yo,lineStart:function(){Mu.point=Au},lineEnd:function(){xu&&Tu(wu,ku),Mu.point=yo},polygonStart:function(){xu=!0},polygonEnd:function(){xu=null},result:function(){var t=+Eu;return Eu.reset(),t}};function Au(t,e){Mu.point=Tu,wu=Su=t,ku=Cu=e}function Tu(t,e){Su-=t,Cu-=e,Eu.add(ho(Su*Su+Cu*Cu)),Su=t,Cu=e}function Du(){this._string=[]}function Ou(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ru(t){return function(e){var n=new Nu;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Nu(){}function Iu(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),So(n,t.stream(tu)),e(tu.result()),null!=i&&t.clipExtent(i),t}function $u(t,e,n){return Iu(t,function(n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],s=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),a=+e[0][0]+(i-s*(n[1][0]+n[0][0]))/2,o=+e[0][1]+(r-s*(n[1][1]+n[0][1]))/2;t.scale(150*s).translate([a,o])},n)}function ju(t,e,n){return $u(t,[[0,0],e],n)}function Lu(t,e,n){return Iu(t,function(n){var i=+e,r=i/(n[1][0]-n[0][0]),s=(i-r*(n[1][0]+n[0][0]))/2,a=-r*n[0][1];t.scale(150*r).translate([s,a])},n)}function Vu(t,e,n){return Iu(t,function(n){var i=+e,r=i/(n[1][1]-n[0][1]),s=-r*n[0][0],a=(i-r*(n[1][1]+n[0][1]))/2;t.scale(150*r).translate([s,a])},n)}Du.prototype={_radius:4.5,_circle:Ou(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Ou(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},Nu.prototype={constructor:Nu,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Pu=16,qu=so(30*eo);function zu(t,e){return+e?function(t,e){function n(i,r,s,a,o,l,c,u,d,p,h,f,m,v){var g=c-i,y=u-r,b=g*g+y*y;if(b>4*e&&m--){var _=a+p,x=o+h,w=l+f,k=ho(_*_+x*x+w*w),S=vo(w/=k),C=no(no(w)-1)<Ga||no(s-d)<Ga?(s+d)/2:ro(x,_),E=t(C,S),M=E[0],A=E[1],T=M-i,D=A-r,O=y*T-g*D;(O*O/b>e||no((g*T+y*D)/b-.5)>.3||a*p+o*h+l*f<qu)&&(n(i,r,s,a,o,l,M,A,C,_/=k,x/=k,w,m,v),v.point(M,A),n(M,A,C,_,x,w,c,u,d,p,h,f,m,v))}}return function(e){var i,r,s,a,o,l,c,u,d,p,h,f,m={point:v,lineStart:g,lineEnd:b,polygonStart:function(){e.polygonStart(),m.lineStart=_},polygonEnd:function(){e.polygonEnd(),m.lineStart=g}};function v(n,i){n=t(n,i),e.point(n[0],n[1])}function g(){u=NaN,m.point=y,e.lineStart()}function y(i,r){var s=Vo([i,r]),a=t(i,r);n(u,d,c,p,h,f,u=a[0],d=a[1],c=i,p=s[0],h=s[1],f=s[2],Pu,e),e.point(u,d)}function b(){m.point=v,e.lineEnd()}function _(){g(),m.point=x,m.lineEnd=w}function x(t,e){y(i=t,e),r=u,s=d,a=p,o=h,l=f,m.point=y}function w(){n(u,d,c,p,h,f,r,s,i,a,o,l,Pu,e),m.lineEnd=b,b()}return m}}(t,e):function(t){return Ru({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Fu=Ru({point:function(t,e){this.stream.point(t*eo,e*eo)}});function Bu(t,e,n,i,r,s){var a=so(s),o=uo(s),l=a*t,c=o*t,u=a/t,d=o/t,p=(o*n-a*e)/t,h=(o*e+a*n)/t;function f(t,s){return[l*(t*=i)-c*(s*=r)+e,n-c*t-l*s]}return f.invert=function(t,e){return[i*(u*t-d*e+p),r*(h-d*t-u*e)]},f}function Hu(t){return Uu(function(){return t})()}function Uu(t){var e,n,i,r,s,a,o,l,c,u,d=150,p=480,h=250,f=0,m=0,v=0,g=0,y=0,b=0,_=1,x=1,w=null,k=ac,S=null,C=Ic,E=.5;function M(t){return l(t[0]*eo,t[1]*eo)}function A(t){return(t=l.invert(t[0],t[1]))&&[t[0]*to,t[1]*to]}function T(){var t=Bu(d,0,0,_,x,b).apply(null,e(f,m)),i=(b?Bu:function(t,e,n,i,r){function s(s,a){return[e+t*(s*=i),n-t*(a*=r)]}return s.invert=function(s,a){return[(s-e)/t*i,(n-a)/t*r]},s})(d,p-t[0],h-t[1],_,x,b);return n=Fl(v,g,y),o=ql(e,i),l=ql(n,o),a=zu(o,E),D()}function D(){return c=u=null,M}return M.stream=function(t){return c&&u===t?c:c=Fu(function(t){return Ru({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}(n)(k(a(C(u=t)))))},M.preclip=function(t){return arguments.length?(k=t,w=void 0,D()):k},M.postclip=function(t){return arguments.length?(C=t,S=i=r=s=null,D()):C},M.clipAngle=function(t){return arguments.length?(k=+t?oc(w=t*eo):(w=null,ac),D()):w*to},M.clipExtent=function(t){return arguments.length?(C=null==t?(S=i=r=s=null,Ic):uc(S=+t[0][0],i=+t[0][1],r=+t[1][0],s=+t[1][1]),D()):null==S?null:[[S,i],[r,s]]},M.scale=function(t){return arguments.length?(d=+t,T()):d},M.translate=function(t){return arguments.length?(p=+t[0],h=+t[1],T()):[p,h]},M.center=function(t){return arguments.length?(f=t[0]%360*eo,m=t[1]%360*eo,T()):[f*to,m*to]},M.rotate=function(t){return arguments.length?(v=t[0]%360*eo,g=t[1]%360*eo,y=t.length>2?t[2]%360*eo:0,T()):[v*to,g*to,y*to]},M.angle=function(t){return arguments.length?(b=t%360*eo,T()):b*to},M.reflectX=function(t){return arguments.length?(_=t?-1:1,T()):_<0},M.reflectY=function(t){return arguments.length?(x=t?-1:1,T()):x<0},M.precision=function(t){return arguments.length?(a=zu(o,E=t*t),D()):ho(E)},M.fitExtent=function(t,e){return $u(M,t,e)},M.fitSize=function(t,e){return ju(M,t,e)},M.fitWidth=function(t,e){return Lu(M,t,e)},M.fitHeight=function(t,e){return Vu(M,t,e)},function(){return e=t.apply(this,arguments),M.invert=e.invert&&A,T()}}function Ku(t){var e=0,n=Ya/3,i=Uu(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*eo,n=t[1]*eo):[e*to,n*to]},r}function Wu(t,e){var n=uo(t),i=(n+uo(e))/2;if(no(i)<Ga)return function(t){var e=so(t);function n(t,n){return[t*e,uo(n)/e]}return n.invert=function(t,n){return[t/e,vo(n*e)]},n}(t);var r=1+n*(2*i-n),s=ho(r)/i;function a(t,e){var n=ho(r-2*i*uo(e))/i;return[n*uo(t*=i),s-n*so(t)]}return a.invert=function(t,e){var n=s-e,a=ro(t,no(n))*po(n);return n*i<0&&(a-=Ya*po(t)*po(n)),[a/i,vo((r-(t*t+n*n)*i*i)/(2*i))]},a}function Gu(){return Ku(Wu).scale(155.424).center([0,33.6442])}function Xu(){return Gu().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Yu(t){return function(e,n){var i=so(e),r=so(n),s=t(i*r);return[s*r*uo(e),s*uo(n)]}}function Ju(t){return function(e,n){var i=ho(e*e+n*n),r=t(i),s=uo(r),a=so(r);return[ro(e*s,i*a),vo(i&&n*s/i)]}}var Zu=Yu(function(t){return ho(2/(1+t))});Zu.invert=Ju(function(t){return 2*vo(t/2)});var Qu=Yu(function(t){return(t=mo(t))&&t/uo(t)});function td(t,e){return[t,lo(fo((Ja+e)/2))]}function ed(t){var e,n,i,r=Hu(t),s=r.center,a=r.scale,o=r.translate,l=r.clipExtent,c=null;function u(){var s=Ya*a(),o=r(Kl(r.rotate()).invert([0,0]));return l(null==c?[[o[0]-s,o[1]-s],[o[0]+s,o[1]+s]]:t===td?[[Math.max(o[0]-s,c),e],[Math.min(o[0]+s,n),i]]:[[c,Math.max(o[1]-s,e)],[n,Math.min(o[1]+s,i)]])}return r.scale=function(t){return arguments.length?(a(t),u()):a()},r.translate=function(t){return arguments.length?(o(t),u()):o()},r.center=function(t){return arguments.length?(s(t),u()):s()},r.clipExtent=function(t){return arguments.length?(null==t?c=e=n=i=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],i=+t[1][1]),u()):null==c?null:[[c,e],[n,i]]},u()}function nd(t){return fo((Ja+t)/2)}function id(t,e){var n=so(t),i=t===e?uo(t):lo(n/so(e))/lo(nd(e)/nd(t)),r=n*co(nd(t),i)/i;if(!i)return td;function s(t,e){r>0?e<-Ja+Ga&&(e=-Ja+Ga):e>Ja-Ga&&(e=Ja-Ga);var n=r/co(nd(e),i);return[n*uo(i*t),r-n*so(i*t)]}return s.invert=function(t,e){var n=r-e,s=po(i)*ho(t*t+n*n),a=ro(t,no(n))*po(n);return n*i<0&&(a-=Ya*po(t)*po(n)),[a/i,2*io(co(r/s,1/i))-Ja]},s}function rd(t,e){return[t,e]}function sd(t,e){var n=so(t),i=t===e?uo(t):(n-so(e))/(e-t),r=n/i+t;if(no(i)<Ga)return rd;function s(t,e){var n=r-e,s=i*t;return[n*uo(s),r-n*so(s)]}return s.invert=function(t,e){var n=r-e,s=ro(t,no(n))*po(n);return n*i<0&&(s-=Ya*po(t)*po(n)),[s/i,r-po(i)*ho(t*t+n*n)]},s}Qu.invert=Ju(function(t){return t}),td.invert=function(t,e){return[t,2*io(oo(e))-Ja]},rd.invert=rd;var ad=1.340264,od=-.081106,ld=893e-6,cd=.003796,ud=ho(3)/2;function dd(t,e){var n=vo(ud*uo(e)),i=n*n,r=i*i*i;return[t*so(n)/(ud*(ad+3*od*i+r*(7*ld+9*cd*i))),n*(ad+od*i+r*(ld+cd*i))]}function pd(t,e){var n=so(e),i=so(t)*n;return[n*uo(t)/i,uo(e)/i]}function hd(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function fd(t,e){return[so(e)*uo(t),uo(e)]}function md(t,e){var n=so(e),i=1+so(t)*n;return[n*uo(t)/i,uo(e)/i]}function vd(t,e){return[lo(fo((Ja+e)/2)),-t]}function gd(t,e){return t.parent===e.parent?1:2}function yd(t,e){return t+e.x}function bd(t,e){return Math.max(t,e.y)}function _d(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}function xd(t,e){var n,i,r,s,a,o=new Cd(t),l=+t.value&&(o.value=t.value),c=[o];for(null==e&&(e=wd);n=c.pop();)if(l&&(n.value=+n.data.value),(r=e(n.data))&&(a=r.length))for(n.children=new Array(a),s=a-1;s>=0;--s)c.push(i=n.children[s]=new Cd(r[s])),i.parent=n,i.depth=n.depth+1;return o.eachBefore(Sd)}function wd(t){return t.children}function kd(t){t.data=t.data.data}function Sd(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Cd(t){this.data=t,this.depth=this.height=0,this.parent=null}dd.invert=function(t,e){for(var n,i=e,r=i*i,s=r*r*r,a=0;a<12&&(s=(r=(i-=n=(i*(ad+od*r+s*(ld+cd*r))-e)/(ad+3*od*r+s*(7*ld+9*cd*r)))*i)*r*r,!(no(n)<Xa));++a);return[ud*t*(ad+3*od*r+s*(7*ld+9*cd*r))/so(i),vo(uo(i)/ud)]},pd.invert=Ju(io),hd.invert=function(t,e){var n,i=e,r=25;do{var s=i*i,a=s*s;i-=n=(i*(1.007226+s*(.015085+a*(.028874*s-.044475-.005916*a)))-e)/(1.007226+s*(.045255+a*(.259866*s-.311325-.005916*11*a)))}while(no(n)>Ga&&--r>0);return[t/(.8707+(s=i*i)*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979)),i]},fd.invert=Ju(vo),md.invert=Ju(function(t){return 2*io(t)}),vd.invert=function(t,e){return[-e,2*io(oo(t))-Ja]},Cd.prototype=xd.prototype={constructor:Cd,count:function(){return this.eachAfter(_d)},each:function(t){var e,n,i,r,s=this,a=[s];do{for(e=a.reverse(),a=[];s=e.pop();)if(t(s),n=s.children)for(i=0,r=n.length;i<r;++i)a.push(n[i])}while(a.length);return this},eachAfter:function(t){for(var e,n,i,r=this,s=[r],a=[];r=s.pop();)if(a.push(r),e=r.children)for(n=0,i=e.length;n<i;++n)s.push(e[n]);for(;r=a.pop();)t(r);return this},eachBefore:function(t){for(var e,n,i=this,r=[i];i=r.pop();)if(t(i),e=i.children)for(n=e.length-1;n>=0;--n)r.push(e[n]);return this},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return xd(this).eachBefore(kd)}};var Ed=Array.prototype.slice;function Md(t){for(var e,n,i=0,r=(t=function(t){for(var e,n,i=t.length;i;)n=Math.random()*i--|0,e=t[i],t[i]=t[n],t[n]=e;return t}(Ed.call(t))).length,s=[];i<r;)e=t[i],n&&Dd(n,e)?++i:(n=Rd(s=Ad(s,e)),i=0);return n}function Ad(t,e){var n,i;if(Od(e,t))return[e];for(n=0;n<t.length;++n)if(Td(e,t[n])&&Od(Nd(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(Td(Nd(t[n],t[i]),e)&&Td(Nd(t[n],e),t[i])&&Td(Nd(t[i],e),t[n])&&Od(Id(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function Td(t,e){var n=t.r-e.r,i=e.x-t.x,r=e.y-t.y;return n<0||n*n<i*i+r*r}function Dd(t,e){var n=t.r-e.r+1e-6,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function Od(t,e){for(var n=0;n<e.length;++n)if(!Dd(t,e[n]))return!1;return!0}function Rd(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return Nd(t[0],t[1]);case 3:return Id(t[0],t[1],t[2])}}function Nd(t,e){var n=t.x,i=t.y,r=t.r,s=e.x,a=e.y,o=e.r,l=s-n,c=a-i,u=o-r,d=Math.sqrt(l*l+c*c);return{x:(n+s+l/d*u)/2,y:(i+a+c/d*u)/2,r:(d+r+o)/2}}function Id(t,e,n){var i=t.x,r=t.y,s=t.r,a=e.x,o=e.y,l=e.r,c=n.x,u=n.y,d=n.r,p=i-a,h=i-c,f=r-o,m=r-u,v=l-s,g=d-s,y=i*i+r*r-s*s,b=y-a*a-o*o+l*l,_=y-c*c-u*u+d*d,x=h*f-p*m,w=(f*_-m*b)/(2*x)-i,k=(m*v-f*g)/x,S=(h*b-p*_)/(2*x)-r,C=(p*g-h*v)/x,E=k*k+C*C-1,M=2*(s+w*k+S*C),A=w*w+S*S-s*s,T=-(E?(M+Math.sqrt(M*M-4*E*A))/(2*E):A/M);return{x:i+w+k*T,y:r+S+C*T,r:T}}function $d(t,e,n){var i,r,s,a,o=t.x-e.x,l=t.y-e.y,c=o*o+l*l;c?(r=e.r+n.r,r*=r,a=t.r+n.r,r>(a*=a)?(i=(c+a-r)/(2*c),s=Math.sqrt(Math.max(0,a/c-i*i)),n.x=t.x-i*o-s*l,n.y=t.y-i*l+s*o):(i=(c+r-a)/(2*c),s=Math.sqrt(Math.max(0,r/c-i*i)),n.x=e.x+i*o-s*l,n.y=e.y+i*l+s*o)):(n.x=e.x+n.r,n.y=e.y)}function jd(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function Ld(t){var e=t._,n=t.next._,i=e.r+n.r,r=(e.x*n.r+n.x*e.r)/i,s=(e.y*n.r+n.y*e.r)/i;return r*r+s*s}function Vd(t){this._=t,this.next=null,this.previous=null}function Pd(t){if(!(r=t.length))return 0;var e,n,i,r,s,a,o,l,c,u,d;if((e=t[0]).x=0,e.y=0,!(r>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(r>2))return e.r+n.r;$d(n,e,i=t[2]),e=new Vd(e),n=new Vd(n),i=new Vd(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(o=3;o<r;++o){$d(e._,n._,i=t[o]),i=new Vd(i),l=n.next,c=e.previous,u=n._.r,d=e._.r;do{if(u<=d){if(jd(l._,i._)){n=l,e.next=n,n.previous=e,--o;continue t}u+=l._.r,l=l.next}else{if(jd(c._,i._)){(e=c).next=n,n.previous=e,--o;continue t}d+=c._.r,c=c.previous}}while(l!==c.next);for(i.previous=e,i.next=n,e.next=n.previous=n=i,s=Ld(e);(i=i.next)!==n;)(a=Ld(i))<s&&(e=i,s=a);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=Md(e),o=0;o<r;++o)(e=t[o]).x-=i.x,e.y-=i.y;return i.r}function qd(t){if("function"!=typeof t)throw new Error;return t}function zd(){return 0}function Fd(t){return function(){return t}}function Bd(t){return Math.sqrt(t.value)}function Hd(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Ud(t,e){return function(n){if(i=n.children){var i,r,s,a=i.length,o=t(n)*e||0;if(o)for(r=0;r<a;++r)i[r].r+=o;if(s=Pd(i),o)for(r=0;r<a;++r)i[r].r-=o;n.r=s+o}}}function Kd(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Wd(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Gd(t,e,n,i,r){for(var s,a=t.children,o=-1,l=a.length,c=t.value&&(i-e)/t.value;++o<l;)(s=a[o]).y0=n,s.y1=r,s.x0=e,s.x1=e+=s.value*c}var Xd="$",Yd={depth:-1},Jd={};function Zd(t){return t.id}function Qd(t){return t.parentId}function tp(t,e){return t.parent===e.parent?1:2}function ep(t){var e=t.children;return e?e[0]:t.t}function np(t){var e=t.children;return e?e[e.length-1]:t.t}function ip(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function rp(t,e,n){return t.a.parent===e.parent?t.a:n}function sp(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function ap(t,e,n,i,r){for(var s,a=t.children,o=-1,l=a.length,c=t.value&&(r-n)/t.value;++o<l;)(s=a[o]).x0=e,s.x1=i,s.y0=n,s.y1=n+=s.value*c}sp.prototype=Object.create(Cd.prototype);var op=(1+Math.sqrt(5))/2;function lp(t,e,n,i,r,s){for(var a,o,l,c,u,d,p,h,f,m,v,g=[],y=e.children,b=0,_=0,x=y.length,w=e.value;b<x;){l=r-n,c=s-i;do{u=y[_++].value}while(!u&&_<x);for(d=p=u,v=u*u*(m=Math.max(c/l,l/c)/(w*t)),f=Math.max(p/v,v/d);_<x;++_){if(u+=o=y[_].value,o<d&&(d=o),o>p&&(p=o),v=u*u*m,(h=Math.max(p/v,v/d))>f){u-=o;break}f=h}g.push(a={value:u,dice:l<c,children:y.slice(b,_)}),a.dice?Gd(a,n,i,r,w?i+=c*u/w:s):ap(a,n,i,w?n+=l*u/w:r,s),w-=u,b=_}return g}var cp=function t(e){function n(t,n,i,r,s){lp(e,t,n,i,r,s)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(op),up=function t(e){function n(t,n,i,r,s){if((a=t._squarify)&&a.ratio===e)for(var a,o,l,c,u,d=-1,p=a.length,h=t.value;++d<p;){for(l=(o=a[d]).children,c=o.value=0,u=l.length;c<u;++c)o.value+=l[c].value;o.dice?Gd(o,n,i,r,i+=(s-i)*o.value/h):ap(o,n,i,n+=(r-n)*o.value/h,s),h-=o.value}else t._squarify=a=lp(e,t,n,i,r,s),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(op);function dp(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function pp(t,e){return t[0]-e[0]||t[1]-e[1]}function hp(t){for(var e=t.length,n=[0,1],i=2,r=2;r<e;++r){for(;i>1&&dp(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function fp(){return Math.random()}var mp=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(fp),vp=function t(e){function n(t,n){var i,r;return t=null==t?0:+t,n=null==n?1:+n,function(){var s;if(null!=i)s=i,i=null;else do{i=2*e()-1,s=2*e()-1,r=i*i+s*s}while(!r||r>1);return t+n*s*Math.sqrt(-2*Math.log(r)/r)}}return n.source=t,n}(fp),gp=function t(e){function n(){var t=vp.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(fp),yp=function t(e){function n(t){return function(){for(var n=0,i=0;i<t;++i)n+=e();return n}}return n.source=t,n}(fp),bp=function t(e){function n(t){var n=yp.source(e)(t);return function(){return n()/t}}return n.source=t,n}(fp),_p=function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(fp);function xp(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function wp(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var kp=Array.prototype,Sp=kp.map,Cp=kp.slice,Ep={name:"implicit"};function Mp(){var t=is(),e=[],n=[],i=Ep;function r(r){var s=r+"",a=t.get(s);if(!a){if(i!==Ep)return i;t.set(s,a=e.push(r))}return n[(a-1)%n.length]}return r.domain=function(n){if(!arguments.length)return e.slice();e=[],t=is();for(var i,s,a=-1,o=n.length;++a<o;)t.has(s=(i=n[a])+"")||t.set(s,e.push(i));return r},r.range=function(t){return arguments.length?(n=Cp.call(t),r):n.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return Mp(e,n).unknown(i)},xp.apply(r,arguments),r}function Ap(){var t,e,n=Mp().unknown(void 0),i=n.domain,r=n.range,s=[0,1],a=!1,o=0,l=0,c=.5;function u(){var n=i().length,u=s[1]<s[0],d=s[u-0],p=s[1-u];t=(p-d)/Math.max(1,n-o+2*l),a&&(t=Math.floor(t)),d+=(p-d-t*(n-o))*c,e=t*(1-o),a&&(d=Math.round(d),e=Math.round(e));var h=v(n).map(function(e){return d+t*e});return r(u?h.reverse():h)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),u()):i()},n.range=function(t){return arguments.length?(s=[+t[0],+t[1]],u()):s.slice()},n.rangeRound=function(t){return s=[+t[0],+t[1]],a=!0,u()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,u()):a},n.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),u()):o},n.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),u()):o},n.paddingOuter=function(t){return arguments.length?(l=+t,u()):l},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),u()):c},n.copy=function(){return Ap(i(),s).round(a).paddingInner(o).paddingOuter(l).align(c)},xp.apply(u(),arguments)}function Tp(t){return+t}var Dp=[0,1];function Op(t){return t}function Rp(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Np(t){var e,n=t[0],i=t[t.length-1];return n>i&&(e=n,n=i,i=e),function(t){return Math.max(n,Math.min(i,t))}}function Ip(t,e,n){var i=t[0],r=t[1],s=e[0],a=e[1];return r<i?(i=Rp(r,i),s=n(a,s)):(i=Rp(i,r),s=n(s,a)),function(t){return s(i(t))}}function $p(t,e,n){var i=Math.min(t.length,e.length)-1,s=new Array(i),a=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)s[o]=Rp(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=r(t,e,1,i)-1;return a[n](s[n](e))}}function jp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Lp(){var t,e,n,i,r,s,a=Dp,o=Dp,l=wn,c=Op;function u(){return i=Math.min(a.length,o.length)>2?$p:Ip,r=s=null,d}function d(e){return isNaN(e=+e)?n:(r||(r=i(a.map(t),o,l)))(t(c(e)))}return d.invert=function(n){return c(e((s||(s=i(o,a.map(t),gn)))(n)))},d.domain=function(t){return arguments.length?(a=Sp.call(t,Tp),c===Op||(c=Np(a)),u()):a.slice()},d.range=function(t){return arguments.length?(o=Cp.call(t),u()):o.slice()},d.rangeRound=function(t){return o=Cp.call(t),l=kn,u()},d.clamp=function(t){return arguments.length?(c=t?Np(a):Op,d):c!==Op},d.interpolate=function(t){return arguments.length?(l=t,u()):l},d.unknown=function(t){return arguments.length?(n=t,d):n},function(n,i){return t=n,e=i,u()}}function Vp(t,e){return Lp()(t,e)}function Pp(e,n,i,r){var s,a=w(e,n,i);switch((r=Oa(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(n));return null!=r.precision||isNaN(s=Fa(a,o))||(r.precision=s),t.formatPrefix(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(s=Ba(a,Math.max(Math.abs(e),Math.abs(n))))||(r.precision=s-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(s=za(a))||(r.precision=s-2*("%"===r.type))}return t.format(r)}function qp(t){var e=t.domain;return t.ticks=function(t){var n=e();return _(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return Pp(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r=e(),s=0,a=r.length-1,o=r[s],l=r[a];return l<o&&(i=o,o=l,l=i,i=s,s=a,a=i),(i=x(o,l,n))>0?i=x(o=Math.floor(o/i)*i,l=Math.ceil(l/i)*i,n):i<0&&(i=x(o=Math.ceil(o*i)/i,l=Math.floor(l*i)/i,n)),i>0?(r[s]=Math.floor(o/i)*i,r[a]=Math.ceil(l/i)*i,e(r)):i<0&&(r[s]=Math.ceil(o*i)/i,r[a]=Math.floor(l*i)/i,e(r)),t},t}function zp(t,e){var n,i=0,r=(t=t.slice()).length-1,s=t[i],a=t[r];return a<s&&(n=i,i=r,r=n,n=s,s=a,a=n),t[i]=e.floor(s),t[r]=e.ceil(a),t}function Fp(t){return Math.log(t)}function Bp(t){return Math.exp(t)}function Hp(t){return-Math.log(-t)}function Up(t){return-Math.exp(-t)}function Kp(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Wp(t){return function(e){return-t(-e)}}function Gp(e){var n,i,r=e(Fp,Bp),s=r.domain,a=10;function o(){return n=(t=a)===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t}),i=function(t){return 10===t?Kp:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(a),s()[0]<0?(n=Wp(n),i=Wp(i),e(Hp,Up)):e(Fp,Bp),r;var t}return r.base=function(t){return arguments.length?(a=+t,o()):a},r.domain=function(t){return arguments.length?(s(t),o()):s()},r.ticks=function(t){var e,r=s(),o=r[0],l=r[r.length-1];(e=l<o)&&(p=o,o=l,l=p);var c,u,d,p=n(o),h=n(l),f=null==t?10:+t,m=[];if(!(a%1)&&h-p<f){if(p=Math.round(p)-1,h=Math.round(h)+1,o>0){for(;p<h;++p)for(u=1,c=i(p);u<a;++u)if(!((d=c*u)<o)){if(d>l)break;m.push(d)}}else for(;p<h;++p)for(u=a-1,c=i(p);u>=1;--u)if(!((d=c*u)<o)){if(d>l)break;m.push(d)}}else m=_(p,h,Math.min(h-p,f)).map(i);return e?m.reverse():m},r.tickFormat=function(e,s){if(null==s&&(s=10===a?".0e":","),"function"!=typeof s&&(s=t.format(s)),e===1/0)return s;null==e&&(e=10);var o=Math.max(1,a*e/r.ticks().length);return function(t){var e=t/i(Math.round(n(t)));return e*a<a-.5&&(e*=a),e<=o?s(t):""}},r.nice=function(){return s(zp(s(),{floor:function(t){return i(Math.floor(n(t)))},ceil:function(t){return i(Math.ceil(n(t)))}}))},r}function Xp(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Yp(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Jp(t){var e=1,n=t(Xp(e),Yp(e));return n.constant=function(n){return arguments.length?t(Xp(e=+n),Yp(e)):e},qp(n)}function Zp(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Qp(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function th(t){return t<0?-t*t:t*t}function eh(t){var e=t(Op,Op),n=1;function i(){return 1===n?t(Op,Op):.5===n?t(Qp,th):t(Zp(n),Zp(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,i()):n},qp(e)}function nh(){var t=eh(Lp());return t.copy=function(){return jp(t,nh()).exponent(t.exponent())},xp.apply(t,arguments),t}var ih=new Date,rh=new Date;function sh(t,e,n,i){function r(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return r.floor=function(e){return t(e=new Date(+e)),e},r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,s){var a,o=[];if(n=r.ceil(n),s=null==s?1:Math.floor(s),!(n<i&&s>0))return o;do{o.push(a=new Date(+n)),e(n,s),t(n)}while(a<n&&n<i);return o},r.filter=function(n){return sh(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););})},n&&(r.count=function(e,i){return ih.setTime(+e),rh.setTime(+i),t(ih),t(rh),Math.floor(n(ih,rh))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var ah=sh(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});ah.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?sh(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):ah:null};var oh=ah.range,lh=6e4,ch=6048e5,uh=sh(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),dh=uh.range,ph=sh(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+e*lh)},function(t,e){return(e-t)/lh},function(t){return t.getMinutes()}),hh=ph.range,fh=sh(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*lh)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),mh=fh.range,vh=sh(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*lh)/864e5},function(t){return t.getDate()-1}),gh=vh.range;function yh(t){return sh(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*lh)/ch})}var bh=yh(0),_h=yh(1),xh=yh(2),wh=yh(3),kh=yh(4),Sh=yh(5),Ch=yh(6),Eh=bh.range,Mh=_h.range,Ah=xh.range,Th=wh.range,Dh=kh.range,Oh=Sh.range,Rh=Ch.range,Nh=sh(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),Ih=Nh.range,$h=sh(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});$h.every=function(t){return isFinite(t=Math.floor(t))&&t>0?sh(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var jh=$h.range,Lh=sh(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*lh)},function(t,e){return(e-t)/lh},function(t){return t.getUTCMinutes()}),Vh=Lh.range,Ph=sh(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),qh=Ph.range,zh=sh(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),Fh=zh.range;function Bh(t){return sh(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/ch})}var Hh=Bh(0),Uh=Bh(1),Kh=Bh(2),Wh=Bh(3),Gh=Bh(4),Xh=Bh(5),Yh=Bh(6),Jh=Hh.range,Zh=Uh.range,Qh=Kh.range,tf=Wh.range,ef=Gh.range,nf=Xh.range,rf=Yh.range,sf=sh(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),af=sf.range,of=sh(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});of.every=function(t){return isFinite(t=Math.floor(t))&&t>0?sh(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var lf=of.range;function cf(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function uf(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function df(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function pf(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,c=_f(r),u=xf(r),d=_f(s),p=xf(s),h=_f(a),f=xf(a),m=_f(o),v=xf(o),g=_f(l),y=xf(l),b={a:function(t){return a[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return o[t.getMonth()]},c:null,d:Ff,e:Ff,f:Wf,H:Bf,I:Hf,j:Uf,L:Kf,m:Gf,M:Xf,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:km,s:Sm,S:Yf,u:Jf,U:Zf,V:Qf,w:tm,W:em,x:null,X:null,y:nm,Y:im,Z:rm,"%":wm},_={a:function(t){return a[t.getUTCDay()]},A:function(t){return s[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return o[t.getUTCMonth()]},c:null,d:sm,e:sm,f:um,H:am,I:om,j:lm,L:cm,m:dm,M:pm,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:km,s:Sm,S:hm,u:fm,U:mm,V:vm,w:gm,W:ym,x:null,X:null,y:bm,Y:_m,Z:xm,"%":wm},x={a:function(t,e,n){var i=h.exec(e.slice(n));return i?(t.w=f[i[0].toLowerCase()],n+i[0].length):-1},A:function(t,e,n){var i=d.exec(e.slice(n));return i?(t.w=p[i[0].toLowerCase()],n+i[0].length):-1},b:function(t,e,n){var i=g.exec(e.slice(n));return i?(t.m=y[i[0].toLowerCase()],n+i[0].length):-1},B:function(t,e,n){var i=m.exec(e.slice(n));return i?(t.m=v[i[0].toLowerCase()],n+i[0].length):-1},c:function(t,n,i){return S(t,e,n,i)},d:Rf,e:Rf,f:Vf,H:If,I:If,j:Nf,L:Lf,m:Of,M:$f,p:function(t,e,n){var i=c.exec(e.slice(n));return i?(t.p=u[i[0].toLowerCase()],n+i[0].length):-1},q:Df,Q:qf,s:zf,S:jf,u:kf,U:Sf,V:Cf,w:wf,W:Ef,x:function(t,e,i){return S(t,n,e,i)},X:function(t,e,n){return S(t,i,e,n)},y:Af,Y:Mf,Z:Tf,"%":Pf};function w(t,e){return function(n){var i,r,s,a=[],o=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===t.charCodeAt(o)&&(a.push(t.slice(l,o)),null!=(r=ff[i=t.charAt(++o)])?i=t.charAt(++o):r="e"===i?" ":"0",(s=e[i])&&(i=s(n,r)),a.push(i),l=o+1);return a.push(t.slice(l,o)),a.join("")}}function k(t,e){return function(n){var i,r,s=df(1900,void 0,1);if(S(s,t,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(!e||"Z"in s||(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(r=(i=uf(df(s.y,0,1))).getUTCDay(),i=r>4||0===r?Uh.ceil(i):Uh(i),i=zh.offset(i,7*(s.V-1)),s.y=i.getUTCFullYear(),s.m=i.getUTCMonth(),s.d=i.getUTCDate()+(s.w+6)%7):(r=(i=cf(df(s.y,0,1))).getDay(),i=r>4||0===r?_h.ceil(i):_h(i),i=vh.offset(i,7*(s.V-1)),s.y=i.getFullYear(),s.m=i.getMonth(),s.d=i.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),r="Z"in s?uf(df(s.y,0,1)).getUTCDay():cf(df(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(r+5)%7:s.w+7*s.U-(r+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,uf(s)):cf(s)}}function S(t,e,n,i){for(var r,s,a=0,o=e.length,l=n.length;a<o;){if(i>=l)return-1;if(37===(r=e.charCodeAt(a++))){if(r=e.charAt(a++),!(s=x[r in ff?e.charAt(a++):r])||(i=s(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return b.x=w(n,b),b.X=w(i,b),b.c=w(e,b),_.x=w(n,_),_.X=w(i,_),_.c=w(e,_),{format:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}var hf,ff={"-":"",_:" ",0:"0"},mf=/^\s*\d+/,vf=/^%/,gf=/[\\^$*+?|[\]().{}]/g;function yf(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function bf(t){return t.replace(gf,"\\$&")}function _f(t){return new RegExp("^(?:"+t.map(bf).join("|")+")","i")}function xf(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function wf(t,e,n){var i=mf.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function kf(t,e,n){var i=mf.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Sf(t,e,n){var i=mf.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Cf(t,e,n){var i=mf.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Ef(t,e,n){var i=mf.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Mf(t,e,n){var i=mf.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Af(t,e,n){var i=mf.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Tf(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Df(t,e,n){var i=mf.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function Of(t,e,n){var i=mf.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Rf(t,e,n){var i=mf.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Nf(t,e,n){var i=mf.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function If(t,e,n){var i=mf.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function $f(t,e,n){var i=mf.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function jf(t,e,n){var i=mf.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Lf(t,e,n){var i=mf.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Vf(t,e,n){var i=mf.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Pf(t,e,n){var i=vf.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function qf(t,e,n){var i=mf.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function zf(t,e,n){var i=mf.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function Ff(t,e){return yf(t.getDate(),e,2)}function Bf(t,e){return yf(t.getHours(),e,2)}function Hf(t,e){return yf(t.getHours()%12||12,e,2)}function Uf(t,e){return yf(1+vh.count($h(t),t),e,3)}function Kf(t,e){return yf(t.getMilliseconds(),e,3)}function Wf(t,e){return Kf(t,e)+"000"}function Gf(t,e){return yf(t.getMonth()+1,e,2)}function Xf(t,e){return yf(t.getMinutes(),e,2)}function Yf(t,e){return yf(t.getSeconds(),e,2)}function Jf(t){var e=t.getDay();return 0===e?7:e}function Zf(t,e){return yf(bh.count($h(t)-1,t),e,2)}function Qf(t,e){var n=t.getDay();return t=n>=4||0===n?kh(t):kh.ceil(t),yf(kh.count($h(t),t)+(4===$h(t).getDay()),e,2)}function tm(t){return t.getDay()}function em(t,e){return yf(_h.count($h(t)-1,t),e,2)}function nm(t,e){return yf(t.getFullYear()%100,e,2)}function im(t,e){return yf(t.getFullYear()%1e4,e,4)}function rm(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+yf(e/60|0,"0",2)+yf(e%60,"0",2)}function sm(t,e){return yf(t.getUTCDate(),e,2)}function am(t,e){return yf(t.getUTCHours(),e,2)}function om(t,e){return yf(t.getUTCHours()%12||12,e,2)}function lm(t,e){return yf(1+zh.count(of(t),t),e,3)}function cm(t,e){return yf(t.getUTCMilliseconds(),e,3)}function um(t,e){return cm(t,e)+"000"}function dm(t,e){return yf(t.getUTCMonth()+1,e,2)}function pm(t,e){return yf(t.getUTCMinutes(),e,2)}function hm(t,e){return yf(t.getUTCSeconds(),e,2)}function fm(t){var e=t.getUTCDay();return 0===e?7:e}function mm(t,e){return yf(Hh.count(of(t)-1,t),e,2)}function vm(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Gh(t):Gh.ceil(t),yf(Gh.count(of(t),t)+(4===of(t).getUTCDay()),e,2)}function gm(t){return t.getUTCDay()}function ym(t,e){return yf(Uh.count(of(t)-1,t),e,2)}function bm(t,e){return yf(t.getUTCFullYear()%100,e,2)}function _m(t,e){return yf(t.getUTCFullYear()%1e4,e,4)}function xm(){return"+0000"}function wm(){return"%"}function km(t){return+t}function Sm(t){return Math.floor(+t/1e3)}function Cm(e){return hf=pf(e),t.timeFormat=hf.format,t.timeParse=hf.parse,t.utcFormat=hf.utcFormat,t.utcParse=hf.utcParse,hf}Cm({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Em=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Mm=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:t.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),Am=1e3,Tm=60*Am,Dm=60*Tm,Om=24*Dm,Rm=7*Om,Nm=30*Om,Im=365*Om;function $m(t){return new Date(t)}function jm(t){return t instanceof Date?+t:+new Date(+t)}function Lm(t,e,i,r,s,a,o,l,c){var u=Vp(Op,Op),d=u.invert,p=u.domain,h=c(".%L"),f=c(":%S"),m=c("%I:%M"),v=c("%I %p"),g=c("%a %d"),y=c("%b %d"),b=c("%B"),_=c("%Y"),x=[[o,1,Am],[o,5,5*Am],[o,15,15*Am],[o,30,30*Am],[a,1,Tm],[a,5,5*Tm],[a,15,15*Tm],[a,30,30*Tm],[s,1,Dm],[s,3,3*Dm],[s,6,6*Dm],[s,12,12*Dm],[r,1,Om],[r,2,2*Om],[i,1,Rm],[e,1,Nm],[e,3,3*Nm],[t,1,Im]];function k(n){return(o(n)<n?h:a(n)<n?f:s(n)<n?m:r(n)<n?v:e(n)<n?i(n)<n?g:y:t(n)<n?b:_)(n)}function S(e,i,r,s){if(null==e&&(e=10),"number"==typeof e){var a=Math.abs(r-i)/e,o=n(function(t){return t[2]}).right(x,a);o===x.length?(s=w(i/Im,r/Im,e),e=t):o?(s=(o=x[a/x[o-1][2]<x[o][2]/a?o-1:o])[1],e=o[0]):(s=Math.max(w(i,r,e),1),e=l)}return null==s?e:e.every(s)}return u.invert=function(t){return new Date(d(t))},u.domain=function(t){return arguments.length?p(Sp.call(t,jm)):p().map($m)},u.ticks=function(t,e){var n,i=p(),r=i[0],s=i[i.length-1],a=s<r;return a&&(n=r,r=s,s=n),n=(n=S(t,r,s,e))?n.range(r,s+1):[],a?n.reverse():n},u.tickFormat=function(t,e){return null==e?k:c(e)},u.nice=function(t,e){var n=p();return(t=S(t,n[0],n[n.length-1],e))?p(zp(n,t)):u},u.copy=function(){return jp(u,Lm(t,e,i,r,s,a,o,l,c))},u}function Vm(){var t,e,n,i,r,s=0,a=1,o=Op,l=!1;function c(e){return isNaN(e=+e)?r:o(0===n?.5:(e=(i(e)-t)*n,l?Math.max(0,Math.min(1,e)):e))}return c.domain=function(r){return arguments.length?(t=i(s=+r[0]),e=i(a=+r[1]),n=t===e?0:1/(e-t),c):[s,a]},c.clamp=function(t){return arguments.length?(l=!!t,c):l},c.interpolator=function(t){return arguments.length?(o=t,c):o},c.unknown=function(t){return arguments.length?(r=t,c):r},function(r){return i=r,t=r(s),e=r(a),n=t===e?0:1/(e-t),c}}function Pm(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function qm(){var t=eh(Vm());return t.copy=function(){return Pm(t,qm()).exponent(t.exponent())},wp.apply(t,arguments)}function zm(){var t,e,n,i,r,s,a,o=0,l=.5,c=1,u=Op,d=!1;function p(t){return isNaN(t=+t)?a:(t=.5+((t=+s(t))-e)*(t<e?i:r),u(d?Math.max(0,Math.min(1,t)):t))}return p.domain=function(a){return arguments.length?(t=s(o=+a[0]),e=s(l=+a[1]),n=s(c=+a[2]),i=t===e?0:.5/(e-t),r=e===n?0:.5/(n-e),p):[o,l,c]},p.clamp=function(t){return arguments.length?(d=!!t,p):d},p.interpolator=function(t){return arguments.length?(u=t,p):u},p.unknown=function(t){return arguments.length?(a=t,p):a},function(a){return s=a,t=a(o),e=a(l),n=a(c),i=t===e?0:.5/(e-t),r=e===n?0:.5/(n-e),p}}function Fm(){var t=eh(zm());return t.copy=function(){return Pm(t,Fm()).exponent(t.exponent())},wp.apply(t,arguments)}function Bm(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n}var Hm=Bm("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Um=Bm("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Km=Bm("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Wm=Bm("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Gm=Bm("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Xm=Bm("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Ym=Bm("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Jm=Bm("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Zm=Bm("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Qm=Bm("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function tv(t){return dn(t[t.length-1])}var ev=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Bm),nv=tv(ev),iv=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Bm),rv=tv(iv),sv=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Bm),av=tv(sv),ov=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Bm),lv=tv(ov),cv=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Bm),uv=tv(cv),dv=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Bm),pv=tv(dv),hv=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Bm),fv=tv(hv),mv=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Bm),vv=tv(mv),gv=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Bm),yv=tv(gv),bv=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Bm),_v=tv(bv),xv=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Bm),wv=tv(xv),kv=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Bm),Sv=tv(kv),Cv=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Bm),Ev=tv(Cv),Mv=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Bm),Av=tv(Mv),Tv=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Bm),Dv=tv(Tv),Ov=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Bm),Rv=tv(Ov),Nv=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Bm),Iv=tv(Nv),$v=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Bm),jv=tv($v),Lv=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Bm),Vv=tv(Lv),Pv=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Bm),qv=tv(Pv),zv=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Bm),Fv=tv(zv),Bv=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Bm),Hv=tv(Bv),Uv=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Bm),Kv=tv(Uv),Wv=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Bm),Gv=tv(Wv),Xv=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Bm),Yv=tv(Xv),Jv=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Bm),Zv=tv(Jv),Qv=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Bm),tg=tv(Qv),eg=Yn(Qe(300,.5,0),Qe(-240,.5,1)),ng=Yn(Qe(-100,.75,.35),Qe(80,1.5,.8)),ig=Yn(Qe(260,.75,.35),Qe(80,1.5,.8)),rg=Qe(),sg=ve(),ag=Math.PI/3,og=2*Math.PI/3;function lg(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var cg=lg(Bm("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),ug=lg(Bm("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),dg=lg(Bm("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),pg=lg(Bm("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function hg(t){return function(){return t}}var fg=Math.abs,mg=Math.atan2,vg=Math.cos,gg=Math.max,yg=Math.min,bg=Math.sin,_g=Math.sqrt,xg=1e-12,wg=Math.PI,kg=wg/2,Sg=2*wg;function Cg(t){return t>=1?kg:t<=-1?-kg:Math.asin(t)}function Eg(t){return t.innerRadius}function Mg(t){return t.outerRadius}function Ag(t){return t.startAngle}function Tg(t){return t.endAngle}function Dg(t){return t&&t.padAngle}function Og(t,e,n,i,r,s,a){var o=t-n,l=e-i,c=(a?s:-s)/_g(o*o+l*l),u=c*l,d=-c*o,p=t+u,h=e+d,f=n+u,m=i+d,v=(p+f)/2,g=(h+m)/2,y=f-p,b=m-h,_=y*y+b*b,x=r-s,w=p*m-f*h,k=(b<0?-1:1)*_g(gg(0,x*x*_-w*w)),S=(w*b-y*k)/_,C=(-w*y-b*k)/_,E=(w*b+y*k)/_,M=(-w*y+b*k)/_,A=S-v,T=C-g,D=E-v,O=M-g;return A*A+T*T>D*D+O*O&&(S=E,C=M),{cx:S,cy:C,x01:-u,y01:-d,x11:S*(r/x-1),y11:C*(r/x-1)}}function Rg(t){this._context=t}function Ng(t){return new Rg(t)}function Ig(t){return t[0]}function $g(t){return t[1]}function jg(){var t=Ig,e=$g,n=hg(!0),i=null,r=Ng,s=null;function a(a){var o,l,c,u=a.length,d=!1;for(null==i&&(s=r(c=Yr())),o=0;o<=u;++o)!(o<u&&n(l=a[o],o,a))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(l,o,a),+e(l,o,a));if(c)return s=null,c+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:hg(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:hg(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:hg(!!t),a):n},a.curve=function(t){return arguments.length?(r=t,null!=i&&(s=r(i)),a):r},a.context=function(t){return arguments.length?(null==t?i=s=null:s=r(i=t),a):i},a}function Lg(){var t=Ig,e=null,n=hg(0),i=$g,r=hg(!0),s=null,a=Ng,o=null;function l(l){var c,u,d,p,h,f=l.length,m=!1,v=new Array(f),g=new Array(f);for(null==s&&(o=a(h=Yr())),c=0;c<=f;++c){if(!(c<f&&r(p=l[c],c,l))===m)if(m=!m)u=c,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),d=c-1;d>=u;--d)o.point(v[d],g[d]);o.lineEnd(),o.areaEnd()}m&&(v[c]=+t(p,c,l),g[c]=+n(p,c,l),o.point(e?+e(p,c,l):v[c],i?+i(p,c,l):g[c]))}if(h)return o=null,h+""||null}function c(){return jg().defined(r).curve(a).context(s)}return l.x=function(n){return arguments.length?(t="function"==typeof n?n:hg(+n),e=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:hg(+e),l):t},l.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:hg(+t),l):e},l.y=function(t){return arguments.length?(n="function"==typeof t?t:hg(+t),i=null,l):n},l.y0=function(t){return arguments.length?(n="function"==typeof t?t:hg(+t),l):n},l.y1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:hg(+t),l):i},l.lineX0=l.lineY0=function(){return c().x(t).y(n)},l.lineY1=function(){return c().x(t).y(i)},l.lineX1=function(){return c().x(e).y(n)},l.defined=function(t){return arguments.length?(r="function"==typeof t?t:hg(!!t),l):r},l.curve=function(t){return arguments.length?(a=t,null!=s&&(o=a(s)),l):a},l.context=function(t){return arguments.length?(null==t?s=o=null:o=a(s=t),l):s},l}function Vg(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Pg(t){return t}Rg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var qg=Fg(Ng);function zg(t){this._curve=t}function Fg(t){function e(e){return new zg(t(e))}return e._curve=t,e}function Bg(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Fg(t)):e()._curve},t}function Hg(){return Bg(jg().curve(qg))}function Ug(){var t=Lg().curve(qg),e=t.curve,n=t.lineX0,i=t.lineX1,r=t.lineY0,s=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Bg(n())},delete t.lineX0,t.lineEndAngle=function(){return Bg(i())},delete t.lineX1,t.lineInnerRadius=function(){return Bg(r())},delete t.lineY0,t.lineOuterRadius=function(){return Bg(s())},delete t.lineY1,t.curve=function(t){return arguments.length?e(Fg(t)):e()._curve},t}function Kg(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}zg.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var Wg=Array.prototype.slice;function Gg(t){return t.source}function Xg(t){return t.target}function Yg(t){var e=Gg,n=Xg,i=Ig,r=$g,s=null;function a(){var a,o=Wg.call(arguments),l=e.apply(this,o),c=n.apply(this,o);if(s||(s=a=Yr()),t(s,+i.apply(this,(o[0]=l,o)),+r.apply(this,o),+i.apply(this,(o[0]=c,o)),+r.apply(this,o)),a)return s=null,a+""||null}return a.source=function(t){return arguments.length?(e=t,a):e},a.target=function(t){return arguments.length?(n=t,a):n},a.x=function(t){return arguments.length?(i="function"==typeof t?t:hg(+t),a):i},a.y=function(t){return arguments.length?(r="function"==typeof t?t:hg(+t),a):r},a.context=function(t){return arguments.length?(s=null==t?null:t,a):s},a}function Jg(t,e,n,i,r){t.moveTo(e,n),t.bezierCurveTo(e=(e+i)/2,n,e,r,i,r)}function Zg(t,e,n,i,r){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+r)/2,i,n,i,r)}function Qg(t,e,n,i,r){var s=Kg(e,n),a=Kg(e,n=(n+r)/2),o=Kg(i,n),l=Kg(i,r);t.moveTo(s[0],s[1]),t.bezierCurveTo(a[0],a[1],o[0],o[1],l[0],l[1])}var ty={draw:function(t,e){var n=Math.sqrt(e/wg);t.moveTo(n,0),t.arc(0,0,n,0,Sg)}},ey={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},ny=Math.sqrt(1/3),iy=2*ny,ry={draw:function(t,e){var n=Math.sqrt(e/iy),i=n*ny;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},sy=Math.sin(wg/10)/Math.sin(7*wg/10),ay=Math.sin(Sg/10)*sy,oy=-Math.cos(Sg/10)*sy,ly={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),i=ay*n,r=oy*n;t.moveTo(0,-n),t.lineTo(i,r);for(var s=1;s<5;++s){var a=Sg*s/5,o=Math.cos(a),l=Math.sin(a);t.lineTo(l*n,-o*n),t.lineTo(o*i-l*r,l*i+o*r)}t.closePath()}},cy={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}},uy=Math.sqrt(3),dy={draw:function(t,e){var n=-Math.sqrt(e/(3*uy));t.moveTo(0,2*n),t.lineTo(-uy*n,-n),t.lineTo(uy*n,-n),t.closePath()}},py=Math.sqrt(3)/2,hy=1/Math.sqrt(12),fy=3*(hy/2+1),my={draw:function(t,e){var n=Math.sqrt(e/fy),i=n/2,r=n*hy,s=i,a=n*hy+n,o=-s,l=a;t.moveTo(i,r),t.lineTo(s,a),t.lineTo(o,l),t.lineTo(-.5*i-py*r,py*i+-.5*r),t.lineTo(-.5*s-py*a,py*s+-.5*a),t.lineTo(-.5*o-py*l,py*o+-.5*l),t.lineTo(-.5*i+py*r,-.5*r-py*i),t.lineTo(-.5*s+py*a,-.5*a-py*s),t.lineTo(-.5*o+py*l,-.5*l-py*o),t.closePath()}},vy=[ty,ey,ry,cy,ly,dy,my];function gy(){}function yy(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function by(t){this._context=t}function _y(t){this._context=t}function xy(t){this._context=t}function wy(t,e){this._basis=new by(t),this._beta=e}by.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yy(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},_y.prototype={areaStart:gy,areaEnd:gy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:yy(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},xy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:yy(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},wy.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,r=t[0],s=e[0],a=t[n]-r,o=e[n]-s,l=-1;++l<=n;)i=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(r+i*a),this._beta*e[l]+(1-this._beta)*(s+i*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var ky=function t(e){function n(t){return 1===e?new by(t):new wy(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Sy(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Cy(t,e){this._context=t,this._k=(1-e)/6}Cy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Sy(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Sy(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ey=function t(e){function n(t){return new Cy(t,e)}return n.tension=function(e){return t(+e)},n}(0);function My(t,e){this._context=t,this._k=(1-e)/6}My.prototype={areaStart:gy,areaEnd:gy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Sy(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ay=function t(e){function n(t){return new My(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Ty(t,e){this._context=t,this._k=(1-e)/6}Ty.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Sy(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Dy=function t(e){function n(t){return new Ty(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Oy(t,e,n){var i=t._x1,r=t._y1,s=t._x2,a=t._y2;if(t._l01_a>xg){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>xg){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,r,s,a,t._x2,t._y2)}function Ry(t,e){this._context=t,this._alpha=e}Ry.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Oy(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ny=function t(e){function n(t){return e?new Ry(t,e):new Cy(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Iy(t,e){this._context=t,this._alpha=e}Iy.prototype={areaStart:gy,areaEnd:gy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Oy(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var $y=function t(e){function n(t){return e?new Iy(t,e):new My(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function jy(t,e){this._context=t,this._alpha=e}jy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Oy(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ly=function t(e){function n(t){return e?new jy(t,e):new Ty(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Vy(t){this._context=t}function Py(t){return t<0?-1:1}function qy(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),o=(s*r+a*i)/(i+r);return(Py(s)+Py(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function zy(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Fy(t,e,n){var i=t._x0,r=t._y0,s=t._x1,a=t._y1,o=(s-i)/3;t._context.bezierCurveTo(i+o,r+o*e,s-o,a-o*n,s,a)}function By(t){this._context=t}function Hy(t){this._context=new Uy(t)}function Uy(t){this._context=t}function Ky(t){this._context=t}function Wy(t){var e,n,i=t.length-1,r=new Array(i),s=new Array(i),a=new Array(i);for(r[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,s[i-1]=7,a[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/s[e-1],s[e]-=n,a[e]-=n*a[e-1];for(r[i-1]=a[i-1]/s[i-1],e=i-2;e>=0;--e)r[e]=(a[e]-r[e+1])/s[e];for(s[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)s[e]=2*t[e+1]-r[e+1];return[r,s]}function Gy(t,e){this._context=t,this._t=e}function Xy(t,e){if((r=t.length)>1)for(var n,i,r,s=1,a=t[e[0]],o=a.length;s<r;++s)for(i=a,a=t[e[s]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Yy(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Jy(t,e){return t[e]}function Zy(t){var e=t.map(Qy);return Yy(t).sort(function(t,n){return e[t]-e[n]})}function Qy(t){for(var e,n=-1,i=0,r=t.length,s=-1/0;++n<r;)(e=+t[n][1])>s&&(s=e,i=n);return i}function tb(t){var e=t.map(eb);return Yy(t).sort(function(t,n){return e[t]-e[n]})}function eb(t){for(var e,n=0,i=-1,r=t.length;++i<r;)(e=+t[i][1])&&(n+=e);return n}function nb(t){return function(){return t}}function ib(t){return t[0]}function rb(t){return t[1]}function sb(){this._=null}function ab(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ob(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function lb(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function cb(t){for(;t.L;)t=t.L;return t}function ub(t,e,n,i){var r=[null,null],s=Rb.push(r)-1;return r.left=t,r.right=e,n&&pb(r,t,e,n),i&&pb(r,e,t,i),Db[t.index].halfedges.push(s),Db[e.index].halfedges.push(s),r}function db(t,e,n){var i=[e,n];return i.left=t,i}function pb(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function hb(t,e,n,i,r){var s,a=t[0],o=t[1],l=a[0],c=a[1],u=0,d=1,p=o[0]-l,h=o[1]-c;if(s=e-l,p||!(s>0)){if(s/=p,p<0){if(s<u)return;s<d&&(d=s)}else if(p>0){if(s>d)return;s>u&&(u=s)}if(s=i-l,p||!(s<0)){if(s/=p,p<0){if(s>d)return;s>u&&(u=s)}else if(p>0){if(s<u)return;s<d&&(d=s)}if(s=n-c,h||!(s>0)){if(s/=h,h<0){if(s<u)return;s<d&&(d=s)}else if(h>0){if(s>d)return;s>u&&(u=s)}if(s=r-c,h||!(s<0)){if(s/=h,h<0){if(s>d)return;s>u&&(u=s)}else if(h>0){if(s<u)return;s<d&&(d=s)}return!(u>0||d<1)||(u>0&&(t[0]=[l+u*p,c+u*h]),d<1&&(t[1]=[l+d*p,c+d*h]),!0)}}}}}function fb(t,e,n,i,r){var s=t[1];if(s)return!0;var a,o,l=t[0],c=t.left,u=t.right,d=c[0],p=c[1],h=u[0],f=u[1],m=(d+h)/2,v=(p+f)/2;if(f===p){if(m<e||m>=i)return;if(d>h){if(l){if(l[1]>=r)return}else l=[m,n];s=[m,r]}else{if(l){if(l[1]<n)return}else l=[m,r];s=[m,n]}}else if(o=v-(a=(d-h)/(f-p))*m,a<-1||a>1)if(d>h){if(l){if(l[1]>=r)return}else l=[(n-o)/a,n];s=[(r-o)/a,r]}else{if(l){if(l[1]<n)return}else l=[(r-o)/a,r];s=[(n-o)/a,n]}else if(p<f){if(l){if(l[0]>=i)return}else l=[e,a*e+o];s=[i,a*i+o]}else{if(l){if(l[0]<e)return}else l=[i,a*i+o];s=[e,a*e+o]}return t[0]=l,t[1]=s,!0}function mb(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function vb(t,e){return e[+(e.left!==t.site)]}function gb(t,e){return e[+(e.left===t.site)]}Vy.prototype={areaStart:gy,areaEnd:gy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},By.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Fy(this,this._t0,zy(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Fy(this,zy(this,n=qy(this,t,e)),n);break;default:Fy(this,this._t0,n=qy(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Hy.prototype=Object.create(By.prototype)).point=function(t,e){By.prototype.point.call(this,e,t)},Uy.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}},Ky.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=Wy(t),r=Wy(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Gy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},sb.prototype={constructor:sb,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=cb(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(ob(this,n),n=(t=n).U),n.C=!1,i.C=!0,lb(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(lb(this,n),n=(t=n).U),n.C=!1,i.C=!0,ob(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,s=t.L,a=t.R;if(n=s?a?cb(a):s:a,r?r.L===t?r.L=n:r.R=n:this._=n,s&&a?(i=n.C,n.C=t.C,n.L=s,s.U=n,n!==a?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=a,a.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,ob(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,lb(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,ob(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,lb(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ob(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,lb(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};var yb,bb=[];function _b(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,s=n.site;if(i!==s){var a=r[0],o=r[1],l=i[0]-a,c=i[1]-o,u=s[0]-a,d=s[1]-o,p=2*(l*d-c*u);if(!(p>=-Ib)){var h=l*l+c*c,f=u*u+d*d,m=(d*h-c*f)/p,v=(l*f-u*h)/p,g=bb.pop()||new function(){ab(this),this.x=this.y=this.arc=this.site=this.cy=null};g.arc=t,g.site=r,g.x=m+a,g.y=(g.cy=v+o)+Math.sqrt(m*m+v*v),t.circle=g;for(var y=null,b=Ob._;b;)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}Ob.insert(y,g),y||(yb=g)}}}}function xb(t){var e=t.circle;e&&(e.P||(yb=e.N),Ob.remove(e),bb.push(e),ab(e),t.circle=null)}var wb=[];function kb(t){var e=wb.pop()||new function(){ab(this),this.edge=this.site=this.circle=null};return e.site=t,e}function Sb(t){xb(t),Tb.remove(t),wb.push(t),ab(t)}function Cb(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],s=t.P,a=t.N,o=[t];Sb(t);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<Nb&&Math.abs(i-l.circle.cy)<Nb;)s=l.P,o.unshift(l),Sb(l),l=s;o.unshift(l),xb(l);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<Nb&&Math.abs(i-c.circle.cy)<Nb;)a=c.N,o.push(c),Sb(c),c=a;o.push(c),xb(c);var u,d=o.length;for(u=1;u<d;++u)c=o[u],l=o[u-1],pb(c.edge,l.site,c.site,r);l=o[0],(c=o[d-1]).edge=ub(l.site,c.site,null,r),_b(l),_b(c)}function Eb(t){for(var e,n,i,r,s=t[0],a=t[1],o=Tb._;o;)if((i=Mb(o,a)-s)>Nb)o=o.L;else{if(!((r=s-Ab(o,a))>Nb)){i>-Nb?(e=o.P,n=o):r>-Nb?(e=o,n=o.N):e=n=o;break}if(!o.R){e=o;break}o=o.R}!function(t){Db[t.index]={site:t,halfedges:[]}}(t);var l=kb(t);if(Tb.insert(e,l),e||n){if(e===n)return xb(e),n=kb(e.site),Tb.insert(l,n),l.edge=n.edge=ub(e.site,l.site),_b(e),void _b(n);if(n){xb(e),xb(n);var c=e.site,u=c[0],d=c[1],p=t[0]-u,h=t[1]-d,f=n.site,m=f[0]-u,v=f[1]-d,g=2*(p*v-h*m),y=p*p+h*h,b=m*m+v*v,_=[(v*y-h*b)/g+u,(p*b-m*y)/g+d];pb(n.edge,c,f,_),l.edge=ub(c,t,null,_),n.edge=ub(t,f,null,_),_b(e),_b(n)}else l.edge=ub(e.site,l.site)}}function Mb(t,e){var n=t.site,i=n[0],r=n[1],s=r-e;if(!s)return i;var a=t.P;if(!a)return-1/0;var o=(n=a.site)[0],l=n[1],c=l-e;if(!c)return o;var u=o-i,d=1/s-1/c,p=u/c;return d?(-p+Math.sqrt(p*p-2*d*(u*u/(-2*c)-l+c/2+r-s/2)))/d+i:(i+o)/2}function Ab(t,e){var n=t.N;if(n)return Mb(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var Tb,Db,Ob,Rb,Nb=1e-6,Ib=1e-12;function $b(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function jb(t,e){return e[1]-t[1]||e[0]-t[0]}function Lb(t,e){var n,i,r,s=t.sort(jb).pop();for(Rb=[],Db=new Array(t.length),Tb=new sb,Ob=new sb;;)if(r=yb,s&&(!r||s[1]<r.y||s[1]===r.y&&s[0]<r.x))s[0]===n&&s[1]===i||(Eb(s),n=s[0],i=s[1]),s=t.pop();else{if(!r)break;Cb(r.arc)}if(function(){for(var t,e,n,i,r=0,s=Db.length;r<s;++r)if((t=Db[r])&&(i=(e=t.halfedges).length)){var a=new Array(i),o=new Array(i);for(n=0;n<i;++n)a[n]=n,o[n]=mb(t,Rb[e[n]]);for(a.sort(function(t,e){return o[e]-o[t]}),n=0;n<i;++n)o[n]=e[a[n]];for(n=0;n<i;++n)e[n]=o[n]}}(),e){var a=+e[0][0],o=+e[0][1],l=+e[1][0],c=+e[1][1];!function(t,e,n,i){for(var r,s=Rb.length;s--;)fb(r=Rb[s],t,e,n,i)&&hb(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>Nb||Math.abs(r[0][1]-r[1][1])>Nb)||delete Rb[s]}(a,o,l,c),function(t,e,n,i){var r,s,a,o,l,c,u,d,p,h,f,m,v=Db.length,g=!0;for(r=0;r<v;++r)if(s=Db[r]){for(a=s.site,o=(l=s.halfedges).length;o--;)Rb[l[o]]||l.splice(o,1);for(o=0,c=l.length;o<c;)f=(h=gb(s,Rb[l[o]]))[0],m=h[1],d=(u=vb(s,Rb[l[++o%c]]))[0],p=u[1],(Math.abs(f-d)>Nb||Math.abs(m-p)>Nb)&&(l.splice(o,0,Rb.push(db(a,h,Math.abs(f-t)<Nb&&i-m>Nb?[t,Math.abs(d-t)<Nb?p:i]:Math.abs(m-i)<Nb&&n-f>Nb?[Math.abs(p-i)<Nb?d:n,i]:Math.abs(f-n)<Nb&&m-e>Nb?[n,Math.abs(d-n)<Nb?p:e]:Math.abs(m-e)<Nb&&f-t>Nb?[Math.abs(p-e)<Nb?d:t,e]:null))-1),++c);c&&(g=!1)}if(g){var y,b,_,x=1/0;for(r=0,g=null;r<v;++r)(s=Db[r])&&(_=(y=(a=s.site)[0]-t)*y+(b=a[1]-e)*b)<x&&(x=_,g=s);if(g){var w=[t,e],k=[t,i],S=[n,i],C=[n,e];g.halfedges.push(Rb.push(db(a=g.site,w,k))-1,Rb.push(db(a,k,S))-1,Rb.push(db(a,S,C))-1,Rb.push(db(a,C,w))-1)}}for(r=0;r<v;++r)(s=Db[r])&&(s.halfedges.length||delete Db[r])}(a,o,l,c)}this.edges=Rb,this.cells=Db,Tb=Ob=Rb=Db=null}function Vb(t){return function(){return t}}function Pb(t,e,n){this.k=t,this.x=e,this.y=n}Lb.prototype={constructor:Lb,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return vb(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,i){if(s=(r=n.halfedges).length)for(var r,s,a,o=n.site,l=-1,c=e[r[s-1]],u=c.left===o?c.right:c.left;++l<s;)a=u,u=(c=e[r[l]]).left===o?c.right:c.left,a&&u&&i<a.index&&i<u.index&&$b(o,a,u)<0&&t.push([o.data,a.data,u.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var i,r,s=this,a=s._found||0,o=s.cells.length;!(r=s.cells[a]);)if(++a>=o)return null;var l=t-r.site[0],c=e-r.site[1],u=l*l+c*c;do{r=s.cells[i=a],a=null,r.halfedges.forEach(function(n){var i=s.edges[n],o=i.left;if(o!==r.site&&o||(o=i.right)){var l=t-o[0],c=e-o[1],d=l*l+c*c;d<u&&(u=d,a=o.index)}})}while(null!==a);return s._found=i,null==n||u<=n*n?r.site:null}},Pb.prototype={constructor:Pb,scale:function(t){return 1===t?this:new Pb(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Pb(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qb=new Pb(1,0,0);function zb(t){for(;!t.__zoom;)if(!(t=t.parentNode))return qb;return t.__zoom}function Fb(){t.event.stopImmediatePropagation()}function Bb(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function Hb(){return!t.event.ctrlKey&&!t.event.button}function Ub(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Kb(){return this.__zoom||qb}function Wb(){return-t.event.deltaY*(1===t.event.deltaMode?.05:t.event.deltaMode?1:.002)}function Gb(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xb(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}zb.prototype=Pb.prototype,t.FormatSpecifier=Ra,t.active=function(t,e){var n,i,r=t.__transition;if(r)for(i in e=null==e?null:e+"",r)if((n=r[i]).state>yi&&n.name===e)return new Ii([[t]],fr,e,+i);return null},t.arc=function(){var t=Eg,e=Mg,n=hg(0),i=null,r=Ag,s=Tg,a=Dg,o=null;function l(){var l,c,u=+t.apply(this,arguments),d=+e.apply(this,arguments),p=r.apply(this,arguments)-kg,h=s.apply(this,arguments)-kg,f=fg(h-p),m=h>p;if(o||(o=l=Yr()),d<u&&(c=d,d=u,u=c),d>xg)if(f>Sg-xg)o.moveTo(d*vg(p),d*bg(p)),o.arc(0,0,d,p,h,!m),u>xg&&(o.moveTo(u*vg(h),u*bg(h)),o.arc(0,0,u,h,p,m));else{var v,g,y=p,b=h,_=p,x=h,w=f,k=f,S=a.apply(this,arguments)/2,C=S>xg&&(i?+i.apply(this,arguments):_g(u*u+d*d)),E=yg(fg(d-u)/2,+n.apply(this,arguments)),M=E,A=E;if(C>xg){var T=Cg(C/u*bg(S)),D=Cg(C/d*bg(S));(w-=2*T)>xg?(_+=T*=m?1:-1,x-=T):(w=0,_=x=(p+h)/2),(k-=2*D)>xg?(y+=D*=m?1:-1,b-=D):(k=0,y=b=(p+h)/2)}var O=d*vg(y),R=d*bg(y),N=u*vg(x),I=u*bg(x);if(E>xg){var $,j=d*vg(b),L=d*bg(b),V=u*vg(_),P=u*bg(_);if(f<wg&&($=function(t,e,n,i,r,s,a,o){var l=V-O,c=P-R,u=N-j,d=I-L,p=d*l-u*c;if(!(p*p<xg))return[O+(p=(u*(R-L)-d*(O-j))/p)*l,R+p*c]}())){var q=O-$[0],z=R-$[1],F=j-$[0],B=L-$[1],H=1/bg(function(t){return t>1?0:t<-1?wg:Math.acos(t)}((q*F+z*B)/(_g(q*q+z*z)*_g(F*F+B*B)))/2),U=_g($[0]*$[0]+$[1]*$[1]);M=yg(E,(u-U)/(H-1)),A=yg(E,(d-U)/(H+1))}}k>xg?A>xg?(v=Og(V,P,O,R,d,A,m),g=Og(j,L,N,I,d,A,m),o.moveTo(v.cx+v.x01,v.cy+v.y01),A<E?o.arc(v.cx,v.cy,A,mg(v.y01,v.x01),mg(g.y01,g.x01),!m):(o.arc(v.cx,v.cy,A,mg(v.y01,v.x01),mg(v.y11,v.x11),!m),o.arc(0,0,d,mg(v.cy+v.y11,v.cx+v.x11),mg(g.cy+g.y11,g.cx+g.x11),!m),o.arc(g.cx,g.cy,A,mg(g.y11,g.x11),mg(g.y01,g.x01),!m))):(o.moveTo(O,R),o.arc(0,0,d,y,b,!m)):o.moveTo(O,R),u>xg&&w>xg?M>xg?(v=Og(N,I,j,L,u,-M,m),g=Og(O,R,V,P,u,-M,m),o.lineTo(v.cx+v.x01,v.cy+v.y01),M<E?o.arc(v.cx,v.cy,M,mg(v.y01,v.x01),mg(g.y01,g.x01),!m):(o.arc(v.cx,v.cy,M,mg(v.y01,v.x01),mg(v.y11,v.x11),!m),o.arc(0,0,u,mg(v.cy+v.y11,v.cx+v.x11),mg(g.cy+g.y11,g.cx+g.x11),m),o.arc(g.cx,g.cy,M,mg(g.y11,g.x11),mg(g.y01,g.x01),!m))):o.arc(0,0,u,x,_,m):o.lineTo(N,I)}else o.moveTo(0,0);if(o.closePath(),l)return o=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-wg/2;return[vg(i)*n,bg(i)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:hg(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:hg(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:hg(+t),l):n},l.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:hg(+t),l):i},l.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:hg(+t),l):r},l.endAngle=function(t){return arguments.length?(s="function"==typeof t?t:hg(+t),l):s},l.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:hg(+t),l):a},l.context=function(t){return arguments.length?(o=null==t?null:t,l):o},l},t.area=Lg,t.areaRadial=Ug,t.ascending=e,t.autoType=function(t){for(var e in t){var n,i,r=t[e].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!(i=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Ys&&i[4]&&!i[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r)}else r=n;else r=null;t[e]=r}return t},t.axisBottom=function(t){return q(I,t)},t.axisLeft=function(t){return q($,t)},t.axisRight=function(t){return q(N,t)},t.axisTop=function(t){return q(R,t)},t.bisect=r,t.bisectLeft=s,t.bisectRight=r,t.bisector=n,t.blob=function(t,e){return fetch(t,e).then(Js)},t.brush=function(){return Lr(Er)},t.brushSelection=function(t){var e=t.__brush;return e?e.dim.output(e.selection):null},t.brushX=function(){return Lr(Sr)},t.brushY=function(){return Lr(Cr)},t.buffer=function(t,e){return fetch(t,e).then(Zs)},t.chord=function(){var t=0,e=null,n=null,i=null;function r(r){var s,a,o,l,c,u,d=r.length,p=[],h=v(d),f=[],m=[],g=m.groups=new Array(d),y=new Array(d*d);for(s=0,c=-1;++c<d;){for(a=0,u=-1;++u<d;)a+=r[c][u];p.push(a),f.push(v(d)),s+=a}for(e&&h.sort(function(t,n){return e(p[t],p[n])}),n&&f.forEach(function(t,e){t.sort(function(t,i){return n(r[e][t],r[e][i])})}),l=(s=Br(0,Fr-t*d)/s)?t:Fr/d,a=0,c=-1;++c<d;){for(o=a,u=-1;++u<d;){var b=h[c],_=f[b][u],x=r[b][_],w=a,k=a+=x*s;y[_*d+b]={index:b,subindex:_,startAngle:w,endAngle:k,value:x}}g[b]={index:b,startAngle:o,endAngle:a,value:p[b]},a+=l}for(c=-1;++c<d;)for(u=c-1;++u<d;){var S=y[u*d+c],C=y[c*d+u];(S.value||C.value)&&m.push(S.value<C.value?{source:C,target:S}:{source:S,target:C})}return i?m.sort(i):m}return r.padAngle=function(e){return arguments.length?(t=Br(0,e),r):t},r.sortGroups=function(t){return arguments.length?(e=t,r):e},r.sortSubgroups=function(t){return arguments.length?(n=t,r):n},r.sortChords=function(t){return arguments.length?(null==t?i=null:(i=function(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}(t))._=t,r):i&&i._},r},t.clientPoint=Lt,t.cluster=function(){var t=gd,e=1,n=1,i=!1;function r(r){var s,a=0;r.eachAfter(function(e){var n=e.children;n?(e.x=function(t){return t.reduce(yd,0)/t.length}(n),e.y=1+n.reduce(bd,0)):(e.x=s?a+=t(e,s):0,e.y=0,s=e)});var o=function(t){for(var e;e=t.children;)t=e[0];return t}(r),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(r),c=o.x-t(o,l)/2,u=l.x+t(l,o)/2;return r.eachAfter(i?function(t){t.x=(t.x-r.x)*e,t.y=(r.y-t.y)*n}:function(t){t.x=(t.x-c)/(u-c)*e,t.y=(1-(r.y?t.y/r.y:1))*n})}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],r):i?null:[e,n]},r.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],r):i?[e,n]:null},r},t.color=pe,t.contourDensity=function(){var t=ws,e=ks,n=Ss,i=960,r=500,s=20,a=2,o=3*s,l=i+2*o>>a,c=r+2*o>>a,u=hs(20);function d(i){var r=new Float32Array(l*c),d=new Float32Array(l*c);i.forEach(function(i,s,u){var d=+t(i,s,u)+o>>a,p=+e(i,s,u)+o>>a,h=+n(i,s,u);d>=0&&d<l&&p>=0&&p<c&&(r[d+p*l]+=h)}),_s({width:l,height:c,data:r},{width:l,height:c,data:d},s>>a),xs({width:l,height:c,data:d},{width:l,height:c,data:r},s>>a),_s({width:l,height:c,data:r},{width:l,height:c,data:d},s>>a),xs({width:l,height:c,data:d},{width:l,height:c,data:r},s>>a),_s({width:l,height:c,data:r},{width:l,height:c,data:d},s>>a),xs({width:l,height:c,data:d},{width:l,height:c,data:r},s>>a);var h=u(r);if(!Array.isArray(h)){var f=C(r);h=w(0,f,h),(h=v(0,Math.floor(f/h)*h,h)).shift()}return bs().thresholds(h).size([l,c])(r).map(p)}function p(t){return t.value*=Math.pow(2,-2*a),t.coordinates.forEach(h),t}function h(t){t.forEach(f)}function f(t){t.forEach(m)}function m(t){t[0]=t[0]*Math.pow(2,a)-o,t[1]=t[1]*Math.pow(2,a)-o}function g(){return l=i+2*(o=3*s)>>a,c=r+2*o>>a,d}return d.x=function(e){return arguments.length?(t="function"==typeof e?e:hs(+e),d):t},d.y=function(t){return arguments.length?(e="function"==typeof t?t:hs(+t),d):e},d.weight=function(t){return arguments.length?(n="function"==typeof t?t:hs(+t),d):n},d.size=function(t){if(!arguments.length)return[i,r];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0||e>=0))throw new Error("invalid size");return i=e,r=n,g()},d.cellSize=function(t){if(!arguments.length)return 1<<a;if(!((t=+t)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(t)/Math.LN2),g()},d.thresholds=function(t){return arguments.length?(u="function"==typeof t?t:Array.isArray(t)?hs(ds.call(t)):hs(t),d):u},d.bandwidth=function(t){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return s=Math.round((Math.sqrt(4*t*t+1)-1)/2),g()},d},t.contours=bs,t.create=function(t){return Rt(X(t).call(document.documentElement))},t.creator=X,t.cross=function(t,e,n){var i,r,s,o,l=t.length,c=e.length,u=new Array(l*c);for(null==n&&(n=a),i=s=0;i<l;++i)for(o=t[i],r=0;r<c;++r,++s)u[s]=n(o,e[r]);return u},t.csv=na,t.csvFormat=Ls,t.csvFormatBody=Vs,t.csvFormatRow=qs,t.csvFormatRows=Ps,t.csvFormatValue=zs,t.csvParse=$s,t.csvParseRows=js,t.cubehelix=Qe,t.curveBasis=function(t){return new by(t)},t.curveBasisClosed=function(t){return new _y(t)},t.curveBasisOpen=function(t){return new xy(t)},t.curveBundle=ky,t.curveCardinal=Ey,t.curveCardinalClosed=Ay,t.curveCardinalOpen=Dy,t.curveCatmullRom=Ny,t.curveCatmullRomClosed=$y,t.curveCatmullRomOpen=Ly,t.curveLinear=Ng,t.curveLinearClosed=function(t){return new Vy(t)},t.curveMonotoneX=function(t){return new By(t)},t.curveMonotoneY=function(t){return new Hy(t)},t.curveNatural=function(t){return new Ky(t)},t.curveStep=function(t){return new Gy(t,.5)},t.curveStepAfter=function(t){return new Gy(t,1)},t.curveStepBefore=function(t){return new Gy(t,0)},t.customEvent=Mt,t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.deviation=c,t.dispatch=F,t.drag=function(){var e,n,i,r,s=Kt,a=Wt,o=Gt,l=Xt,c={},u=F("start","drag","end"),d=0,p=0;function h(t){t.on("mousedown.drag",f).filter(l).on("touchstart.drag",g).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(){if(!r&&s.apply(this,arguments)){var o=_("mouse",a.apply(this,arguments),Vt,this,arguments);o&&(Rt(t.event.view).on("mousemove.drag",m,!0).on("mouseup.drag",v,!0),Ft(t.event.view),qt(),i=!1,e=t.event.clientX,n=t.event.clientY,o("start"))}}function m(){if(zt(),!i){var r=t.event.clientX-e,s=t.event.clientY-n;i=r*r+s*s>p}c.mouse("drag")}function v(){Rt(t.event.view).on("mousemove.drag mouseup.drag",null),Bt(t.event.view,i),zt(),c.mouse("end")}function g(){if(s.apply(this,arguments)){var e,n,i=t.event.changedTouches,r=a.apply(this,arguments),o=i.length;for(e=0;e<o;++e)(n=_(i[e].identifier,r,Pt,this,arguments))&&(qt(),n("start"))}}function y(){var e,n,i=t.event.changedTouches,r=i.length;for(e=0;e<r;++e)(n=c[i[e].identifier])&&(zt(),n("drag"))}function b(){var e,n,i=t.event.changedTouches,s=i.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),e=0;e<s;++e)(n=c[i[e].identifier])&&(qt(),n("end"))}function _(e,n,i,r,s){var a,l,p,f=i(n,e),m=u.copy();if(Mt(new Ut(h,"beforestart",a,e,d,f[0],f[1],0,0,m),function(){return null!=(t.event.subject=a=o.apply(r,s))&&(l=a.x-f[0]||0,p=a.y-f[1]||0,!0)}))return function t(o){var u,v=f;switch(o){case"start":c[e]=t,u=d++;break;case"end":delete c[e],--d;case"drag":f=i(n,e),u=d}Mt(new Ut(h,o,a,e,u,f[0]+l,f[1]+p,f[0]-v[0],f[1]-v[1],m),m.apply,m,[o,r,s])}}return h.filter=function(t){return arguments.length?(s="function"==typeof t?t:Ht(!!t),h):s},h.container=function(t){return arguments.length?(a="function"==typeof t?t:Ht(t),h):a},h.subject=function(t){return arguments.length?(o="function"==typeof t?t:Ht(t),h):o},h.touchable=function(t){return arguments.length?(l="function"==typeof t?t:Ht(!!t),h):l},h.on=function(){var t=u.on.apply(u,arguments);return t===u?h:t},h.clickDistance=function(t){return arguments.length?(p=(t=+t)*t,h):Math.sqrt(p)},h},t.dragDisable=Ft,t.dragEnable=Bt,t.dsv=function(t,e,n,i){3===arguments.length&&"function"==typeof n&&(i=n,n=void 0);var r=Ns(t);return ta(e,n).then(function(t){return r.parse(t,i)})},t.dsvFormat=Ns,t.easeBack=or,t.easeBackIn=sr,t.easeBackInOut=or,t.easeBackOut=ar,t.easeBounce=rr,t.easeBounceIn=function(t){return 1-rr(1-t)},t.easeBounceInOut=function(t){return((t*=2)<=1?1-rr(1-t):rr(t-1)+1)/2},t.easeBounceOut=rr,t.easeCircle=Wi,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleInOut=Wi,t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCubic=Pi,t.easeCubicIn=function(t){return t*t*t},t.easeCubicInOut=Pi,t.easeCubicOut=function(t){return--t*t*t+1},t.easeElastic=ur,t.easeElasticIn=cr,t.easeElasticInOut=dr,t.easeElasticOut=ur,t.easeExp=Ki,t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpInOut=Ki,t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeLinear=function(t){return+t},t.easePoly=Fi,t.easePolyIn=qi,t.easePolyInOut=Fi,t.easePolyOut=zi,t.easeQuad=Vi,t.easeQuadIn=function(t){return t*t},t.easeQuadInOut=Vi,t.easeQuadOut=function(t){return t*(2-t)},t.easeSin=Ui,t.easeSinIn=function(t){return 1-Math.cos(t*Hi)},t.easeSinInOut=Ui,t.easeSinOut=function(t){return Math.sin(t*Hi)},t.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},t.extent=u,t.forceCenter=function(t,e){var n;function i(){var i,r,s=n.length,a=0,o=0;for(i=0;i<s;++i)a+=(r=n[i]).x,o+=r.y;for(a=a/s-t,o=o/s-e,i=0;i<s;++i)(r=n[i]).x-=a,r.y-=o}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i},t.forceCollide=function(t){var e,n,i=1,r=1;function s(){for(var t,s,o,l,c,u,d,p=e.length,h=0;h<r;++h)for(s=ma(e,ba,_a).visitAfter(a),t=0;t<p;++t)o=e[t],u=n[o.index],d=u*u,l=o.x+o.vx,c=o.y+o.vy,s.visit(f);function f(t,e,n,r,s){var a=t.data,p=t.r,h=u+p;if(!a)return e>l+h||r<l-h||n>c+h||s<c-h;if(a.index>o.index){var f=l-a.x-a.vx,m=c-a.y-a.vy,v=f*f+m*m;v<h*h&&(0===f&&(v+=(f=ua())*f),0===m&&(v+=(m=ua())*m),v=(h-(v=Math.sqrt(v)))/v*i,o.vx+=(f*=v)*(h=(p*=p)/(d+p)),o.vy+=(m*=v)*h,a.vx-=f*(h=1-h),a.vy-=m*h)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function o(){if(e){var i,r,s=e.length;for(n=new Array(s),i=0;i<s;++i)r=e[i],n[r.index]=+t(r,i,e)}}return"function"!=typeof t&&(t=ca(null==t?1:+t)),s.initialize=function(t){e=t,o()},s.iterations=function(t){return arguments.length?(r=+t,s):r},s.strength=function(t){return arguments.length?(i=+t,s):i},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:ca(+e),o(),s):t},s},t.forceLink=function(t){var e,n,i,r,s,a=xa,o=function(t){return 1/Math.min(r[t.source.index],r[t.target.index])},l=ca(30),c=1;function u(i){for(var r=0,a=t.length;r<c;++r)for(var o,l,u,d,p,h,f,m=0;m<a;++m)l=(o=t[m]).source,d=(u=o.target).x+u.vx-l.x-l.vx||ua(),p=u.y+u.vy-l.y-l.vy||ua(),d*=h=((h=Math.sqrt(d*d+p*p))-n[m])/h*i*e[m],p*=h,u.vx-=d*(f=s[m]),u.vy-=p*f,l.vx+=d*(f=1-f),l.vy+=p*f}function d(){if(i){var o,l,c=i.length,u=t.length,d=is(i,a);for(o=0,r=new Array(c);o<u;++o)(l=t[o]).index=o,"object"!=typeof l.source&&(l.source=wa(d,l.source)),"object"!=typeof l.target&&(l.target=wa(d,l.target)),r[l.source.index]=(r[l.source.index]||0)+1,r[l.target.index]=(r[l.target.index]||0)+1;for(o=0,s=new Array(u);o<u;++o)l=t[o],s[o]=r[l.source.index]/(r[l.source.index]+r[l.target.index]);e=new Array(u),p(),n=new Array(u),h()}}function p(){if(i)for(var n=0,r=t.length;n<r;++n)e[n]=+o(t[n],n,t)}function h(){if(i)for(var e=0,r=t.length;e<r;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),u.initialize=function(t){i=t,d()},u.links=function(e){return arguments.length?(t=e,d(),u):t},u.id=function(t){return arguments.length?(a=t,u):a},u.iterations=function(t){return arguments.length?(c=+t,u):c},u.strength=function(t){return arguments.length?(o="function"==typeof t?t:ca(+t),p(),u):o},u.distance=function(t){return arguments.length?(l="function"==typeof t?t:ca(+t),h(),u):l},u},t.forceManyBody=function(){var t,e,n,i,r=ca(-30),s=1,a=1/0,o=.81;function l(i){var r,s=t.length,a=ma(t,ka,Sa).visitAfter(u);for(n=i,r=0;r<s;++r)e=t[r],a.visit(d)}function c(){if(t){var e,n,s=t.length;for(i=new Array(s),e=0;e<s;++e)n=t[e],i[n.index]=+r(n,e,t)}}function u(t){var e,n,r,s,a,o=0,l=0;if(t.length){for(r=s=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(o+=e.value,l+=n,r+=n*e.x,s+=n*e.y);t.x=r/l,t.y=s/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{o+=i[e.data.index]}while(e=e.next)}t.value=o}function d(t,r,l,c){if(!t.value)return!0;var u=t.x-e.x,d=t.y-e.y,p=c-r,h=u*u+d*d;if(p*p/o<h)return h<a&&(0===u&&(h+=(u=ua())*u),0===d&&(h+=(d=ua())*d),h<s&&(h=Math.sqrt(s*h)),e.vx+=u*t.value*n/h,e.vy+=d*t.value*n/h),!0;if(!(t.length||h>=a)){(t.data!==e||t.next)&&(0===u&&(h+=(u=ua())*u),0===d&&(h+=(d=ua())*d),h<s&&(h=Math.sqrt(s*h)));do{t.data!==e&&(p=i[t.data.index]*n/h,e.vx+=u*p,e.vy+=d*p)}while(t=t.next)}}return l.initialize=function(e){t=e,c()},l.strength=function(t){return arguments.length?(r="function"==typeof t?t:ca(+t),c(),l):r},l.distanceMin=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l.distanceMax=function(t){return arguments.length?(a=t*t,l):Math.sqrt(a)},l.theta=function(t){return arguments.length?(o=t*t,l):Math.sqrt(o)},l},t.forceRadial=function(t,e,n){var i,r,s,a=ca(.1);function o(t){for(var a=0,o=i.length;a<o;++a){var l=i[a],c=l.x-e||1e-6,u=l.y-n||1e-6,d=Math.sqrt(c*c+u*u),p=(s[a]-d)*r[a]*t/d;l.vx+=c*p,l.vy+=u*p}}function l(){if(i){var e,n=i.length;for(r=new Array(n),s=new Array(n),e=0;e<n;++e)s[e]=+t(i[e],e,i),r[e]=isNaN(s[e])?0:+a(i[e],e,i)}}return"function"!=typeof t&&(t=ca(+t)),null==e&&(e=0),null==n&&(n=0),o.initialize=function(t){i=t,l()},o.strength=function(t){return arguments.length?(a="function"==typeof t?t:ca(+t),l(),o):a},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:ca(+e),l(),o):t},o.x=function(t){return arguments.length?(e=+t,o):e},o.y=function(t){return arguments.length?(n=+t,o):n},o},t.forceSimulation=function(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),s=0,a=.6,o=is(),l=ci(u),c=F("tick","end");function u(){d(),c.call("tick",e),n<i&&(l.stop(),c.call("end",e))}function d(i){var l,c,u=t.length;void 0===i&&(i=1);for(var d=0;d<i;++d)for(n+=(s-n)*r,o.each(function(t){t(n)}),l=0;l<u;++l)null==(c=t[l]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return e}function p(){for(var e,n=0,i=t.length;n<i;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var r=Ca*Math.sqrt(n),s=n*Ea;e.x=r*Math.cos(s),e.y=r*Math.sin(s)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function h(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),p(),e={tick:d,restart:function(){return l.restart(u),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,p(),o.each(h),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(i=+t,e):i},alphaDecay:function(t){return arguments.length?(r=+t,e):+r},alphaTarget:function(t){return arguments.length?(s=+t,e):s},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},force:function(t,n){return arguments.length>1?(null==n?o.remove(t):o.set(t,h(n)),e):o.get(t)},find:function(e,n,i){var r,s,a,o,l,c=0,u=t.length;for(null==i?i=1/0:i*=i,c=0;c<u;++c)(a=(r=e-(o=t[c]).x)*r+(s=n-o.y)*s)<i&&(l=o,i=a);return l},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}},t.forceX=function(t){var e,n,i,r=ca(.1);function s(t){for(var r,s=0,a=e.length;s<a;++s)(r=e[s]).vx+=(i[s]-r.x)*n[s]*t}function a(){if(e){var s,a=e.length;for(n=new Array(a),i=new Array(a),s=0;s<a;++s)n[s]=isNaN(i[s]=+t(e[s],s,e))?0:+r(e[s],s,e)}}return"function"!=typeof t&&(t=ca(null==t?0:+t)),s.initialize=function(t){e=t,a()},s.strength=function(t){return arguments.length?(r="function"==typeof t?t:ca(+t),a(),s):r},s.x=function(e){return arguments.length?(t="function"==typeof e?e:ca(+e),a(),s):t},s},t.forceY=function(t){var e,n,i,r=ca(.1);function s(t){for(var r,s=0,a=e.length;s<a;++s)(r=e[s]).vy+=(i[s]-r.y)*n[s]*t}function a(){if(e){var s,a=e.length;for(n=new Array(a),i=new Array(a),s=0;s<a;++s)n[s]=isNaN(i[s]=+t(e[s],s,e))?0:+r(e[s],s,e)}}return"function"!=typeof t&&(t=ca(null==t?0:+t)),s.initialize=function(t){e=t,a()},s.strength=function(t){return arguments.length?(r="function"==typeof t?t:ca(+t),a(),s):r},s.y=function(e){return arguments.length?(t="function"==typeof e?e:ca(+e),a(),s):t},s},t.formatDefaultLocale=qa,t.formatLocale=Pa,t.formatSpecifier=Oa,t.geoAlbers=Xu,t.geoAlbersUsa=function(){var t,e,n,i,r,s,a=Xu(),o=Gu().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Gu().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){s=[t,e]}};function u(t){var e=t[0],a=t[1];return s=null,n.point(e,a),s||(i.point(e,a),s)||(r.point(e,a),s)}function d(){return t=e=null,u}return u.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?o:r>=.166&&r<.234&&i>=-.214&&i<-.115?l:a).invert(t)},u.stream=function(n){return t&&e===n?t:(i=[a.stream(e=n),o.stream(n),l.stream(n)],r=i.length,t={point:function(t,e){for(var n=-1;++n<r;)i[n].point(t,e)},sphere:function(){for(var t=-1;++t<r;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<r;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<r;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<r;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<r;)i[t].polygonEnd()}});var i,r},u.precision=function(t){return arguments.length?(a.precision(t),o.precision(t),l.precision(t),d()):a.precision()},u.scale=function(t){return arguments.length?(a.scale(t),o.scale(.35*t),l.scale(t),u.translate(a.translate())):a.scale()},u.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),s=+t[0],u=+t[1];return n=a.translate(t).clipExtent([[s-.455*e,u-.238*e],[s+.455*e,u+.238*e]]).stream(c),i=o.translate([s-.307*e,u+.201*e]).clipExtent([[s-.425*e+Ga,u+.12*e+Ga],[s-.214*e-Ga,u+.234*e-Ga]]).stream(c),r=l.translate([s-.205*e,u+.212*e]).clipExtent([[s-.214*e+Ga,u+.166*e+Ga],[s-.115*e-Ga,u+.234*e-Ga]]).stream(c),d()},u.fitExtent=function(t,e){return $u(u,t,e)},u.fitSize=function(t,e){return ju(u,t,e)},u.fitWidth=function(t,e){return Lu(u,t,e)},u.fitHeight=function(t,e){return Vu(u,t,e)},u.scale(1070)},t.geoArea=function(t){return Oo.reset(),So(t,Ro),2*Oo},t.geoAzimuthalEqualArea=function(){return Hu(Zu).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=Zu,t.geoAzimuthalEquidistant=function(){return Hu(Qu).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=Qu,t.geoBounds=function(t){var e,n,i,r,s,a,o;if(Wo=Ko=-(Ho=Uo=1/0),Zo=[],So(t,gl),n=Zo.length){for(Zo.sort(El),e=1,s=[i=Zo[0]];e<n;++e)Ml(i,(r=Zo[e])[0])||Ml(i,r[1])?(Cl(i[0],r[1])>Cl(i[0],i[1])&&(i[1]=r[1]),Cl(r[0],i[1])>Cl(i[0],i[1])&&(i[0]=r[0])):s.push(i=r);for(a=-1/0,e=0,i=s[n=s.length-1];e<=n;i=r,++e)r=s[e],(o=Cl(i[1],r[0]))>a&&(a=o,Ho=r[0],Ko=i[1])}return Zo=Qo=null,Ho===1/0||Uo===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ho,Uo],[Ko,Wo]]},t.geoCentroid=function(t){tl=el=nl=il=rl=sl=al=ol=ll=cl=ul=0,So(t,Al);var e=ll,n=cl,i=ul,r=e*e+n*n+i*i;return r<Xa&&(e=sl,n=al,i=ol,el<Ga&&(e=nl,n=il,i=rl),(r=e*e+n*n+i*i)<Xa)?[NaN,NaN]:[ro(n,e)*to,vo(i/ho(r))*to]},t.geoCircle=function(){var t,e,n=Pl([0,0]),i=Pl(90),r=Pl(6),s={point:function(n,i){t.push(n=e(n,i)),n[0]*=to,n[1]*=to}};function a(){var a=n.apply(this,arguments),o=i.apply(this,arguments)*eo,l=r.apply(this,arguments)*eo;return t=[],e=Fl(-a[0]*eo,-a[1]*eo,0).invert,Wl(s,o,l,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:Pl([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(i="function"==typeof t?t:Pl(+t),a):i},a.precision=function(t){return arguments.length?(r="function"==typeof t?t:Pl(+t),a):r},a},t.geoClipAntimeridian=ac,t.geoClipCircle=oc,t.geoClipExtent=function(){var t,e,n,i=0,r=0,s=960,a=500;return n={stream:function(n){return t&&e===n?t:t=uc(i,r,s,a)(e=n)},extent:function(o){return arguments.length?(i=+o[0][0],r=+o[0][1],s=+o[1][0],a=+o[1][1],t=e=null,n):[[i,r],[s,a]]}}},t.geoClipRectangle=uc,t.geoConicConformal=function(){return Ku(id).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=id,t.geoConicEqualArea=Gu,t.geoConicEqualAreaRaw=Wu,t.geoConicEquidistant=function(){return Ku(sd).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=sd,t.geoContains=function(t,e){return(t&&kc.hasOwnProperty(t.type)?kc[t.type]:Cc)(t,e)},t.geoDistance=wc,t.geoEqualEarth=function(){return Hu(dd).scale(177.158)},t.geoEqualEarthRaw=dd,t.geoEquirectangular=function(){return Hu(rd).scale(152.63)},t.geoEquirectangularRaw=rd,t.geoGnomonic=function(){return Hu(pd).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=pd,t.geoGraticule=Nc,t.geoGraticule10=function(){return Nc()()},t.geoIdentity=function(){var t,e,n,i,r,s,a,o=1,l=0,c=0,u=1,d=1,p=0,h=null,f=1,m=1,v=Ru({point:function(t,e){var n=b([t,e]);this.stream.point(n[0],n[1])}}),g=Ic;function y(){return f=o*u,m=o*d,s=a=null,b}function b(n){var i=n[0]*f,r=n[1]*m;if(p){var s=r*t-i*e;i=i*t+r*e,r=s}return[i+l,r+c]}return b.invert=function(n){var i=n[0]-l,r=n[1]-c;if(p){var s=r*t+i*e;i=i*t-r*e,r=s}return[i/f,r/m]},b.stream=function(t){return s&&a===t?s:s=v(g(a=t))},b.postclip=function(t){return arguments.length?(g=t,h=n=i=r=null,y()):g},b.clipExtent=function(t){return arguments.length?(g=null==t?(h=n=i=r=null,Ic):uc(h=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),y()):null==h?null:[[h,n],[i,r]]},b.scale=function(t){return arguments.length?(o=+t,y()):o},b.translate=function(t){return arguments.length?(l=+t[0],c=+t[1],y()):[l,c]},b.angle=function(n){return arguments.length?(e=uo(p=n%360*eo),t=so(p),y()):p*to},b.reflectX=function(t){return arguments.length?(u=t?-1:1,y()):u<0},b.reflectY=function(t){return arguments.length?(d=t?-1:1,y()):d<0},b.fitExtent=function(t,e){return $u(b,t,e)},b.fitSize=function(t,e){return ju(b,t,e)},b.fitWidth=function(t,e){return Lu(b,t,e)},b.fitHeight=function(t,e){return Vu(b,t,e)},b},t.geoInterpolate=function(t,e){var n=t[0]*eo,i=t[1]*eo,r=e[0]*eo,s=e[1]*eo,a=so(i),o=uo(i),l=so(s),c=uo(s),u=a*so(n),d=a*uo(n),p=l*so(r),h=l*uo(r),f=2*vo(ho(go(s-i)+a*l*go(r-n))),m=uo(f),v=f?function(t){var e=uo(t*=f)/m,n=uo(f-t)/m,i=n*u+e*p,r=n*d+e*h,s=n*o+e*c;return[ro(r,i)*to,ro(s,ho(i*i+r*r))*to]}:function(){return[n*to,i*to]};return v.distance=f,v},t.geoLength=bc,t.geoMercator=function(){return ed(td).scale(961/Qa)},t.geoMercatorRaw=td,t.geoNaturalEarth1=function(){return Hu(hd).scale(175.295)},t.geoNaturalEarth1Raw=hd,t.geoOrthographic=function(){return Hu(fd).scale(249.5).clipAngle(90+Ga)},t.geoOrthographicRaw=fd,t.geoPath=function(t,e){var n,i,r=4.5;function s(t){return t&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),So(t,n(i))),i.result()}return s.area=function(t){return So(t,n(zc)),zc.result()},s.measure=function(t){return So(t,n(Mu)),Mu.result()},s.bounds=function(t){return So(t,n(tu)),tu.result()},s.centroid=function(t){return So(t,n(uu)),uu.result()},s.projection=function(e){return arguments.length?(n=null==e?(t=null,Ic):(t=e).stream,s):t},s.context=function(t){return arguments.length?(i=null==t?(e=null,new Du):new _u(e=t),"function"!=typeof r&&i.pointRadius(r),s):e},s.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(i.pointRadius(+t),+t),s):r},s.projection(t).context(e)},t.geoProjection=Hu,t.geoProjectionMutator=Uu,t.geoRotation=Kl,t.geoStereographic=function(){return Hu(md).scale(250).clipAngle(142)},t.geoStereographicRaw=md,t.geoStream=So,t.geoTransform=function(t){return{stream:Ru(t)}},t.geoTransverseMercator=function(){var t=ed(vd),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=vd,t.gray=function(t,e){return new Le(t,0,0,null==e?1:e)},t.hcl=Be,t.hierarchy=xd,t.histogram=function(){var t=m,e=u,n=k;function i(i){var s,a,o=i.length,l=new Array(o);for(s=0;s<o;++s)l[s]=t(i[s],s,i);var c=e(l),u=c[0],d=c[1],p=n(l,u,d);Array.isArray(p)||(p=w(u,d,p),p=v(Math.ceil(u/p)*p,d,p));for(var h=p.length;p[0]<=u;)p.shift(),--h;for(;p[h-1]>d;)p.pop(),--h;var f,m=new Array(h+1);for(s=0;s<=h;++s)(f=m[s]=[]).x0=s>0?p[s-1]:u,f.x1=s<h?p[s]:d;for(s=0;s<o;++s)u<=(a=l[s])&&a<=d&&m[r(p,a,0,h)].push(i[s]);return m}return i.value=function(e){return arguments.length?(t="function"==typeof e?e:f(e),i):t},i.domain=function(t){return arguments.length?(e="function"==typeof t?t:f([t[0],t[1]]),i):e},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?f(p.call(t)):f(t),i):n},i},t.hsl=ke,t.html=oa,t.image=function(t,e){return new Promise(function(n,i){var r=new Image;for(var s in e)r[s]=e[s];r.onerror=i,r.onload=function(){n(r)},r.src=t})},t.interpolate=wn,t.interpolateArray=function(t,e){return(fn(e)?hn:mn)(t,e)},t.interpolateBasis=nn,t.interpolateBasisClosed=rn,t.interpolateBlues=Hv,t.interpolateBrBG=nv,t.interpolateBuGn=_v,t.interpolateBuPu=wv,t.interpolateCividis=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},t.interpolateCool=ig,t.interpolateCubehelix=Xn,t.interpolateCubehelixDefault=eg,t.interpolateCubehelixLong=Yn,t.interpolateDate=vn,t.interpolateDiscrete=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},t.interpolateGnBu=Sv,t.interpolateGreens=Kv,t.interpolateGreys=Gv,t.interpolateHcl=Hn,t.interpolateHclLong=Un,t.interpolateHsl=zn,t.interpolateHslLong=Fn,t.interpolateHue=function(t,e){var n=on(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},t.interpolateInferno=dg,t.interpolateLab=function(t,e){var n=ln((t=je(t)).l,(e=je(e)).l),i=ln(t.a,e.a),r=ln(t.b,e.b),s=ln(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=r(e),t.opacity=s(e),t+""}},t.interpolateMagma=ug,t.interpolateNumber=gn,t.interpolateNumberArray=hn,t.interpolateObject=yn,t.interpolateOrRd=Ev,t.interpolateOranges=tg,t.interpolatePRGn=rv,t.interpolatePiYG=av,t.interpolatePlasma=pg,t.interpolatePuBu=Dv,t.interpolatePuBuGn=Av,t.interpolatePuOr=lv,t.interpolatePuRd=Rv,t.interpolatePurples=Yv,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return rg.h=360*t-100,rg.s=1.5-1.5*e,rg.l=.8-.9*e,rg+""},t.interpolateRdBu=uv,t.interpolateRdGy=pv,t.interpolateRdPu=Iv,t.interpolateRdYlBu=fv,t.interpolateRdYlGn=vv,t.interpolateReds=Zv,t.interpolateRgb=cn,t.interpolateRgbBasis=dn,t.interpolateRgbBasisClosed=pn,t.interpolateRound=kn,t.interpolateSinebow=function(t){var e;return t=(.5-t)*Math.PI,sg.r=255*(e=Math.sin(t))*e,sg.g=255*(e=Math.sin(t+ag))*e,sg.b=255*(e=Math.sin(t+og))*e,sg+""},t.interpolateSpectral=yv,t.interpolateString=xn,t.interpolateTransformCss=Rn,t.interpolateTransformSvg=Nn,t.interpolateTurbo=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},t.interpolateViridis=cg,t.interpolateWarm=ng,t.interpolateYlGn=Vv,t.interpolateYlGnBu=jv,t.interpolateYlOrBr=qv,t.interpolateYlOrRd=Fv,t.interpolateZoom=Pn,t.interrupt=Ai,t.interval=function(t,e,n){var i=new li,r=e;return null==e?(i.restart(t,e,n),i):(e=+e,n=null==n?ai():+n,i.restart(function s(a){a+=r,i.restart(s,r+=e,n),t(a)},e,n),i)},t.isoFormat=Em,t.isoParse=Mm,t.json=function(t,e){return fetch(t,e).then(ra)},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.lab=je,t.lch=function(t,e,n,i){return 1===arguments.length?Fe(t):new He(n,e,t,null==i?1:i)},t.line=jg,t.lineRadial=Hg,t.linkHorizontal=function(){return Yg(Jg)},t.linkRadial=function(){var t=Yg(Qg);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.linkVertical=function(){return Yg(Zg)},t.local=It,t.map=is,t.matcher=tt,t.max=C,t.mean=function(t,e){var n,i=t.length,r=i,s=-1,a=0;if(null==e)for(;++s<i;)isNaN(n=o(t[s]))?--r:a+=n;else for(;++s<i;)isNaN(n=o(e(t[s],s,t)))?--r:a+=n;if(r)return a/r},t.median=function(t,n){var i,r=t.length,s=-1,a=[];if(null==n)for(;++s<r;)isNaN(i=o(t[s]))||a.push(i);else for(;++s<r;)isNaN(i=o(n(t[s],s,t)))||a.push(i);return S(a.sort(e),.5)},t.merge=E,t.min=M,t.mouse=Vt,t.namespace=G,t.namespaces=W,t.nest=function(){var t,e,n,i=[],r=[];function s(n,r,a,o){if(r>=i.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var l,c,u,d=-1,p=n.length,h=i[r++],f=is(),m=a();++d<p;)(u=f.get(l=h(c=n[d])+""))?u.push(c):f.set(l,[c]);return f.each(function(t,e){o(m,e,s(t,r,a,o))}),m}return n={object:function(t){return s(t,0,rs,ss)},map:function(t){return s(t,0,as,os)},entries:function(t){return function t(n,s){if(++s>i.length)return n;var a,o=r[s-1];return null!=e&&s>=i.length?a=n.entries():(a=[],n.each(function(e,n){a.push({key:n,values:t(e,s)})})),null!=o?a.sort(function(t,e){return o(t.key,e.key)}):a}(s(t,0,as,os),0)},key:function(t){return i.push(t),n},sortKeys:function(t){return r[i.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}},t.now=ai,t.pack=function(){var t=null,e=1,n=1,i=zd;function r(r){return r.x=e/2,r.y=n/2,t?r.eachBefore(Hd(t)).eachAfter(Ud(i,.5)).eachBefore(Kd(1)):r.eachBefore(Hd(Bd)).eachAfter(Ud(zd,1)).eachAfter(Ud(i,r.r/Math.min(e,n))).eachBefore(Kd(Math.min(e,n)/(2*r.r))),r}return r.radius=function(e){return arguments.length?(t=function(t){return null==t?null:qd(t)}(e),r):t},r.size=function(t){return arguments.length?(e=+t[0],n=+t[1],r):[e,n]},r.padding=function(t){return arguments.length?(i="function"==typeof t?t:Fd(+t),r):i},r},t.packEnclose=Md,t.packSiblings=function(t){return Pd(t),t},t.pairs=function(t,e){null==e&&(e=a);for(var n=0,i=t.length-1,r=t[0],s=new Array(i<0?0:i);n<i;)s[n]=e(r,r=t[++n]);return s},t.partition=function(){var t=1,e=1,n=0,i=!1;function r(r){var s=r.height+1;return r.x0=r.y0=n,r.x1=t,r.y1=e/s,r.eachBefore(function(t,e){return function(i){i.children&&Gd(i,i.x0,t*(i.depth+1)/e,i.x1,t*(i.depth+2)/e);var r=i.x0,s=i.y0,a=i.x1-n,o=i.y1-n;a<r&&(r=a=(r+a)/2),o<s&&(s=o=(s+o)/2),i.x0=r,i.y0=s,i.x1=a,i.y1=o}}(e,s)),i&&r.eachBefore(Wd),r}return r.round=function(t){return arguments.length?(i=!!t,r):i},r.size=function(n){return arguments.length?(t=+n[0],e=+n[1],r):[t,e]},r.padding=function(t){return arguments.length?(n=+t,r):n},r},t.path=Yr,t.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},t.pie=function(){var t=Pg,e=Vg,n=null,i=hg(0),r=hg(Sg),s=hg(0);function a(a){var o,l,c,u,d,p=a.length,h=0,f=new Array(p),m=new Array(p),v=+i.apply(this,arguments),g=Math.min(Sg,Math.max(-Sg,r.apply(this,arguments)-v)),y=Math.min(Math.abs(g)/p,s.apply(this,arguments)),b=y*(g<0?-1:1);for(o=0;o<p;++o)(d=m[f[o]=o]=+t(a[o],o,a))>0&&(h+=d);for(null!=e?f.sort(function(t,n){return e(m[t],m[n])}):null!=n&&f.sort(function(t,e){return n(a[t],a[e])}),o=0,c=h?(g-p*b)/h:0;o<p;++o,v=u)l=f[o],u=v+((d=m[l])>0?d*c:0)+b,m[l]={data:a[l],index:o,value:d,startAngle:v,endAngle:u,padAngle:y};return m}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:hg(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:hg(+t),a):i},a.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:hg(+t),a):r},a.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:hg(+t),a):s},a},t.piecewise=function(t,e){for(var n=0,i=e.length-1,r=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(r,r=e[++n]);return function(t){var e=Math.max(0,Math.min(i-1,Math.floor(t*=i)));return s[e](t-e)}},t.pointRadial=Kg,t.polygonArea=function(t){for(var e,n=-1,i=t.length,r=t[i-1],s=0;++n<i;)e=r,r=t[n],s+=e[1]*r[0]-e[0]*r[1];return s/2},t.polygonCentroid=function(t){for(var e,n,i=-1,r=t.length,s=0,a=0,o=t[r-1],l=0;++i<r;)e=o,o=t[i],l+=n=e[0]*o[1]-o[0]*e[1],s+=(e[0]+o[0])*n,a+=(e[1]+o[1])*n;return[s/(l*=3),a/l]},t.polygonContains=function(t,e){for(var n,i,r=t.length,s=t[r-1],a=e[0],o=e[1],l=s[0],c=s[1],u=!1,d=0;d<r;++d)n=(s=t[d])[0],(i=s[1])>o!=c>o&&a<(l-n)*(o-i)/(c-i)+n&&(u=!u),l=n,c=i;return u},t.polygonHull=function(t){if((n=t.length)<3)return null;var e,n,i=new Array(n),r=new Array(n);for(e=0;e<n;++e)i[e]=[+t[e][0],+t[e][1],e];for(i.sort(pp),e=0;e<n;++e)r[e]=[i[e][0],-i[e][1]];var s=hp(i),a=hp(r),o=a[0]===s[0],l=a[a.length-1]===s[s.length-1],c=[];for(e=s.length-1;e>=0;--e)c.push(t[i[s[e]][2]]);for(e=+o;e<a.length-l;++e)c.push(t[i[a[e]][2]]);return c},t.polygonLength=function(t){for(var e,n,i=-1,r=t.length,s=t[r-1],a=s[0],o=s[1],l=0;++i<r;)e=a,n=o,e-=a=(s=t[i])[0],n-=o=s[1],l+=Math.sqrt(e*e+n*n);return l},t.precisionFixed=za,t.precisionPrefix=Fa,t.precisionRound=Ba,t.quadtree=ma,t.quantile=S,t.quantize=function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n},t.radialArea=Ug,t.radialLine=Hg,t.randomBates=bp,t.randomExponential=_p,t.randomIrwinHall=yp,t.randomLogNormal=gp,t.randomNormal=vp,t.randomUniform=mp,t.range=v,t.rgb=ve,t.ribbon=function(){var t=Jr,e=Zr,n=Qr,i=ts,r=es,s=null;function a(){var a,o=Hr.call(arguments),l=t.apply(this,o),c=e.apply(this,o),u=+n.apply(this,(o[0]=l,o)),d=i.apply(this,o)-zr,p=r.apply(this,o)-zr,h=u*Vr(d),f=u*Pr(d),m=+n.apply(this,(o[0]=c,o)),v=i.apply(this,o)-zr,g=r.apply(this,o)-zr;if(s||(s=a=Yr()),s.moveTo(h,f),s.arc(0,0,u,d,p),d===v&&p===g||(s.quadraticCurveTo(0,0,m*Vr(v),m*Pr(v)),s.arc(0,0,m,v,g)),s.quadraticCurveTo(0,0,h,f),s.closePath(),a)return s=null,a+""||null}return a.radius=function(t){return arguments.length?(n="function"==typeof t?t:Ur(+t),a):n},a.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Ur(+t),a):i},a.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:Ur(+t),a):r},a.source=function(e){return arguments.length?(t=e,a):t},a.target=function(t){return arguments.length?(e=t,a):e},a.context=function(t){return arguments.length?(s=null==t?null:t,a):s},a},t.scaleBand=Ap,t.scaleDiverging=function t(){var e=qp(zm()(Op));return e.copy=function(){return Pm(e,t())},wp.apply(e,arguments)},t.scaleDivergingLog=function t(){var e=Gp(zm()).domain([.1,1,10]);return e.copy=function(){return Pm(e,t()).base(e.base())},wp.apply(e,arguments)},t.scaleDivergingPow=Fm,t.scaleDivergingSqrt=function(){return Fm.apply(null,arguments).exponent(.5)},t.scaleDivergingSymlog=function t(){var e=Jp(zm());return e.copy=function(){return Pm(e,t()).constant(e.constant())},wp.apply(e,arguments)},t.scaleIdentity=function t(e){var n;function i(t){return isNaN(t=+t)?n:t}return i.invert=i,i.domain=i.range=function(t){return arguments.length?(e=Sp.call(t,Tp),i):e.slice()},i.unknown=function(t){return arguments.length?(n=t,i):n},i.copy=function(){return t(e).unknown(n)},e=arguments.length?Sp.call(e,Tp):[0,1],qp(i)},t.scaleImplicit=Ep,t.scaleLinear=function t(){var e=Vp(Op,Op);return e.copy=function(){return jp(e,t())},xp.apply(e,arguments),qp(e)},t.scaleLog=function t(){var e=Gp(Lp()).domain([1,10]);return e.copy=function(){return jp(e,t()).base(e.base())},xp.apply(e,arguments),e},t.scaleOrdinal=Mp,t.scalePoint=function(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(n())},e}(Ap.apply(null,arguments).paddingInner(1))},t.scalePow=nh,t.scaleQuantile=function t(){var n,i=[],s=[],a=[];function o(){var t=0,e=Math.max(1,s.length);for(a=new Array(e-1);++t<e;)a[t-1]=S(i,t/e);return l}function l(t){return isNaN(t=+t)?n:s[r(a,t)]}return l.invertExtent=function(t){var e=s.indexOf(t);return e<0?[NaN,NaN]:[e>0?a[e-1]:i[0],e<a.length?a[e]:i[i.length-1]]},l.domain=function(t){if(!arguments.length)return i.slice();i=[];for(var n,r=0,s=t.length;r<s;++r)null==(n=t[r])||isNaN(n=+n)||i.push(n);return i.sort(e),o()},l.range=function(t){return arguments.length?(s=Cp.call(t),o()):s.slice()},l.unknown=function(t){return arguments.length?(n=t,l):n},l.quantiles=function(){return a.slice()},l.copy=function(){return t().domain(i).range(s).unknown(n)},xp.apply(l,arguments)},t.scaleQuantize=function t(){var e,n=0,i=1,s=1,a=[.5],o=[0,1];function l(t){return t<=t?o[r(a,t,0,s)]:e}function c(){var t=-1;for(a=new Array(s);++t<s;)a[t]=((t+1)*i-(t-s)*n)/(s+1);return l}return l.domain=function(t){return arguments.length?(n=+t[0],i=+t[1],c()):[n,i]},l.range=function(t){return arguments.length?(s=(o=Cp.call(t)).length-1,c()):o.slice()},l.invertExtent=function(t){var e=o.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,a[0]]:e>=s?[a[s-1],i]:[a[e-1],a[e]]},l.unknown=function(t){return arguments.length?(e=t,l):l},l.thresholds=function(){return a.slice()},l.copy=function(){return t().domain([n,i]).range(o).unknown(e)},xp.apply(qp(l),arguments)},t.scaleSequential=function t(){var e=qp(Vm()(Op));return e.copy=function(){return Pm(e,t())},wp.apply(e,arguments)},t.scaleSequentialLog=function t(){var e=Gp(Vm()).domain([1,10]);return e.copy=function(){return Pm(e,t()).base(e.base())},wp.apply(e,arguments)},t.scaleSequentialPow=qm,t.scaleSequentialQuantile=function t(){var n=[],i=Op;function s(t){if(!isNaN(t=+t))return i((r(n,t)-1)/(n.length-1))}return s.domain=function(t){if(!arguments.length)return n.slice();n=[];for(var i,r=0,a=t.length;r<a;++r)null==(i=t[r])||isNaN(i=+i)||n.push(i);return n.sort(e),s},s.interpolator=function(t){return arguments.length?(i=t,s):i},s.copy=function(){return t(i).domain(n)},wp.apply(s,arguments)},t.scaleSequentialSqrt=function(){return qm.apply(null,arguments).exponent(.5)},t.scaleSequentialSymlog=function t(){var e=Jp(Vm());return e.copy=function(){return Pm(e,t()).constant(e.constant())},wp.apply(e,arguments)},t.scaleSqrt=function(){return nh.apply(null,arguments).exponent(.5)},t.scaleSymlog=function t(){var e=Jp(Lp());return e.copy=function(){return jp(e,t()).constant(e.constant())},xp.apply(e,arguments)},t.scaleThreshold=function t(){var e,n=[.5],i=[0,1],s=1;function a(t){return t<=t?i[r(n,t,0,s)]:e}return a.domain=function(t){return arguments.length?(n=Cp.call(t),s=Math.min(n.length,i.length-1),a):n.slice()},a.range=function(t){return arguments.length?(i=Cp.call(t),s=Math.min(n.length,i.length-1),a):i.slice()},a.invertExtent=function(t){var e=i.indexOf(t);return[n[e-1],n[e]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t().domain(n).range(i).unknown(e)},xp.apply(a,arguments)},t.scaleTime=function(){return xp.apply(Lm($h,Nh,bh,vh,fh,ph,uh,ah,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},t.scaleUtc=function(){return xp.apply(Lm(of,sf,Hh,zh,Ph,Lh,uh,ah,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},t.scan=function(t,n){if(i=t.length){var i,r,s=0,a=0,o=t[a];for(null==n&&(n=e);++s<i;)(n(r=t[s],o)<0||0!==n(o,o))&&(o=r,a=s);return 0===n(o,o)?a:void 0}},t.schemeAccent=Um,t.schemeBlues=Bv,t.schemeBrBG=ev,t.schemeBuGn=bv,t.schemeBuPu=xv,t.schemeCategory10=Hm,t.schemeDark2=Km,t.schemeGnBu=kv,t.schemeGreens=Uv,t.schemeGreys=Wv,t.schemeOrRd=Cv,t.schemeOranges=Qv,t.schemePRGn=iv,t.schemePaired=Wm,t.schemePastel1=Gm,t.schemePastel2=Xm,t.schemePiYG=sv,t.schemePuBu=Tv,t.schemePuBuGn=Mv,t.schemePuOr=ov,t.schemePuRd=Ov,t.schemePurples=Xv,t.schemeRdBu=cv,t.schemeRdGy=dv,t.schemeRdPu=Nv,t.schemeRdYlBu=hv,t.schemeRdYlGn=mv,t.schemeReds=Jv,t.schemeSet1=Ym,t.schemeSet2=Jm,t.schemeSet3=Zm,t.schemeSpectral=gv,t.schemeTableau10=Qm,t.schemeYlGn=Lv,t.schemeYlGnBu=$v,t.schemeYlOrBr=Pv,t.schemeYlOrRd=zv,t.select=Rt,t.selectAll=function(t){return"string"==typeof t?new Dt([document.querySelectorAll(t)],[document.documentElement]):new Dt([null==t?[]:t],Tt)},t.selection=Ot,t.selector=J,t.selectorAll=Q,t.set=us,t.shuffle=function(t,e,n){for(var i,r,s=(null==n?t.length:n)-(e=null==e?0:+e);s;)r=Math.random()*s--|0,i=t[s+e],t[s+e]=t[r+e],t[r+e]=i;return t},t.stack=function(){var t=hg([]),e=Yy,n=Xy,i=Jy;function r(r){var s,a,o=t.apply(this,arguments),l=r.length,c=o.length,u=new Array(c);for(s=0;s<c;++s){for(var d,p=o[s],h=u[s]=new Array(l),f=0;f<l;++f)h[f]=d=[0,+i(r[f],p,f,r)],d.data=r[f];h.key=p}for(s=0,a=e(u);s<c;++s)u[a[s]].index=s;return n(u,a),u}return r.keys=function(e){return arguments.length?(t="function"==typeof e?e:hg(Wg.call(e)),r):t},r.value=function(t){return arguments.length?(i="function"==typeof t?t:hg(+t),r):i},r.order=function(t){return arguments.length?(e=null==t?Yy:"function"==typeof t?t:hg(Wg.call(t)),r):e},r.offset=function(t){return arguments.length?(n=null==t?Xy:t,r):n},r},t.stackOffsetDiverging=function(t,e){if((o=t.length)>0)for(var n,i,r,s,a,o,l=0,c=t[e[0]].length;l<c;++l)for(s=a=0,n=0;n<o;++n)(r=(i=t[e[n]][l])[1]-i[0])>0?(i[0]=s,i[1]=s+=r):r<0?(i[1]=a,i[0]=a+=r):(i[0]=0,i[1]=r)},t.stackOffsetExpand=function(t,e){if((i=t.length)>0){for(var n,i,r,s=0,a=t[0].length;s<a;++s){for(r=n=0;n<i;++n)r+=t[n][s][1]||0;if(r)for(n=0;n<i;++n)t[n][s][1]/=r}Xy(t,e)}},t.stackOffsetNone=Xy,t.stackOffsetSilhouette=function(t,e){if((n=t.length)>0){for(var n,i=0,r=t[e[0]],s=r.length;i<s;++i){for(var a=0,o=0;a<n;++a)o+=t[a][i][1]||0;r[i][1]+=r[i][0]=-o/2}Xy(t,e)}},t.stackOffsetWiggle=function(t,e){if((r=t.length)>0&&(i=(n=t[e[0]]).length)>0){for(var n,i,r,s=0,a=1;a<i;++a){for(var o=0,l=0,c=0;o<r;++o){for(var u=t[e[o]],d=u[a][1]||0,p=(d-(u[a-1][1]||0))/2,h=0;h<o;++h){var f=t[e[h]];p+=(f[a][1]||0)-(f[a-1][1]||0)}l+=d,c+=p*d}n[a-1][1]+=n[a-1][0]=s,l&&(s-=c/l)}n[a-1][1]+=n[a-1][0]=s,Xy(t,e)}},t.stackOrderAppearance=Zy,t.stackOrderAscending=tb,t.stackOrderDescending=function(t){return tb(t).reverse()},t.stackOrderInsideOut=function(t){var e,n,i=t.length,r=t.map(eb),s=Zy(t),a=0,o=0,l=[],c=[];for(e=0;e<i;++e)n=s[e],a<o?(a+=r[n],l.push(n)):(o+=r[n],c.push(n));return c.reverse().concat(l)},t.stackOrderNone=Yy,t.stackOrderReverse=function(t){return Yy(t).reverse()},t.stratify=function(){var t=Zd,e=Qd;function n(n){var i,r,s,a,o,l,c,u=n.length,d=new Array(u),p={};for(r=0;r<u;++r)i=n[r],o=d[r]=new Cd(i),null!=(l=t(i,r,n))&&(l+="")&&(p[c=Xd+(o.id=l)]=c in p?Jd:o);for(r=0;r<u;++r)if(o=d[r],null!=(l=e(n[r],r,n))&&(l+="")){if(!(a=p[Xd+l]))throw new Error("missing: "+l);if(a===Jd)throw new Error("ambiguous: "+l);a.children?a.children.push(o):a.children=[o],o.parent=a}else{if(s)throw new Error("multiple roots");s=o}if(!s)throw new Error("no root");if(s.parent=Yd,s.eachBefore(function(t){t.depth=t.parent.depth+1,--u}).eachBefore(Sd),s.parent=null,u>0)throw new Error("cycle");return s}return n.id=function(e){return arguments.length?(t=qd(e),n):t},n.parentId=function(t){return arguments.length?(e=qd(t),n):e},n},t.style=lt,t.sum=function(t,e){var n,i=t.length,r=-1,s=0;if(null==e)for(;++r<i;)(n=+t[r])&&(s+=n);else for(;++r<i;)(n=+e(t[r],r,t))&&(s+=n);return s},t.svg=la,t.symbol=function(){var t=hg(ty),e=hg(64),n=null;function i(){var i;if(n||(n=i=Yr()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return i.type=function(e){return arguments.length?(t="function"==typeof e?e:hg(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:hg(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i},t.symbolCircle=ty,t.symbolCross=ey,t.symbolDiamond=ry,t.symbolSquare=cy,t.symbolStar=ly,t.symbolTriangle=dy,t.symbolWye=my,t.symbols=vy,t.text=ta,t.thresholdFreedmanDiaconis=function(t,n,i){return t=h.call(t,o).sort(e),Math.ceil((i-n)/(2*(S(t,.75)-S(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,e,n){return Math.ceil((n-e)/(3.5*c(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=k,t.tickFormat=Pp,t.tickIncrement=x,t.tickStep=w,t.ticks=_,t.timeDay=vh,t.timeDays=gh,t.timeFormatDefaultLocale=Cm,t.timeFormatLocale=pf,t.timeFriday=Sh,t.timeFridays=Oh,t.timeHour=fh,t.timeHours=mh,t.timeInterval=sh,t.timeMillisecond=ah,t.timeMilliseconds=oh,t.timeMinute=ph,t.timeMinutes=hh,t.timeMonday=_h,t.timeMondays=Mh,t.timeMonth=Nh,t.timeMonths=Ih,t.timeSaturday=Ch,t.timeSaturdays=Rh,t.timeSecond=uh,t.timeSeconds=dh,t.timeSunday=bh,t.timeSundays=Eh,t.timeThursday=kh,t.timeThursdays=Dh,t.timeTuesday=xh,t.timeTuesdays=Ah,t.timeWednesday=wh,t.timeWednesdays=Th,t.timeWeek=bh,t.timeWeeks=Eh,t.timeYear=$h,t.timeYears=jh,t.timeout=fi,t.timer=ci,t.timerFlush=ui,t.touch=Pt,t.touches=function(t,e){null==e&&(e=jt().touches);for(var n=0,i=e?e.length:0,r=new Array(i);n<i;++n)r[n]=Lt(t,e[n]);return r},t.transition=$i,t.transpose=A,t.tree=function(){var t=tp,e=1,n=1,i=null;function r(r){var l=function(t){for(var e,n,i,r,s,a=new sp(t,0),o=[a];e=o.pop();)if(i=e._.children)for(e.children=new Array(s=i.length),r=s-1;r>=0;--r)o.push(n=e.children[r]=new sp(i[r],r)),n.parent=e;return(a.parent=new sp(null,0)).children=[a],a}(r);if(l.eachAfter(s),l.parent.m=-l.z,l.eachBefore(a),i)r.eachBefore(o);else{var c=r,u=r,d=r;r.eachBefore(function(t){t.x<c.x&&(c=t),t.x>u.x&&(u=t),t.depth>d.depth&&(d=t)});var p=c===u?1:t(c,u)/2,h=p-c.x,f=e/(u.x+p+h),m=n/(d.depth||1);r.eachBefore(function(t){t.x=(t.x+h)*f,t.y=t.depth*m})}return r}function s(e){var n=e.children,i=e.parent.children,r=e.i?i[e.i-1]:null;if(n){!function(t){for(var e,n=0,i=0,r=t.children,s=r.length;--s>=0;)(e=r[s]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(e);var s=(n[0].z+n[n.length-1].z)/2;r?(e.z=r.z+t(e._,r._),e.m=e.z-s):e.z=s}else r&&(e.z=r.z+t(e._,r._));e.parent.A=function(e,n,i){if(n){for(var r,s=e,a=e,o=n,l=s.parent.children[0],c=s.m,u=a.m,d=o.m,p=l.m;o=np(o),s=ep(s),o&&s;)l=ep(l),(a=np(a)).a=e,(r=o.z+d-s.z-c+t(o._,s._))>0&&(ip(rp(o,e,i),e,r),c+=r,u+=r),d+=o.m,c+=s.m,p+=l.m,u+=a.m;o&&!np(a)&&(a.t=o,a.m+=d-u),s&&!ep(l)&&(l.t=s,l.m+=c-p,i=e)}return i}(e,r,e.parent.A||i[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function o(t){t.x*=e,t.y=t.depth*n}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],r):i?null:[e,n]},r.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],r):i?[e,n]:null},r},t.treemap=function(){var t=cp,e=!1,n=1,i=1,r=[0],s=zd,a=zd,o=zd,l=zd,c=zd;function u(t){return t.x0=t.y0=0,t.x1=n,t.y1=i,t.eachBefore(d),r=[0],e&&t.eachBefore(Wd),t}function d(e){var n=r[e.depth],i=e.x0+n,u=e.y0+n,d=e.x1-n,p=e.y1-n;d<i&&(i=d=(i+d)/2),p<u&&(u=p=(u+p)/2),e.x0=i,e.y0=u,e.x1=d,e.y1=p,e.children&&(n=r[e.depth+1]=s(e)/2,i+=c(e)-n,u+=a(e)-n,(d-=o(e)-n)<i&&(i=d=(i+d)/2),(p-=l(e)-n)<u&&(u=p=(u+p)/2),t(e,i,u,d,p))}return u.round=function(t){return arguments.length?(e=!!t,u):e},u.size=function(t){return arguments.length?(n=+t[0],i=+t[1],u):[n,i]},u.tile=function(e){return arguments.length?(t=qd(e),u):t},u.padding=function(t){return arguments.length?u.paddingInner(t).paddingOuter(t):u.paddingInner()},u.paddingInner=function(t){return arguments.length?(s="function"==typeof t?t:Fd(+t),u):s},u.paddingOuter=function(t){return arguments.length?u.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):u.paddingTop()},u.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:Fd(+t),u):a},u.paddingRight=function(t){return arguments.length?(o="function"==typeof t?t:Fd(+t),u):o},u.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:Fd(+t),u):l},u.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:Fd(+t),u):c},u},t.treemapBinary=function(t,e,n,i,r){var s,a,o=t.children,l=o.length,c=new Array(l+1);for(c[0]=a=s=0;s<l;++s)c[s+1]=a+=o[s].value;!function t(e,n,i,r,s,a,l){if(e>=n-1){var u=o[e];return u.x0=r,u.y0=s,u.x1=a,void(u.y1=l)}for(var d=c[e],p=i/2+d,h=e+1,f=n-1;h<f;){var m=h+f>>>1;c[m]<p?h=m+1:f=m}p-c[h-1]<c[h]-p&&e+1<h&&--h;var v=c[h]-d,g=i-v;if(a-r>l-s){var y=(r*g+a*v)/i;t(e,h,v,r,s,y,l),t(h,n,g,y,s,a,l)}else{var b=(s*g+l*v)/i;t(e,h,v,r,s,a,b),t(h,n,g,r,b,a,l)}}(0,l,t.value,e,n,i,r)},t.treemapDice=Gd,t.treemapResquarify=up,t.treemapSlice=ap,t.treemapSliceDice=function(t,e,n,i,r){(1&t.depth?ap:Gd)(t,e,n,i,r)},t.treemapSquarify=cp,t.tsv=ia,t.tsvFormat=Us,t.tsvFormatBody=Ks,t.tsvFormatRow=Gs,t.tsvFormatRows=Ws,t.tsvFormatValue=Xs,t.tsvParse=Bs,t.tsvParseRows=Hs,t.utcDay=zh,t.utcDays=Fh,t.utcFriday=Xh,t.utcFridays=nf,t.utcHour=Ph,t.utcHours=qh,t.utcMillisecond=ah,t.utcMilliseconds=oh,t.utcMinute=Lh,t.utcMinutes=Vh,t.utcMonday=Uh,t.utcMondays=Zh,t.utcMonth=sf,t.utcMonths=af,t.utcSaturday=Yh,t.utcSaturdays=rf,t.utcSecond=uh,t.utcSeconds=dh,t.utcSunday=Hh,t.utcSundays=Jh,t.utcThursday=Gh,t.utcThursdays=ef,t.utcTuesday=Kh,t.utcTuesdays=Qh,t.utcWednesday=Wh,t.utcWednesdays=tf,t.utcWeek=Hh,t.utcWeeks=Jh,t.utcYear=of,t.utcYears=lf,t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.variance=l,t.version="5.16.0",t.voronoi=function(){var t=ib,e=rb,n=null;function i(i){return new Lb(i.map(function(n,r){var s=[Math.round(t(n,r,i)/Nb)*Nb,Math.round(e(n,r,i)/Nb)*Nb];return s.index=r,s.data=n,s}),n)}return i.polygons=function(t){return i(t).polygons()},i.links=function(t){return i(t).links()},i.triangles=function(t){return i(t).triangles()},i.x=function(e){return arguments.length?(t="function"==typeof e?e:nb(+e),i):t},i.y=function(t){return arguments.length?(e="function"==typeof t?t:nb(+t),i):e},i.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],i):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},i.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],i):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},i},t.window=ot,t.xml=aa,t.zip=function(){return A(arguments)},t.zoom=function(){var e,n,i=Hb,r=Ub,s=Xb,a=Wb,o=Gb,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=Pn,p=F("start","zoom","end"),h=500,f=150,m=0;function v(t){t.property("__zoom",Kb).on("wheel.zoom",k).on("mousedown.zoom",S).on("dblclick.zoom",C).filter(o).on("touchstart.zoom",E).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(t,e){return(e=Math.max(l[0],Math.min(l[1],e)))===t.k?t:new Pb(e,t.x,t.y)}function y(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new Pb(t.k,i,r)}function b(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function _(t,e,n){t.on("start.zoom",function(){x(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){x(this,arguments).end()}).tween("zoom",function(){var t=this,i=arguments,s=x(t,i),a=r.apply(t,i),o=null==n?b(a):"function"==typeof n?n.apply(t,i):n,l=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=t.__zoom,u="function"==typeof e?e.apply(t,i):e,p=d(c.invert(o).concat(l/c.k),u.invert(o).concat(l/u.k));return function(t){if(1===t)t=u;else{var e=p(t),n=l/e[2];t=new Pb(n,o[0]-e[0]*n,o[1]-e[1]*n)}s.zoom(null,t)}})}function x(t,e,n){return!n&&t.__zooming||new w(t,e)}function w(t,e){this.that=t,this.args=e,this.active=0,this.extent=r.apply(t,e),this.taps=0}function k(){if(i.apply(this,arguments)){var t=x(this,arguments),e=this.__zoom,n=Math.max(l[0],Math.min(l[1],e.k*Math.pow(2,a.apply(this,arguments)))),r=Vt(this);if(t.wheel)t.mouse[0][0]===r[0]&&t.mouse[0][1]===r[1]||(t.mouse[1]=e.invert(t.mouse[0]=r)),clearTimeout(t.wheel);else{if(e.k===n)return;t.mouse=[r,e.invert(r)],Ai(this),t.start()}Bb(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},f),t.zoom("mouse",s(y(g(e,n),t.mouse[0],t.mouse[1]),t.extent,c))}}function S(){if(!n&&i.apply(this,arguments)){var e=x(this,arguments,!0),r=Rt(t.event.view).on("mousemove.zoom",function(){if(Bb(),!e.moved){var n=t.event.clientX-o,i=t.event.clientY-l;e.moved=n*n+i*i>m}e.zoom("mouse",s(y(e.that.__zoom,e.mouse[0]=Vt(e.that),e.mouse[1]),e.extent,c))},!0).on("mouseup.zoom",function(){r.on("mousemove.zoom mouseup.zoom",null),Bt(t.event.view,e.moved),Bb(),e.end()},!0),a=Vt(this),o=t.event.clientX,l=t.event.clientY;Ft(t.event.view),Fb(),e.mouse=[a,this.__zoom.invert(a)],Ai(this),e.start()}}function C(){if(i.apply(this,arguments)){var e=this.__zoom,n=Vt(this),a=e.invert(n),o=e.k*(t.event.shiftKey?.5:2),l=s(y(g(e,o),n,a),r.apply(this,arguments),c);Bb(),u>0?Rt(this).transition().duration(u).call(_,l,n):Rt(this).call(v.transform,l)}}function E(){if(i.apply(this,arguments)){var n,r,s,a,o=t.event.touches,l=o.length,c=x(this,arguments,t.event.changedTouches.length===l);for(Fb(),r=0;r<l;++r)a=[a=Pt(this,o,(s=o[r]).identifier),this.__zoom.invert(a),s.identifier],c.touch0?c.touch1||c.touch0[2]===a[2]||(c.touch1=a,c.taps=0):(c.touch0=a,n=!0,c.taps=1+!!e);e&&(e=clearTimeout(e)),n&&(c.taps<2&&(e=setTimeout(function(){e=null},h)),Ai(this),c.start())}}function M(){if(this.__zooming){var n,i,r,a,o=x(this,arguments),l=t.event.changedTouches,u=l.length;for(Bb(),e&&(e=clearTimeout(e)),o.taps=0,n=0;n<u;++n)r=Pt(this,l,(i=l[n]).identifier),o.touch0&&o.touch0[2]===i.identifier?o.touch0[0]=r:o.touch1&&o.touch1[2]===i.identifier&&(o.touch1[0]=r);if(i=o.that.__zoom,o.touch1){var d=o.touch0[0],p=o.touch0[1],h=o.touch1[0],f=o.touch1[1],m=(m=h[0]-d[0])*m+(m=h[1]-d[1])*m,v=(v=f[0]-p[0])*v+(v=f[1]-p[1])*v;i=g(i,Math.sqrt(m/v)),r=[(d[0]+h[0])/2,(d[1]+h[1])/2],a=[(p[0]+f[0])/2,(p[1]+f[1])/2]}else{if(!o.touch0)return;r=o.touch0[0],a=o.touch0[1]}o.zoom("touch",s(y(i,r,a),o.extent,c))}}function A(){if(this.__zooming){var e,i,r=x(this,arguments),s=t.event.changedTouches,a=s.length;for(Fb(),n&&clearTimeout(n),n=setTimeout(function(){n=null},h),e=0;e<a;++e)i=s[e],r.touch0&&r.touch0[2]===i.identifier?delete r.touch0:r.touch1&&r.touch1[2]===i.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps){var o=Rt(this).on("dblclick.zoom");o&&o.apply(this,arguments)}}}return v.transform=function(t,e,n){var i=t.selection?t.selection():t;i.property("__zoom",Kb),t!==i?_(t,e,n):i.interrupt().each(function(){x(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},v.scaleBy=function(t,e,n){v.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)},n)},v.scaleTo=function(t,e,n){v.transform(t,function(){var t=r.apply(this,arguments),i=this.__zoom,a=null==n?b(t):"function"==typeof n?n.apply(this,arguments):n,o=i.invert(a),l="function"==typeof e?e.apply(this,arguments):e;return s(y(g(i,l),a,o),t,c)},n)},v.translateBy=function(t,e,n){v.transform(t,function(){return s(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),c)})},v.translateTo=function(t,e,n,i){v.transform(t,function(){var t=r.apply(this,arguments),a=this.__zoom,o=null==i?b(t):"function"==typeof i?i.apply(this,arguments):i;return s(qb.translate(o[0],o[1]).scale(a.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,c)},i)},w.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){Mt(new function(t,e,n){this.target=t,this.type=e,this.transform=n}(v,t,this.that.__zoom),p.apply,p,[t,this.that,this.args])}},v.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:Vb(+t),v):a},v.filter=function(t){return arguments.length?(i="function"==typeof t?t:Vb(!!t),v):i},v.touchable=function(t){return arguments.length?(o="function"==typeof t?t:Vb(!!t),v):o},v.extent=function(t){return arguments.length?(r="function"==typeof t?t:Vb([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),v):r},v.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],v):[l[0],l[1]]},v.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],v):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},v.constrain=function(t){return arguments.length?(s=t,v):s},v.duration=function(t){return arguments.length?(u=+t,v):u},v.interpolate=function(t){return arguments.length?(d=t,v):d},v.on=function(){var t=p.on.apply(p,arguments);return t===p?v:t},v.clickDistance=function(t){return arguments.length?(m=(t=+t)*t,v):Math.sqrt(m)},v},t.zoomIdentity=qb,t.zoomTransform=zb,Object.defineProperty(t,"__esModule",{value:!0})});var Templify={install:function(t,e){(e=e||{}).name=e.name||"templified",t[e.name]=function(t){switch(t){case"common/panels/message.html":return'<div class="system-component rs-component message-panel">\r\n<div class="message-container flex h center" v-for="entry in messages">\r\n\t\t\x3c!-- <div class="control visibility flex v center" v-if="!entry.id || !tracking[entry.id]"> --\x3e\r\n\t\t<div class="control visibility flex v center">\r\n\t\t\t<button class="interactability" v-on:click="dismissMessage(entry)">\r\n\t\t\t\tX\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class="iconography visibility flex v center">\r\n\t\t\t<span v-if="!entry.icon" class="fas fa-exclamation-triangle" :class="entry.error?\'rs-light-red\':\'rs-yellow\'"></span>\r\n\t\t\t<span v-if="entry.icon" :class="entry.icon"></span>\r\n\t\t</div>\r\n\t\t<div class="message visibility">\r\n\t\t\t<div class="notification-message" v-if="entry.type === \'notification\'">\r\n\t\t\t\t<div>{{entry.message}}</div>\r\n\t\t\t\t<div class="date flow-h" v-if="entry._display_time">\r\n\t\t\t\t\t<span>{{entry._display_time.toLocaleDateString()}}</span>\r\n\t\t\t\t\t<span class="spacing"></span>\r\n\t\t\t\t\t<span>{{entry._display_time.toLocaleTimeString()}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="progress-message" v-if="entry.type === \'progress\'">\r\n\t\t\t\t<div>{{entry.message}}</div>\r\n\t\t\t\t<div class="progression">\r\n\t\t\t\t\t<div class="progression-bar" :style="\'width: \' + (entry.processed/entry.processing*100).toFixed(3) + \'%\'"></div>\r\n\t\t\t\t\t<div class="progress-readout">\r\n\t\t\t\t\t\t<span>{{entry.processed}}</span>\r\n\t\t\t\t\t\t<span>/</span>\r\n\t\t\t\t\t\t<span>{{entry.processing}}</span>\r\n\t\t\t\t\t\t<span v-if="entry.failed">\r\n\t\t\t\t\t\t\t<span>|</span>\r\n\t\t\t\t\t\t\t<span class="fas fa-exclamation-triangle rs-light-red"></span>\r\n\t\t\t\t\t\t\t<span>{{entry.failed}}</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/cards.html":return'<div class="system-component component-cards">\r\n\t<div class="card" v-for="(card, $index) in corpus" :class="cardClass($index, card)" :style="\'z-index: \' + cardZIndex($index, card) + \'; \' + cardOffset($index, card)" v-on:click="toCard($index)">\r\n\t\r\n\t\t<div class="information" v-swipe.left.stop="nextCard" v-swipe.right.stop="prevCard">\r\n\t\t\t<h1>{{card.name}}</h1>\r\n\t\t\t<rs-object-info v-on:click="processRequest($event)" :record="card" :universe="universe"></rs-object-info>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div class="footer">\r\n\t\t\t<button v-on:click.stop="selectCard(card)" v-if="current === $index && select_label !== null" class="select">\r\n\t\t\t\t<span class="fas fa-check-circle"></span>\r\n\t\t\t\t<span>{{select_label}}</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="goto">\r\n\t\t\t\t<span>{{card_label}}: {{card.name}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n\t\r\n\t<div class="card" v-for="(card, $index) in corpus" :class="cardClass($index + corpus.length, card)" :style="\'z-index: \' + cardZIndex($index + corpus.length, card) + \'; \' + cardOffset($index + corpus.length, card)" v-if="$index < current" v-on:click.stop="toCard($index)">\r\n\t\r\n\t\t<div class="information" v-swipe.left.stop="nextCard" v-swipe.right.stop="prevCard">\r\n\t\t\t<h1>{{card.name}}</h1>\r\n\t\t\t<rs-object-info v-on:click="processRequest($event)" :record="card" :universe="universe"></rs-object-info>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div class="footer">\r\n\t\t\t<button class="goto">\r\n\t\t\t\t<span>{{card_label}}: {{card.name}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n\t\r\n\t<div class="back" v-if="state && state.return">\r\n\t\t\r\n\t</div>\r\n</div>';case"components/connect.html":return'<div class="rs-component connect-component">\r\n\t<div class="heading">\r\n\t\t<span class="heading-icon"></span>\r\n\t</div>\r\n\t<div class="fields" action="javascript:void(0);">\r\n\t\t<table>\r\n\t\t\t<tr>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<label class="full align-right" for="login-username">\r\n\t\t\t\t\t\t<span class="field-text">Username</span>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<input id="login-username" type="text" v-enter="connect" v-model="store.username" />\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<label class="full align-right" for="login-passcode">\r\n\t\t\t\t\t\t<span class="field-text">Passcode</span>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<input id="login-passcode" type="password" v-enter="connect" v-model="passcode" :placeholder="getPasscodePlaceHolder()"/>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<label class="full align-right" for="login-address">\r\n\t\t\t\t\t\t<span class="field-text">Address</span>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<input id="login-address" type="text" v-enter="connect" v-model="store.address" />\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t</table>\r\n\t\t<div class="actions">\r\n\t\t\t<button class="primary-action" v-on:click="connect()">\r\n\t\t\t\t<span class="action-icon fas fa-sign-in"></span>\r\n\t\t\t\t<span class="action-text">Connect</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="toggle-action" v-on:click="toggleSecure()">\r\n\t\t\t\tSecure?\r\n\t\t\t\t<span class="far" :class="store.secure?\'fa-check-square\':\'fa-square\'"></span>\r\n\t\t\t</button>\r\n\t\t\t<button class="toggle-action" v-on:click="clearSaved()" v-if="store.passcode">\r\n\t\t\t\t<span class="fas fa-ban"></span>\r\n\t\t\t\t<span>Passcode</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/count.html":return'<div class="system-component component-count">\r\n\t<div class="modeling">\r\n\t\t<input v-if="editable" v-model.number="shadow" />\r\n\t\t<span v-if="!editable">{{value}}</span>\r\n\t</div>\r\n\r\n\t<div class="op-controls flex h centered" :class="open?\'open\':\'closed\'">\r\n\t\t<button class="op-ctrl op-toggle" v-on:click="nextOp()">\r\n\t\t\t<span :class="operations[operation].icon"></span>\r\n\t\t</button>\r\n\t\t<div class="op-bar flex h centered">\r\n\t\t\t<input class="op-expression" v-model="expression" v-on:keyup.enter="complete()" v-on:keyup.esc="cancel()" />\r\n\t\t\t<button class="op-ctrl" v-on:click="complete()">\r\n\t\t\t\t<span :class="open?\'fas fa-equals rs-orange\':operations[initial].icon"></span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/field/autocomplete.html":return'<div class="rs-autocomplete">\r\n\t<div class="filter">\r\n\t\t<input type="text" v-model="reference_value" v-on:keydown.enter="addReference(reference_value, activeCompletion)" v-on:keyup="deriveCompletions($event, reference_value)"/>\r\n\t</div>\r\n\t<div class="completions" v-if="completions.length">\r\n\t\t<button class="completion" v-for="completion in completions" :class="activeCompletion === completion?\'active\':\'\'" v-on:click="selectCompletion(completion)">\r\n\t\t\t{{completion.name}}\r\n\t\t</button>\r\n\t</div>\r\n</div>\r\n';case"components/field.html":return'\r\n<div class="rs-component rs-field" :class="field.type + \' property-\' + field.property" v-if="isVisible()">\r\n\t<label :for="fid">\r\n\t\t<span>{{field.label}}</span>\r\n\t</label>\r\n\t<span v-if="field.error">\r\n\t\t<h3>\r\n\t\t\t<span class="fas fa-exclamation-triangle"></span>\r\n\t\t\t<span>Error</span>\r\n\t\t</h3>\r\n\t\t<p>\r\n\t\t\t{{field.error | JSON}}\r\n\t\t</p>\r\n\t</span>\r\n\r\n\t<span v-if="field.type === \'label\'">\r\n\t\t\x3c!-- Do Nothing Here --\x3e\r\n\t</span>\r\n\r\n\t<select :id="fid" v-if="field.type === \'select\' && field.options && field.options.length" v-model="root[field.property]" v-on:change.stop="emitChanged()" v-on:blur="blurring()">\r\n\t\t<option v-if="root[field.property] === \'undefined\' && !field.persistUnset" :value="root[field.property]">{{field.unset}}</option>\r\n\t\t<option v-if="field.persistUnset" value=undefined>{{field.unset || "Select..."}}</option>\r\n\r\n\t\t<option v-if="field.raw" v-for="option in field.options" :value="option">{{option}}</option>\r\n\t\t<option v-if="!field.raw && !field.optionValue && !field.optionLabel" v-for="option in field.options" :value="option.value" :title="option[field.optionDescription] || option.description || \'\'">{{option.label}}</option>\r\n\t\t<option v-if="!field.raw && field.optionValue && field.optionLabel" v-for="option in field.options" :value="option[field.optionValue]" :title="option[field.optionDescription] || option.description || \'\'">{{option[field.optionLabel]}}</option>\r\n\t</select>\r\n\r\n\t<span v-if="field.type === \'select\' && (!field.options || !field.options.length)">\r\n\t\t<span class="fas fa-spinner fa-pulse"></span>\r\n\t\t<span>Loading...</span>\r\n\t</span>\r\n\r\n\t<button :id="fid" v-if="field.type === \'checkbox\'" :disabled="field.disable?field.disable():false" v-on:click="set(!root[field.property])" class="flat">\r\n\t\t<span class="far" :class="root[field.property]?\'fa-check-square\':\'fa-square\'"></span>\r\n\t</button>\r\n\r\n\t<input :id="fid" :type="field.type" v-if="field.type === \'number\'" v-model.number="root[field.property]" :min="field.min" :max="field.max" :placeholder="field.placeholder" :disabled="field.disable?field.disable():false" v-on:input.stop="emitChanged()" v-on:focus="focusing()" v-on:blur="blurring()" />\r\n\t<input :id="fid" type="text" v-if="field.type === \'rawnumber\'" v-model.number="root[field.property]" :min="field.min" :max="field.max" :placeholder="field.placeholder" :disabled="field.disable?field.disable():false" v-on:input.stop="emitChanged()" v-on:focus="focusing()" v-on:blur="blurring()" />\r\n\t<input :id="fid" :type="field.type" v-if="field.follow_type" v-model.lazy="root[field.property]" :min="field.min" :max="field.max" :placeholder="field.placeholder" :disabled="field.disable?field.disable():false" v-on:input.stop="emitChanged()" v-on:focus="focusing()" v-on:blur="blurring()" />\r\n\r\n\t<input :id="fid" type="password" v-if="field.type === \'password\'" v-model="buffer" :placeholder="field.placeholder" :disabled="field.disable?field.disable():false" v-on:input.stop="bufferChanged()" v-on:focus="focusing()" v-on:blur="blurring()" />\r\n\t<input :id="fid" type="text" v-if="field.type === \'text\'" v-model="buffer" :placeholder="field.placeholder" :disabled="field.disable?field.disable():false" v-on:input.stop="bufferChanged()" v-on:focus="focusing()" v-on:blur="blurring()" />\r\n\r\n\t<input :id="fid" type="date" v-if="field.type === \'date\'" v-model="buffer" :disabled="field.disable?field.disable():false" v-on:change.stop="processDate()" v-on:focus="focusing()" v-on:blur="blurring()" />\r\n\t<span class="indicator" v-if="field.type === \'file\'">\r\n\t\t<span class="rs-light-blue">[</span>\r\n\t\t<span class="" v-if="root[field.property]">Present</span>\r\n\t\t<span class="" v-if="!root[field.property]">Empty</span>\r\n\t\t<span class="rs-light-blue">]</span>\r\n\t</span>\r\n\r\n\t<span v-if="field.suffix" class="suffix">{{field.suffix}}</span>\r\n\r\n\t<span v-if="field.computed" class="computed" :class="field.computed.class?field.computed.class():{}">{{field.computed.method()}}</span>\r\n\t<span v-if="field.computed && field.computed.suffix" class="computed-suffix">{{field.computed.suffix}}</span>\r\n\t<button v-if="field.info" class="info fas fa-info-circle" v-on:click.stop="field.info(root[field.property])"></button>\r\n\t<button v-if="field.validation" class="validation fas" :class="{\'fa-check good\': checkField(), \'fa-exclamation-triangle violation\': !checkField()}" v-on:click.stop="field.validation.feedback(field, root[field.property], checkField())"></button>\r\n\r\n\t<slot name="info">\r\n\t</slot>\r\n\t<span v-if="bufferLoading" class="far fa-pulse fa-spinner"></span>\r\n\r\n\t<table :id="fid" v-if="field.type === \'grid-select\'" class="grid-select">\r\n\t\t<tr>\r\n\t\t\t<td></td>\r\n\t\t\t<td class="col label" v-for="col in field.columns">\r\n\t\t\t\t{{col.label}}\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t\t<tr v-for="row in field.rows">\r\n\t\t\t<td class="row label">{{row.label}}</td>\r\n\t\t\t<td v-for="col in field.columns">\r\n\t\t\t\t\x3c!-- button class="far option" :class="{\'fa-square\': row.value !== _row || col.value !== _col, \'fa-square-check\': row.value === _row && col.value === _col}" v-on:click.stop="set((field.compose || compose)(col.value, row.value))"></button --\x3e\r\n\t\t\t\t<button class="far option" :class="{\'fa-square\': !tracking[row.value][col.value], \'fa-check-square\': tracking[row.value][col.value]}" v-on:click.stop="set(compose(row.value, col.value))"></button>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</table>\r\n\r\n\t<div v-if="field.type === \'file\'" class="file-select">\r\n\t\t<input :id="fid" type="file" :accept="field.accept || \'*\'" v-on:change="selectFile($event)" v-on:focus="focusing()" v-on:blur="blurring()" />\r\n\t</div>\r\n\r\n\t<div v-if="field.type === \'textarea\'" class="textarea">\r\n\t\t<textarea :id="fid" v-model="buffer" v-tab :placeholder="field.placeholder" v-on:input="bufferChanged()" v-on:focus="focusing()" v-on:blur="blurring()">\r\n\t\t</textarea>\r\n\t</div>\r\n\r\n\t<div v-if="field.type === \'multireference\' && !field.raw && field.source_index" class="multireference">\r\n\t\t<div class="referenced" v-for="(reference, $index) in root[field.property]">\r\n\t\t\t<button class="remove fas fa-times-square" v-on:click="dismissReference($index)"></button>\r\n\t\t\t<span class="reference-display">{{field.source_index.index[reference]?field.source_index.index[reference].name || field.source_index.index[reference].id:"Missing:" + reference}}</span>\r\n\t\t\t<button class="info fas fa-info-circle" v-if="!field.noinfo" v-on:click="openReference(reference)"></button>\r\n\t\t</div>\r\n\t\t<div class="referenced" v-if="field.source_index">\r\n\t\t\t<select v-model="reference_value" v-if="!field.autocomplete" v-on:change="addReference(reference_value)">\r\n\t\t\t\t<option value="">Select To Add</option>\r\n\t\t\t\t<option v-for="option in field.source_index.listing" v-if="optionAvailable(option)" :id="option[field.optionValue]" :value="option[field.optionValue]" :title="option[field.optionValue]">{{option.template?\'(T) \' + option[field.optionLabel]:option[field.optionLabel]}}</option>\r\n\t\t\t</select>\r\n\t\t\t<div class="rs-autocomplete" v-if="field.autocomplete">\r\n\t\t\t\t<div class="filter">\r\n\t\t\t\t\t<input type="text" v-model="reference_value" v-on:keydown.enter="addReference(reference_value, activeCompletion)" v-on:keyup="deriveCompletions(reference_value, $event)"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="completions" v-if="completions.length">\r\n\t\t\t\t\t<button class="completion" v-for="(completion,$cindex) in completions" :class="activeCompletion === $cindex?\'active\':\'\'" v-on:click="selectCompletion(completion)" :title="completion.id">\r\n\t\t\t\t\t\t{{completion[field.optionLabel]}}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div v-if="field.type === \'multireference\' && field.raw" class="multireference">\r\n\t\t<div class="referenced" v-for="(reference, $index) in root[field.property]">\r\n\t\t\t<button class="remove fas fa-times-square" v-on:click="dismissReference($index)"></button>\r\n\t\t\t<span class="reference-display">{{reference}}</span>\r\n\t\t\t<button class="info fas fa-edit" v-on:click="editReference($index, reference)"></button>\r\n\t\t</div>\r\n\t\t<div class="referenced">\r\n\t\t\t<input type="number" id="editreference" v-model.number="reference_value" v-if="field.numeric_values" v-on:keydown.enter="addReference(reference_value)" />\r\n\t\t\t<input type="text" id="editreference" v-model="reference_value" v-if="!field.numeric_values" v-on:keydown.enter="addReference(reference_value)" />\r\n\t\t</div>\r\n\t</div>\r\n\t<div v-if="field.type === \'multireference\' && !field.raw && !field.source_index">\r\n\t\t<span class="fas fa-exclamation-triangle"></span>\r\n\t\t<span>No Source Index</span>\r\n\t</div>\r\n\r\n\t<div class="error" v-if="field.error">\r\n\t\t<span>Error:</span>\r\n\t\t<p>{{field.error.message || field.error.text || field.error}}</p>\r\n\t</div>\r\n</div>\r\n';case"components/graph.html":return'<div class="rs-component rs-graph" v-if="isVisible()">\n\t<div class="graph-search" :class="notFound?\'search-error\':\'\'">\n\t\t<input type="text" v-on:keyup.enter="centerOnSearch()" v-model="searchText" v-on:change="activity()">\n\t\t<button class="search-center" v-on:click="centerOnSearch()">\n\t\t\t<span class="fas fa-search"></span>\n\t\t</button>\n\t</div>\n\t<div class="graph-container" :id="id"></div>\n</div>\n';case"components/gyroscope.html":return"";case"components/image.html":return'<div class="rs-component rs-image" :class="classes()">\r\n\t<router-link v-if="link" :to="link">\r\n\t\t<img class="image" :src="uri" draggable="false"/>\r\n\t</router-link>\r\n\t<img v-else class="image" :src="uri" draggable="false"/>\r\n</div>\r\n';case"components/info.html":return'<div class="system-component system-info rs-component" :class="open?\'opened\':\'closed\'">\r\n\t<div class="main-bar">\r\n\t\t<div class="titling">\r\n\t\t\t<span v-if="viewing && viewing.icon" class="icon" :class="viewing.icon"></span>\r\n\t\t\t<span class="text nowrap">{{viewing?viewing.name:"Information"}}</span>\r\n\t\t</div>\r\n\t\t<button class="control back" v-on:click="backOne()" v-if="history.length">\r\n\t\t\t<span class="fas fa-step-backward"></span>\r\n\t\t</button>\r\n\t\t<button class="control close" v-on:click="closeInfo()" :tabindex="getTabIndex()">\r\n\t\t\t<span class="fas fa-times"></span>\r\n\t\t</button>\r\n\t</div>\r\n\t\r\n\t<rs-object-info v-if="viewing" v-on:click="processRequest($event)" v-on:close="closeInfo()" :record="viewing" :universe="universe" :user="user" :player="player" :target="target" :base="base" :options="options"></rs-object-info>\r\n</div>\r\n';case"components/info/render/bag.html":return'<div class="general-information">\r\n\r\n\t<rs-render-image class="profile-image" v-if="profile" :image="profile" :linked="record.linked?record:null"></rs-render-image>\r\n\t\r\n\t<div v-if="description" v-html="description"></div>\r\n\t\r\n\t<rs-render-image class="record-image" v-if="image" :image="image" :linked="record.linked?record:null"></rs-render-image>\r\n\t<div v-if="record.data" class="general-image">\r\n\t\t<img :src="record.data" />\r\n\t</div>\r\n\t\r\n\t<div class="properties">\r\n\t\t<div class="property" v-for="property in keys">\r\n\t\t\t<div class="reference" v-if="universe.indexes[property]">\r\n\t\t\t\t<div class="reference-values" v-if="isArray(record[property]) && record[property].length">\r\n\t\t\t\t\t<div class="reference-heading">{{property.pluralize(true)}}</div>\r\n\t\t\t\t\t<div class="subreference" v-for="subrecord in record[property]" v-if="universe.indexes[property].lookup[subrecord] && !universe.indexes[property].lookup[subrecord].hidden">\r\n\t\t\t\t\t\t<div class="reference-heading">\r\n\t\t\t\t\t\t\t<span :class="universe.indexes[property].lookup[subrecord]?universe.indexes[property].lookup[subrecord].icon:\'\'"></span>\r\n\t\t\t\t\t\t\t<span>{{universe.indexes[property].lookup[subrecord]?universe.indexes[property].lookup[subrecord].name:subrecord}}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<rs-object-info :record="universe.indexes[property].lookup[subrecord]" :universe="universe"></rs-object-info>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="reference-values" v-if="!isArray(record[property]) && record[property] && record[property] && !record[property].hidden">\r\n\t\t\t\t\t<div class="reference-heading">{{property.capitalize()}}</div>\r\n\t\t\t\t\t<div class="subreference">\r\n\t\t\t\t\t\t<div class="reference-heading">{{universe.indexes[property].lookup[record[property]]?universe.indexes[property].lookup[record[property]].name:record[property]}}</div>\r\n\t\t\t\t\t\t<rs-object-info :record="universe.indexes[property].lookup[record[property]]" :universe="universe"></rs-object-info>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="direct" v-else>\r\n\t\t\t\t<span class="key" v-if="knowledgeLink[property]">\r\n\t\t\t\t\t<a class="rendered-value" :data-id="knowledgeLink[property]">{{prettifyPropertyName(property)}}</a>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class="key" v-else>{{prettifyPropertyName(property)}}</span>\r\n\t\t\t\t<span class="divide">:</span>\r\n\t\t\t\t<span class="value">{{prettifyPropertyValue(property, record[property])}}</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<h3>Contents</h3>\r\n\t</div>\r\n\t\r\n\t<div v-if="note && player && player.master">\r\n\t\t<h3>Master Note</h3>\r\n\t\t <div v-html="note"></div>\r\n\t</div>\r\n</div>\r\n';case"components/info/render/basic.html":return'<div class="general-information" v-if="record && record.id">\r\n\t<div class="base-subtitle" v-if="base">\r\n\t\t<span>From</span>\r\n\t\t<span class="named">{{(base).name}}</span>\r\n\t</div>\r\n\r\n\t<rs-render-image class="profile-image" modes="wide" v-if="profile" :image="profile" :linked="linkedLocation"></rs-render-image>\r\n\r\n\t<div v-if="record.is_shop">\r\n\t\t<span class="fas fa-warehouse"></span>\r\n\t\t<span>A Shop</span>\r\n\t</div>\r\n\r\n\t<div v-if="description" v-html="description" class="record-description"></div>\r\n\r\n\t<div v-if="canDashboard(record)">\r\n\t\t<div class="control flex h">\r\n\t\t\t<button class="action direct" v-on:click="viewDashboard(false)">\r\n\t\t\t\t<span class="fas fa-tablet-android-alt"></span>\r\n\t\t\t\t<span>View Dashboard</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="action direct short" v-on:click="viewDashboard(true)">\r\n\t\t\t\t<span class="fas fa-external-link-alt"></span>\r\n\t\t\t</button>\r\n\t\t\t<button class="action direct short" v-on:click="viewDashboard(true, true)">\r\n\t\t\t\t<span class="fas fa-external-link-alt rot180"></span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n\t<div v-if="record.is_shop">\r\n\t\t<div class="control flex h">\r\n\t\t\t<button class="action direct" v-on:click="viewShopInventory(false)">\r\n\t\t\t\t<span class="far fa-boxes"></span>\r\n\t\t\t\t<span>View Shop Inventory</span>\r\n\t\t\t\t<span v-if="base">(As {{base.name}})</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div v-if="relatedError" class="related-error">\r\n\t\t<h3>\r\n\t\t\t<span class="fas fa-exclamation-triangle rs-light-red"></span>\r\n\t\t\t<span>Related Error</span>\r\n\t\t</h3>\r\n\t\t<div class="rs-light-red" v-html="relatedError"></div>\r\n\t</div>\r\n\r\n\t<div v-if="player.master && options.noMaster && record.restock_base">\r\n\t\t<h3>Restock Distribution Preview</h3>\r\n\t\t<div class="restock-graph">\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<rs-render-image class="record-image" v-if="image" :image="image" :linked="linkedLocation"></rs-render-image>\r\n\t<div v-if="record.data && record._class === \'image\' && !record.linked" class="general-image">\r\n\t\t<img :src="record.data" />\r\n\t</div>\r\n\t<div v-if="record.url && record._class === \'image\' && record.linked" class="general-image">\r\n\t\t<img :src="record.url" />\r\n\t</div>\r\n\r\n\t<div class="properties" v-if="record._class !== \'datapoint\' && record._class !== \'datausage\'">\r\n\t\t<div class="direct-properties" v-if="showDirectProperties()">\r\n\t\t\t<div class="property" v-for="property in keys" v-if="visible(property, record[property])" :class="toClassName(property)">\r\n\t\t\t\t<div class="direct" v-if="!universe.indexes[property] && !referenceKeys[property]">\r\n\t\t\t\t\t<span class="key" v-if="knowledgeLink[property] || universe.indexes.knowledge.index[\'knowledge:reference:\' + property]" :class="nameClassing(property)">\r\n\t\t\t\t\t\t<a class="rendered-value" :data-id="knowledgeLink[property] || (\'knowledge:reference:\' + property)">{{prettifyPropertyName(property, record)}}</a>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span class="key" v-if="!knowledgeLink[property] && !universe.indexes.knowledge.index[\'knowledge:reference:\' + property]" :class="nameClassing(property)">{{prettifyPropertyName(property, record)}}</span>\r\n\t\t\t\t\t<span class="divide">:</span>\r\n\t\t\t\t\t<span v-if="!calculated[property] || !calculated[property].involved.length">\r\n\t\t\t\t\t\t<span class="value" v-html="prettifyPropertyValue(property, record[property], record, universe)"></span>\r\n\t\t\t\t\t\t<span class="raw" v-if="displayRaw[property]">{{value}}</span>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<button class="flat" v-if="calculated[property] && calculated[property].involved.length" v-on:click="toggleContributions(property)">\r\n\t\t\t\t\t\t<span class="value calculated-value" v-html="prettifyPropertyValue(property, record[property], record, universe)"></span>\r\n\t\t\t\t\t\t<span class="raw calculated-value" v-if="displayRaw[property]">{{value}}</span>\r\n\t\t\t\t\t\t<span v-if="calculated[property].result != record[property]">\r\n\t\t\t\t\t\t\t<span>(</span>\r\n\t\t\t\t\t\t\t<span class="fas fa-sigma"></span>\r\n\t\t\t\t\t\t\t<span class="calculated-value">{{calculated[property].result}}</span>\r\n\t\t\t\t\t\t\t<span>)</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="section contributions" :class="contributionClasses(property)" v-if="calculated[property] && calculated[property].involved">\r\n\t\t\t\t\t<div class="subreference" v-for="involved in calculated[property].involved">\r\n\t\t\t\t\t\t<a class="rendered-value" v-on:click="showInfo(involved, base)">\r\n\t\t\t\t\t\t\t<span class="fad fa-layer-plus rs-secondary-dark-orange rs-secondary-solid"></span>\r\n\t\t\t\t\t\t\t<span>{{involved.name}}</span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\r\n\t\t<div class="inherit-relations" v-if="showInheritRelations()">\r\n\t\t\t<div class="section maneuver-dial" v-if="record.maneuver && record.maneuver.length">\r\n\t\t\t\t<div class="reference-heading">Maneuver Dial</div>\r\n\t\t\t\t<div class="subreference">\r\n\t\t\t\t\t<rssw-ship-maneuver :universe="universe" :user="user" :entity="record" :display="true"></rssw-ship-maneuver>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="property" v-for="property in keys" v-if="visible(property, record[property])">\r\n\t\t\t\t<div class="reference" v-if="universe.indexes[property] || referenceKeys[property]">\r\n\t\t\t\t\t<div class="reference-values" v-if="isArray(record[property]) && record[property].length">\r\n\t\t\t\t\t\t<div class="reference-heading">{{prettifyPropertyName(property, record).pluralize(true)}}</div>\r\n\t\t\t\t\t\t<div class="subreference" v-for="subrecord in record[property]" v-if="universe.indexes[referenceKeys[property] || property].lookup[subrecord._sourced || subrecord] && !universe.indexes[referenceKeys[property] || property].lookup[subrecord._sourced || subrecord].hidden">\r\n\t\t\t\t\t\t\t<div class="reference-heading" v-if="!collapsed">\r\n\t\t\t\t\t\t\t\t<span :class="universe.indexes[referenceKeys[property] || property].lookup[subrecord._sourced || subrecord]?universe.indexes[referenceKeys[property] || property].lookup[subrecord._sourced || subrecord].icon:\'\'"></span>\r\n\t\t\t\t\t\t\t\t<span>{{universe.indexes[referenceKeys[property] || property].lookup[subrecord._sourced || subrecord]?universe.indexes[referenceKeys[property] || property].lookup[subrecord._sourced || subrecord].name:subrecord}}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<rs-object-info v-if="!collapsed" :record="universe.indexes[referenceKeys[property] || property].lookup[subrecord._sourced || subrecord]" :universe="universe"></rs-object-info>\r\n\t\t\t\t\t\t\t<a v-if="collapsed && universe.indexes[referenceKeys[property] || property].lookup[subrecord._sourced || subrecord] && !universe.indexes[referenceKeys[property] || property].lookup[subrecord._sourced || subrecord].obscured" class="rendered-value" :data-id="universe.indexes[referenceKeys[property] || property].lookup[subrecord._sourced || subrecord].id">{{universe.indexes[referenceKeys[property] || property].lookup[subrecord._sourced || subrecord].name}}</a>\r\n\t\t\t\t\t\t\t<a v-if="collapsed && !universe.indexes[referenceKeys[property] || property].lookup[subrecord._sourced || subrecord]" class="rendered-value unknown">{{subrecord._sourced || subrecord}}[Unknown]</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="reference-values" v-if="!isArray(record[property]) && record[property] && record[property] && !record[property].hidden">\r\n\t\t\t\t\t\t<div class="reference-heading">{{prettifyPropertyName(property, record).capitalize()}}</div>\r\n\t\t\t\t\t\t<div class="subreference">\r\n\t\t\t\t\t\t\t<div class="reference-heading" v-if="!collapsed">{{universe.indexes[referenceKeys[property] || property].lookup[record[property]]?universe.indexes[referenceKeys[property] || property].lookup[record[property]].name:record[property]}}</div>\r\n\t\t\t\t\t\t\t<rs-object-info v-if="!collapsed && universe.indexes[referenceKeys[property] || property].lookup[record[property]] && !universe.indexes[referenceKeys[property] || property].lookup[record[property]].obscured" :record="universe.indexes[referenceKeys[property] || property].lookup[record[property]]" :universe="universe"></rs-object-info>\r\n\t\t\t\t\t\t\t<a v-if="collapsed && universe.indexes[referenceKeys[property] || property].lookup[record[property]] && !universe.indexes[referenceKeys[property] || property].lookup[record[property]].obscured" class="rendered-value" :data-id="universe.indexes[referenceKeys[property] || property].lookup[record[property]].id">{{universe.indexes[referenceKeys[property] || property].lookup[record[property]].name}}</a>\r\n\t\t\t\t\t\t\t<a v-if="collapsed && !universe.indexes[referenceKeys[property] || property].lookup[record[property]]" class="rendered-value unknown" >{{record[property]}}[Unknown]</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class="section" v-if="equipped.length">\r\n\t\t<div class="reference-heading">Equipped Equipment</div>\r\n\t\t<div class="subreference" v-for="equipped_equipment in equipped">\r\n\t\t\t<a class="rendered-value" v-if="isOwner(equipped_equipment[1])" v-on:click="showInfo(equipped_equipment[1], record)">{{equipped_equipment[1].name}}</a>\r\n\t\t\t<span class="rendered-value" v-else>{{equipped_equipment[1].name}}</span>\r\n\t\t\t<span>To</span>\r\n\t\t\t<a class="rendered-value" v-on:click="showInfo(equipped_equipment[0], record)">{{equipped_equipment[0].name}}</a>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class="section" v-if="base && relatedKnowledge.length">\r\n\t\t<div class="reference-heading">{{base.name}}\'s Related Knowledge</div>\r\n\t\t<div class="subreference" v-for="knowledge in relatedKnowledge">\r\n\t\t\t<a class="rendered-value" v-on:click="showInfo(knowledge, base)">{{knowledge.name}}</a>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class="section" v-if="record.related && record.related.length">\r\n\t\t<div class="reference-heading">Related Data</div>\r\n\t\t<div class="subreference" v-for="data in record.related" v-if="universe.index.lookup[data]">\r\n\t\t\t<a class="rendered-value" v-if="isOwner(universe.index.lookup[data])" :data-id="data">{{universe.index.lookup[data].name}}</a>\r\n\t\t\t<span class="rendered-value" v-else>{{universe.index.lookup[data].name}}</span>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class="section" v-if="relatedAbilities && relatedAbilities.length">\r\n\t\t<div class="reference-heading">Related Abilities</div>\r\n\t\t<div class="subreference" v-for="data in relatedAbilities">\r\n\t\t\t<a class="rendered-value" v-if="isOwner(data)" :data-id="data.id">{{data.name}}</a>\r\n\t\t\t<span class="rendered-value" v-else>{{data.name}}</span>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class="section" v-if="relatedArchetypes && relatedArchetypes.length">\r\n\t\t<div class="reference-heading">Related Specializations</div>\r\n\t\t<div class="subreference" v-for="data in relatedArchetypes">\r\n\t\t\t<a class="rendered-value" v-if="isOwner(data)" :data-id="data.id">{{data.name}}</a>\r\n\t\t\t<span class="rendered-value" v-else>{{data.name}}</span>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class="control reference-values" v-if="locations.length">\r\n\t\t<div class="reference-heading">Locations Here</div>\r\n\t\t<div class="subreference" v-for="location in shownLocations">\r\n\t\t\t<a class="rendered-value" v-if="isOwner(location)" :data-id="location.id">{{location.name}}</a>\r\n\t\t\t<span class="rendered-value" v-else>{{location.name}}</span>\r\n\t\t</div>\r\n\t\t<button class="action direct" v-if="locations.length !== shownLocations.length" v-on:click="showAllLocations()">\r\n\t\t\t<span>Load Rest...</span>\r\n\t\t</button>\r\n\t</div>\r\n\r\n\t<div class="control reference-values" v-if="entities.length">\r\n\t\t<div class="reference-heading">Entities Here</div>\r\n\t\t<div v-if="player && player.master">\r\n\t\t\t<div class="subreference" v-for="entity in shownEntities">\r\n\t\t\t\t<a class="rendered-value" :data-id="entity.id">{{entity.name}}</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div v-if="!player || !player.master">\r\n\t\t\t<div class="subreference" v-for="entity in shownEntities">\r\n\t\t\t\t<a class="rendered-value" v-if="isOwner(entity)" :data-id="entity.id">{{entity.name}}</a>\r\n\t\t\t\t<span class="rendered-value" v-else>{{entity.name}}</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<button class="action direct" v-if="entities.length !== shownEntities.length" v-on:click="showAllEntities()">\r\n\t\t\t<span>Load Rest...</span>\r\n\t\t</button>\r\n\t</div>\r\n\r\n\t<div v-if="record._class === \'ability\'" class="control">\r\n\t\t<button class="action direct" v-if="canLearnAbility()" v-on:click="learnAbility(record.id)" :class="classByXP(record.xp_cost)">\r\n\t\t\t<span class="fad fa-globe-africa"></span>\r\n\t\t\t<span>Learn Ability ( </span>\r\n\t\t\t<span class="rs-darkorange">{{record.xp_cost}}</span>\r\n\t\t\t<span>XP )</span>\r\n\t\t</button>\r\n\t\t<button class="action direct" v-if="canForgetAbility()" v-on:click="forgetAbility(record.id)" :class="classByRequirements()">\r\n\t\t\t<span class="fad fa-globe-africa"></span>\r\n\t\t\t<span>Forget Ability ( +</span>\r\n\t\t\t<span class="rs-darkorange">{{record.xp_cost}}</span>\r\n\t\t\t<span>XP )</span>\r\n\t\t</button>\r\n\t</div>\r\n\r\n\t<div v-if="record._class && canTransfer()">\r\n\t\t<h3>Transfer {{record._class.capitalize()}}</h3>\r\n\t\t<div class="control">\r\n\t\t\t<select v-model="transfer_target" v-on:change="transferObject()">\r\n\t\t\t\t<option value="">Choose Target...</option>\r\n\t\t\t\t<option value="cancel">Cancel</option>\r\n\t\t\t\t<option disabled>--------------</option>\r\n\t\t\t\t<option v-if="canTransferToSelf()" :value="base.id">{{base.name}}</option>\r\n\t\t\t\t<option v-for="target in transfer_targets" :value="target.id">{{target.name}}</option>\r\n\t\t\t\t<option disabled>--------------</option>\r\n\t\t\t\t<option value="drop">Drop</option>\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div v-if="canAttach()">\r\n\t\t<h3>Pass To Item</h3>\r\n\t\t<div class="control">\r\n\t\t\t<span v-if="record.hardpoints">Currently has {{record.item?record.item.length:0}} of {{record.hardpoints}} attachments</span>\r\n\t\t\t<span v-if="record.contents_max">Current Fill: {{calculatedEncumberance}} of {{record.contents_max}}</span>\r\n\t\t\t<select v-model="attach_target" v-on:change="attachObject()" v-if="attach_targets.length">\r\n\t\t\t\t<option value=""></option>\r\n\t\t\t\t<option value="cancel">Cancel</option>\r\n\t\t\t\t<option disabled>--------------</option>\r\n\t\t\t\t<option v-for="target in attach_targets" :value="target.id">{{target.name}}</option>\r\n\t\t\t</select>\r\n\t\t\t<div v-if="attach_targets.length === 0">\r\n\t\t\t\t<span class="fas fa-exclamation-triangle"></span>\r\n\t\t\t\t<span>No Viable Items</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div v-if="base && canMoveTo(base.id)">\r\n\t\t<h3>Travel</h3>\r\n\t\t<div class="control" v-if="canTravelTo(base.id)">\r\n\t\t\t<button class="action direct" v-on:click="travelToHere(base.id)">\r\n\t\t\t\t<span class="fad fa-globe-africa"></span>\r\n\t\t\t\t<span>Travel Here as {{base.name}} </span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class="control">\r\n\t\t\t<label>\r\n\t\t\t\t<span>Move Entity Here</span>\r\n\t\t\t\t<select v-model="movingEntity" v-on:change="moveEntityHere(movingEntity)">\r\n\t\t\t\t\t<option value="">{{movableEntities.length === 0?"None Available":""}}</option>\r\n\t\t\t\t\t<option v-for="e in movableEntities" v-if="!e.template && !e.inactive" :value="e.id">{{e.name}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div v-if="canUnequip()">\r\n\t\t<div class="control">\r\n\t\t\t<button class="action direct" v-on:click="unequip()">\r\n\t\t\t\t<span class="fas fa-unlink"></span>\r\n\t\t\t\t<span>Unequip from {{base.name}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div v-if="canEquip() && !canUnequip()">\r\n\t\t<h3>Equip To</h3>\r\n\t\t<div class="control">\r\n\t\t\t<label>\r\n\t\t\t\t<select v-model="equipToSlot" v-on:change="equip(equipToSlot)">\r\n\t\t\t\t\t<option value="">Choose Slot</option>\r\n\t\t\t\t\t<option value="cancel">Cancel</option>\r\n\t\t\t\t\t<option disabled value="disabled">----------</option>\r\n\t\t\t\t\t<option v-for="slot in availableSlots" :value="slot.id">{{slot.name}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t\x3c!-- TODO: Better support for "Tokens" however this doesn\'t seem to warrent its own class\r\n\t\t\tas most other uses seem to fall to effect --\x3e\r\n\t<div v-if="session && (base || player.master) && (record.id === \'knowledge:token:destiny\' || (record._class === \'session\' && player.master))">\r\n\t\t<div class="control" v-if="session && (base && ((base.is_hostile && session.destiny_dark > 0) || (!base.is_hostile && session.destiny_light > 0)))">\r\n\t\t\t<button class="action direct" v-on:click="useDestinyToken(base.is_hostile)">\r\n\t\t\t\t<span class="" :class="base.is_hostile?\'fab fa-sith\':\'fas fa-jedi\'"></span>\r\n\t\t\t\t<span>Use {{base.is_hostile?\'Dark\':\'Light\'}} Destiny ({{base.is_hostile?session.destiny_dark:session.destiny_light}} Points)</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class="control" v-else-if="session && player.master && session.destiny_dark > 0">\r\n\t\t\t<button class="action direct" v-on:click="useDestinyToken(true)">\r\n\t\t\t\t<span class="fab fa-sith"></span>\r\n\t\t\t\t<span>Use Dark Destiny ({{session.destiny_dark}} Points)</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div v-if="actions.length">\r\n\t\t<h3>Actions</h3>\r\n\t\t<div class="control" v-for="action in actions">\r\n\t\t\t<div class="record-action" v-if="action.targets">\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<span>{{action.name}}</span>\r\n\t\t\t\t\t<select v-model="action.target" v-if="action.targets.length" v-on:change="fireAction(action, action.target)">\r\n\t\t\t\t\t\t<option value="">Choose Target</option>\r\n\t\t\t\t\t\t<option value="cancel">Cancel</option>\r\n\t\t\t\t\t\t<option disabled value="disabled">----------</option>\r\n\t\t\t\t\t\t<option v-for="target in action.targets" :value="target.id">{{target.name}}</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t\t<span v-if="action.targets.length === 0">| No Targets Available</span>\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t\t<button class="action direct" v-if="!action.targets" v-on:click="fireAction(action)">\r\n\t\t\t\t<span :class="action.icon"></span>\r\n\t\t\t\t<span>{{action.name}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div v-if="note && player && player.master">\r\n\t\t<div class="info-section" v-if="(record._class === \'location\' || record._class === \'entity\') && hiddenEntities.length">\r\n\t\t\t<h3>Hidden or Obscured Here</h3>\r\n\t\t\t<ul class="general-list">\r\n\t\t\t\t<li v-for="entity in hiddenEntities">\r\n\t\t\t\t\t<a class="rendered-value" :data-id="entity.id">{{entity.name}}</a>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\r\n\t\t<h3>Master Note</h3>\r\n\t\t <div v-html="note"></div>\r\n\t</div>\r\n\r\n\t<div class="control" v-if="record._class === \'location\'">\r\n\t\t<button class="action direct" v-on:click="openStarwarsFandom()">\r\n\t\t\t<span class="fas fa-external-link"></span>\r\n\t\t\t<span>View on Star Wars Fandom</span>\r\n\t\t</button>\r\n\t</div>\r\n\r\n\t<div v-if="player && player.master && !options.noMaster" class="master-controls">\r\n\t\t<h3>Master Controls</h3>\r\n\r\n\t\t<div class="record-id" v-on:click="highlight($event)">\r\n\t\t\t<span>ID:</span>\r\n\t\t\t<input class="displayed-id" :value="record.id" />\r\n\t\t</div>\r\n\r\n\t\t<div class="control">\r\n\t\t\t<button class="action" v-on:click="hideRecord()">\r\n\t\t\t\t<span class="icon" :class="record.hidden?\'far fa-check-square\':\'far fa-square\'"></span>\r\n\t\t\t\t<span>Hidden</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class="control">\r\n\t\t\t<button class="action" v-on:click="obscureRecord()">\r\n\t\t\t\t<span class="icon" :class="record.obscured?\'far fa-check-square\':\'far fa-square\'"></span>\r\n\t\t\t\t<span>Obscured</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class="control">\r\n\t\t\t<button class="action" v-on:click="knownRecord()">\r\n\t\t\t\t<span class="icon" :class="record.must_know?\'far fa-check-square\':\'far fa-square\'"></span>\r\n\t\t\t\t<span>Must Know</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class="control" v-if="record.active !== undefined && (record._class === \'event\' || record._class === \'party\')">\r\n\t\t\t<button class="action" v-on:click="activateRecord()">\r\n\t\t\t\t<span class="icon" :class="record.active?\'far fa-check-square\':\'far fa-square\'"></span>\r\n\t\t\t\t<span>Active</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class="control" v-if="record.charged !== undefined">\r\n\t\t\t<button class="action" v-on:click="dischargeRecord()">\r\n\t\t\t\t<span class="icon" :class="record.charged?\'far fa-check-square\':\'far fa-square\'"></span>\r\n\t\t\t\t<span>Charged</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class="control">\r\n\t\t\t<button class="action" v-on:click="screenRecord()">\r\n\t\t\t\t<span class="icon" :class="record.screen?\'far fa-check-square\':\'far fa-square\'"></span>\r\n\t\t\t\t<span>Screen</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class="control" v-if="record.durability !== undefined">\r\n\t\t\t<label>\r\n\t\t\t\t<span>Set Durability</span>\r\n\t\t\t\t<select v-model.number="adjustingDurability" v-on:change="adjustDurability(adjustingDurability)">\r\n\t\t\t\t\t<option value="10">10</option>\r\n\t\t\t\t\t<option value="9">9</option>\r\n\t\t\t\t\t<option value="8">8</option>\r\n\t\t\t\t\t<option value="7">7</option>\r\n\t\t\t\t\t<option value="6">6</option>\r\n\t\t\t\t\t<option value="5">5</option>\r\n\t\t\t\t\t<option value="4">4</option>\r\n\t\t\t\t\t<option value="3">3</option>\r\n\t\t\t\t\t<option value="2">2</option>\r\n\t\t\t\t\t<option value="1">1</option>\r\n\t\t\t\t\t<option value="0">0</option>\r\n\t\t\t\t</select>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t\t<div class="control" v-if="record.charges !== undefined">\r\n\t\t\t<label>\r\n\t\t\t\t<span>Quick Set Charges</span>\r\n\t\t\t\t<select v-model.number="adjustingCharges" v-on:change="adjustCharges(adjustingCharges)">\r\n\t\t\t\t\t<option value="10">10</option>\r\n\t\t\t\t\t<option value="9">9</option>\r\n\t\t\t\t\t<option value="8">8</option>\r\n\t\t\t\t\t<option value="7">7</option>\r\n\t\t\t\t\t<option value="6">6</option>\r\n\t\t\t\t\t<option value="5">5</option>\r\n\t\t\t\t\t<option value="4">4</option>\r\n\t\t\t\t\t<option value="3">3</option>\r\n\t\t\t\t\t<option value="2">2</option>\r\n\t\t\t\t\t<option value="1">1</option>\r\n\t\t\t\t\t<option value="0">0</option>\r\n\t\t\t\t</select>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\r\n\t\t<div class="control flex h">\r\n\t\t\t<button class="action direct" v-on:click="editRecord(false)">\r\n\t\t\t\t<span class="fas fa-edit"></span>\r\n\t\t\t\t<span>Edit</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="action direct short" v-on:click="editRecord(true)">\r\n\t\t\t\t<span class="far fa-external-link-alt"></span>\r\n\t\t\t</button>\r\n\t\t\t<button class="action direct short" v-on:click="editRecord(true, true)">\r\n\t\t\t\t<span class="fas fa-external-link-alt rot180"></span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<div class="control flex h" v-if="record.template && record._class === \'entity\'">\r\n\t\t\t<button class="action direct" v-on:click="spawnEntity(record)">\r\n\t\t\t\t<span class="fas fa-copy"></span>\r\n\t\t\t\t<span>Copy</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class="control flex h" v-if="record._class === \'event\' && record.category === \'combat\'">\r\n\t\t\t<button class="action direct" v-on:click="openCombatEvent()">\r\n\t\t\t\t<span class="fas fa-swords"></span>\r\n\t\t\t\t<span>View Combat Event</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<div class="control flex h" v-if="record._class === \'session\'">\r\n\t\t\t<button class="action direct" v-on:click="record.rollDestiny()">\r\n\t\t\t\t<span class="fas fa-dice"></span>\r\n\t\t\t\t<span>Roll Destiny</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<div class="control flex h" v-if="!record.template && record.parent && !record.owner && (!record.owners || !record.owners.length)">\r\n\t\t\t<button class="action direct" v-on:click="deleteRecord(record); $emit(\'close\')">\r\n\t\t\t\t<span class="fas fa-trash-alt"></span>\r\n\t\t\t\t<span>Delete</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\t\t<div class="control flex h" v-if="record._class === \'session\'">\r\n\t\t\t<button class="action direct" v-on:click="setCurrentSession()">\r\n\t\t\t\t<span class="fas fa-edit"></span>\r\n\t\t\t\t<span>Set to this Session</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\r\n\r\n\t\t<div class="control" v-if="record.restock_base">\r\n\t\t\t<h3>Restock Distribution</h3>\r\n\t\t\t<button class="action direct" v-if="!showDistribution" v-on:click="showRestockDistribution()">\r\n\t\t\t\t<span class="fas fa-chart-bar"></span>\r\n\t\t\t\t<span>Show Distribution</span>\r\n\t\t\t</button>\r\n\t\t\t<div v-if="showDistribution" class="restock-graph">\r\n\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="control" v-if="record.is_shop">\r\n\t\t\t<button class="action direct" v-if="record.restock_base" v-on:click="restockLocation()">\r\n\t\t\t\t<span class="icon" :class="restocking?\'far fa-sync fa-spin\':\'far fa-inventory\'"></span>\r\n\t\t\t\t<span>Restock Items</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class="control" v-if="record._class === \'location\'">\r\n\t\t\t<label>\r\n\t\t\t\t<span>Copy Entity to Here</span>\r\n\t\t\t\t<select v-model="copyToHere" v-on:change="copyEntityHere(copyToHere)">\r\n\t\t\t\t\t<option value="">Select Template...</option>\r\n\t\t\t\t\t<option v-for="e in availableTemplates.entity" v-if="e.template" :value="e.id">{{e.name}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t\t<div class="control" v-if="record._class === \'item\' && record.template">\r\n\t\t\t<label>\r\n\t\t\t\t<span>Copy Item to Entity:</span>\r\n\t\t\t\t<select v-model="copyToEntity" v-on:change="copyItemToEntity(record.id, copyToEntity)">\r\n\t\t\t\t\t<option value="">Select Entity...</option>\r\n\t\t\t\t\t<option v-for="e in availableEntities" :value="e.id">{{e.name}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t\t<div class="control" v-if="!record.template && (record._class === \'location\' || record._class === \'entity\')">\r\n\t\t\t<div>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<span>Move Party Here</span>\r\n\t\t\t\t\t<select v-model="partyToMove" v-on:change="movePartyHere(partyToMove)">\r\n\t\t\t\t\t\t<option value=""></option>\r\n\t\t\t\t\t\t<option v-for="p in parties" v-if="p.active" :value="p.id">{{p.name}}</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<span>Move Entity Here</span>\r\n\t\t\t\t\t<select v-model="entityToMove" v-on:change="moveEntityHere(entityToMove)">\r\n\t\t\t\t\t\t<option value=""></option>\r\n\t\t\t\t\t\t<option v-for="e in universe.indexes.entity.listing" v-if="!e.template && !e.inactive" :value="e.id">{{e.name}}</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="control" v-if="!record.template && record._class === \'event\' && parties.length">\r\n\t\t\t<label>\r\n\t\t\t\t<span>Add Party to this Event</span>\r\n\t\t\t\t<select v-model="partyToAdd" v-on:change="amendEventWithParty(partyToAdd)">\r\n\t\t\t\t\t<option value="">[ Select Party ]</option>\r\n\t\t\t\t\t<option v-for="p in parties" :value="p.id">{{p.name}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t\t<div class="control" v-if="!record.template && record._class === \'entity\' && activeEvents.length">\r\n\t\t\t<label>\r\n\t\t\t\t<span>Reference in Event:</span>\r\n\t\t\t\t<select v-model="eventToReference" v-on:change="addEntityToEvent(eventToReference)">\r\n\t\t\t\t\t<option value="">[ Select Event ]</option>\r\n\t\t\t\t\t<option v-for="e in activeEvents" :value="e.id">{{e.name}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\r\n\t\t<div class="info-section" v-if="partiesPresent.length">\r\n\t\t\t<h3>Parties Located Here</h3>\r\n\t\t\t<ul class="general-list">\r\n\t\t\t\t<li v-for="party in partiesPresent">\r\n\t\t\t\t\t<a class="rendered-value" :data-id="party.id">{{party.name}}</a>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\r\n\t\t<div class="control" v-if="record.x && record.y">\r\n\t\t\t<button class="action direct" v-on:click="addMeasurePoint(record)">\r\n\t\t\t\t<span class="fas fa-drafting-compass"></span>\r\n\t\t\t\t<span>Add Measuring Point</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/info/render/slot.html":return'<div class="general-information">\r\n\r\n\t<rs-render-image class="profile-image" v-if="profile" :image="profile" :linked="record.linked?record:null"></rs-render-image>\r\n\t\r\n\t<div v-if="description" v-html="description"></div>\r\n\t\r\n\t<rs-render-image class="record-image" v-if="image" :image="image" :linked="record.linked?record:null"></rs-render-image>\r\n\t<div v-if="record.data" class="general-image">\r\n\t\t<img :src="record.data" />\r\n\t</div>\r\n\t\r\n\t<div class="properties">\r\n\t\t<div class="property" v-for="property in keys">\r\n\t\t\t<div class="reference" v-if="universe.indexes[property]">\r\n\t\t\t\t<div class="reference-values" v-if="isArray(record[property]) && record[property].length">\r\n\t\t\t\t\t<div class="reference-heading">{{property.pluralize(true)}}</div>\r\n\t\t\t\t\t<div class="subreference" v-for="subrecord in record[property]" v-if="universe.indexes[property].lookup[subrecord] && !universe.indexes[property].lookup[subrecord].hidden">\r\n\t\t\t\t\t\t<div class="reference-heading">\r\n\t\t\t\t\t\t\t<span :class="universe.indexes[property].lookup[subrecord]?universe.indexes[property].lookup[subrecord].icon:\'\'"></span>\r\n\t\t\t\t\t\t\t<span>{{universe.indexes[property].lookup[subrecord]?universe.indexes[property].lookup[subrecord].name:subrecord}}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<rs-object-info :record="universe.indexes[property].lookup[subrecord]" :universe="universe"></rs-object-info>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="reference-values" v-if="!isArray(record[property]) && record[property] && record[property] && !record[property].hidden">\r\n\t\t\t\t\t<div class="reference-heading">{{property.capitalize()}}</div>\r\n\t\t\t\t\t<div class="subreference">\r\n\t\t\t\t\t\t<div class="reference-heading">{{universe.indexes[property].lookup[record[property]]?universe.indexes[property].lookup[record[property]].name:record[property]}}</div>\r\n\t\t\t\t\t\t<rs-object-info :record="universe.indexes[property].lookup[record[property]]" :universe="universe"></rs-object-info>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="direct" v-else>\r\n\t\t\t\t<span class="key" v-if="knowledgeLink[property]">\r\n\t\t\t\t\t<a class="rendered-value" :data-id="knowledgeLink[property]">{{prettifyPropertyName(property)}}</a>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class="key" v-else>{{prettifyPropertyName(property)}}</span>\r\n\t\t\t\t<span class="divide">:</span>\r\n\t\t\t\t<span class="value">{{prettifyPropertyValue(property, record[property])}}</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<h3>Contents</h3>\r\n\t</div>\r\n\t\r\n\t<div v-if="note && player && player.master">\r\n\t\t<h3>Master Note</h3>\r\n\t\t <div v-html="note"></div>\r\n\t</div>\r\n</div>\r\n';case"components/info/text.html":return'<div class="rs-component info-rendered-text">\r\n\r\n</div>\r\n';case"components/listing.html":return'<div class="rs-component rs-listing">\r\n\t<div class="listing control">\r\n\t\t<div class="title flex h">\r\n\t\t\t<input class="filter" v-model="state.search" :placeholder="placeholder" />\r\n\t\t</div>\r\n\t\t<div class="list-data control">\r\n\t\t\t<div class="listed" v-if="list && list.length === 0">\r\n\t\t\t\t<span>{{empty || "No Entries"}}</span>\r\n\t\t\t</div>\r\n\t\t\t<button class="listed" v-for="entry in list" v-if="isVisible(entry)" v-on:click="openListed(entry)" :emit="emit" :class="entryStyleClass(entry)" :key="entry.id">\r\n\t\t\t\t<span class="name">\r\n\t\t\t\t\t<span class="icon" :class="entry.icon"></span>\r\n\t\t\t\t\t<span>{{entry.name}}</span>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class="indicator"></span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/menu.html":return'<div class="system-component system-menu" :class="getClassSettings()">\r\n\t<div class="navigation">\r\n\t\t<div class="prefixed navigation-item" v-for="navItem in navigationItems" v-if="isActive(navItem)" :class="$router.currentRoute.path.startsWith(navItem.highlight)?\'current\':\'\'">\r\n\t\t\t<router-link class="navigation-contents" :to="navItem.path" :key="navItem.path" v-if="navItem.path">\r\n\t\t\t\t<span class="nav-icon" :class="navItem.icon"></span>\r\n\t\t\t\t<span class="nav-label" :class="navItem.labelClass">{{navItem.label}}</span>\r\n\t\t\t</router-link>\r\n\t\t</div>\r\n\t\t<div class="separator"></div>\r\n\t\t<div class="prefixed navigation-item" v-for="navItem in generalItems" v-if="isActive(navItem)" :class="navItem.class">\r\n\t\t\t<button class="prefixed navigation-contents" v-if="navItem.action" v-on:click="processNavigation(navItem)">\r\n\t\t\t\t<span class="nav-icon" :class="navItem.icon"></span>\r\n\t\t\t\t<span class="nav-label" :class="navItem.labelClass">{{navItem.label}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/nouns.html":return'<div class="rs-component component-nouns" v-save="modify" v-new="newObject">\r\n\t<div class="selections">\r\n\t\t<div class="selection">\r\n\t\t\t<label class="">\r\n\t\t\t\t<span>Noun:</span>\r\n\t\t\t\t<select v-model="state.current" v-on:change="broadcastModel()">\r\n\t\t\t\t\t<option v-for="type in nouns" :value="type">{{type}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t\t<div class="sourcing">\r\n\t\t\t<label class="">\r\n\t\t\t\t<span>Copy:</span>\r\n\t\t\t\t<select v-model="copy">\r\n\t\t\t\t\t<option v-for="object in availableToCopy" :value="object.id">{{labelNoun(object)}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class="building">\r\n\t\t<div class="simplified-editor" v-if="!state.advanced_editor">\r\n\t\t\t<rs-field v-for="field in fields[state.current]" :root="state.building[state.current]" :field="field" v-on:changed="sync($event)" v-on:complete="completed(field.property)" v-on:blur="adjust(field.property)" :key="field.property">\r\n\t\t\t\t<span slot="info">\r\n\t\t\t\t\t<span v-if="field.property === \'id\' && activeCopying()" class="fas fa-link rs-light-red" title="Editor is set to always copy, creating new IDs even when selections are made"></span>\r\n\t\t\t\t\t<span v-if="field.property === \'icon\'" :class="state.building[state.current].icon"></span>\r\n\t\t\t\t\t<button class="info-link ctrl-link copy-parent fas fa-copy" v-if="displayCopyFromParent(field)" v-on:click="copyParent(field.property)" tabindex=2>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class="info-link ctrl-link random-name fas fa-random" v-if="field.property === \'name\' && state.current !== \'session\' && hasGenerator()" v-on:click="randomizeName()" tabindex=2>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class="info-link ctrl-link random-name fas fa-sync" v-if="field.property === \'name\' && hasGenerator()" v-on:click="pullRandomName()" tabindex=2>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class="info-link ctrl-link sync-id fas fa-id-card-alt" v-if="field.property === \'name\'" v-on:click="syncID()" tabindex=2>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class="info-link ctrl-link fas fa-info-circle" v-if="field.property === \'parent\' && state.building[state.current].parent" v-on:click="viewParentInfo()" tabindex=2>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class="info-link ctrl-link fas fa-info-circle" v-if="field.knowledge" v-on:click="openKnowledge(field.knowledge)" tabindex=2>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class="info-link ctrl-link fas fa-question-circle" v-if="field.property === \'parent\' && state.current === \'archetype\'" v-on:click="openKnowledge(\'knowledge:reference:noun:archetype\')" tabindex=2>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class="clear-link ctrl-link flat fas fa-ban" v-on:click="clearField(field)" v-if="field.type !== \'label\'" tabindex=2>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class="info-link ctrl-link random-name far fa-calendar-day" v-if="field.property === \'date\' || field.property === \'created\' || field.property === \'updated\'" v-on:click="setDateNow(field.property)" tabindex=2>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</span>\r\n\t\t\t</rs-field>\r\n\t\t</div>\r\n\r\n\t\t<div class="advanced-editor" v-if="state.advanced_editor">\r\n\t\t\t<textarea v-model="rawValue" v-tab v-filedrop="fileAttach">\r\n\t\t\t</textarea>\r\n\t\t\t<label v-if="state.current === \'image\'">\r\n\t\t\t\t<span>Select Image File:</span>\r\n\t\t\t\t<input type="file" id="attacher" accept="image/*" v-on:change="selectImage($event)" />\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class="actions">\r\n\t\t<button class="primary-action" v-on:click="newObject()">\r\n\t\t\t<span class="action-icon fas fa-file-plus"></span>\r\n\t\t\t<span class="action-text">New</span>\r\n\t\t</button>\r\n\t\t<button class="primary-action" v-on:click="modify()" :disabled="!isValid">\r\n\t\t\t<span class="action-icon fas fa-cloud-upload"></span>\r\n\t\t\t<span class="action-text">Save</span>\r\n\t\t</button>\r\n\t\t<button class="primary-action" v-on:click="dropObject()" v-if="this.state.building[state.current] && this.state.building[state.current].id">\r\n\t\t\t<span class="action-icon fas fa-trash"></span>\r\n\t\t\t<span class="action-text">Drop</span>\r\n\t\t</button>\r\n\t\t<button class="primary-action" v-on:click="toggleEditMode()">\r\n\t\t\t<span class="action-icon far" :class="state.advanced_editor?\'fa-check-square\':\'fa-square\'"></span>\r\n\t\t\t<span class="action-text">Advanced</span>\r\n\t\t</button>\r\n\t</div>\r\n</div>\r\n';case"components/panelselect.html":return'<div class="rs-component rs-panel-select">\r\n\t<div class="filter">\r\n\t\t<input type="text" v-model="filter" :placeholder="placeholder"/>\r\n\t</div>\r\n\t<div class="selection">\r\n\t\t<div class="panel-container" v-for="record in corpus" v-if="!filtertext || (record._search && record._search.indexOf(filtertext) !== -1)" :class="panelstyle(record)">\r\n\t\t\t<div class="panel-image" v-if="!state.no_image && images[record.id]">\r\n\t\t\t\t<rs-render-image :image="images[record.id]"></rs-render-image>\r\n\t\t\t</div>\r\n\t\t\t<div class="panel-description" :class="!state.no_image && images[record.id]?\'imaged\':\'no-image\'">\r\n\t\t\t\t<div class="panel-title">\r\n\t\t\t\t\t<span class="panel-icon" :class="record.icon"></span>\r\n\t\t\t\t\t<span class="title-text">{{record.name}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="panel-info">\r\n\t\t\t\t\t<div class="panel-stats" v-if="fields">\r\n\t\t\t\t\t\t<div class="panel-stat" v-for="stat in fields">\r\n\t\t\t\t\t\t\t<span class="stat-label">{{getStatLabel(record, stat)}}</span>\r\n\t\t\t\t\t\t\t<span>:</span>\r\n\t\t\t\t\t\t\t<span class="stat-value">{{getStatValue(record, stat)}}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="panel-text" v-if="paneltext" v-html="getPanelText(record)"></div>\r\n\t\t\t\t\t<div class="panel-text" v-if="record.description && state.panel_descriptions" v-html="rsshowdown(record.description, record)"></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<slot name="controls" :record="record"></slot>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="panel-container" v-for="record in fill">\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/career/display.html":return'<div class="rs-component rssw component-career-display">\r\n\r\n</div>\r\n';case"components/rssw/character/abilities.html":return'<div class="rs-component rssw component-character-ability">\n\n</div>\n';case"components/rssw/character/abilities/improve.html":return'<div class="rs-component rssw component-character-improve-ability flex v">\r\n\t<div class="archetypes flex h">\r\n\t\t<div class="select-container grow-10 flex h">\r\n\t\t\t<button class="archetype select" v-on:click="selectArchetype(preview.id)" :class="state.selected_archetype === preview.id?\'selected\':\'\'" v-if="preview">\r\n\t\t\t\t<span :class="preview.icon"></span>\r\n\t\t\t\t<span>Preview: {{preview.name}}</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="archetype select" v-for="archetype in archetypes" v-on:click="selectArchetype(archetype.id)" :class="state.selected_archetype === archetype.id?\'selected\':\'\'">\r\n\t\t\t\t<span :class="archetype.icon"></span>\r\n\t\t\t\t<span>{{archetype.name}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<button class="close select" v-on:click="closeDisplay()">\r\n\t\t\t<span class="fas fa-times rs-light-red"></span>\r\n\t\t\t<span>Close</span>\r\n\t\t</button>\r\n\t</div>\r\n\t<rs-graph :id="character.id" :nodes="abilities" :edges="dependencies" :filters="filters" v-on:node="showInfo($event, character)"></rs-graph>\r\n</div>\r\n';case"components/rssw/character/board.html":return'<div class="rs-component rssw component-character-board">\r\n\t<div class="container flex h wrap justified">\r\n\t\t<div class="stat soak flow-v inline">\r\n\t\t\t<div class="label" v-on:click="infoStat(\'injury\')">\r\n\t\t\t\t<span class="ra ra-bleeding-hearts"></span>\r\n\t\t\t\t<span>Injury</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="bubble solo flow-h center">\r\n\t\t\t\t<div class="value">\r\n\t\t\t\t\t<div class="display">\r\n\t\t\t\t\t\t<select v-model.number="injury">\r\n\t\t\t\t\t\t\t<option :value="0">None</option>\r\n\t\t\t\t\t\t\t<option v-for="value in injuryValues" :value="value">{{value}}</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="stat wounds flow-v inline">\r\n\t\t\t<div class="label" v-if="character.classification == \'base\'" v-on:click="infoStat(\'wounds:building\')">\r\n\t\t\t\t<span class="ra ra-cracked-shield"></span>\r\n\t\t\t\t<span>Damage</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="label" v-else v-on:click="infoStat(\'wounds:character\')">\r\n\t\t\t\t<span class="fas fa-heartbeat"></span>\r\n\t\t\t\t<span>Wounds</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="bubble pair flow-h inline">\r\n\t\t\t\t<div class="value flow-v">\r\n\t\t\t\t\t<div class="display">\r\n\t\t\t\t\t\t<select v-model.number="wounds">\r\n\t\t\t\t\t\t\t<option v-for="value in highValues" v-if="value <= wounds_max" :value="value">{{value}}</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="value paired flow-v inline">\r\n\t\t\t\t\t<div class="display">\r\n\t\t\t\t\t\t{{wounds_max}}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="stat wounds flow-v inline">\r\n\t\t\t<div class="label" v-if="character.classification == \'base\'" v-on:click="infoStat(\'strain:building\')">\r\n\t\t\t\t<span class="ra ra-reactor"></span>\r\n\t\t\t\t<span>Strain</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="label" v-else v-on:click="infoStat(\'strain:character\')">\r\n\t\t\t\t<span class="fas fa-brain"></span>\r\n\t\t\t\t<span>Strain</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="bubble pair flow-h inline">\r\n\t\t\t\t<div class="value flow-v">\r\n\t\t\t\t\t<div class="display">\r\n\t\t\t\t\t\t<select v-model.number="strain">\r\n\t\t\t\t\t\t\t<option v-for="value in highValues" v-if="value <= strain_max" :value="value">{{value}}</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="value paired flow-v inline">\r\n\t\t\t\t\t<div class="display">\r\n\t\t\t\t\t\t{{strain_max}}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="stat soak flow-v inline">\r\n\t\t\t<div class="label" v-on:click="infoStat(\'soak\')">\r\n\t\t\t\t<span class="fas fa-shield"></span>\r\n\t\t\t\t<span>Soak</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="bubble solo flow-h center">\r\n\t\t\t\t<div class="value">\r\n\t\t\t\t\t<div class="display">\r\n\t\t\t\t\t\t{{soak}}\r\n\t\t\t\t\t\t\x3c!--\r\n\t\t\t\t\t\t<select v-model="soak">\r\n\t\t\t\t\t\t\t<option v-for="value in lowValues" :value="value">{{value}}</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t--\x3e\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="stat soak flow-v inline">\r\n\t\t\t<div class="label" v-on:click="infoStat(\'defense:ranged\')">\r\n\t\t\t\t<span class="fas fa-user-shield"></span>\r\n\t\t\t\t<span>Ranged</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="bubble solo flow-h center">\r\n\t\t\t\t<div class="value">\r\n\t\t\t\t\t<div class="display">\r\n\t\t\t\t\t\t{{defense_range}}\r\n\t\t\t\t\t\t\x3c!--\r\n\t\t\t\t\t\t<select v-model="defense_range">\r\n\t\t\t\t\t\t\t<option v-for="value in lowValues" :value="value">{{value}}</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t--\x3e\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="stat soak flow-v inline">\r\n\t\t\t<div class="label" v-on:click="infoStat(\'defense:melee\')">\r\n\t\t\t\t<span class="fas fa-user-shield"></span>\r\n\t\t\t\t<span>Melee</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="bubble solo flow-h center">\r\n\t\t\t\t<div class="value">\r\n\t\t\t\t\t<div class="display">\r\n\t\t\t\t\t\t{{defense_melee}}\r\n\t\t\t\t\t\t\x3c!--\r\n\t\t\t\t\t\t<select v-model="defense_melee">\r\n\t\t\t\t\t\t\t<option v-for="value in lowValues" :value="value">{{value}}</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t--\x3e\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/character/description.html":return'<div class="rs-component rssw component-entity-description">\n\t<div class="property description">\n\t\t<span class="icon fas fa-info-square"></span>\n\t\t<span class="label">\n\t\t\t<span>Description:</span>\n\t\t\t<button class="action" v-on:click="toggleDescription()">\n\t\t\t\t<span v-if="!state.viewing" class="fas fa-file-alt"></span>\n\t\t\t\t<span v-if="state.viewing" class="fas fa-edit"></span>\n\t\t\t</button>\n\t\t</span>\n\t\t<div class="text-container">\n\t\t\t<textarea class="description" v-if="!state.viewing" v-model="description" v-on:change="changed(\'description\', description)"></textarea>\n\t\t\t<div class="description rs-white object-info" v-if="state.viewing" v-html="mdDescription"></div>\n\t\t\t\x3c!--\n\t\t\t<rs-rendered-text :text="description" :universe="universe" :entity="character"></rs-rendered-text>\n\t\t\t--\x3e\n\t\t</div>\n\t</div>\n</div>';case"components/rssw/character/display.html":return'<div class="rs-component rssw component-character-display">\r\n\r\n</div>\r\n';case"components/rssw/character/history.html":return'<div class="rs-component rssw component-entity-history">\r\n\t<div class="history">\r\n\t\t<div class="flow flow-v">\r\n\t\t\t<div class="entry" v-for="entry in history">\r\n\t\t\t\t<div v-if="entry.type === \'record_keeping\' && (universe.indexes[entry.modified] || entry.modified === \'inside\')" class="message">\r\n\t\t\t\t\t<span>{{(named[entry.modified] || entry.modified).capitalize()}} from</span>\r\n\t\t\t\t\t<a v-on:click="showInfo(getPrevious(entry))" v-if="entry.modified !== \'inside\'">{{universe.indexes[entry.modified].index[entry.previous]?universe.indexes[entry.modified].index[entry.previous].name:"Unknown"}}</a>\r\n\t\t\t\t\t<a v-on:click="showInfo(getPrevious(entry))" v-if="entry.modified === \'inside\'">{{universe.indexes.entity.index[entry.previous]?universe.indexes.entity.index[entry.previous].name:"Unknown"}}</a>\r\n\t\t\t\t\t<span>to</span>\r\n\t\t\t\t\t<a v-on:click="showInfo(getCurrent(entry))" v-if="entry.modified !== \'inside\'">{{universe.indexes[entry.modified].index[entry.current]?universe.indexes[entry.modified].index[entry.current].name:"Unknown"}}</a>\r\n\t\t\t\t\t<a v-on:click="showInfo(getCurrent(entry))" v-if="entry.modified === \'inside\'">{{universe.indexes.entity.index[entry.current]?universe.indexes.entity.index[entry.current].name:"Unknown"}}</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-if="entry.type === \'record_keeping\' && !universe.indexes[entry.modified] && entry.modified !== \'inside\'" class="message">\r\n\t\t\t\t\t<span></span>{{(named[entry.modified] || entry.modified).capitalize()}} from {{entry.previous}} to {{entry.current}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-if="entry.type === \'item_gain\'" class="message">\r\n\t\t\t\t\t<span>Gained Item</span>\r\n\t\t\t\t\t<a v-on:click="showInfo(entry.item)">{{universe.indexes.item.index[entry.item]?universe.indexes.item.index[entry.item].name:"Unknown Item"}}</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-if="entry.type === \'item_loss\'" class="message">\r\n\t\t\t\t\t<span>Lost Item</span>\r\n\t\t\t\t\t<a v-on:click="showInfo(entry.item)">{{universe.indexes.item.index[entry.item]?universe.indexes.item.index[entry.item].name:"Unknown Item"}}</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-if="entry.type === \'record_acquired_or_loss\'" class="message">\r\n\t\t\t\t\t<div>{{entry.modified.capitalize()}} Changed.</div>\r\n\t\t\t\t\t<div class="gained" v-if="entry.report.gained.length">\r\n\t\t\t\t\t\t<span>Gained:</span> \r\n\t\t\t\t\t\t<a v-for="(related, $index) in entry.report.gained" v-if="related" v-on:click="showInfo(related)">\r\n\t\t\t\t\t\t\t<span v-if="$index !== 0">, </span><span>{{related.name}}</span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="loss" v-if="entry.report.loss.length">\r\n\t\t\t\t\t\t<span>Loss:</span> \r\n\t\t\t\t\t\t<a v-for="(related, $index) in entry.report.loss" v-if="related" v-on:click="showInfo(related)">\r\n\t\t\t\t\t\t\t<span v-if="$index !== 0">, </span><span>{{related.name}}</span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div class="time" :title="entry._timeString">{{entry._dateString}}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/character/info.html":return'<div class="rs-component rssw component-character-info" :class="displayAbilityTrees || displaySpecializations?\'abilities\':\'\'">\r\n\t<div class="ability-display" :class="displayAbilityTrees || displaySpecializations?\'display-open\':\'display-close\'">\r\n\t\t<rssw-character-improve-ability class="fill" v-on:close="closeAbilities()" v-if="displayAbilityTrees" :id="\'abilities_\' + character.id" :user="user" :state="state" :universe="universe" :character="character"></rssw-character-improve-ability>\r\n\t\t\x3c!-- <rs-panel-select v-on:selected="selected($event)" :corpus="availableSpecializations()" :summary="summary.species" :state="state.species" :universe="universe" :user="user" :fields="fields.species"> --\x3e\r\n\t\t<rs-panel-select class="fill" v-on:selected="learnCareer($event)" v-on:close="closeSpecializations()" v-if="displaySpecializations" :corpus="availableSpecializations" :panelstyle="styleSpecializationPanel" :paneltext="getSpecializationPanelText" :user="user" :state="state" :universe="universe">\r\n\t\t\t<div class="righted flex h" slot="controls" slot-scope="{record}">\r\n\t\t\t\t<button class="simple flat action" v-on:click="closeSpecializations()">\r\n\t\t\t\t\t<span class="fas fa-times rs-red"></span>\r\n\t\t\t\t\t<span>Close</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="simple flat action" v-on:click="showInfo(record)">\r\n\t\t\t\t\t<span class="fas fa-info-circle"></span>\r\n\t\t\t\t\t<span>Info</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="simple flat action" v-on:click="previewSpecializationAbilities(record)">\r\n\t\t\t\t\t<span class="fal fa-chart-network"></span>\r\n\t\t\t\t\t<span>Abilities</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="simple flat action" v-on:click="learnSpecialization(record)" :class="getXPCostClassing(archetypeStats[record.id].cost)">\r\n\t\t\t\t\t<span class="fas fa-check-square"></span>\r\n\t\t\t\t\t<span>Learn ({{archetypeStats[record.id].cost}})</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</rs-panel-select>\r\n\t</div>\r\n\t\x3c!--\r\n\t<div class="property name">\r\n\t\t<span class="icon fad fa-user"></span>\r\n\t\t<span class="name">{{character.name}}</span>\r\n\t\t<button class="recalculate" v-on:click="updateCharacter()">\r\n\t\t\t<span class="far fa-sync" :class="calculating?\'fa-spin\':\'\'"></span>\r\n\t\t</button>\r\n\t</div>\r\n\t--\x3e\r\n\t<div class="property species" v-if="character.classification != \'base\'">\r\n\t\t<span class="icon fab fa-reddit-alien"></span>\r\n\t\t<span class="label">Species:</span>\r\n\t\t<button class="value" v-on:click="showInfo(race)">\r\n\t\t\t{{race?race.name:"No Species"}}\r\n\t\t</button>\r\n\t</div>\r\n\t<div class="property career">\r\n\t\t<span class="icon fad fa-user-hard-hat"></span>\r\n\t\t<span class="label">Careers:</span>\r\n\t\t<button v-for="(archetype, $index) in careers" class="value archetype" v-on:click="showInfo(archetype)">\r\n\t\t\t<span class="divide" v-if="$index !== 0">, </span>\r\n\t\t\t<span class="value">{{archetype.name}}</span>\r\n\t\t</button>\r\n\t</div>\r\n\t<div class="property speciailization">\r\n\t\t<span class="icon fad fa-gavel"></span>\r\n\t\t<span class="label" v-on:click="openSpecializations()">\r\n\t\t\t<button class="flat">\r\n\t\t\t\t<span class="fas fa-window-maximize rs-light-blue"></span>\r\n\t\t\t</button>\r\n\t\t\t<span>Specializations:</span>\r\n\t\t</span>\r\n\t\t<button v-for="(archetype, $index) in specializations" class="value archetype" v-on:click="showInfo(archetype)">\r\n\t\t\t<span class="divide" v-if="$index !== 0">, </span>\r\n\t\t\t<span class="value">{{archetype.name}}</span>\r\n\t\t</button>\r\n\t</div>\r\n\t<div class="property ability">\r\n\t\t<span class="icon fad fa-jedi"></span>\r\n\t\t<span class="label" v-on:click="openAbilities()">\r\n\t\t\t<button class="flat">\r\n\t\t\t\t<span class="fas fa-window-maximize rs-light-blue"></span>\r\n\t\t\t</button>\r\n\t\t\t<span>Abilities:</span>\r\n\t\t</span>\r\n\t\t<button v-for="(ability, $index) in abilities" class="value ability" v-on:click="showInfo(ability)">\r\n\t\t\t<span class="divide" v-if="$index !== 0">,</span>\r\n\t\t\t<span class="value">{{ability.name}}</span>\r\n\t\t</button>\r\n\t</div>\r\n\t<div class="property encumberance" v-if="character.classification != \'base\'">\r\n\t\t<span class="icon" :class="getEncumberanceIcon()"></span>\r\n\t\t<span class="label">Encumberance:</span>\r\n\t\t<span class="value">{{encumberance}}</span>\r\n\t\t<span class="divide">/</span>\r\n\t\t<span class="value">{{encumberance_max}}</span>\r\n\t</div>\r\n\t<div class="property items">\r\n\t\t<span class="icon fad fa-backpack"></span>\r\n\t\t<span class="label">Items:</span>\r\n\t\t<button v-for="(item, $index) in items" class="value item" v-on:click="showInfo(item)">\r\n\t\t\t<span class="divide" v-if="$index !== 0">, </span>\r\n\t\t\t<span class="value">{{item.name}}</span>\r\n\t\t</button>\r\n\t</div>\r\n\t<div class="property effets" v-if="effects.length">\r\n\t\t<span class="icon ra ra-aura"></span>\r\n\t\t<span class="label">Effects:</span>\r\n\t\t<button v-for="(effect, $index) in effects" class="value effect" v-on:click="showInfo(effect)">\r\n\t\t\t<span class="divide" v-if="$index !== 0">, </span>\r\n\t\t\t<span :class="effect.icon"></span>\r\n\t\t\t<span class="value">{{effect.name}}</span>\r\n\t\t</button>\r\n\t</div>\r\n\t<div class="property location" v-if="location">\r\n\t\t<span class="icon fad fa-globe-africa"></span>\r\n\t\t<span class="label">Location:</span>\r\n\t\t<button class="value location" v-on:click="showInfo(location)">\r\n\t\t\t<span class="value">{{location.name}}</span>\r\n\t\t</button>\r\n\t</div>\r\n\t<div class="property inside" v-if="inside">\r\n\t\t<span class="icon" :class="inside.icon"></span>\r\n\t\t<span class="label">Inside:</span>\r\n\t\t<button class="value inside" v-on:click="showInfo(inside)">\r\n\t\t\t<span class="value">{{inside.name}}</span>\r\n\t\t</button>\r\n\t\t<button class="property-action" v-on:click="exitEntity(inside)">\r\n\t\t\t<span class="fas fa-sign-out-alt"></span>\r\n\t\t\t<span class="">Exit</span>\r\n\t\t</button>\r\n\t</div>\r\n\t<div class="property inside" v-if="piloting">\r\n\t\t<span class="icon" :class="piloting.icon"></span>\r\n\t\t<span class="label">Piloting:</span>\r\n\t\t<button class="value inside" v-on:click="showInfo(piloting)">\r\n\t\t\t<span class="value">{{piloting.name}}</span>\r\n\t\t</button>\r\n\t\t<button class="property-action" v-on:click="stopPiloting(piloting)">\r\n\t\t\t<span class="fas fa-sign-out-alt"></span>\r\n\t\t\t<span class="">Exit</span>\r\n\t\t</button>\r\n\t</div>\r\n\t<div class="property rooms" v-if="character.classification == \'base\'">\r\n\t\t<span class="icon fad fa-kaaba"></span>\r\n\t\t<span class="label">Rooms:</span>\r\n\t\t<button v-for="(room, $index) in rooms" class="value room" v-on:click="showInfo(room)">\r\n\t\t\t<span class="divide" v-if="$index !== 0">, </span>\r\n\t\t\t<span class="value">{{room.name}}</span>\r\n\t\t</button>\r\n\t</div>\r\n\t<div class="property energy" v-if="character.classification == \'base\'">\r\n\t\t<span class="icon" :class="getEnergyIcon()"></span>\r\n\t\t<span class="label">Energy:</span>\r\n\t\t<span class="value">{{energy_consumption}}</span>\r\n\t\t<span class="divide">/</span>\r\n\t\t<span class="value">{{energy_output}}</span>\r\n\t</div>\r\n\t\x3c!--\r\n\t<div class="property credits">\r\n\t\t<span class="icon fad fa-coins"></span>\r\n\t\t<span class="label">Credits:</span>\r\n\t\t<input class="experience" type="number" v-model.number="credits" v-on:change="changed(\'credits\', credits)"/>\r\n\t</div>\r\n\t<div class="property level" v-if="character.classification != \'base\'">\r\n\t\t<span class="icon fad fa-user-plus"></span>\r\n\t\t<span class="label">Experience:</span>\r\n\t\t<input class="experience" type="number" v-model.number="experience" v-on:change="changed(\'xp\', experience)"/>\r\n\t</div>\r\n\t--\x3e\r\n\t<div class="property destiny">\r\n\t\t<span class="icon swg swg-phoenix"></span>\r\n\t\t<span class="label">Destiny:</span>\r\n\t\t<button v-for="token in destinyTokens" class="token-container" v-on:click="showTokenInfo()">\r\n\t\t\t<span class="backdrop fas fa-hexagon rs-white"></span>\r\n\t\t\t<span class="foreground fas fa-jedi rs-dark-blue"></span>\r\n\t\t</button>\r\n\t\t<button v-for="token in sithTokens" class="token-container" v-on:click="showTokenInfo()">\r\n\t\t\t<span class="backdrop fas fa-hexagon rs-black"></span>\r\n\t\t\t<span class="foreground fab fa-sith rs-red"></span>\r\n\t\t</button>\r\n\t</div>\r\n\t<div class="property credits">\r\n\t\t<span class="icon fad fa-coins"></span>\r\n\t\t<span class="label">Credits:</span>\r\n\t\t<rs-count class="experience" :entity="character" v-model="credits" v-on:change="changeEvent(\'credits\', $event)"></rs-count>\r\n\t</div>\r\n\t<div class="property level" v-if="character.classification != \'base\'">\r\n\t\t<span class="icon fad fa-user-plus"></span>\r\n\t\t<span class="label">Experience:</span>\r\n\t\t<rs-count class="experience" :entity="character" v-model="experience" v-on:change="changeEvent(\'xp\', $event)"></rs-count>\r\n\t</div>\r\n\t\x3c!--\r\n\t<div class="property description">\r\n\t\t<span class="icon fas fa-info-square"></span>\r\n\t\t<span class="label">\r\n\t\t\t<span>Description:</span>\r\n\t\t\t<button class="action" v-on:click="toggleDescription()">\r\n\t\t\t\t<span v-if="!state.viewing" class="fas fa-file-alt"></span>\r\n\t\t\t\t<span v-if="state.viewing" class="fas fa-edit"></span>\r\n\t\t\t</button>\r\n\t\t</span>\r\n\t\t<div class="text-container">\r\n\t\t\t<textarea class="description" v-if="!state.viewing" v-model="description" v-on:change="changed(\'description\', description)"></textarea>\r\n\t\t\t<div class="description rs-white object-info" v-if="state.viewing" v-html="mdDescription"></div>\r\n\t\t</div>\r\n\t</div>\r\n\t--\x3e\r\n</div>\r\n';case"components/rssw/character/journal.html":return'<div class="rs-component rssw component-entity-journal">\r\n\t<div class="editor" :class="editorClass()">\r\n\t\t<rs-field :root="state.entry" :field="titleField" v-on:changed="sync($event)">\r\n\t\t</rs-field>\r\n\t\t<rs-field :root="state.entry" :field="sessionField" v-on:changed="sync($event)">\r\n\t\t</rs-field>\r\n\t\t<rs-field :root="state.entry" :field="entryField" v-on:changed="sync($event)" v-on:changing="syncWait()" class="entry">\r\n\t\t</rs-field>\r\n\t</div>\r\n\t\r\n\t<div class="blocks flex h">\r\n\t\t<div class="block large" :class="blockClass(\'render\')">\r\n\t\t\t<button class="block-toggle" v-on:click="toggleBlock(\'render\')">\r\n\t\t\t\t<span class="toggle-label rot270">Rendering</span>\r\n\t\t\t</button>\r\n\t\t\t<rs-object-info class="rendering" v-on:click="processRequest($event)" :record="state.entry" :universe="universe" :player="player"></rs-object-info>\r\n\t\t\t\x3c!-- div class="block-content rendering rs-white object-info" v-html="rendering"></div --\x3e\r\n\t\t</div>\t\t\r\n\t\t<div class="block small" :class="blockClass(\'entries\')">\r\n\t\t\t<button class="block-toggle" v-on:click="toggleBlock(\'entries\')">\r\n\t\t\t\t<span class="toggle-label rot270">Entries</span>\r\n\t\t\t</button>\r\n\t\t\t<div class="block-content listing entries">\r\n\t\t\t\t<button :title="entry.name" class="listed entry" v-on:click="newEntry()" :class="getEntryClass()">\r\n\t\t\t\t\t<span class="fas fa-spinner fa-pulse" v-if="syncLock && !universe.indexes.journal.index[state.entry.id]"></span>\r\n\t\t\t\t\t<span class="entry-name">New Entry</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button v-for="entry in entries" :title="entry.name" class="listed entry" v-on:click="editEntry(entry)" :class="getEntryClass(entry)">\r\n\t\t\t\t\t<span class="fas fa-spinner fa-pulse" v-if="syncLock && state.entry.id === entry.id"></span>\r\n\t\t\t\t\t<span class="entry-name">{{entry.name}}</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="block small" :class="blockClass(\'knowns\')">\r\n\t\t\t<button class="block-toggle" v-on:click="toggleBlock(\'knowns\')">\r\n\t\t\t\t<span class="toggle-label rot270">Knowns</span>\r\n\t\t\t</button>\r\n\t\t\t<div class="block-content listing knowns">\r\n\t\t\t\t<select v-model="addKnown" class="listed known" v-on:change="addKnownEntry(addKnown)">\r\n\t\t\t\t\t<option value="">[ Choose to Add ]</option>\r\n\t\t\t\t\t<option v-for="known in knowns" :value="known.id" v-if="state.entry.related.indexOf(known.id) === -1">{{known.name}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t\t\x3c!-- button v-for="entry in state.entry.related" :title="getRecordName(entry)" class="listed known" v-on:click="toggleRelated(entry)" :class="getKnownClass(entry)" --\x3e\r\n\t\t\t\t<button v-for="entry in state.entry.related" :title="getRecordName(entry)" class="listed known" v-on:click="toggleRelated(entry)">\r\n\t\t\t\t\t<span class="entry-name">{{getRecordName(entry)}}</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>';case"components/rssw/character/skills/improve.html":return'<div class="rs-component rssw component-character-improve-skills">\n\n\n\n</div>\n';case"components/rssw/character/skills/section.html":return'\r\n<table>\r\n\t<tr class="skill" v-for="skill in skills" v-if="isVisible(skill)">\r\n\t\t<td class="name aligned-right" v-on:click="skillNameTouched(skill)">\r\n\t\t\t<div class="skill-name flex v">\r\n\t\t\t\t<span class="naming">\r\n\t\t\t\t\t<span v-if="enhancedSkill(skill)" class="rs-green fas fa-check"></span>\r\n\t\t\t\t\t{{skill.name}}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class="naming base">\r\n\t\t\t\t\t{{(skill.base?skill.base:"").capitalize()}}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</td>\r\n\t\t<td class="icon">\r\n\t\t\t<span :class="skill.icon"></span>\r\n\t\t</td>\r\n\t\t<td class="stats" v-on:click="skillRollTouched(skill)">\r\n\t\t\t<button class="roll-result flex h centered" :class="state && state.rolls && state.rolls[skill.id]?\'show\':\'\'" v-on:click.stop="clearRoll(skill.id)">\r\n\t\t\t\t<span class="result-property flex h center" v-for="result in rollProperties" v-if="state && state.rolls && state.rolls[skill.id] && state.rolls[skill.id][result.property] !== undefined">\r\n\t\t\t\t\t<span>{{state.rolls[skill.id][result.property]}}</span>\r\n\t\t\t\t\t<span class="result-icon" :class="result.icon"></span>\r\n\t\t\t\t</span>\r\n\t\t\t</button>\r\n\t\t\t<div class="level">\r\n\t\t\t\t<div class="level-block" v-for="level in levelBars" :class="{\'acquired\':level < character[skill.propertyKey], \'first\':level === 0}"></div>\r\n\t\t\t</div>\r\n\t\t\t\x3c!-- div class="roll" :style="styleDiceDisplay(rolls[skill.id])">\r\n\t\t\t\t<span class="dice" v-for="die in rolls[skill.id]" :class="die"></span>\r\n\t\t\t</div--\x3e\r\n\t\t\t<rssw-dice-view class="roll" v-if="skill.base && !skill.no_roll" :style="styleDiceDisplay(rolls[skill.id])" :roll="formulas[skill.id]" :universe="universe" :entity="character" :emit="true" />\r\n\t\t</td>\r\n\t</tr>\r\n</table>\r\n';case"components/rssw/character/skills.html":return'<div class="rs-component rssw component-character-skills flow-v" :class="{\'no-names\':state && state.hideNames}">\r\n\t<div class="filter flow-v inline">\r\n\t\t<label v-if="state && !state.hideFilter">\r\n\t\t\t<span>Filter Skills</span>\r\n\t\t\t<input type="text" v-model="state.search" />\r\n\t\t</label>\r\n\t\t<div class="leveling skill" v-if="!state || !state.hideLeveling">\r\n\t\t\t<label>\r\n\t\t\t\t<span>Level Skill</span>\r\n\t\t\t\t<select v-model="leveling">\r\n\t\t\t\t\t<option value="">{{leveling === ""?"[ Select a Skill ]":"Clear"}}</option>\r\n\t\t\t\t\t<option value="_" disabled>----------</option>\r\n\t\t\t\t\t<option v-for="skill in levelSkills" :value="skill.id">{{skill.name}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t</label>\r\n\t\t\t<button v-if="leveling" v-on:click="viewSkill(leveling)">\r\n\t\t\t\t<span class="fas fa-info-circle rs-light-blue"></span>\r\n\t\t\t</button>\r\n\t\t\t<button v-if="leveling" v-on:click="leveling = \'\'">\r\n\t\t\t\t<span class="fas fa-ban rs-light-red"></span>\r\n\t\t\t</button>\r\n\t\t\t<button class="level up" v-on:click="levelSkill(leveling, 1)" v-if="leveling" :disabled="getXPCost(leveling, 1) > character.xp">\r\n\t\t\t\t<span class="fas fa-plus-square"></span>\r\n\t\t\t\t<span>XP: {{getXPCost(leveling, 1)}}</span>\r\n\t\t\t</button>\r\n\t\t\t<button class="level down" v-on:click="levelSkill(leveling, -1)" v-if="leveling">\r\n\t\t\t\t<span class="fas fa-minus-square"></span>\r\n\t\t\t\t<span>XP: {{getXPCost(leveling, -1)}}</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class="skill-container flex h wrap">\r\n\t\t<div class="skill-container">\r\n\t\t\t<div class="skill-list general flow-v">\r\n\t\t\t\t<h3 class="titling">\r\n\t\t\t\t\t<span class="fas fa-tools"></span>\r\n\t\t\t\t\t<span>General Skills</span>\r\n\t\t\t\t</h3>\r\n\t\t\t\t<rssw-skill-section :universe="universe" :character="character" named="general" :state="state" :user="user" v-on:touched="skillTouched($event)" v-on:rolltouched="skillRollTouched($event)" v-on:nametouched="skillNameTouched($event)"></rssw-skill-section>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="skill-container">\r\n\t\t\t<div class="skill-list combat flow-v">\r\n\t\t\t\t<h3 class="titling">\r\n\t\t\t\t\t<span class="fas fa-swords"></span>\r\n\t\t\t\t\t<span>Combat Skills</span>\r\n\t\t\t\t</h3>\r\n\t\t\t\t<rssw-skill-section :universe="universe" :character="character" named="combat" :state="state" :user="user" v-on:touched="skillTouched($event)" v-on:rolltouched="skillRollTouched($event)" v-on:nametouched="skillNameTouched($event)"></rssw-skill-section>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="skill-list ship flow-v">\r\n\t\t\t\t<h3 class="titling">\r\n\t\t\t\t\t<span class="fad fa-location-arrow"></span>\r\n\t\t\t\t\t<span>Piloting Skills</span>\r\n\t\t\t\t</h3>\r\n\t\t\t\t<rssw-skill-section :universe="universe" :character="character" named="piloting" :state="state" :user="user" v-on:touched="skillTouched($event)" v-on:rolltouched="skillRollTouched($event)" v-on:nametouched="skillNameTouched($event)"></rssw-skill-section>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="skill-list knowledge flow-v">\r\n\t\t\t\t<h3 class="titling">\r\n\t\t\t\t\t<span class="fas fa-brain"></span>\r\n\t\t\t\t\t<span>Knowledge Skills</span>\r\n\t\t\t\t</h3>\r\n\t\t\t\t<rssw-skill-section :universe="universe" :character="character" named="knowledge" :state="state" :user="user" v-on:touched="skillTouched($event)" v-on:rolltouched="skillRollTouched($event)" v-on:nametouched="skillNameTouched($event)"></rssw-skill-section>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="skill-list custom flow-v">\r\n\t\t\t\t<h3 class="titling">\r\n\t\t\t\t\t<span class="fas fa-cogs"></span>\r\n\t\t\t\t\t<span>Custom Skills</span>\r\n\t\t\t\t</h3>\r\n\t\t\t\t<rssw-skill-section :universe="universe" :character="character" named="custom" :existing="customSkills" :state="state" :user="user" v-on:touched="skillTouched($event)" v-on:rolltouched="skillRollTouched($event)" v-on:nametouched="skillNameTouched($event)"></rssw-skill-section>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class="skill-list custom flow-v">\r\n\t\t\t\t<h3 class="titling">\r\n\t\t\t\t\t<span class="fas fa-drafting-compass"></span>\r\n\t\t\t\t\t<span>Subskills</span>\r\n\t\t\t\t</h3>\r\n\t\t\t\t<rssw-skill-section :universe="universe" :character="character" named="subskill" :existing="subSkills" :state="state" :user="user" v-on:touched="skillTouched($event)" v-on:rolltouched="skillRollTouched($event)" v-on:nametouched="skillNameTouched($event)"></rssw-skill-section>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/character/stats.html":return'<div class="rs-component rssw component-character-stats">\r\n\t<div class="stats">\r\n\t\t<div class="stat" v-for="stat in characterStats" :key="stat" v-on:click="skillTouched(stat)">\r\n\t\t\t<div class="bubble">\r\n\t\t\t\t<div class="value">\r\n\t\t\t\t\t{{character[stat]}}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="label">\r\n\t\t\t\t{{entityStats[stat].name}}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="leveling stat">\r\n\t\t<label>\r\n\t\t\t<span>Level Stat</span>\r\n\t\t\t<select v-model="leveling">\r\n\t\t\t\t\t<option value="">{{leveling === ""?"[ Select a Stat ]":"Clear"}}</option>\r\n\t\t\t\t\t<option value="_" disabled>----------</option>\r\n\t\t\t\t<option v-for="stat in characterStats" :value="stat">{{entityStats[stat].name}}</option>\r\n\t\t\t</select>\r\n\t\t</label>\r\n\t\t<button v-if="leveling" v-on:click="viewSkill(leveling)">\r\n\t\t\t<span class="fas fa-info-circle rs-light-blue"></span>\r\n\t\t</button>\r\n\t\t<button v-if="leveling" v-on:click="leveling = \'\'">\r\n\t\t\t<span class="fas fa-ban rs-light-red"></span>\r\n\t\t</button>\r\n\t\t<button class="level up" v-on:click="levelStat(leveling, 1)" v-if="leveling" :disabled="noIncrease(leveling)">\r\n\t\t\t<span class="fas fa-plus-square"></span>\r\n\t\t\t<span>XP: {{getXPCost(leveling, 1)}}</span>\r\n\t\t</button>\r\n\t\t<button class="level down" v-on:click="levelStat(leveling, -1)" v-if="leveling" :disabled="canDecrease(leveling)">\r\n\t\t\t<span class="fas fa-minus-square"></span>\r\n\t\t\t<span>XP: {{getXPCost(leveling, -1)}}</span>\r\n\t\t</button>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/character/weapons.html":return'<div class="rs-component rssw component-entity-weapons">\r\n\r\n\t<div class="titling" v-if="compact">Equipped</div>\r\n\t<div class="report" v-if="equipped.length && limited !== \'unequipped\'" :class="compact?\'compacted\':\'expanded\'">\r\n\t\t<h3 class="titling" v-if="!compact">Equipped Weapons</h3>\r\n\t\t<div class="weapon-report flex wrap" v-for="item in equipped" :class="compact?\'v\':\'h\'">\r\n\t\t\t<div class="icon flex v element center centered middled" v-on:click="showInfo(item)">\r\n\t\t\t\t<span :class="getItemIcon(item)"></span>\r\n\t\t\t</div>\r\n\t\t\t<div class="pool band flex v element" v-on:click="rollDice(item)">\r\n\t\t\t\t<div class="name align-center">\r\n\t\t\t\t\t<span class="fas fa-dice"></span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<rssw-dice-view class="roll" :universe="universe" :entity="entity" :roll="rolls[item.id]" :roll-name="item.name"/>\r\n\t\t\t</div>\r\n\t\t\t<div class="damage band flex v element">\r\n\t\t\t\t<div class="name align-center">\r\n\t\t\t\t\t<span class="ra ra-explosion"></span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="roll align-center">\r\n\t\t\t\t\t{{getWeaponDamage(item)}}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="range band flex v element" v-for="(band, index) in rangeBands" v-if="(index === 0 || isRanged[item.id]) && index < item.range + rangeBonus" v-on:click="showInfo(\'knowledge:combat:rangebands:\' + band)">\r\n\t\t\t\t<div class="name">\r\n\t\t\t\t\t<span>{{band.substring(0,2).capitalize()}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<rssw-dice-view class="roll" :roll="getRangeBandDifficultyRoll(item, band)" :universe="universe" :entity="entity" :roll-name="item.name + \'@\' + band" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class="titling" v-if="compact">Unequipped</div>\r\n\t<div class="report" v-if="items.length && limited !== \'equipped\'" :class="compact?\'compacted\':\'expanded\'">\r\n\t\t<h3 class="titling" v-if="!compact">Unequipped Weapons</h3>\r\n\t\t<div class="weapon-report flex wrap" v-for="item in items" :class="compact?\'v\':\'h\'">\r\n\t\t\t<div class="icon flex v element center centered middled" v-on:click="showInfo(item)">\r\n\t\t\t\t<span :class="item.icon"></span>\r\n\t\t\t</div>\r\n\t\t\t<div class="pool band flex v element" v-on:click="showInfo(\'knowledge:skillchecks:dice\')">\r\n\t\t\t\t<div class="name align-center">\r\n\t\t\t\t\t<span class="fas fa-dice"></span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<rssw-dice-view class="roll" :universe="universe" :entity="entity" :skill="item.skill_check" />\r\n\t\t\t</div>\r\n\t\t\t<div class="damage band flex v element">\r\n\t\t\t\t<div class="name align-center">\r\n\t\t\t\t\t<span class="ra ra-explosion"></span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="roll align-center">\r\n\t\t\t\t\t{{getWeaponDamage(item)}}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="range band flex v element" v-for="(band, index) in rangeBands" v-if="(index === 0 || isRanged[item.id]) && index < item.range" v-on:click="showInfo(\'knowledge:combat:rangebands:\' + band)">\r\n\t\t\t\t<div class="name">\r\n\t\t\t\t\t<span>{{band.substring(0,2).capitalize()}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<rssw-dice-view class="roll" :roll="getRangeBandDifficultyRoll(item, band)" :universe="universe" :entity="entity" :roll-name="item.name + \'@\' + band" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/dice/bin.html":return'<div class="rs-component rssw dice-bin">\r\n\r\n\t<div class="expression">\r\n\t\t<span>Roll:</span>\r\n\t\t<input type="text" class="lined" v-model="state.expression" v-on:keyup.enter="roll(state.expression)" v-on:keyup.esc="clear()"/>\r\n\t\t<button class="lined roll" v-on:click="roll(state.expression)">\r\n\t\t\t<span class="fas fa-dice"></span>\r\n\t\t</button>\r\n\t\t<button class="lined info" v-if="!fullDisplay" v-on:click="info()">\r\n\t\t\t<span class="fas fa-info-circle"></span>\r\n\t\t</button>\r\n\t\t\x3c!--\r\n\t\t<button class="lined labels" v-on:click="toggleLabels()">\r\n\t\t\t<span class="far" :class="state.hideLabels?\'fa-align-slash\':\'fa-align-justify\'"></span>\r\n\t\t</button>\r\n\t\t<button class="lined labels" v-on:click="toggleExpressions()">\r\n\t\t\t<span class="far" :class="state.hideExpressions?\'fa-sigma\':\'fa-function\'"></span>\r\n\t\t</button>\r\n\t\t<button class="lined ending clear" v-on:click="clear()">\r\n\t\t\t<span class="fas fa-ban"></span>\r\n\t\t</button>\r\n\t\t--\x3e\r\n\t\t<button class="lined labels" v-on:click="addExpression(\'1a\')">\r\n\t\t\t<span class="rssw-dice fas fa-dice-d8 rs-green"></span>\r\n\t\t</button>\r\n\t\t<button class="lined labels" v-on:click="addExpression(\'1b\')">\r\n\t\t\t<span class="rssw-dice fas fa-dice-d6 rs-lightblue"></span>\r\n\t\t</button>\r\n\t\t<button class="lined labels" v-on:click="addExpression(\'1p\')">\r\n\t\t\t<span class="rssw-dice fas fa-dice-d12 rs-yellow"></span>\r\n\t\t</button>\r\n\t\t\r\n\t\t<button class="lined labels" v-if="fullDisplay" v-on:click="addExpression(\'1d\')">\r\n\t\t\t<span class="rssw-dice fas fa-dice-d8 rs-purple"></span>\r\n\t\t</button>\r\n\t\t<button class="lined labels" v-if="fullDisplay" v-on:click="addExpression(\'1s\')">\r\n\t\t\t<span class="rssw-dice fas fa-dice-d6 rs-black"></span>\r\n\t\t</button>\r\n\t\t<button class="lined labels" v-if="fullDisplay" v-on:click="addExpression(\'1c\')">\r\n\t\t\t<span class="rssw-dice fas fa-dice-d12 rs-light-red"></span>\r\n\t\t</button>\r\n\t\t\r\n\t\t<button class="lined labels" v-on:click="addExpression(\'1f\')">\r\n\t\t\t<span class="rssw-dice fas fa-dice-d12 rs-white"></span>\r\n\t\t</button>\r\n\t</div>\r\n\r\n\t<div class="history">\r\n\t\t<div class="rolled" :class="$index===0?\'rsbd-green\':\'\'" v-for="(roll,$index) in state.history" v-if="roll" v-on:click.stop="dismiss($index)">\r\n\t\t\t<div class="roll-property" v-if="roll.sum">\r\n\t\t\t\t<span class="value">{{roll.sum}}</span>\r\n\t\t\t\t<span class="info">=</span>\r\n\t\t\t\t<span class="label" v-if="!state.hideLabels">Rolled</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="roll-property" :class="rprop.property" v-for="rprop in rollProperties" v-if="roll[rprop.property] !== undefined">\r\n\t\t\t\t<span class="value">{{roll[rprop.property]}}</span>\r\n\t\t\t\t<span class="info" :class="rprop.icon"></span>\r\n\t\t\t\t<span class="label" v-if="!state.hideLabels">{{rprop.label}}</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="original" v-if="!state.hideExpressions">\r\n\t\t\t\t<span v-if="roll._label">\r\n\t\t\t\t\t{{roll._label}}\r\n\t\t\t\t\t<span v-if="roll._suffix">\r\n\t\t\t\t\t\t+ {{roll._suffix}}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span v-if="!roll._label">\r\n\t\t\t\t\t{{roll._expression}}\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/dice/result.html":return'<div class="rssw-dice-result" v-on:click.stop="dismiss()" v-on:contextmenu.stop.prevent="menu()">\r\n\t<div class="roll-property" v-if="roll.sum">\r\n\t\t<span class="value">{{roll.sum}}</span>\r\n\t\t<span class="info">=</span>\r\n\t\t<span class="label" v-if="!options.hide_names">Rolled</span>\r\n\t</div>\r\n\t<div class="roll-property" :class="rprop.property" v-for="rprop in rollProperties" v-if="roll[rprop.property] !== undefined">\r\n\t\t<span class="value">{{roll[rprop.property]}}</span>\r\n\t\t<span class="info" :class="rprop.icon"></span>\r\n\t\t<span class="label" v-if="!options.hide_names">{{rprop.name}}</span>\r\n\t</div>\r\n\t<div class="roll-details">\r\n\t\t<span class="roll-label" v-if="roll._label && !options.hide_label">\r\n\t\t\t<span>{{roll._label}}</span>\r\n\t\t\t<span v-if="roll._suffix">+ {{roll._suffix}}</span>\r\n\t\t</span>\r\n\t\t<span class="roll-expression" v-if="!options.hide_expression">{{roll._expression}}</span>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/dice/view.html":return'<div class="rssw-dice-view flex" :class="stacked?\'v\':\'h\'" v-on:click="sendToDiceBin()">\r\n\t<div class="view-label" v-if="labeling">{{labeling}}</div>\r\n\t<div class="flex h">\r\n\t\t<div class="rssw-dice" v-for="die in dice" :class="die"></div>\r\n\t</div>\r\n</div>';case"components/rssw/entity/brief.html":return'<div class="rs-component rs-entity-brief">\r\n\t<button class="flat close rsbg-dark-red" v-on:click="close(entity)">\r\n\t\t<span class="fas fa-times rs-gray"></span>\r\n\t</button>\r\n\t<div class="naming" v-on:click="showInfo(entity)">\r\n\t\t<span>{{entity.name}}</span>\r\n\t\t<button class="flat fas fa-info-circle rs-light-blue"></button>\r\n\t</div>\r\n\t<div class="vitals flex h">\r\n\t\t<div class="vital flex v">\r\n\t\t\t<div class="icon fas fa-heartbeat"></div>\r\n\t\t\t<select v-on:change="setStat(wounds.current, \'wounds\')" v-model.number="wounds.current">\r\n\t\t\t\t<option :value="0">0</option>\r\n\t\t\t\t<option :value="n" v-for="n in wounds.max">{{n}}</option>\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t\t<div class="vital flex v">\r\n\t\t\t<div class="icon fas fa-brain"></div>\r\n\t\t\t<select v-on:change="setStat(strain.current, \'strain\')" v-model.number="strain.current">\r\n\t\t\t\t<option :value="0">0</option>\r\n\t\t\t\t<option :value="n" v-for="n in strain.max">{{n}}</option>\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t\t<div class="vital flex v">\r\n\t\t\t<div class="icon ra ra-bleeding-hearts"></div>\r\n\t\t\t<select v-on:change="setStat(injury, \'injury\')" v-model.number="injury">\r\n\t\t\t\t<option :value="0">None</option>\r\n\t\t\t\t<option v-for="value in injuryValues" :value="value">{{value}}</option>\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="vitals flex h">\r\n\t\t<div class="vital flex v">\r\n\t\t\t<div class="icon fas fa-shield"></div>\r\n\t\t\t<div class="value">{{entity.soak || 0}}</div>\r\n\t\t</div>\r\n\t\t<div class="vital flex v">\r\n\t\t\t<div class="icon">\r\n\t\t\t\t<span class="fas fas fa-user-shield"></span>\r\n\t\t\t\t<span class="far fa-sword"></span>\r\n\t\t\t</div>\r\n\t\t\t<div class="value">{{entity.defense_melee || 0}}</div>\r\n\t\t</div>\r\n\t\t<div class="vital flex v">\r\n\t\t\t<div class="icon">\r\n\t\t\t\t<span class="fas fas fa-user-shield"></span>\r\n\t\t\t\t<span class="far fa-bow-arrow"></span>\r\n\t\t\t</div>\r\n\t\t\t<div class="value">{{entity.defense_range || 0}}</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="roll-skill">\r\n\t\t<select v-model="rollSkill" v-on:change="rollEntitySkill(rollSkill)">\r\n\t\t\t<option value="">Roll Skill...</option>\r\n\t\t\t<option v-for="skill in universe.indexes.skill.listing" v-if="skill.base && !skill.no_roll" :value="skill.id">{{skill.name}}</option>\r\n\t\t</select>\r\n\t</div>\r\n\t<div class="positional">\r\n\t\t<div class="titling">Location:</div>\r\n\t\t<div class="position" v-if="location">\r\n\t\t\t<span :class="location.icon"></span>\r\n\t\t\t<span>{{location.name}}</span>\r\n\t\t</div>\r\n\t\t<div class="position" v-if="!location">\r\n\t\t\t<span class="far fa-ban"></span>\r\n\t\t\t<span>No Location</span>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div class="titling">Inside:</div>\r\n\t\t<div class="position" v-if="inside">\r\n\t\t\t<span :class="inside.icon"></span>\r\n\t\t\t<span>{{inside.name}}</span>\r\n\t\t</div>\r\n\t\t<div class="position" v-if="!inside">\r\n\t\t\t<span class="far fa-ban"></span>\r\n\t\t\t<span>Not Inside an Entity</span>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div class="titling" v-if="piloting">Piloting:</div>\r\n\t\t<div class="position" v-if="piloting">\r\n\t\t\t<span :class="piloting.icon"></span>\r\n\t\t\t<span>{{piloting.name}}</span>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="titling" v-if="effects.length">Effects:</div>\r\n\t<div class="points effects flex h wrap">\r\n\t\t<button class="flat point effect" v-for="effect in effects" v-on:click="showInfo(effect, entity)">\r\n\t\t\t<span :class="effect.icon"></span>\r\n\t\t</button>\r\n\t</div>\r\n\t<div class="titling" v-if="effects.length">Abilities:</div>\r\n\t<div class="points abilities flex h wrap">\r\n\t\t<button class="flat point ability" v-for="ability in abilities" v-on:click="showInfo(ability, entity)">\r\n\t\t\t<span :class="ability.icon"></span>\r\n\t\t</button>\r\n\t</div>\r\n\t<rssw-entity-equipment :entity="entity" :universe="universe" :user="user" initial="long"></rssw-entity-equipment>\r\n\t<rssw-entity-weapons :entity="entity" :universe="universe" :user="user" :compact="true" ></rssw-entity-weapons>\r\n</div>\r\n';case"components/rssw/entity/equipped.html":return'<div class="rs-component rssw component-entity-equipment" :class="getModeClassing()">\r\n\t<div v-if="mode === \'short\'" class="slots flex h centered">\r\n\t\t<div v-if="slotKeys.length === 0">\r\n\t\t\t<h3>Equipment</h3>\r\n\t\t\t<span>No Slots</span>\r\n\t\t</div>\r\n\t\t<div class="slot flex v" v-for="slot in slotKeys">\r\n\t\t\t<button class="icon rs-white" v-on:click="showInfo(slots[slot], entity)">\r\n\t\t\t\t<span :class="slots[slot]?slots[slot].icon || \'far fa-square\':\'far fa-square\'"></span>\r\n\t\t\t</button>\r\n\t\t\t\r\n\t\t\t<button class="icon" :class="getSlotClass(slots[slot], equipment, index)" v-if="slotMapping[slot]" v-for="(equipment, index) in slotMapping[slot]" v-on:click="showInfo(equipment, entity, slots[slot])">\r\n\t\t\t\t<span :class="equipment?equipment.icon || \'fab fa-xbox\':\'fab fa-xbox\'"></span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n\t\r\n\t<div v-if="mode === \'long\'" class="slots flex v">\r\n\t\t<div v-if="slotKeys.length === 0">\r\n\t\t\t<span>No Slots</span>\r\n\t\t</div>\r\n\t\t<div class="slot flex h" v-for="slot in slotKeys">\r\n\t\t\t<button class="icon rs-white" v-on:click="showInfo(slots[slot], entity)">\r\n\t\t\t\t<span :class="slots[slot]?slots[slot].icon || \'far fa-square\':\'far fa-square\'"></span>\r\n\t\t\t</button>\r\n\t\t\t\r\n\t\t\t<button class="icon" :class="getSlotClass(slots[slot], equipment, index)" v-if="slotMapping[slot]" v-for="(equipment, index) in slotMapping[slot]" v-on:click="showInfo(equipment, entity, slots[slot])">\r\n\t\t\t\t<span :class="equipment?equipment.icon || \'fab fa-xbox\':\'fab fa-xbox\'"></span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/entity/knowledge.html":return'<div class="rs-component rssw component-entity-knowledge">\r\n\t<div class="knowledge-container">\r\n\t\t<div class="controls flex h">\r\n\t\t\t<rs-table-controls class="index" :universe="universe" :corpus="corpus" :user="player" :index="knowledge" :state="state" v-on:action="processAction"></rs-table-controls>\r\n\t\t\t<button v-on:click="resetHeaders" class="rs-light-blue rsbg-transparent flat reset">\r\n\t\t\t\t<span class="far fa-sync"></span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<rs-table class="index" :universe="universe" :user="player" :corpus="corpus" :index="knowledge" :headers="state.headers" :state="state" v-on:selected="showInfo($event, entity)"></rs-table>\r\n\t\t<rs-table-paging class="index" :universe="universe" :user="player" :index="knowledge" :state="state"></rs-table-paging>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/entity/shopinventory.html":return'<div class="rs-component rssw-shop-inventory">\r\n\t<div class="listing-container">\r\n\t\t<div class="stats">\r\n\t\t\t<div class="data">\r\n\t\t\t\t<table class="data-table">\r\n\t\t\t\t\t<tr class="stat">\r\n\t\t\t\t\t\t<td class="stat-label align-right">({{state.selected.length}}) Price</td>\r\n\t\t\t\t\t\t<td class="stat-value">{{cart.price}}</td>\r\n\t\t\t\t\t\t<td class="stat-value" v-if="customer" :class="customer.credits >= cart.price?\'rsbd-green\':\'rsbd-red\'">{{customer.credits}}</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr class="stat">\r\n\t\t\t\t\t\t<td class="stat-label align-right">Encum.</td>\r\n\t\t\t\t\t\t<td class="stat-value">{{cart.encumberance}}</td>\r\n\t\t\t\t\t\t<td class="stat-value" v-if="customer" :class="customer.encumberance_max >= customer.encumberance + cart.encumberance?\'rsbd-green\':\'rsbd-red\'">{{customer.encumberance}} / {{customer.encumberance_max}}</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="readout">\r\n\t\t\t<div class="names flex v center">\r\n\t\t\t\t<div class="name shop flex h">\r\n\t\t\t\t\t<span class="icon" :class="entity.icon || \'fas fa-warehouse\'"></span>\r\n\t\t\t\t\t<span>{{entity.name}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="name user flex h" v-if="customer">\r\n\t\t\t\t\t<span class="icon" :class="customer.icon || \'fas fa-user\'"></span>\r\n\t\t\t\t\t<span>{{customer.name}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="flex h center">\r\n\t\t\t\t<rs-table-controls class="index flex h centered" :universe="universe" :corpus="corpus" :user="player" :index="inventory" :state="state" v-on:action="processAction"></rs-table-controls>\r\n\t\t\t</div>\r\n\t\t\t<div v-if="customer">\r\n\t\t\t\t<button class="simple flat" v-if="checkingOut">\r\n\t\t\t\t\t<span class="fas fa-spinner fa-pulse"></span>\r\n\t\t\t\t\t<span>Checking Out</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="simple flat" v-if="!checkingOut && !toHeavy && !toExpensive && state.selected.length" v-on:click="checkout()">\r\n\t\t\t\t\t<span class="fas fa-shopping-cart"></span>\r\n\t\t\t\t\t<span>Checkout</span>\r\n\t\t\t\t\t<span>({{state.selected.length}} / {{inventory.listing.length}})</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="simple flat" v-if="!checkingOut && toExpensive" v-on:click="showInfo(\'knowledge:reference:toexpensive\')">\r\n\t\t\t\t\t<span class="fas fa-coins rs-light-red"></span>\r\n\t\t\t\t\t<span>To Expensive</span>\r\n\t\t\t\t\t<span>({{state.selected.length}} / {{inventory.listing.length}})</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="simple flat" v-if="!checkingOut && toHeavy" v-on:click="showInfo(\'knowledge:reference:toheavy\')">\r\n\t\t\t\t\t<span class="fas fa-balance-scale-left rs-light-red"></span>\r\n\t\t\t\t\t<span>To Heavy</span>\r\n\t\t\t\t\t<span>({{state.selected.length}} / {{inventory.listing.length}})</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="inventory">\r\n\t\t\t<rs-table class="index" :universe="universe" :user="player" :corpus="corpus" :index="inventory" :headers="headers" :state="state"></rs-table>\r\n\t\t\t<rs-table-paging class="index" :universe="universe" :user="player" :index="inventory" :state="state"></rs-table-paging>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/entity/summary.html":return'<div class="rs-component rs-entity-summary">\r\n\t<button class="flat naming" v-on:click="emitClicked()" :class="entity.is_hostile?\'rs-light-red\':\'rs-white\'">\r\n\t\t<span class="fas fa-check rs-light-green" v-if="isActive()"></span>\r\n\t\t<span class="main-icon" :class="entity.icon"></span>\r\n\t\t<span>{{entity.name}}</span>\r\n\t</button>\r\n\t<div class="stats flex h wrap" v-if="player.master || (!entity.hidden && viewing && vieiwng.knowsOf(entity))">\r\n\t\t<div class="stat">\r\n\t\t\t<span class="icon fas fa-heartbeat"></span>\r\n\t\t\t<span class="value">{{entity.wounds || 0}}</span>\r\n\t\t</div>\r\n\t\t<div class="stat">\r\n\t\t\t<span class="icon fas fa-brain"></span>\r\n\t\t\t<span class="value">{{entity.strain || 0}}</span>\r\n\t\t</div>\r\n\t\t<div class="stat">\r\n\t\t\t<span class="icon ra ra-bleeding-hearts"></span>\r\n\t\t\t<span class="value">{{entity.injury || 0}}</span>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div class="stat">\r\n\t\t\t<span class="icon fas fa-shield"></span>\r\n\t\t\t<span class="value">{{entity.soak || 0}}</span>\r\n\t\t</div>\r\n\t\t<div class="stat">\r\n\t\t\t<span class="icon fas fas fa-user-shield"></span>\r\n\t\t\t<span class="far fa-sword"></span>\r\n\t\t\t<span class="value">{{entity.defense_melee || 0}}</span>\r\n\t\t</div>\r\n\t\t<div class="stat">\r\n\t\t\t<span class="icon fas fas fa-user-shield"></span>\r\n\t\t\t<span class="far fa-bow-arrow"></span>\r\n\t\t\t<span class="value">{{entity.defense_range || 0}}</span>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div class="stat" v-if="player.master">\r\n\t\t\t<span class="icon fas fa-coins"></span>\r\n\t\t\t<span class="value">{{entity.credits || 0}}</span>\r\n\t\t</div>\r\n\t\t<div class="stat" v-if="player.master">\r\n\t\t\t<span class="icon fas fa-users" :class="!entity.owners || !entity.owners.length?\'rs-light-red\':\'rs-light-blue\'"></span>\r\n\t\t\t<span class="value">{{entity.owners && entity.owners.length?entity.owners.join(", "):(entity.owner?entity.owner:"NPC")}}</span>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/events/combat.html":return'<div class="rs-component rs-combat-view">\r\n\t<div class="view-details flush height flex v">\r\n\t\t<h2>\r\n\t\t\t<span>{{event.name}}</span>\r\n\t\t\t<button class="flat fas fa-info-circle rs-light-blue" v-on:click="showInfo(event)"></button>\r\n\t\t</h2>\r\n\t\t\r\n\t\t<div class="involved flex h spacer">\r\n\t\t\t<div class="entity-list">\r\n\t\t\t\t<div class="entity-control flex h" v-for="entity in involved" :class="getEntityStyling(entity)">\r\n\t\t\t\t\t<div class="current-indicator flex v center" v-on:click="setCurrent(entity)">\r\n\t\t\t\t\t\t<span class="icon" :class="getIndicatorStyling(entity)"></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<select class="order" v-model.number="event.order[entity.id]" v-on:change="reorderInvolved()">\r\n\t\t\t\t\t\t<option v-for="i in event.involved.length" :value="i">{{i}}</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t\t<rssw-entity-summary v-on:selected="selectEntity(entity)" :selected="tracking" :entity="entity" :universe="universe" :user="user" :key="entity.id"></rssw-entity-summary>\r\n\t\t\t\t\t<button class="state" v-on:click="toggleEntity(entity.id)">\r\n\t\t\t\t\t\t<span class="far" :class="event.state[entity.id]?\'fa-check-square\':\'fa-square\'"></span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="selected-details">\r\n\t\t\t\t<div class="flex v">\r\n\t\t\t\t\t<div class="control">\r\n\t\t\t\t\t\t<button class="flat simple" v-on:click="newRound()">\r\n\t\t\t\t\t\t\t<span v-if="event.state.round">To Next Round {{event.state.round + 1}}</span>\r\n\t\t\t\t\t\t\t<span v-if="!event.state.round">Start Round 1</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button class="flat simple" v-on:click="nextTurn()">\r\n\t\t\t\t\t\t\t<span>To Next:</span>\r\n\t\t\t\t\t\t\t<span v-if="upNext" :class="upNext.is_hostile?\'rs-light-red\':\'rs-light-orange\'">{{upNext.name}}</span>\r\n\t\t\t\t\t\t\t<span v-if="event.involved && event.state && event.state.turn >= event.involved.length - 1">(Round Ended)</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button class="flat simple" v-if="event.active" v-on:click="finishEvent()">\r\n\t\t\t\t\t\t\t<span>Finish Event</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button class="flat simple" v-if="!event.active" v-on:click="openEvent()">\r\n\t\t\t\t\t\t\t<span>Event Finished</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button class="flat simple" v-on:click="markAll()">\r\n\t\t\t\t\t\t\t<span class="far fa-check-square rs-green"></span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button class="flat simple" v-on:click="unmarkAll()">\r\n\t\t\t\t\t\t\t<span class="far fa-square rs-yellow"></span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="messaging" v-if="message">\r\n\t\t\t\t\t\t<span class="rs-light-red fas fa-exclamation-triangle"></span>\r\n\t\t\t\t\t\t<span class="message">{{message}}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<rssw-dice-bin :state="state" :universe="universe" :user="user" :emitter="collater" :full-display="true"></rssw-dice-bin>\r\n\t\t\t\t\t<div class="flex h">\r\n\t\t\t\t\t\t<rssw-entity-brief v-for="entity in selected" v-on:close="selectEntity(entity)" :entity="entity" :universe="universe" :user="user" :key="entity.id"></rssw-entity-brief>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div class="details flex h">\r\n\t\t\t<div class="description">\r\n\t\t\t\t<h3>Event Description</h3>\r\n\t\t\t\t<div v-html="description"></div>\r\n\t\t\t</div>\r\n\t\t\t<rs-field :root="tracing" v-for="field in fields" :field="field" v-on:changed="sync($event)" :key="field.property"></rs-field>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/events/fighting.html":return'<div class="rs-component rs-fighting-view rs-combat-view">\r\n\t<div class="entity-list">\r\n\t\t<div class="entity-control flex h" v-for="entity in involved" :class="getEntityStyling(entity)">\r\n\t\t\t<div class="current-indicator flex v center">\r\n\t\t\t\t<span class="icon" :class="getIndicatorStyling(entity)"></span>\r\n\t\t\t</div>\r\n\t\t\t<div class="state flex v center">\r\n\t\t\t\t<span class="far" :class="event.state[entity.id]?\'fa-check-square\':\'fa-square\'"></span>\r\n\t\t\t</div>\r\n\t\t\t<rssw-entity-summary :entity="entity" :universe="universe" :user="user" :key="entity.id"></rssw-entity-summary>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/items/locate.html":return'<div class="rs-component rs-items-locate">\r\n\t<div class="flex h v-center">\r\n\t\t<h2>Items</h2>\r\n\t\t<rs-table-controls class="index flex h centered" :universe="universe" :corpus="corpus" :user="player" :index="inventory" :state="state" v-on:action="processAction"></rs-table-controls>\r\n\t</div>\r\n\t<div class="inventory">\r\n\t\t<rs-table class="index" :universe="universe" :user="player" :corpus="corpus" :index="inventory" :headers="headers" :state="state"></rs-table>\r\n\t\t<rs-table-paging class="index" :universe="universe" :user="player" :index="inventory" :state="state"></rs-table-paging>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/journal/view.html":return'<div class="rs-component rs-journal-view">\r\n\t<div class="flex h">\r\n\t\t<rs-listing class="" :list="entityList" :universe="universe" :user="user" placeholder="Filter Entities..." :emit="true" v-on:open="focusEntity($event)" :active="activeEntity"></rs-listing>\r\n\t\t<rs-listing class="" :list="known.listing" :universe="universe" :user="user" :emit="true" v-on:open="openEntry($event)"  placeholder="Filter Knowns..."></rs-listing>\r\n\t\t<rs-listing class="" :list="shown" :universe="universe" :user="user" :emit="true" v-on:open="openEntry($event)" placeholder="Filter Entries..."></rs-listing>\r\n\t\t<div class="active-known">\r\n\t\t\t<rs-field :root="root" :field="field" v-on:complete="filterEntries()"></rs-field>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/master/results.html":return'<div class="rs-component rs-master-results">\r\n\t<h3>\r\n\t\t<span>Received Rolls</span>\r\n\t\t<select v-model.number="state.max">\r\n\t\t\t<option v-for="n in 10" :value="n">{{n}}</option>\r\n\t\t</select>\r\n\t</h3>\r\n\t<div class="entity  flex h" v-for="(entity, index) in entities" :key="entity.id">\r\n\t\t<div class="naming">\r\n\t\t\t<rssw-entity-summary v-on:selected="dismissEntity(entity, index)" :entity="entity" :universe="universe" :user="user""></rssw-entity-summary>\r\n\t\t</div>\r\n\t\t<div class="rolls flex h">\r\n\t\t\t<div class="roll-result" :class="state.active_roll === roll.echo?\'active-roll\':\'\'" v-for="(roll, index) in state.seen[entity.id]" :key="roll.echo">\r\n\t\t\t\t <rssw-dice-result v-on:dismiss="selectRoll(roll)" v-on:menu="dismissRoll(entity, index)" :roll="roll" :options="state.options"></rssw-dice-result>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/party.html":return'<div class="rs-component rssw component-party">\r\n\t<div class="information">\r\n\t\t<h3 class="name">\r\n\t\t\t<select class="info rs-blue rs-border one rsdb-light-blue" v-on:change="changeOrder(newOrder)" v-model="newOrder">\r\n\t\t\t\t<option v-for="o in 20" :value="o">{{o}}</option>\r\n\t\t\t</select>\r\n\t\t\t<button class="info  rs-border one rsdb-light-blue" v-on:click="showInfo(record)">\r\n\t\t\t\t<span class="fas fa-info-circle rs-light-blue"></span>\r\n\t\t\t</button>\r\n\t\t\t<span>{{record.name}}</span>\r\n\t\t\t<span v-if="inside" class="rs-border light-blue bottom-one">\r\n\t\t\t\t<span>in</span>\r\n\t\t\t\t<button class="info rs-border one rsdb-light-blue" v-on:click="showInfo(inside)">\r\n\t\t\t\t\t<span :class="inside.icon || \'fas fa-info-circle rs-light-blue\'"></span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<span>{{inside.name}}</span>\r\n\t\t\t</span>\r\n\t\t\t<span v-if="location" class="rs-border light-blue bottom-one">\r\n\t\t\t\t<span>at</span>\r\n\t\t\t\t<button class="info  rs-border one rsdb-light-blue" v-on:click="showInfo(location)">\r\n\t\t\t\t\t<span :class="location.icon || \'fas fa-info-circle rs-light-blue\'"></span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<span>{{location.name}}</span>\r\n\t\t\t</span>\r\n\t\t\t<button class="info  rs-border one rsdb-light-orange" v-on:click="toggleMembers()">\r\n\t\t\t\t<span class="far" :class="state.hideMembers?\'fa-square\':\'fa-check-square\'"></span>\r\n\t\t\t\tMembers\r\n\t\t\t</button>\r\n\t\t</h3>\r\n\t</div>\r\n\t\r\n\t<div class="controls flex h wrap">\r\n\t\t<div class="ctrl experience">\r\n\t\t\t<div class="action rs-border one rsdb-orange">\r\n\t\t\t\t<span class="fas fa-plus rs-light-blue"></span>\r\n\t\t\t\t<select v-model.number="grantXP" v-on:change="giveXP(grantXP)">\r\n\t\t\t\t\t<option v-for="give in xps" :value="give">{{give === 0?"[Amount]":give}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t\t<span class="">XP</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="ctrl credits">\r\n\t\t\t<div class="action rs-border one rsdb-orange">\r\n\t\t\t\t<span class="fas fa-plus rs-light-blue"></span>\r\n\t\t\t\t<select v-model.number="grantCredit" v-on:change="giveCredits(grantCredit)">\r\n\t\t\t\t\t<option v-for="give in credits" :value="give">{{give === 0?"[Amount]":give}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t\t<span class="fas fa-coins"></span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="ctrl credits">\r\n\t\t\t<div class="action rs-border one rsdb-orange">\r\n\t\t\t\t<span class="fas fa-plus rs-light-blue"></span>\r\n\t\t\t\t<select v-model="addingMember" v-on:change="addMember(addingMember)">\r\n\t\t\t\t\t<option value=""></option>\r\n\t\t\t\t\t<option v-for="option in entities" v-if="displayOption(option)" :value="option.id">{{option.name}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t\t<span class="fas fa-user"></span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="ctrl location">\r\n\t\t\t<div class="action rs-border one rsdb-orange">\r\n\t\t\t\t<span class="fas fa-globe-stand rs-light-blue"></span>\r\n\t\t\t\t<select v-model="move_location">\r\n\t\t\t\t\t<option value=""></option>\r\n\t\t\t\t\t<option v-for="option in universe.indexes.location.listing" :value="option.id">{{option.name}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t\t<button class="info rs-border one rsdb-light-blue" v-on:click="setLocation()">\r\n\t\t\t\t\tSet Location\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t\r\n\t<div class="members" :class="state.hideMembers?\'closed\':\'open\'">\r\n\t\t<div class="member" v-for="member in members">\r\n\t\t\t<button class="info rs-border one rsdb-blue" v-on:click="removeMember(member.id)">\r\n\t\t\t\t<span class="fas fa-times rs-light-red"></span>\r\n\t\t\t</button>\r\n\t\t\t<span class="icon" :class="member.icon || \'fas fa-user\'"></span>\r\n\t\t\t<button class="info rs-border one rsdb-blue" v-on:click="showInfo(member)">\r\n\t\t\t\t<span class="fas fa-info-circle rs-light-blue"></span>\r\n\t\t\t</button>\r\n\t\t\t<span class="name">{{member.name}}</span>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/ship/inside.html":return'<div class="rs-component rssw component-entity-inside">\r\n\t<h2 class="title-info">\r\n\t\t<span>Entities Inside</span>\r\n\t\t<span v-if="entity.required_crew" class="title-readout" :class="getCountClass()">\r\n\t\t\t<span class="rs-white">(</span>\r\n\t\t\t<span>{{crew}}</span>\r\n\t\t\t<span class="rs-white">/</span>\r\n\t\t\t<span title="Minimum number of Crew required to fully operate this ship">{{entity.required_crew}}</span>\r\n\t\t\t<span v-if="entity.maximum_crew">\r\n\t\t\t\t<span class="rs-white">[</span>\r\n\t\t\t\t<span title="Maximum number of Crew that fit in this ship">{{entity.maximum_crew}}</span>\r\n\t\t\t\t<span class="rs-white">]</span>\r\n\t\t\t</span>\r\n\t\t\t\r\n\t\t\t<span class="rs-white">)</span>\r\n\t\t</span>\r\n\t</h2>\r\n\t<div class="entitites">\r\n\t\t<div class="flow flow-v">\r\n\t\t\t<div class="entry flow-h" v-for="entry in entities">\r\n\t\t\t\t<button class="exit-ship" v-on:click="moveEntity(entry.id, null)" v-if="isOwner(entry)">\r\n\t\t\t\t\t<span class="fas fa-sign-out-alt rot180"></span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="entity" v-on:click="showInfo(entry)" v-if="isOwner(entry)">\r\n\t\t\t\t\t<span :class="entry.icon"></span>\r\n\t\t\t\t\t<span>{{entry.name}}</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<span class="entity" v-else>\r\n\t\t\t\t\t<span :class="entry.icon"></span>\r\n\t\t\t\t\t<span>{{entry.name}}</span>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="board">\r\n\t\t<div class="label">\r\n\t\t\tBring Entity on Board\r\n\t\t</div>\r\n\t\t<div>\r\n\t\t\t<select v-model="moving" v-on:change="moveEntity(moving, entity.id)">\r\n\t\t\t\t<option value="">Select Entity...</option>\r\n\t\t\t\t<option v-for="e in availableEntities" :value="e.id">{{e.name}}</option>\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/ship/maneuver.html":return'<div class="rs-component rssw component-maneuvers">\r\n\t<div class="backdrop" :style="maneuverStyleBackdrop()">\r\n\t</div>\r\n\t<div class="maneuver-speed" v-if="!display">\r\n\t\t<span>{{getSpeedValue(locked)}}</span>\r\n\t</div>\r\n\t<div class="maneuver" v-for="(maneuver, i) in maneuvers" :style="maneuverStyleContainer(i, maneuver)" :index="i" :maneuver="maneuver">\r\n\t\t<button class="indicator type" :style="maneuverStyleIcon(i, maneuver)" v-on:click="selectManeuver(maneuver)">\r\n\t\t\t<span :class="maneuver.icon"></span>\r\n\t\t</button>\r\n\t</div>\r\n\t<div class="maneuver" v-for="(maneuver, i) in maneuvers" :style="maneuverStyleSpeed(i, maneuver)" :index="i" :maneuver="maneuver">\r\n\t\t<button class="indicator speed" :style="maneuverStyleIcon(i, maneuver)" v-on:click="selectManeuver(maneuver)">\r\n\t\t\t<span>{{getSpeedValue(maneuver)}}</span>\r\n\t\t</button>\r\n\t</div>\r\n\t<button class="maneuver-icon" v-on:click="toggleOpen()">\r\n\t\t<span :class="locked.icon"></span>\r\n\t\t\x3c!--<span :class="maneuverIcon"></span>--\x3e\r\n\t</button>\r\n</div>\r\n';case"components/rssw/ship/stats.html":return'<div class="rs-component rssw component-ship-stats">\r\n\t<div class="ship-info flex h">\r\n\t\t<div class="ship-card">\r\n\t\t\t<div class="picture" v-on:click="recalculate()">\r\n\t\t\t\t<rs-render-image class="record-image" v-if="image" mode="wide" :image="image"></rs-render-image>\r\n\t\t\t</div>\r\n\t\t\t<div class="information flow-h">\r\n\t\t\t\t<div class="skill">\r\n\t\t\t\t\t<span v-if="!pilot" class="icon fas fa-ban"></span>\r\n\t\t\t\t\t<span v-if="pilot" class="icon">{{skill}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="pilot-info flow-v">\r\n\t\t\t\t\t<div class="pilot pilot-name flow-h centered">\r\n\t\t\t\t\t\t<div v-if="editingPilot">\r\n\t\t\t\t\t\t\t<select v-model="setPilot" v-on:change="setNewPilot(setPilot)">\r\n\t\t\t\t\t\t\t\t<option value="">No Pilot</option>\r\n\t\t\t\t\t\t\t\t<option v-for="p in availablePilots" :value="p.id">{{p.name}}</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div v-if="!editingPilot && pilot" class="name-display flow-h" :class="getPilotClass()">\r\n\t\t\t\t\t\t\t<span>{{pilot.name}}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div v-if="!editingPilot && !pilot" class="name-display flow-h" :class="getPilotClass()">\r\n\t\t\t\t\t\t\t<span>No Pilot</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button v-on:click="editPilot()" class="flow-h">\r\n\t\t\t\t\t\t\t<span :class="editingPilot?\'fas fa-check\':\'fas fa-edit\'"></span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="name flex h">\r\n\t\t\t\t\t\t<input type="text" v-model="properties.name" v-on:change="updated(\'name\')" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="skill">\r\n\t\t\t\t\t<span v-if="!pilot" class="icon fab fa-android"></span>\r\n\t\t\t\t\t<span v-if="pilot" class="icon" :class="pilot.allegiance || pilot.icon"></span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="data flex h">\r\n\t\t\t\t<div class="stats flex v">\r\n\t\t\t\t\t<div class="stat flex h" v-for="stat in shipStatList" :key="stat.id" :class="stat.class" v-if="stat">\r\n\t\t\t\t\t\t<span class="icon-bubble">\r\n\t\t\t\t\t\t\t<span class="icon" :class="stat.icon"></span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span class="value">{{ship[stat.id]}}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="spacer"></div>\r\n\t\t\t\t\t<div class="point-bubble">\r\n\t\t\t\t\t\t<span>{{points}}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="details flow-v">\r\n\t\t\t\t\t<div class="pilot-ability object-info">\r\n\t\t\t\t\t\t<div class="pilot-ability-text" v-html="abilityDescription" v-if="!editingPilotAbility">\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div v-if="editingPilotAbility">\r\n\t\t\t\t\t\t\t<div class="rs-white">\r\n\t\t\t\t\t\t\t\tSelect Pilot Ability\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<select v-model="setPilotAbility" v-on:change="setNewPilotAbility(setPilotAbility)">\r\n\t\t\t\t\t\t\t\t\t<option value=""></option>\r\n\t\t\t\t\t\t\t\t\t<option value>No Ability</option>\r\n\t\t\t\t\t\t\t\t\t<option v-for="a in pilotAbilities" :value="a.id">{{a.name}}</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button class="edit-pilot-ability" v-on:click="editPilotAbility()">\r\n\t\t\t\t\t\t\t<span :class="editingPilotAbility?\'fas fa-check\':\'fas fa-pencil\'"></span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="data-list status flow-v aligned-right">\r\n\t\t\t\t\t\t<div class="property" v-if="properties.location">\r\n\t\t\t\t\t\t\t<span>Location: </span>\r\n\t\t\t\t\t\t\t<button class="property-link" v-on:click="showInfo(properties.location)">\r\n\t\t\t\t\t\t\t\t<span :class="properties.location.icon"></span>\r\n\t\t\t\t\t\t\t\t<span>{{properties.location.name}}</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class="property" v-if="properties.inside">\r\n\t\t\t\t\t\t\t<span>Inside: </span>\r\n\t\t\t\t\t\t\t<button class="property-link" v-on:click="showInfo(properties.inside)">\r\n\t\t\t\t\t\t\t\t<span :class="properties.inside.icon"></span>\r\n\t\t\t\t\t\t\t\t<span>{{properties.inside.name}}</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="abilities flow-h centered wrap">\r\n\t\t\t\t\t\t<button v-for="ability in abilities" class="ability getAbilityIconClass(ability)" v-if="ability" v-on:click="showInfo(ability)">\r\n\t\t\t\t\t\t\t<span :class="ability.icon"></span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="maneuver selector flex h center">\r\n\t\t\t\t<rssw-ship-maneuver :universe="universe" :user="user" :entity="ship" :settings="state.settings.maneuvers"></rssw-ship-maneuver>\r\n\t\t\t</div>\r\n\t\t\t<div class="data-list items" v-if="items.length">\r\n\t\t\t\t<div class="readout">\r\n\t\t\t\t\t<span>Encumberance:</span>\r\n\t\t\t\t\t<span>{{encumberance}}</span>\r\n\t\t\t\t\t<span v-if="ship.contents_max">/ {{ship.contents_max}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="property" v-for="item in items">\r\n\t\t\t\t\t<button class="property-link" v-on:click="showInfo(item)">\r\n\t\t\t\t\t\t<span :class="item.icon"></span>\r\n\t\t\t\t\t\t<span>{{item.name}}</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="ship-effects">\r\n\t\t\t<div class="effect-selector" :class="effectsOpen?\'select-effect\':\'closed\'">\r\n\t\t\t\t<button class="effect-button effect-token effect-toggle" v-on:click="toggleEffectMenu()">\r\n\t\t\t\t\t<span class="fas fa-arrow-circle-up" :class="effectsOpen?\'rot0 rs-light-blue\':\'rot180 rs-white\'"></span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button v-for="effect in shipEffects" class="effect-button effect-token rs-gray" v-on:click="assignEffect(effect)">\r\n\t\t\t\t\t<span :class="effect.icon"></span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="effect-button effect-token" v-on:click="showInfo(\'knowledge:effects:ships\')">\r\n\t\t\t\t\t<span class="fas fa-info-circle rs-light-blue"></span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div class="effect-token-container" v-for="effect in activeEffects">\r\n\t\t\t\t<button class="effect-button effect-token rs-light-blue" v-on:click="dismissEffect(effect)" v-on:focus="focusEffect(effect)" v-on:blur="blurEffect(effect)">\r\n\t\t\t\t\t<span :class="getEffectIcon(effect)"></span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button v-if="showEffectInfo === effect.id" class="effect-button effect-info rs-light-blue" v-on:click="showInfo(effect._sourced)" v-on:focus="focusEffect(effect)" v-on:blur="blurEffect(effect)">\r\n\t\t\t\t\t<span class="fas fa-info-circle"></span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<select v-if="hasEffectHasIndicators(effect)" v-model="effectIndicators[effect.id]" v-on:change="alterIndicator(effect, effectIndicators[effect.id])">\r\n\t\t\t\t\t<option v-if="!effect.indicator" value=""></option>\r\n\t\t\t\t\t<option v-for="opt in availableEffects[effect._sourced].indicators" :value="opt">{{opt}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/rssw/tokens/destiny.html":return'<div class="rssw-tokens rssw-tokens-destiny flex">\r\n\t<span class="icon swg swg-phoenix"></span>\r\n\t<span class="label">Destiny:</span>\r\n\t<button v-for="token in destinyTokens" class="token-container" v-on:click="showTokenInfo()">\r\n\t\t<span class="backdrop fas fa-hexagon rs-white"></span>\r\n\t\t<span class="foreground fas fa-jedi rs-dark-blue"></span>\r\n\t</button>\r\n\t<button v-for="token in sithTokens" class="token-container" v-on:click="showTokenInfo()">\r\n\t\t<span class="backdrop fas fa-hexagon rs-black"></span>\r\n\t\t<span class="foreground fab fa-sith rs-red"></span>\r\n\t</button>\r\n</div>\r\n';case"components/syncedtext.html":return"";case"components/table/controls.html":return'<div class="system-component table-controls">\r\n\t<div class="filtering">\r\n\t\t<input type="text" v-model="state.filter.null" />\r\n\t\t<span class="search-icon fas fa-search"></span>\r\n\t</div>\r\n\t<div class="controls">\r\n\t\t<div class="selections" v-if="index.selection.length">\r\n\t\t\t<div v-for="control in controls">\r\n\t\t\t\t{{control}}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<button class="ctrl selections clear" v-if="index.selection.length" v-on:click="clearSelection()">\r\n\t\t\t<span class="far fa-ban"></span>\r\n\t\t</button>\r\n\t\t<button class="ctrl selections all" v-if="index.selection.length != index.listing.length" v-on:click="allSelection()">\r\n\t\t\t<span class="far fa-check-square"></span>\r\n\t\t</button>\r\n\t\t<button class="ctrl selections info" v-if="index.selection.length" v-on:click="infoSelection(index.selection[index.selection.length-1])">\r\n\t\t\t<span class="far fa-journal-whills"></span>\r\n\t\t</button>\r\n\t</div>\r\n</div>\r\n';case"components/table/paging.html":return'<div class="system-component table-paging">\r\n\t<button class="index-page" :class="classPage(0)" v-on:click="toPage(0)">\r\n\t\t1\r\n\t</button>\r\n\t<button v-for="page in pages" class="index-page" :class="classPage(page)" v-on:click="toPage(page)">\r\n\t\t{{page + 1}}\r\n\t</button>\r\n\t<button class="index-page" :class="classPage(lastPage)" v-if="lastPage > 0" v-on:click="toPage(lastPage)">\r\n\t\t{{lastPage + 1}}\r\n\t</button>\r\n</div>';case"components/table.html":return'<div class="system-component table-index">\r\n\t<div class="table-container">\r\n\t\t<table class="table-element" :class="state.classes">\r\n\t\t\t<thead>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th v-for="header in headers">\r\n\t\t\t\t\t\t<button class="title actionable table-content" v-on:click="headerAction(header)" :class="header.thClass" v-if="!header.hideBlock">\r\n\t\t\t\t\t\t\t<span class="sort fas" v-if="!header.nosort && state.sortKey === header.field" :class="{\'fa-sort-down\':state.order, \'fa-sort-up\':!state.order}"></span>\r\n\t\t\t\t\t\t\t<span class="sort fas fa-sort" v-if="!header.nosort && state.sortKey !== header.field"></span>\r\n\t\t\t\t\t\t\t<span>{{header.title}}</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</th>\r\n\t\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t\t<tbody>\r\n\t\t\t\t<tr v-if="corpus.length === 0 && index.listing.length">\r\n\t\t\t\t\t<td class="notification" :colspan="headers.length">\r\n\t\t\t\t\t\t<span class="fas fa-exclamation-triangle warning"></span>\r\n\t\t\t\t\t\t<span>All Items Filtered Out</span>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr v-else-if="corpus.length === 0 && index.listing.length === 0">\r\n\t\t\t\t\t<td class="notification" :colspan="headers.length">\r\n\t\t\t\t\t\t<span class="fas fa-exclamation-triangle warning"></span>\r\n\t\t\t\t\t\t<span>No Items Available</span>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr v-else-if="index.error">\r\n\t\t\t\t\t<td class="notification" :colspan="headers.length">\r\n\t\t\t\t\t\t<span class="fas fa-exclamation-triangle warning"></span>\r\n\t\t\t\t\t\t<span>Data Source Error</span>\r\n\t\t\t\t\t\t<p>{{index.error}}</p>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr v-for="record in corpus" :key="record.id" :class="index.isSelected([record.id])?\'record-selected\':\'\'">\r\n\t\t\t\t\t<td v-for="(header, i) in headers" class="table-record" :class="header.field" v-on:click.stop="select(record, header)" :title="header.tag?record[header.tag]:\'\'">\r\n\t\t\t\t\t\t<div v-if="!header.noCross" class="crosshair"></div>\r\n\t\t\t\t\t\t<div v-if="!header.noHighlight && index.isSelected([record.id]) && i === 0" class="highlight starting"></div>\r\n\t\t\t\t\t\t<div v-if="!header.noHighlight && index.isSelected([record.id]) && i === headers.length - 1" class="highlight ending"></div>\r\n\t\t\t\t\t\t<button class="table-content">\r\n\t\t\t\t\t\t\t<slot name="table-content" :header="header" :record="record">\r\n\t\t\t\t\t\t\t\t<div class="contents" :class="header.field?header.field:\'\'" v-if="header.formatter">\r\n\t\t\t\t\t\t\t\t\t<div v-html="header.formatter(record[header.field], record, header)"></div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="contents" :class="header.field?header.field:\'\'" v-else-if="header.type === \'array\' || isArray(record[header.field])">\r\n\t\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t\t<li v-for="item in record[header.field]">{{item.name || item}}</li>\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="contents" :class="header.field?header.field:\'\'" v-else-if="header.type === \'object\'">\r\n\t\t\t\t\t\t\t\t\t<div v-html="formatObjectHeader(record[header.field])">\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="contents" :class="header.field?header.field:\'\'" v-else-if="record[header.field] && typeof record[header.field] === \'object\' && record[header.field] !== \'undefined\'">\r\n\t\t\t\t\t\t\t\t\t<pre>{{record[header.field] | JSON}}</pre>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="contents" :class="header.field?header.field:\'\'" v-else-if="record[header.field]">\r\n\t\t\t\t\t\t\t\t\t{{record[header.field]}}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="contents" :class="header.field?header.field:\'\'" v-else>\r\n\t\t\t\t\t\t\t\t\t<span> </span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</slot>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t</div>\r\n</div>\r\n';case"components/viewer.html":return'\r\n<div class="rs-component component-viewer" :class="renderState()">\r\n\r\n\t<div class="map" v-if="location && sourceImage" :style="" v-wheel="wheeling" v-pinch.in="zoomOutOne" v-pinch.out="zoomOutOne">\r\n\t\t<div class="view" onexit="true" v-pan="pan">\r\n\t\t\t<div class="parchment" v-on:contextmenu.stop.prevent="openActions($event)" :style="\'font-size: \' + (baseFontSize + image.zoom) + \'px;\'">\r\n\t\t\t\t<div class="pointsOfInterest" v-if="pointsOfInterest.length && state.markers">\r\n\t\t\t\t\t\x3c!--\r\n\t\t\t\t\t<button class="scaled poi" :class="poiStyling(link)" v-if="poiNamed(link)" v-for="link in pointsOfInterest" :data-id="link.id" :style="\'left:\' + link.x + \'%; top:\' + link.y + \'%; font-size: \' + ((link.label_sizing || baseFontSize) + image.zoom) + \'px;\'" :key="link.id" v-on:click.stop.prevent="poiMenu(link)">\r\n\t\t\t\t\t--\x3e\r\n\t\t\t\t\t<button class="scaled poi" :class="poiStyling(link)" v-for="link in pointsOfInterest" :data-id="link.id" :style="\'left:\' + link.x + \'%; top:\' + link.y + \'%;\'" :key="link.id" v-on:click.stop.prevent="poiMenu(link)">\r\n\t\t\t\t\t\t<span class="poi-icon scaled" :class="poiClass(link)"></span>\r\n\t\t\t\t\t\t<span class="labeling scaled" v-if="link.label" :class="link.label && state.labels?\'shown\':\'hidden\'">{{link.label}}</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="coordinates" v-for="coordinate in coordinates" v-if="!coordinate.standalone">\r\n\t\t\t\t\t<span class="coordinate top left" :style="\'width: \' + coordinate.x + \'%; height: \' + coordinate.y + \'%;\' + (coordinate.color?\'border-color: \' + coordinate.color + \';\':\'\')"></span>\r\n\t\t\t\t\t<span class="coordinate bottom right" :style="\'left: \' + coordinate.x + \'%; width: \' + (100-coordinate.x) + \'%; top: \' + coordinate.y + \'%; height: \' + (100-coordinate.y) + \'%;\' + (coordinate.color?\'border-color: \' + coordinate.color + \';\':\'\')"></span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="coordinate-dots">\r\n\t\t\t\t\t<button class="dot" v-for="coordinate in coordinates" :style="\'left: \' + coordinate.x + \'%; top: \' + coordinate.y + \'%;\' + (coordinate.color?\'background-color: \' + coordinate.color + \';\':\'\')" v-on:click="dismissCoordinate(coordinate)"></button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="map-paths">\r\n\t\t\t\t\t<canvas v-for="loc in locales" :data-id="\'locale:\' + loc.id"></canvas>\r\n\t\t\t\t\t<canvas id="measuring"></canvas>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="actions" v-if="actions.open" :style="getActionMenuStyle()">\r\n\t\t\t\t\t<div class="action-grouped">\r\n\t\t\t\t\t\t<div class="actions-header">\r\n\t\t\t\t\t\t\t<span class="titling">\r\n\t\t\t\t\t\t\t\t{{actions.header}}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<button class="actions-close alert" v-on:click.stop.prevent="closeActions()">\r\n\t\t\t\t\t\t\t\t<span class="fas fa-times"></span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class="actions-options">\r\n\t\t\t\t\t\t\t<div class="generator flex h" v-if="state.generate_location">\r\n\t\t\t\t\t\t\t\t<input type="text" id="viewgen" v-model="state.generate_location_name" v-on:keyup.enter="fire(menuItems.generateLocation, $event)"/>\r\n\t\t\t\t\t\t\t\t<button v-on:click="fire(menuItems.generateLocation, $event)" class="normal">\r\n\t\t\t\t\t\t\t\t\t<span :class="getGeneratedClass()"></span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<button class="option normal" v-for="option in actions.options" v-on:click.stop.prevent="fire(option, $event)">\r\n\t\t\t\t\t\t\t\t<span :class="option.icon || \'fas fa-chevron-square-right\'"></span>\r\n\t\t\t\t\t\t\t\t<span>{{option.text}}</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button class="option normal" v-if="state.path_fill" v-on:click.stop.prevent="fire(setNamePointOption, $event)">\r\n\t\t\t\t\t\t\t\t<span class="fal fa-code-commit"></span>\r\n\t\t\t\t\t\t\t\t<span>Set Name Point</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button class="option normal" v-if="state.path_fill" v-on:click.stop.prevent="fire(addPointOption, $event)">\r\n\t\t\t\t\t\t\t\t<span class="fas fa-code-commit"></span>\r\n\t\t\t\t\t\t\t\t<span>Add Point</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<div class="set-distance flex h" v-if="player.master && state.measuring[location.id] && state.measuring[location.id].length === 2">\r\n\t\t\t\t\t\t\t\t<input type="number" v-model.number="state.distance" v-on:keyup.enter="fire(setMeasurements, $event)"/>\r\n\t\t\t\t\t\t\t\t<select v-model.number="state.distance_unit">\r\n\t\t\t\t\t\t\t\t\t<option v-for="unit in lengths" :value="unit.symbol">{{unit.symbol}}</option>\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<input type="text" v-model="state.alter" v-if="player.master"/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="action-suboptions" :class="submenuClasses()">\r\n\t\t\t\t\t\t<div class="grouped flex v" v-if="action && action.options">\r\n\t\t\t\t\t\t\t<button class="option normal" v-for="option in action.options" v-on:click.stop.prevent="fire(option, $event)">\r\n\t\t\t\t\t\t\t\t<span :class="option.icon || \'fas fa-chevron-square-right\'"></span>\r\n\t\t\t\t\t\t\t\t<span>{{option.text}}</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<img :src="sourceImage" draggable="false" />\r\n\t\t\t</div>\r\n\t\t\t<img class="background-image" :src="backgroundImage" v-if="backgroundImage" draggable="false" />\r\n\t\t</div>\r\n\t</div>\r\n\r\n\r\n\t<div class="menu" :class="menuOpen?\'open\':\'closed\'">\r\n\t\t<button class="control toggle" v-on:click="toggleMenu()">\r\n\t\t\t\x3c!-- span class="rotational-icon fas fa-caret-square-down" :class="menuOpen?\'fa-caret-square-up\':\'fa-caret-square-down\'"></span --\x3e\r\n\t\t\t<span class="rotational-icon fas fa-caret-square-down" :class="menuOpen?\'rot180\':\'\'"></span>\r\n\t\t</button>\r\n\t\t<div class="menu-items flow-v">\r\n\t\t\t<div class="search flex h">\r\n\t\t\t\t<div class="text" :title="searchError">\r\n\t\t\t\t\t<input class="search-text" type="text" v-model="state.search" v-on:keyup.enter="searchMap(state.search)" v-on:keyup="filterPOIs(state.search)" v-on:keyup.escape="clearSearch()" v-on:keyup.esc="clearSearch()" :class="searchError?\'search-error\':\'\'"/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button class="control action" v-on:click="togglePOIFiltering()" title="Hide locations that do not match from the display">\r\n\t\t\t\t\t<span class="icon" :class="state.poiFiltering?\'fas fa-map-marker-slash\':\'fas fa-map-marker\'"></span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="control action" v-on:click="searchMap(state.search)" title="Center on the first matching location found">\r\n\t\t\t\t\t<span class="icon far fa-search-location"></span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div class="control-row flex h fill" v-for="row in menuItems">\r\n\t\t\t\t<button class="control grow-3" v-if="!row.length && row.length !== 0 && (!row.conditional || row.conditional())" v-on:click="processAction(row, $event)" :class="row.action">\r\n\t\t\t\t\t<span class="icon" :class="row.icon"></span>\r\n\t\t\t\t\t<span class="text">{{row.text}}</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="control grow-3" v-if="row.length" v-for="menuItem in row" v-on:click="processAction(menuItem, $event)" :class="menuItem.action">\r\n\t\t\t\t\t<span class="icon" :class="menuItem.icon"></span>\r\n\t\t\t\t\t<span class="text">{{menuItem.text}}</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div class="flex h fill">\r\n\t\t\t\t<button class="control follow grow-3" v-on:click="processAction(menuItems.labelItem, $event)">\r\n\t\t\t\t\t<span class="icon fal" :class="state.labels?\'fa-check-square\':\'fa-square\'"></span>\r\n\t\t\t\t\t<span class="text">{{menuItems.labelItem.text}}</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="control follow grow-3" v-on:click="processAction(menuItems.markerItem, $event)">\r\n\t\t\t\t\t<span class="icon fal" :class="state.markers?\'fa-check-square\':\'fa-square\'"></span>\r\n\t\t\t\t\t<span class="text">{{menuItems.markerItem.text}}</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div class="flex h fill">\r\n\t\t\t\t<button class="control follow grow-3" v-on:click="processAction(menuItems.followItem, $event)">\r\n\t\t\t\t\t<span class="icon fal" :class="state.follow?\'fa-check-square\':\'fa-square\'"></span>\r\n\t\t\t\t\t<span class="text">{{menuItems.followItem.text}}</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="control follow grow-3" v-on:click="processAction(menuItems.fullscreen, $event)">\r\n\t\t\t\t\t<span class="icon fal" :class="state.fullscreen?\'fa-check-square\':\'fa-square\'"></span>\r\n\t\t\t\t\t<span class="text">{{menuItems.fullscreen.text}}</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<select class="control master" v-model="state.master_view" v-if="player.master" v-on:change="filterPOIs()">\r\n\t\t\t\t<option value="">Player Character</option>\r\n\t\t\t\t<option value="master">Master</option>\r\n\t\t\t\t<option v-for="entity in universe.indexes.entity.listing" :value="entity.id">{{entity.name}}</option>\r\n\t\t\t</select>\r\n\t\t\t<select class="control master" v-model="state.generate_location" v-if="player.master">\r\n\t\t\t\t<option value="">Hide Creator</option>\r\n\t\t\t\t<option value="star_system">Making Star Systems</option>\r\n\t\t\t\t<option value="station">Making Stations</option>\r\n\t\t\t\t<option value="planet">Making Planets</option>\r\n\t\t\t\t<option value="moon">Making Moons</option>\r\n\t\t\t\t<option value="city">Making Cities</option>\r\n\t\t\t\t<option value="marker">Making Marker</option>\r\n\t\t\t</select>\r\n\t\t\t<select class="control master" v-model="state.path_fill" v-if="player.master">\r\n\t\t\t\t<option value="">No Modify</option>\r\n\t\t\t\t<option v-for="locale in locales" :value="locale.id">{{locale.name}}</option>\r\n\t\t\t</select>\r\n\t\t\t<select class="control master" v-model="state.view_party" v-if="player.master">\r\n\t\t\t\t<option value="">No Party Stats</option>\r\n\t\t\t\t<option v-for="party in parties" :value="party.id">{{party.name}}</option>\r\n\t\t\t</select>\r\n\t\t\t<div class="measuring-total length" v-if="totalLength">\r\n\t\t\t\t{{totalLength}}\r\n\t\t\t</div>\r\n\t\t\t<div class="measuring-total length" v-if="totalTime">\r\n\t\t\t\t{{totalTime}}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class="legend" :class="legendOpen?\'open\':\'closed\'" v-if="legendDisplayed && locales.length">\r\n\t\t<button class="control toggle" v-on:click="toggleLegend()">\r\n\t\t\t<span class="rotational-icon fas fa-caret-square-up" :class="legendOpen?\'rot180\':\'\'"></span>\r\n\t\t</button>\r\n\t\t<div class="menu-items flow-v">\r\n\t\t\t<div class="legend-list flex v fill">\r\n\t\t\t\t<button class="control follow grow-3" v-for="locale in locales" v-on:click="toggleLocale(locale)">\r\n\t\t\t\t\t<span class="icon fal" :class="state.hidden_legend[locale.id]?\'fa-square\':\'fa-check-square\'"></span>\r\n\t\t\t\t\t<span class="icon far" :class="locale.contained?\'fa-draw-polygon\':\'fa-horizontal-rule\'" :style="\'color: \' + locale.color + \';\'"></span>\r\n\t\t\t\t\t<span class="text">{{locale.name}}</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"components/widget/configure.html":return'<div class="rs-component widget-configure">\r\n\t<div class="configuration">\r\n\t\t<div class="field" v-for="field in contents.configurations">\r\n\t\t\t<rs-field :root="state" :field="field" :key="field.property"></rs-field>\r\n\t\t</div>\r\n\t</div>\r\n</div>';case"components/widget.html":return'<div class="rs-component widget-controls">\r\n\t<div class="flex v control-pane">\r\n\t\t<button class="widget-ctrl toggle" v-on:click="toggle()">\r\n\t\t\t<span class="far" :class="state.closed?\'fa-expand-alt rot0\':\'fa-compress-alt rot90\'"></span>\r\n\t\t</button>\r\n\t</div>\r\n\t<div class="flex h center control-bar">\r\n\t\t<span class="widget-title">\r\n\t\t\t<span>{{contents.title || contents.declaration}}</span>\r\n\t\t\t<span v-if="showName()">( {{shownName()}} )</span>\r\n\t\t</span>\r\n\t\t<button class="widget-ctrl config" v-on:click="config()" v-if="contents.configurations">\r\n\t\t\t<span class="far fa-cogs"></span>\r\n\t\t</button>\r\n\t\t<button class="widget-ctrl toggle" v-on:click="toggle()">\r\n\t\t\t<span class="far" :class="state.closed?\'fa-expand-alt rot0\':\'fa-compress-alt rot90\'"></span>\r\n\t\t</button>\r\n\t</div>\r\n</div>';case"pages/about.html":return'<div class="rs-page page-about">\r\n\t<div class="contents">\r\n\t\t<h1>About the RSSWX Project</h1>\r\n\t\t<p>This application is a fan project created by Refuge Systems as a utility to help with playing the Fantasy Flight Games (FFG) Star Wars Table Top Role Playing Game (TTRPG).</p>\r\n\r\n\t\t<p>See the project GitHub pages for more information:</p>\r\n\t\t<ul>\r\n\t\t\t<li>User Interface: <a href="https://github.com/RefugeSystems/rssw-client" target="_blank">rssw-client</a></li>\r\n\t\t\t<li>Server: <a href="https://github.com/RefugeSystems/rssw-server" target="_blank">rssw-server</a></li>\r\n\t\t</ul>\r\n\r\n\t\t<h2>Notable Libraries Used</h2>\r\n\t\t<p>Below is a non-comprehensive list of software and other packages notably in use by this application. In the future this will be generated and more comprehensive.</p>\r\n\t\t<h3>Software Libraries</h3>\r\n\t\t<ul>\r\n\t\t\t<li>\r\n\t\t\t\t<a href="https://vuejs.org/" target="_blank">VueJS</a> V2 for base component handling\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<a href="https://github.com/showdownjs/showdown" target="_blank">Showdown</a> for Markdown Text processing\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<a href="https://cytoscape.org/" target="_blank">Cytoscape</a> for network visualizations\r\n\t\t\t</li>\r\n\t\t\t<ul>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<a href="https://github.com/cytoscape/cytoscape.js-cola" target="_blank">ColaJS Plug-in</a> for force directed layout\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\t<li>\r\n\t\t\t\t<a href="https://hammerjs.github.io/" target="_blank">HammerJS</a> for touch support\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<a href="https://github.com/d3/d3" target="_blank">D3</a> for graph rending\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<a href="https://github.com/leizongmin/js-xss" target="_blank">XSS</a> for client-side cross-site scripting protection\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<a href="https://jquery.com/" target="_blank">JQuery</a> because this is a web application\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\r\n\t\t<h3>Font Libraries</h3>\r\n\t\t<ul>\r\n\t\t\t<li>\r\n\t\t\t\t<a href="https://fontawesome.com/" target="_blank">Font Awesome</a>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<a href="http://starwarsglyphicons.com/cheatsheet.phtml" target="_blank">Star Wars Glyph Icons</a>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<a href="https://nagoshiashumari.github.io/Rpg-Awesome/" target="_blank">RPG Awesome</a>\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<a href="https://github.com/geordanr/xwing-miniatures-font/" target="_blank">XWing Miniatures Font</a>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\r\n\t\t<h3>Code Snippet Credits</h3>\r\n\t\t<p>Below is a list of credits for code snippets that are note-worthy for inspiration or source.</p>\r\n\t\t<ul>\r\n\t\t\t<li>\r\n\t\t\t\t<a href="https://donjon.bin.sh/code/name/" target="_blank">https://donjon.bin.sh</a> for the base Name Generator code\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\r\n\t\t<h2>Possible Useful Sites</h2>\r\n\t\t<p>Below is a list of sites that may be useful when using this tool, or as alternatives to it.</p>\r\n\t\t<ul>\r\n\t\t\t<li>\r\n\t\t\t\t<a href="https://azgaar.github.io/Fantasy-Map-Generator/" target="_blank">Azgaar\'s Fantasy Map Generator</a> for generating random worlds\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<a href="http://fantasycities.watabou.ru/" target="_blank">Medieval Fantasy City Generator</a> for generating random cities\r\n\t\t\t</li>\r\n\t\t\t<li>\r\n\t\t\t\t<a href="https://www.glyphrstudio.com/online/" target="_blank">Glyphr Studio Online</a> for creating custom font families to include and use witin the webapp\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t</div>\r\n</div>\r\n';case"pages/account.html":return'<div class="rs-page rs-component page-account">\n\t<div class="information-container">\n\t\t<h1>Account</h1>\n\t\t\n\t\t<h2>Information</h2>\n\t\t<table class="account-data">\n\t\t\t<tr>\n\t\t\t\t<td class="labels align-right">\n\t\t\t\t\t<span>Username</span>\n\t\t\t\t</td>\n\t\t\t\t<td class="actions align-center">\n\t\t\t\t\t<span class="control fas fa-user"></span>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<span>{{player.id}}</span>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td class="labels align-right">\n\t\t\t\t\t<span>Playing As</span>\n\t\t\t\t</td>\n\t\t\t\t<td class="actions align-center">\n\t\t\t\t\t<span class="control fal fa-user-ninja"></span>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<span>{{modeling.entity?modeling.entity.name:"No One"}}</span>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr v-if="player.master">\n\t\t\t\t<td class="labels align-right">\n\t\t\t\t\t<span>Game Master</span>\n\t\t\t\t</td>\n\t\t\t\t<td class="actions align-center">\n\t\t\t\t\t<span class="control fas fa-chess-king"></span>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<span>{{player.master?"Yes":"No"}}</span>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr v-for="field in fields">\n\t\t\t\t<td class="labels align-right">\n\t\t\t\t\t<span>{{labeling[field] || field.capitalize()}}</span>\n\t\t\t\t</td>\n\t\t\t\t<td class="actions align-center">\n\t\t\t\t\t<button class="control" v-on:click="editting[field]?sendField(field):editField(field)">\n\t\t\t\t\t\t<span :class="modeling[field] === null?\'fas fa-spinner fa-pulse\':(editting[field]?\'far fa-check\':\'far fa-edit\')"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</td>\n\t\t\t\t<td class="data">\n\t\t\t\t\t<span v-if="!editting[field]">{{getFieldValue(field)}}</span>\n\t\t\t\t\t<input v-if="editting[field]" :id="\'fieldinput-\' + field" :type="field===\'passcode\'?\'password\':\'text\'" v-model="modeling[field]" v-on:keyup.enter="sendField(field)"/>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr v-for="field in toggles">\n\t\t\t\t<td class="labels align-right">\n\t\t\t\t\t\n\t\t\t\t</td>\n\t\t\t\t<td class="actions align-center">\n\t\t\t\t\t<button class="control" v-on:click="toggle(field)">\n\t\t\t\t\t\t<span :class="modeling[field] === null?\'fas fa-spinner fa-pulse\':(modeling[field]?\'far fa-check-square\':\'far fa-square\')"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</td>\n\t\t\t\t<td class="data">\n\t\t\t\t\t<span>{{title[field]}}</span>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\t\n\t\t<h2>Description</h2>\n\t\t<div class="description rs-white" v-if="modeling.mdDescription" v-html="modeling.mdDescription">\n\t\t</div>\n\t\t<div class="description rs-white" v-if="!modeling.mdDescription">\n\t\t\t<p>No player description present.</p> \n\t\t</div>\n\t\t\n\t\t<h2>Stats</h2>\n\t\t<p>Coming Soon...</p>\n\t</div>\n</div>\n';case"pages/home.html":return'<div class="rs-page page-home">\r\n\t<div class="login prompt" v-if="state === 0">\r\n\t\t<div class="boxed">\r\n\t\t\t<rs-connect v-on:connect="connect($event)" v-on:message="receiveMessage($event)" :universe="universe"></rs-connect>\r\n\t\t\t<div class="message-content system-component" v-if="message" :class="messageClass">\r\n\t\t\t\t<div class="message-heading" v-if="messageHeading">\r\n\t\t\t\t\t<span :class="messageIcon" v-if="messageIcon"></span>\r\n\t\t\t\t\t<span>{{messageHeading}}</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="message-text">{{message}}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="login waiting" v-if="0 < state && state < 10">\r\n\t\t<div class="titling">\r\n\t\t\t<span v-if="state === 1">Connecting</span>\r\n\t\t\t<span v-if="state === 2">Loading</span>\r\n\t\t</div>\r\n\t\t<div class="status">\r\n\t\t\t<span class="far fa-spinner fa-pulse"></span>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="system-display active" v-if="state === 10">\r\n\t\t<system-menu :universe="universe" :user="user"></system-menu>\r\n\t\t<router-view class="system-view" :universe="universe" :user="user"></router-view>\r\n\t\t<system-info :universe="universe" :user="user"></system-info>\r\n\t\t<message-panel :universe="universe" :user="user"></message-panel>\r\n\t</div>\r\n</div>\r\n';case"pages/main.html":return'<div class="">\r\n</div>\r\n';case"pages/noun/controls.html":return'<div class="rs-page page-noun_controls">\r\n\t<div class="construction">\r\n\t\t<div class="building">\r\n\t\t\t<rs-nouns :universe="universe" :player="player" :built="built" v-on:model="changeModel($event)" v-on:change="rerender()"></rs-nouns>\r\n\t\t</div>\r\n\t\t<div class="output rs-component" v-if="modeling">\r\n\t\t\t<h2 class="nowrap">\r\n\t\t\t\t<span :class="modeling.icon"></span>\r\n\t\t\t\t<span>{{modeling.name}}</span>\r\n\t\t\t</h2>\r\n\t\t\t<rs-object-info v-on:click="processRequest($event)" :record="modeling" :universe="universe" :player="player" :options="infoOptions"></rs-object-info>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"pages/rssw/base.html":return'<div class="rssw-page page-base" v-if="entity">\r\n\t<rssw-character-info :character="entity" :user="user" :universe="universe"></rssw-character-info>\r\n\t<rssw-character-board :character="entity" :user="user" :universe="universe"></rssw-character-board>\r\n\t\r\n\t<rs-container :entity="entity" :user="user" :universe="universe" :contents="widget" v-for="widget in widgets" :key="widget.id"></rs-container>\r\n</div>\r\n';case"pages/rssw/character/builder.html":return'<div class="rssw-page rs-component character-builder">\r\n\t<div class="stage species" v-if="stage === 3">\r\n\t\t<div class="heading">\r\n\t\t\t<h1>Character Details</h1>\r\n\t\t</div>\r\n\t\t<div class="details">\r\n\t\t\t<div class="padding left"></div>\r\n\t\t\t<div class="blocks">\r\n\t\t\t\t<div class="block text">\r\n\t\t\t\t\t<label for="entity-name">\r\n\t\t\t\t\t\t<span>Name:</span>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<input type="text" v-model="building.name" id="entity-name"/>\r\n\t\t\t\t\t<div class="flex h centered" v-if="racialNaming">\r\n\t\t\t\t\t\t<button class="simple flat" v-on:click="randomName()">\r\n\t\t\t\t\t\t\t<span class="fas fa-retweet"></span>\r\n\t\t\t\t\t\t\t<span>Random</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button class="simple flat" v-on:click="generateName()">\r\n\t\t\t\t\t\t\t<span class="fas fa-random"></span>\r\n\t\t\t\t\t\t\t<span>Generate</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="block text">\r\n\t\t\t\t\t<label for="entity-description">\r\n\t\t\t\t\t\t<span>Description:</span>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<textarea v-model="building.description" id="entity-description"></textarea>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="block text">\r\n\t\t\t\t\t<label for="entity-obligations">\r\n\t\t\t\t\t\t<span>Obligations:</span>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<textarea v-model="building.obligations" id="entity-obligations"></textarea>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="block text">\r\n\t\t\t\t\t<label for="entity-motivations">\r\n\t\t\t\t\t\t<span>Motivations:</span>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<textarea v-model="building.motivations" id="entity-motivations"></textarea>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="block selection" v-if="rankRaceOptions.length !== 0">\r\n\t\t\t\t\t<div class="block-title">Racial Ranks</div>\r\n\t\t\t\t\t<div class="block-subtitle">Choose {{race.skills_starting_count}} ({{race.skills_starting_count - rankedRace.length}} Remaining)</div>\r\n\t\t\t\t\t<div class="option" v-for="skill in rankRaceOptions">\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<input type="checkbox" v-model="rankedRace" :value="skill" />\r\n\t\t\t\t\t\t\t<span>{{skill.name}}</span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="block selection">\r\n\t\t\t\t\t<div class="block-title">Career Ranks</div>\r\n\t\t\t\t\t<div class="block-subtitle">Choose 4 ({{4 - rankedCareer.length}} Remaining)</div>\r\n\t\t\t\t\t<div class="option" v-for="skill in rankCareerOptions">\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<input type="checkbox" v-model="rankedCareer" :value="skill" />\r\n\t\t\t\t\t\t\t<span>{{skill.name}}</span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="block selection">\r\n\t\t\t\t\t<div class="block-title">Specialization Ranks</div>\r\n\t\t\t\t\t<div class="block-subtitle">Choose 1 ({{1 - rankedSpecialization.length}} Remaining)</div>\r\n\t\t\t\t\t<div class="option" v-for="skill in rankSpecializationOptions">\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<input type="checkbox" v-model="rankedSpecialization" :value="skill" />\r\n\t\t\t\t\t\t\t<span>{{skill.name}}</span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="padding right"></div>\r\n\t\t</div>\r\n\t\t<button v-on:click="selected()" class="complete">\r\n\t\t\t<span>Continue</span>\r\n\t\t\t<span class="fas fa-chevron-circle-right"></span>\r\n\t\t</button>\r\n\t</div>\r\n\t<div class="stage species" v-if="stage === 0">\r\n\t\t<div class="heading">\r\n\t\t\t<h1>Select Species</h1>\r\n\t\t</div>\r\n\t\t\x3c!-- <rs-cards v-on:selected="selected($event)" :corpus="base.species" :state="state" :universe="universe" :user="player" labeling="Species"></rs-cards> --\x3e\r\n\t\t<rs-panel-select v-on:selected="selected($event)" :corpus="base.species" :summary="summary.species" :state="state.species" :universe="universe" :user="user" :fields="fields.species">\r\n\t\t\t<div class="righted flex h" slot="controls" slot-scope="{record}">\r\n\t\t\t\t<button class="simple flat action" v-on:click="showInfo(record)">\r\n\t\t\t\t\t<span class="fas fa-info-circle"></span>\r\n\t\t\t\t\t<span>Info</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="simple flat action" v-on:click="selected(record)">\r\n\t\t\t\t\t<span class="fas fa-check-square"></span>\r\n\t\t\t\t\t<span>Select</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</rs-panel-select>\r\n\t</div>\r\n\t<div class="stage careers" v-else-if="stage === 1">\r\n\t\t<div class="heading">\r\n\t\t\t<h1>Select Career</h1>\r\n\t\t</div>\r\n\t\t\x3c!-- <rs-cards class="cards" v-on:selected="selected($event)" :corpus="base.careers" :state="state" :universe="universe" :user="player" labeling="Career"></rs-cards> --\x3e\r\n\t\t<rs-panel-select v-on:selected="selected($event)" :corpus="base.careers" :summary="summary.careers" :state="state.careers" :universe="universe" :user="user" :fields="fields.careers">\r\n\t\t\t<div class="righted flex h" slot="controls" slot-scope="{record}">\r\n\t\t\t\t<button class="simple flat action" v-on:click="showInfo(record)">\r\n\t\t\t\t\t<span class="fas fa-info-circle"></span>\r\n\t\t\t\t\t<span>Info</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="simple flat action" v-on:click="selected(record)">\r\n\t\t\t\t\t<span class="fas fa-check-square"></span>\r\n\t\t\t\t\t<span>Select</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</rs-panel-select>\r\n\t</div>\r\n\t<div class="stage specializations" v-else-if="stage === 2">\r\n\t\t<div class="heading">\r\n\t\t\t<h1>Select Specialization</h1>\r\n\t\t</div>\r\n\t\t\x3c!-- <rs-cards v-on:selected="selected($event)" :corpus="base.specializations" :state="state" :universe="universe" :user="player" labeling="Specialization"></rs-cards> --\x3e\r\n\t\t<rs-panel-select v-on:selected="selected($event)" :corpus="base.specializations" :summary="summary.careers" :state="state.careers" :universe="universe" :user="user" :fields="fields.careers">\r\n\t\t\t<div class="righted flex h" slot="controls" slot-scope="{record}">\r\n\t\t\t\t<button class="simple flat action" v-on:click="showInfo(record)">\r\n\t\t\t\t\t<span class="fas fa-info-circle"></span>\r\n\t\t\t\t\t<span>Info</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="simple flat action" v-on:click="selected(record)">\r\n\t\t\t\t\t<span class="fas fa-check-square"></span>\r\n\t\t\t\t\t<span>Select</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</rs-panel-select>\r\n\t</div>\r\n\t<div class="stage review" v-else-if="stage === 4">\r\n\t\t<div class="heading">\r\n\t\t\t<h1>Review Selections: <span class="rs-orange">{{building.name}}</span></h1>\r\n\t\t</div>\r\n\t\t\x3c!-- <rs-cards v-on:selected="selected($event)" :corpus="choices" :state="state" :universe="universe" :user="player" selection="Confirm"></rs-cards> --\x3e\r\n\t\t<rs-panel-select v-on:selected="selected($event)" :corpus="choices" :summary="summary.careers" :state="state.careers" :universe="universe" :user="user" :fields="fields.careers">\r\n\t\t\t<div class="righted flex h" slot="controls" slot-scope="{record}">\r\n\t\t\t\t<button class="simple flat action" v-if="record.id" v-on:click="showInfo(record)">\r\n\t\t\t\t\t<span class="fas fa-info-circle"></span>\r\n\t\t\t\t\t<span>Info</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="simple flat action" v-on:click="selected(record)">\r\n\t\t\t\t\t<span class="fas fa-check-square"></span>\r\n\t\t\t\t\t<span>Confirm All</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</rs-panel-select>\r\n\t</div>\r\n\t<button v-on:click="back()" class="regress" v-if="stage > 0 && stage < 5">\r\n\t\t<span class="fas fa-chevron-circle-left"></span>\r\n\t\t<span>Back</span>\r\n\t</button>\r\n\t<div class="stage creating" v-else-if="stage === 5">\r\n\t\t<div class="heading">\r\n\t\t\t<h1>\r\n\t\t\t\t<span class="fas fa-spinner fa-pulse"></span>\r\n\t\t\t\t<span>Creating</span>\r\n\t\t\t</h1>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="stage finalize" v-else-if="stage === 6">\r\n\t\t<div class="heading">\r\n\t\t\t<h1>\r\n\t\t\t\t<span>Finalize</span>\r\n\t\t\t</h1>\r\n\t\t</div>\r\n\t\t<div class="cards">\r\n\t\t\t<rssw-character-info :character="building" :user="user" :universe="universe"></rssw-character-info>\r\n\t\t\t<rssw-character-board :character="building" :user="user" :universe="universe"></rssw-character-board>\r\n\t\t\t<rssw-character-stats :character="building" :user="user" :universe="universe"></rssw-character-stats>\r\n\t\t\t<rssw-character-skills :character="building" :user="user" :universe="universe"></rssw-character-skills>\r\n\t\t</div>\r\n\t\t<button v-on:click="selected()" class="complete">\r\n\t\t\t<span class="fas fa-check-circle"></span>\r\n\t\t\t<span>Complete</span>\r\n\t\t</button>\r\n\t</div>\r\n</div>\r\n';case"pages/rssw/character.html":return'<div class="rssw-page page-dashboard page-characters">\r\n\t\x3c!-- \r\n\t<rssw-character-info :character="entity" :entity="entity" :user="user" :universe="universe"></rssw-character-info>\r\n\t<rssw-character-board :character="entity" :entity="entity" :user="user" :universe="universe"></rssw-character-board>\r\n\t<rssw-character-stats :character="entity" :entity="entity" :user="user" :universe="universe"></rssw-character-stats>\r\n\t<rssw-character-skills :character="entity" :entity="entity" :user="user" :universe="universe"></rssw-character-skills>\r\n\t --\x3e\r\n\t \r\n\t<div class="entity-column" v-if="entity">\r\n\t\t<rs-container :entity="entity" :user="user" :universe="universe" :contents="widget" v-for="(widget, $index) in widgets" :key="widget.id" :index="$index"></rs-container>\r\n\t</div>\r\n\t<div class="entity-column" v-for="addchar in additional_characters">\r\n\t\t<rs-container :entity="addchar" :user="user" :universe="universe" :contents="widget" v-for="(widget, $index) in widgets" :key="widget.id" :index="$index"></rs-container>\r\n\t</div>\r\n</div>\r\n';case"pages/rssw/combat.html":return'<div class="rssw-page page-combat">\r\n\t<div v-if="!player.master" class="party-info">\r\n\t\t<h1>Forbidden</h1>\r\n\t\t<p>Master Screen is for Game Masters only</p>\r\n\t</div>\r\n\t<div v-if="player.master" class="rs-component component-container">\r\n\t\t<div class="control-panel flex h flush height">\r\n\t\t\t<div class="event-list flex v flush height">\r\n\t\t\t\t<h2>Combat Events</h2>\r\n\t\t\t\t<rs-listing class="" :list="events" :universe="universe" :user="user" :emit="true" :active="$route.params.oid" empty="No Combat Events" placeholder="Filter Events..." v-on:open="openEvent($event)"></rs-listing>\r\n\t\t\t</div>\r\n\t\t\t<div v-if="event" class="event-details">\r\n\t\t\t\t<rssw-combat-view class="flush height" :event="event" :universe="universe" :user="user"></rssw-combat-view>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"pages/rssw/dashboard.html":return'<div class="rssw-page page-dashboard rs-component">\r\n\t<div v-if="!$route.params.oid" class="rs-component">\r\n\t\t<div class="inline flex h">\r\n\t\t\t<div class="inline flex v entities">\r\n\t\t\t\t<div class="title">\r\n\t\t\t\t\t{{player.name}} Overview\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class="self flex h">\r\n\t\t\t\t\t<button class="ctrl rs-light-blue" v-on:click="toggleSelect(self)">\r\n\t\t\t\t\t\t<span class="far ctrl-icon" :class="isSelected(self)?\'fa-check-square\':\'fa-square\'"></span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<router-link class="navigation-button" v-if="self" :to="\'/dashboard/\' + self.classification + \'/\' + self.id">\r\n\t\t\t\t\t\t<span class="link-icon" :class="self.icon || \'fas fa-user-circle\'"></span>\r\n\t\t\t\t\t\t<span class="link-label">{{self.name}}</span>\r\n\t\t\t\t\t</router-link>\r\n\t\t\t\t\t<router-link class="navigation-button" v-if="!self" to="/construct/character">\r\n\t\t\t\t\t\t<span class="link-icon fas fa-user-plus"></span>\r\n\t\t\t\t\t\t<span class="link-label">Make Yourself</span>\r\n\t\t\t\t\t</router-link>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class="control">\r\n\t\t\t\t\t<div class="title">\r\n\t\t\t\t\t\tOthers\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="entities">\r\n\t\t\t\t\t\t<div class="flex h" v-for="entity in owned" v-if="!self || entity.id !== self.id">\r\n\t\t\t\t\t\t\t<button class="ctrl rs-light-blue" v-on:click="toggleSelect(entity)">\r\n\t\t\t\t\t\t\t\t<span class="far ctrl-icon" :class="isSelected(entity)?\'fa-check-square\':\'fa-square\'"></span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<router-link class="entity navigation-button" :to="\'/dashboard/\' + entity.classification + \'/\' + entity.id" :key="entity.id">\r\n\t\t\t\t\t\t\t\t<span class="link-icon" :class="entity.icon || \'fas fa-user-circle\'"></span>\r\n\t\t\t\t\t\t\t\t<span class="link-label">{{entity.name}}</span>\r\n\t\t\t\t\t\t\t</router-link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="inline flex v lefted dashboards">\r\n\t\t\t\t<button class="ctrl rs-light-blue dashboard" v-if="canOpenDashboard()" v-on:click="openDashboard(\'character\')">\r\n\t\t\t\t\t<span class="fas fa-external-link"></span>\r\n\t\t\t\t\t<span>Open Character Dashboard</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="ctrl rs-light-blue dashboard" v-if="canOpenDashboard()" v-on:click="openDashboard(\'ship\')">\r\n\t\t\t\t\t<span class="fas fa-external-link"></span>\r\n\t\t\t\t\t<span>Open Vehicle Dashboard</span>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<router-view class="system-view opened" :universe="universe" :user="player" :class="$route.params.oid?\'loaded\':\'\'"></router-view>\r\n</div>\r\n';case"pages/rssw/hangar.html":return'<div class="rssw-page page-dashboard">\r\n\r\n</div>\r\n';case"pages/rssw/journal.html":return'<div class="rssw-page page-journal">\r\n\t<rssw-journal-view :universe="universe" :player="player" :user="user"></rssw-journal-view>\r\n</div>\r\n';case"pages/rssw/locality.html":return'<div class="rssw-page page-locality">\r\n\t<div class="event-container">\r\n\t\t<div class="event-listing listing-container" v-for="event in events">\r\n\t\t\t<rssw-fighting-view :event="event" :universe="universe" :user="user" :player="player"></rssw-fighting-view>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="listing-container">\r\n\t\t<rs-listing class="" :list="entities" :universe="universe" :user="user" :emit="true" :active="activeEntity?activeEntity.id:null" placeholder="Filter Entities..." v-on:open="focusEntity($event)"></rs-listing>\r\n\t</div>\r\n\t<div class="listing-container entity-container">\r\n\t\t<h3 class="titling">{{activeEntity?"Near " + activeEntity.name:"No Entity"}}</h3>\r\n\t\t<div class="subtitle" v-if="activeLocation" v-on:click="showInfo(activeLocation)">\r\n\t\t\t<span :class="activeLocation.icon"></span>\r\n\t\t\t<span>{{activeLocation.name}}</span>\r\n\t\t\t<button class="info flat fas fa-info-circle"></button>\r\n\t\t</div>\r\n\t\t<div class="subtitle" v-if="currentlyInside" v-on:click="showInfo(currentlyInside)">\r\n\t\t\t<span :class="currentlyInside.icon"></span>\r\n\t\t\t<span>{{currentlyInside.name}}</span>\r\n\t\t\t<button class="info flat fas fa-info-circle"></button>\r\n\t\t</div>\r\n\t\t<div class="entity-container">\r\n\t\t\t<rs-listing class="" :list="nearBy" :universe="universe" :user="user" :checker="isOwner" placeholder="Filter Near By..." :infobase="activeEntity"></rs-listing>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"pages/rssw/map.html":return'<div class="rs-page map rssw">\r\n\t<rs-viewer v-if="location" :user="user" :player="player" :universe="universe" :location="location"></rs-viewer>\r\n\t<div class="top-warning" v-if="!location">\r\n\t\t<div class="warning" v-if="!location && player.master">\r\n\t\t\t<div>\r\n\t\t\t\t<span class="fas fa-exclamation-triangle"></span>\r\n\t\t\t\t<span>No Location Found with ID "location:universe"</span>\r\n\t\t\t</div>\r\n\t\t\t<router-link class="entity navigation-button action simple" to="/nouns/location/location:universe">\r\n\t\t\t\t<span>Click to go to Editor</span>\r\n\t\t\t</router-link>\r\n\t\t</div>\r\n\t\t<div class="warning" v-if="!location && !player.master">\r\n\t\t\t<span>No Universe yet Defined</span>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"pages/rssw/master.html":return'<div class="rssw-page page-master" :class="state.constrained?\'constrained\':\'\'">\r\n\t<div v-if="!player.master" class="party-info">\r\n\t\t<h1>Forbidden</h1>\r\n\t\t<p>Master Screen is for Game Masters only</p>\r\n\t</div>\r\n\t<div v-if="player.master" class="rs-component">\r\n\t\t<div class="controls flex h">\r\n\t\t\t<div class="control list rolls">\r\n\t\t\t\t<div class="control difficulty-dice">\r\n\t\t\t\t\t<div class="output flex h wrap">\r\n\t\t\t\t\t\t<rssw-dice-result :universe="universe" :user="user" class="roll-container rolled current" :roll="rolling"></rssw-dice-result>\r\n\t\t\t\t\t\t<button class="roll-container rolled" v-for="rolled in history" v-on:click="dismissRolled(rolled)">\r\n\t\t\t\t\t\t\t<rssw-dice-result v-on:dismiss="dismissRolled(rolled)" :universe="universe" :user="user" class="rolling-viewed" :roll="rolled"></rssw-dice-result>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="roll-options flex h wrap">\r\n\t\t\t\t\t\t<button class="roll-container rolling" :class="count[diff]?\'rsbd-light-red rs-border two\':\'\'" v-on:click="rollDifficulty(diff)" v-for="diff in difficulties">\r\n\t\t\t\t\t\t\t<rssw-dice-view :universe="universe" :user="user" class="rolling-view" :roll="difficulty[diff]" :labeling="diff + \' [\' + count[diff] + \']\'" :stacked="true"></rssw-dice-view>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button class="roll-container rolling" v-on:click="clearRolls(true)">\r\n\t\t\t\t\t\tClear Past Rolls\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<select class="roll-container rolling" v-model="state.historyLength">\r\n\t\t\t\t\t\t<option v-for="len in maxLength" :value="len">{{len}}</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t\t<button class="flat rs-yellow far constrain" :class="state.constrained?\'fa-check-square\':\'fa-square\'" v-on:click="toggleConstrained()"></button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="control destiny">\r\n\t\t\t\t\t<rssw-tokens-destiny :universe="universe"></rssw-tokens-destiny>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="control results fill">\r\n\t\t\t\t\t<rssw-master-results v-on:selecting="receiveRoll($event)" :universe="universe" :user="user" :player="player"></rssw-master-results>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="control entity-list list">\r\n\t\t\t\t<div class="title">\r\n\t\t\t\t\t<input class="filter" v-model="state.search" placeholder="Filter Entities..." />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="entities list-data">\r\n\t\t\t\t\t<button class="listed entity navigation-button" v-for="entity in universeEntities" :to="\'/universe/\' + entity.classification + \'/\' + entity.id" v-on:click="showInfo(entity)" :key="entity.id" v-if="filteredEntity(entity)">\r\n\t\t\t\t\t\t<span class="link-icon" :class="entity.icon || \'fas fa-user-circle\'"></span>\r\n\t\t\t\t\t\t<span class="far fa-eye-slash rs-lightblue" v-if="entity.hidden"></span>\r\n\t\t\t\t\t\t<span class="far fa-ban rs-lightred" v-if="entity.obscured"></span>\r\n\t\t\t\t\t\t<span class="fas fa-sticky-note rs-green" v-if="entity.screen"></span>\r\n\t\t\t\t\t\t<span class="fas fa-copy rs-yellow" v-if="entity.template"></span>\r\n\t\t\t\t\t\t<span class="link-label">{{entity.name}}</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<router-link class="entity navigation-button create-npc" to="/construct/character">\r\n\t\t\t\t\t\t<span class="link-icon fas fa-user-plus"></span>\r\n\t\t\t\t\t\t<span class="link-label">Construct NPC</span>\r\n\t\t\t\t\t</router-link>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="control skill list">\r\n\t\t\t\t<div class="title">\r\n\t\t\t\t\t<input class="filter" v-model="state.skill_search" placeholder="Filter Skills..." />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="skills list-data flex v">\r\n\t\t\t\t\t<button class="listed skill" v-for="skill in skills" v-if="!state.skill_search || (skill._search && skill._search.indexOf(state.skill_search.toLowerCase()) !== -1)" v-on:click="showInfo(skill)" :key="skill.id">\r\n\t\t\t\t\t\t<span :class="skill.icon"></span>\r\n\t\t\t\t\t\t<span>{{skill.name}}</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="control item list">\r\n\t\t\t\t<div class="title">\r\n\t\t\t\t\t<input class="filter" v-model="state.item_search" placeholder="Filter Items..." />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="items list-data flex v">\r\n\t\t\t\t\t<button class="listed item" v-for="record in items" v-if="!record.skill_search || (record._search && record._search.indexOf(record.item_search.toLowerCase()) !== -1)" v-on:click="showInfo(record)" :key="record.id">\r\n\t\t\t\t\t\t<span :class="record.icon"></span>\r\n\t\t\t\t\t\t<span class="fas fa-sticky-note rs-green" v-if="record.screen"></span>\r\n\t\t\t\t\t\t<span>{{record.name}}</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="control list">\r\n\t\t\t\t<div class="title">\r\n\t\t\t\t\t<input class="filter" v-model="state.searchKnowledge" placeholder="Filter Screen Knowledge..."/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="knowledge list-data">\r\n\t\t\t\t\t<button class="listed entity navigation-button" v-for="knowledge in knowledges" v-if="!knowledge.hidden && (!state.searchKnowledge || (knowledge._search && knowledge._search.indexOf(state.searchKnowledge.toLowerCase()) !== -1))" v-on:click="showInfo(knowledge)" :key="knowledge.id">\r\n\t\t\t\t\t\t<span class="link-icon" :class="knowledge.icon || \'fas fa-tablet\'"></span>\r\n\t\t\t\t\t\t<span class="link-label">{{knowledge.name}}</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="control session list flex v">\r\n\t\t\t\t<div class="current">\r\n\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t<span v-on:click="showInfo(currentSession)">Current:</span>\r\n\t\t\t\t\t\t<select v-on:change="setSession(trackSession)" v-model="trackSession">\r\n\t\t\t\t\t\t\t<option v-for="session in sessions" :value="session.id">{{session.name}}</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button class="next session" v-on:click="makeNextSession()">\r\n\t\t\t\t\t<span v-if="lockMakeNew" class="fas fa-spinner fa-pulse"></span>\r\n\t\t\t\t\t<span class="">To Next Session: {{nextSession}}</span>\r\n\t\t\t\t\t<span v-if="!lockMakeNew" class="fas fa-arrow-alt-circle-right"></span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<div class="current">\r\n\t\t\t\t\t<span>Make Event:</span>\r\n\t\t\t\t\t<select v-on:change="createEvent(eventCategory)" v-model="eventCategory">\r\n\t\t\t\t\t\t<option value="">[ Select Type ]</option>\r\n\t\t\t\t\t\t<option value="combat">Combat</option>\r\n\t\t\t\t\t\t<option value="story">Story</option>\r\n\t\t\t\t\t\t<option value="news">News</option>\r\n\t\t\t\t\t\t<option value="minigame">Minigame</option>\r\n\t\t\t\t\t\t<option value="custom">Custom</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="title">\r\n\t\t\t\t\t<input class="filter" v-model="state.searching.active_events" placeholder="Filter Active Events..."/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="sessions list-data minor">\r\n\t\t\t\t\t<button class="listed entity navigation-button" v-for="event in active_events" v-if="isVisible(event, state.searching.active_events)" v-on:click="showInfo(event)" :key="event.id">\r\n\t\t\t\t\t\t<span class="link-icon" :class="event.icon || \'fas fa-newspaper\'"></span>\r\n\t\t\t\t\t\t<span class="link-label">{{event.name}}</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="title">\r\n\t\t\t\t\t<input class="filter" v-model="state.searching.events" placeholder="Filter Events..."/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="sessions list-data minor">\r\n\t\t\t\t\t<button class="listed entity navigation-button" v-for="event in events" v-if="isVisible(event, state.searching.events)" v-on:click="showInfo(event)" :key="event.id">\r\n\t\t\t\t\t\t<span class="link-icon" :class="event.icon"></span>\r\n\t\t\t\t\t\t<span class="link-label">{{event.name}}</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="title">\r\n\t\t\t\t\t<input class="filter" v-model="state.searchSessions" placeholder="Filter Sessions..."/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="sessions list-data minor">\r\n\t\t\t\t\t<button class="listed entity navigation-button" v-for="session in sessions" v-if="!session.hidden && !session.obscured && (!state.searchSessions || (session._search && session._search.indexOf(state.searchSessions.toLowerCase()) !== -1))" v-on:click="showInfo(session)" :key="session.id">\r\n\t\t\t\t\t\t<span class="link-icon" :class="session.icon || \'fab fa-old-republic\'"></span>\r\n\t\t\t\t\t\t<span class="link-label">{{session.name}}</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"pages/rssw/party.html":return'<div class="rssw-page page-party">\n\t<div v-if="!player.master" class="party-info">\n\t\t<h1>Forbidden</h1>\n\t\t<p>Party view is currently for Game Masters only</p>\n\t</div>\n\t<div v-if="player.master" class="party-info">\n\t\t<div class="list" v-if="record">\n\t\t\t<div class="listed-party">\n\t\t\t\t<rssw-party :record="record" :universe="universe" :user="user"></rssw-party>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="list" v-if="!record">\n\t\t\t<div class="listed-party" v-for="party in parties" :key="party.id">\n\t\t\t\t<rssw-party :record="party" :universe="universe" :user="user"></rssw-party>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n';case"pages/rssw/ship.html":return'<div class="rssw-page page-dashboard page-ships">\r\n\t<div v-if="entity" class="ship-column">\r\n\t\t<rssw-ship-stats :ship="entity" :user="user" :universe="universe"></rssw-ship-stats>\r\n\t\t<rssw-entity-equipment :entity="entity" :user="user" :universe="universe" :player="player"></rssw-entity-equipment>\r\n\t\t<rssw-entity-inside :entity="entity" :user="user" :universe="universe" :player="player"></rssw-entity-inside>\r\n\t</div>\r\n\t<div v-for="ship in additional_ships" class="ship-column">\r\n\t\t<rssw-ship-stats :ship="ship" :user="user" :universe="universe"></rssw-ship-stats>\r\n\t\t<rssw-entity-equipment :entity="ship" :user="user" :universe="universe" :player="player"></rssw-entity-equipment>\r\n\t\t<rssw-entity-inside :entity="ship" :user="user" :universe="universe" :player="player"></rssw-entity-inside>\r\n\t</div>\r\n</div>\r\n';case"pages/rssw/shop.html":return'<div class="rssw-page page-dashboard page-shop">\r\n\t<div class="message" v-if="!player.master && customer && customer.owner !== player.id && (!customer.owners || customer.owners.indexOf(player.id) === -1)">\r\n\t\t<h2>Unable to Shop as an Entity you do not Control ({{customer.name}})</h2>\r\n\t</div>\r\n\t<rssw-shop-inventory v-else :entity="entity" :customer="customer" :universe="universe" :user="user" :player="player"></rssw-shop-inventory>\r\n</div>\r\n';case"pages/rssw/storage.html":return'<div class="rssw-page page-storage">\r\n\t<rssw-items-locate v-if="player" :universe="universe" :player="player" :user="user"></rssw-items-locate>\r\n\t<div v-if="!player">...</div>\r\n</div>\r\n';case"pages/rssw/universe.html":return'<div class="rssw-page page-universe">\r\n\t<div v-if="!$route.params.oid" class="universe-contents">\r\n\t\t<div class="title">\r\n\t\t\tGalactic Index\r\n\t\t\t<button class="flat simple fas fa-sync" v-on:click="resetHeaders()">Headers</button>\r\n\t\t\t<button class="flat simple fas fa-download" v-on:click="exportUniverse()">Export Universe</button>\r\n\t\t</div>\r\n\r\n\t\t<div id="anchors">\r\n\t\t</div>\r\n\r\n\t\t<div class="rs-component flex h wrap">\r\n\t\t\t<div class="rs-component index">\r\n\t\t\t\t<div class="table-controls">\r\n\t\t\t\t\t<rs-table-controls class="index" :universe="universe" :corpus="corpus" :user="player" :index="state.activeIndex?universe.indexes[state.activeIndex]:universe.index" :state="state" v-on:action="processAction"></rs-table-controls>\r\n\r\n\t\t\t\t\t<select v-model="target" class="table-control">\r\n\t\t\t\t\t\t<option value="">No Target</option>\r\n\t\t\t\t\t\t<option disabled value="div">-- Entity Divide --</option>\r\n\t\t\t\t\t\t<option v-for="en in listing.entity" :value="en.id">{{en.name}}</option>\r\n\t\t\t\t\t\t<option disabled value="div">--- Item Divide ---</option>\r\n\t\t\t\t\t\t<option v-for="it in listing.item" :value="it.id" v-if="!it.template">{{it.name}}</option>\r\n\t\t\t\t\t\t<option disabled value="div">--- Room Divide ---</option>\r\n\t\t\t\t\t\t<option v-for="it in listing.room" :value="it.id" v-if="!it.template">{{it.name}}</option>\r\n\t\t\t\t\t\t<option disabled value="div">-- Player Divide --</option>\r\n\t\t\t\t\t\t<option v-for="pl in listing.player" :value="pl.id">{{pl.name}}</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t\t<select v-model="command" v-on:change="processCommand(command)" v-if="showCommands()" class="table-control">\r\n\t\t\t\t\t\t<option value="">Choose Action</option>\r\n\t\t\t\t\t\t<option disabled value="div">-- Dashboards --</option>\r\n\t\t\t\t\t\t<option value="dashboard-ships">Dashboard: Ships</option>\r\n\t\t\t\t\t\t<option disabled value="div">-- Entities --</option>\r\n\t\t\t\t\t\t<option value="spawn">Spawn Template Entities</option>\r\n\t\t\t\t\t\t<option disabled value="div">-- Items --</option>\r\n\t\t\t\t\t\t<option value="give" v-if="target">Give Items</option>\r\n\t\t\t\t\t\t<option value="take" v-if="target">Take Items</option>\r\n\t\t\t\t\t\t<option disabled value="div">-- Effects --</option>\r\n\t\t\t\t\t\t<option value="effect" v-if="target">Add Effect</option>\r\n\t\t\t\t\t\t<option value="uneffect" v-if="target">Remove Effect</option>\r\n\t\t\t\t\t\t<option disabled value="div">-- Knowledge --</option>\r\n\t\t\t\t\t\t<option value="grant-knowledge" v-if="target">Grant Knowledge</option>\r\n\t\t\t\t\t\t<option value="forget-knowledge" v-if="target">Forget Knowledge</option>\r\n\t\t\t\t\t\t<option disabled value="div">-- Records --</option>\r\n\t\t\t\t\t\t<option value="obscure">Obscure Record</option>\r\n\t\t\t\t\t\t<option value="unobscure">Unobscure Record</option>\r\n\t\t\t\t\t\t<option disabled value="div">-- Maintenance --</option>\r\n\t\t\t\t\t\t<option value="drop">Delete Objects</option>\r\n\t\t\t\t\t\t<option value="export">Export Selection</option>\r\n\t\t\t\t\t</select>\r\n\r\n\t\t\t\t\t<select v-model="state.activeIndex" class="table-control">\r\n\t\t\t\t\t\t<option value="">All</option>\r\n\t\t\t\t\t\t<option v-for="index in availableIndexes" :value="index">{{index}}</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t\t<select v-model.number="state.paging.per" class="table-control">\r\n\t\t\t\t\t\t<option v-for="spread in getSpread()" :value="spread">{{spread}}</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t\t<select v-model="state.filterTemplate" class="table-control">\r\n\t\t\t\t\t\t<option value="shown">Shown</option>\r\n\t\t\t\t\t\t<option value="only">Only</option>\r\n\t\t\t\t\t\t<option value="out">Out</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t\t<rs-table class="index" :universe="universe" :user="player" :corpus="corpus" :index="state.activeIndex?universe.indexes[state.activeIndex]:universe.index" :headers="state.headers" :state="state"></rs-table>\r\n\t\t\t\t<rs-table-paging class="index" :universe="universe" :user="player" :index="state.activeIndex?universe.indexes[state.activeIndex]:universe.index" :state="state"></rs-table-paging>\r\n\t\t\t</div>\r\n\r\n\t\t\t\x3c!--\r\n\t\t\t<div class="control entity-list">\r\n\t\t\t\t<div class="title">\r\n\t\t\t\t\t<input class="filter" v-model="state.search" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="entities">\r\n\t\t\t\t\t<router-link class="entity navigation-button" v-for="entity in universeEntities" :to="\'/universe/\' + entity.classification + \'/\' + entity.id" :key="entity.id" v-if="filtered(entity)">\r\n\t\t\t\t\t\t<span class="link-icon" :class="entity.icon || \'fas fa-user-circle\'"></span>\r\n\t\t\t\t\t\t<span class="link-label">{{entity.name}}</span>\r\n\t\t\t\t\t</router-link>\r\n\t\t\t\t\t<router-link class="entity navigation-button create-npc" to="/construct/character">\r\n\t\t\t\t\t\t<span class="link-icon fas fa-user-plus"></span>\r\n\t\t\t\t\t\t<span class="link-label">Construct NPC</span>\r\n\t\t\t\t\t</router-link>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="control difficulty-dice">\r\n\t\t\t\t<div class="output flex h wrap">\r\n\t\t\t\t\t<rssw-dice-result :universe="universe" :user="user" class="roll-container rolled current" :roll="rolling"></rssw-dice-result>\r\n\t\t\t\t\t<button class="roll-container rolled" v-for="rolled in history" v-on:click="dismissRolled(rolled)">\r\n\t\t\t\t\t\t<rssw-dice-result :universe="universe" :user="user" class="rolling-viewed" :roll="rolled"></rssw-dice-result>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button class="roll-container rolling" v-on:click="rollDifficulty(diff)" v-for="diff in difficulties">\r\n\t\t\t\t\t<rssw-dice-view :universe="universe" :user="user" class="rolling-view" :roll="difficulty[diff]" :labeling="diff + \' [\' + count[diff] + \']\'"></rssw-dice-view>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class="roll-container rolling" v-on:click="clearRolls(true)">\r\n\t\t\t\t\tClear Rolls\r\n\t\t\t\t</button>\r\n\t\t\t\t<select class="roll-container rolling" v-model="state.historyLength">\r\n\t\t\t\t\t<option v-for="len in maxLength" :value="len">{{len}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t\t--\x3e\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<router-view class="system-view opened" :universe="universe" :user="player" :class="$route.params.oid?\'loaded\':\'\'"></router-view>\r\n</div>\r\n';case"pages/system.html":return'<div class="rs-page rs-component page-system">\r\n\t<div class="information-container">\r\n\t\t<h1>System Information</h1>\r\n\t\t<p>Overview of information regarding your system and the server to which you are connected.</p>\r\n\r\n\t\t<button class="" v-on:click="uncachedRefresh()">\r\n\t\t\t<span class="fas fa-eraser"></span>\r\n\t\t\t<span>Cache Clearing Refresh</span>\r\n\t\t</button>\r\n\r\n\t\t<h2 class="flex h">\r\n\t\t\t<span>Detected Browser Information</span>\r\n\t\t\t<button class="make" v-on:click="makeIssue()" v-if="player.master && !knownErrors.navigator">\r\n\t\t\t\t<span>Create</span>\r\n\t\t\t\t<span class="fas fa-bug"></span>\r\n\t\t\t</button>\r\n\t\t</h2>\r\n\t\t<table class="display browser">\r\n\t\t\t<tr>\r\n\t\t\t\t<td class="align-right">Browser:</td>\r\n\t\t\t\t<td>{{navigator.name}}</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td class="align-right">Version:</td>\r\n\t\t\t\t<td>{{navigator.version}}</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td class="align-right">Issues:</td>\r\n\t\t\t\t<td v-if="!knownErrors.navigator">None Known</td>\r\n\t\t\t\t<td v-if="knownErrors.navigator">\r\n\t\t\t\t\t<button class="rs-dark-red" v-on:click="showInfo(knownErrors.navigator)">\r\n\t\t\t\t\t\t<span class="fas fa-exclamation-triangle"></span>\r\n\t\t\t\t\t\t<span>Known Issues</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t</table>\r\n\r\n\t\t<h2>Connection Information</h2>\r\n\t\t<table class="display versions">\r\n\t\t\t<tr>\r\n\t\t\t\t<td class="align-right">Connected At:</td>\r\n\t\t\t\t<td>{{getDate(universe.connection.connectMark)}}</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td class="align-right">Last Message:</td>\r\n\t\t\t\t<td>{{getDate(universe.connection.last)}}</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td class="align-right">Server Address:</td>\r\n\t\t\t\t<td>{{getServerAddress()}}</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr v-if="universe.connection.lastError">\r\n\t\t\t\t<td class="align-right">Last Error At:</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<span class="rs-light-red fas fa-exclamation-triangle"></span>\r\n\t\t\t\t\t<span>{{getDate(universe.connection.lastErrorAt)}}</span>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr v-if="universe.connection.lastError">\r\n\t\t\t\t<td class="align-right">Server Error:</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<span class="rs-light-red fas fa-exclamation-triangle"></span>\r\n\t\t\t\t\t<span>{{universe.connection.lastError}}</span>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td class="align-right">Server Version:</td>\r\n\t\t\t\t<td>{{universe.version}}</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td class="align-right">UI Version:</td>\r\n\t\t\t\t<td>{{system.version}}</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td class="align-right">Latency:</td>\r\n\t\t\t\t<td>{{universe.latency}}</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td class="align-right">Reconnects:</td>\r\n\t\t\t\t<td>{{universe.connection.reconnectAttempts}}</td>\r\n\t\t\t</tr>\r\n\t\t</table>\r\n\r\n\t\t<h2>Connected Players</h2>\r\n\t\t<table class="display players">\r\n\t\t\t<tr v-for="player in connectedPlayers":id="player.id">\r\n\t\t\t\t<td class="align-right">{{player.username}}</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<span v-if="player.master" class="fas fa-chess-king"></span>\r\n\t\t\t\t\t<span v-else class="fas fa-user"></span>\r\n\t\t\t\t</td>\r\n\t\t\t\t<td>{{player.name}}</td>\r\n\t\t\t\t<td v-if="player.entity">as <span class="rs-orange">{{universe.indexes.entity.index[player.entity]?universe.indexes.entity.index[player.entity].name:"Error[" + player.entity + "]"}}</span></td>\r\n\t\t\t</tr>\r\n\t\t</table>\r\n\r\n\t\t<div class="data" v-if="player.master">\r\n\t\t\t<h2>Universe Data</h2>\r\n\t\t\t<div id="anchors"></div>\r\n\t\t\t<table class="versions">\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class="align-right">Export Data</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<button class="flat simple" v-on:click="exportUniverse()">\r\n\t\t\t\t\t\t\t<span class="fas fa-download"></span>\r\n\t\t\t\t\t\t\t<span>Export Universe</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class="align-right">\r\n\t\t\t\t\t\t<span v-if="!importing">Import Data</span>\r\n\t\t\t\t\t\t<span v-if="importing">Importing</span>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<input type="file" class="flat simple" v-if="!importing" id="importFileSelection" accept="application/json" v-on:change="checkImportSelection()"/>\r\n\t\t\t\t\t\t<div class="pad-aligned" v-if="importing">\r\n\t\t\t\t\t\t\t<span class="fas fa-spinner fa-pulse"></span>\r\n\t\t\t\t\t\t\t<span>(</span>\r\n\t\t\t\t\t\t\t<span>{{imported}}</span>\r\n\t\t\t\t\t\t\t<span>/</span>\r\n\t\t\t\t\t\t\t<span>{{toImport}}</span>\r\n\t\t\t\t\t\t\t<span v-if="failedIDs.length">\r\n\t\t\t\t\t\t\t\t<span>|</span>\r\n\t\t\t\t\t\t\t\t<span class="fas fa-exclamation-triangle"></span>\r\n\t\t\t\t\t\t\t\t<span>{{failedIDs.length}}</span>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<span>)</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr v-if="importMessage">\r\n\t\t\t\t\t<td class="align-right">\r\n\t\t\t\t\t\t<span>{{importMessageType}}</span>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<div class="pad-aligned">\r\n\t\t\t\t\t\t\t<span :class="importIcon"></span>\r\n\t\t\t\t\t\t\t<span>{{importMessage}}</span>\r\n\t\t\t\t\t\t\t<span v-if="failedIDs.length" v-on:click="showFailures()">\r\n\t\t\t\t\t\t\t\t<span>|</span>\r\n\t\t\t\t\t\t\t\t<span class="fas fa-exclamation-triangle"></span>\r\n\t\t\t\t\t\t\t\t<span>{{failedIDs.length}}</span>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr v-if="importSelection && !importing">\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<button class="flat simple" v-on:click="importUniverse()">\r\n\t\t\t\t\t\t\t<span class="fas fa-upload"></span>\r\n\t\t\t\t\t\t\t<span>Import Universe</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button class="flat simple" v-on:click="importOverwriteToggle()">\r\n\t\t\t\t\t\t\t<span class="far" :class="importOverwrites?\'fa-check-square\':\'fa-square\'"></span>\r\n\t\t\t\t\t\t\t<span>Overwrite</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t</table>\r\n\t\t\t<h2>Server Control</h2>\r\n\t\t\t<table class="versions">\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class="align-right">State</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<button class="flat simple" v-on:click="toggleLocalDebug()">\r\n\t\t\t\t\t\t\t<span v-if="universe.debugConnection" class="far fa-check-square"></span>\r\n\t\t\t\t\t\t\t<span v-if="!universe.debugConnection" class="far fa-square"></span>\r\n\t\t\t\t\t\t\t<span>Debug Connection</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr v-if="!universe.indexes.setting.index[\'setting:control:stop\']">\r\n\t\t\t\t\t<td class="align-right">State</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<button class="flat simple" v-on:click="stopUniverse()">\r\n\t\t\t\t\t\t\t<span class="fas fa-power-off"></span>\r\n\t\t\t\t\t\t\t<span>Stop Server</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t</table>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';case"pages/test.html":return'<div class="rs-page page-test">\n\t\n\t<rs-graph id="test"></rs-graph>\n</div>\n';case"pages/window.html":return'<div class="rs-page page-window">\r\n\t<router-view class="system-view" :universe="universe" :user="player"></router-view>\r\n</div>\r\n';default:return null}}}};Vue.use(Templify);var Hash={},Dice=function(){var diceReductionRegEx=/\+?([0-9a-z\.]+|\([0-9+-\/\*\(\)a-z\.]+)(d[0-9]+|dj[abcdps]|ability|proficiency|boost|difficulty|challenge|setback|hit|evade|a|b|c|d|p|s|f|h|e)[ \+\/-]/g,calculateSecurityRegEx=/^[<>0-9\(\)+-\/\*]*$/,dndStatCurve=!0,spaces=/ /g,space=" ",tX,rollMap=[["str","strength"],["dex","dexterity"],["con","constitution"],["int","intelligence"],["wis","wisdom"],["cha","charisma"]],dndRollMap=[["str","strength"],["dex","dexterity"],["con","constitution"],["int","intelligence"],["wis","wisdom"],["cha","charisma"]],swrpgRollMap=[["bra","brawn"],["agi","agility"],["int","intellect"],["cun","cunning"],["wil","willpower"],["pre","pressence"]],rollLevelMap=[["level","self"],["barbarian","class:barbarian"],["bard","class:bard"],["cleric","class:cleric"],["rogue","class:rogue"],["ranger","class:ranger"],["paladin","class:paladin"],["sorcerer","class:sorcerer"],["monk","class:monk"],["druid","class:druid"],["warlock","class:warlock"],["fighter","class:fighter"],["wizard","class:wizard"]],rollDirectMap=[["pro","proficiency"],["movement","movement"],["health","health"],["HP","health"],["maxHealth","maxHealth"],["maxHP","maxHealth"],["armor","armor"],["ac","armor"],["brawn"],["agility"],["intellect"],["cunning"],["willpower"],["pressence"]],calculate=function(expression){if(Dice.debug&&console.log("Dice Calculate: "+expression),expression&&"+"===expression[0]&&(expression=expression.substring(1)),!(expression&&expression.length<150&&calculateSecurityRegEx.test(expression.trim())))return expression;try{return Dice.debug&&console.log("Dice Evaluating: "+expression),Math.floor(eval(expression))}catch(t){return expression}},diceSummed=["d4","d6","d8","d10","d12","d20","d100"],diceSummedCheck={};for(tX=0;tX<diceSummed.length;tX++)diceSummedCheck[diceSummed[tX]]=!0;var diceOrder=["d4","d6","d8","d10","d12","d20","d100","ability","dja","a","boost","djb","b","challenge","djc","c","difficulty","djd","d","proficiency","djp","p","setback","djs","s","force","djf","f","hit","h","evade","e"],diceMap={ability:"a",dja:"a",a:"a",boost:"b",djb:"b",b:"b",challenge:"c",djc:"c",c:"c",difficulty:"d",djd:"d",d:"d",proficiency:"p",djp:"p",p:"p",setback:"s",djs:"s",s:"s",force:"f",djf:"f",f:"f",hit:"h",h:"h",evade:"e",e:"e",d100:"d100",d20:"d20",d12:"d12",d10:"d10",d8:"d8",d6:"d6",d4:"d4"},diceRoll=function(t){return parseInt(parseInt(t.substring(1))*Math.random())+1},parseDiceRoll=function(t,e,n){var i,r,s,a,o=[],l={},c={};if(!t)return c;if("string"!=typeof t&&(t=t.toString()),r=e?(r=e.castWith||"int").substring(0,3):"int",s=n?(s=n.castWith||"int").substring(0,3):"int",n&&n.castWith&&-1!==t.indexOf("target.cast")&&(a=new RegExp("target.cast","g"),t=t.replace(a,s)),e&&e.castWith&&-1!==t.indexOf("cast")&&(a=new RegExp("cast","g"),t=t.replace(a,r)),n){for(i=0;i<rollMap.length;i++)a=new RegExp("target\\."+rollMap[i][0],"g"),t=dndStatCurve?t.replace(a,parseInt(Math.floor((n[rollMap[i][1]]||0)/2)-5)):t.replace(a,parseInt(n[rollMap[i][1]]||0));for(i=0;i<rollDirectMap.length;i++)a=new RegExp("target\\."+rollDirectMap[i][0],"g"),t=t.replace(a,parseInt(n[rollDirectMap[i][1]||rollDirectMap[i][0]]||0))}if(e){for(i=0;i<rollMap.length;i++)a=new RegExp(rollMap[i][0],"g"),t=dndStatCurve?t.replace(a,parseInt(Math.floor((e[rollMap[i][1]]||0)/2)-5)):t.replace(a,parseInt(e[rollMap[i][1]]||0));for(i=0;i<rollDirectMap.length;i++)a=new RegExp(rollDirectMap[i][0],"g"),t=t.replace(a,parseInt(e[rollDirectMap[i][1]||rollDirectMap[i][0]]||0))}for(t=t.replace(spaces,"")+space,i=diceReductionRegEx.exec(t);null!==i;)o.push(i[0]),l[diceMap[i[2]]]=l[diceMap[i[2]]]?l[diceMap[i[2]]]+"+"+i[1]:i[1],i=diceReductionRegEx.exec(t);for(Dice.debug&&console.log("Dice Clean Expression: "+t,o),i=0;i<o.length;i++)t=t.replace(o[i],"");for(c.null=t,i=0;i<diceOrder.length;i++)l[diceOrder[i]]&&(c[diceOrder[i]]=calculate(l[diceOrder[i]]));return c},rawDiceRoll=function(t,e,n){var i,r,s;for(r=parseDiceRoll(t,e,n),t=calculate(r.null),i=0;i<diceOrder.length;i++)r[diceOrder[i]]&&(s=parseInt(calculate(r[diceOrder[i]])),isNaN(s)?s="("+r[diceOrder[i]]+")"+diceOrder[i]:s+=diceOrder[i],t?t+=" + "+s:t=s);return t},reduceDiceRoll=function(t,e,n){var i,r,s;for(s=parseDiceRoll(t,e,n),t=calculate(s.null),i=0;i<diceOrder.length;i++)s[diceOrder[i]]&&(t?t+=" + "+(isNaN(r=parseInt(calculate(s[diceOrder[i]])))?s[diceOrder[i]]:r)+diceOrder[i]:t=(isNaN(r=parseInt(calculate(s[diceOrder[i]])))?s[diceOrder[i]]:r)+diceOrder[i]);return t},calculateDiceRoll=function(t,e,n){var i,r,s,a={};for("string"==typeof t?i=parseDiceRoll(t,e,n):"object"==typeof t&&(i=t),a.sum=parseInt(calculate(i.null))||0,r=0;r<diceOrder.length;r++)for(i[diceOrder[r]]=parseInt(calculate(i[diceOrder[r]])),s=0;s<i[diceOrder[r]]&&!isNaN(i[diceOrder[r]]);s++)if(diceSummedCheck[diceOrder[r]])a.sum+=diceRoll(diceOrder[r]);else switch(diceOrder[r]){case"ability":case"dja":case"a":rollStarWarsDice("ability",a);break;case"boost":case"djb":case"b":rollStarWarsDice("boost",a);break;case"proficiency":case"djp":case"p":rollStarWarsDice("proficiency",a);break;case"difficulty":case"djd":case"d":rollStarWarsDice("difficulty",a);break;case"challenge":case"djc":case"c":rollStarWarsDice("challenge",a);break;case"setback":case"djs":case"s":rollStarWarsDice("setback",a);break;case"force":case"djf":case"f":rollStarWarsDice("force",a);break;default:console.warn("Unknown Dice: "+diceOrder[r])}return a},starWarsMap={ability:{dice:"d8",1:{advantage:0,success:0},2:{advantage:0,success:1},3:{advantage:0,success:1},4:{advantage:0,success:2},5:{advantage:1,success:0},6:{advantage:1,success:0},7:{advantage:1,success:1},8:{advantage:2,success:0}},boost:{dice:"d6",1:{advantage:0,success:0},2:{advantage:0,success:1},3:{advantage:2,success:0},4:{advantage:1,success:0},5:{advantage:1,success:1},6:{advantage:0,success:0}},proficiency:{dice:"d12",1:{advantage:0,success:0},2:{advantage:0,success:1},3:{advantage:0,success:1},4:{advantage:0,success:2},5:{advantage:0,success:2},6:{advantage:1,success:0},7:{advantage:1,success:1},8:{advantage:1,success:1},9:{advantage:1,success:1},10:{advantage:2,success:0},11:{advantage:2,success:0},12:{advantage:0,success:0,triumph:1}},difficulty:{dice:"d8",1:{failure:0,threat:0},2:{success:-1,failure:1,threat:0},3:{success:-2,failure:2,threat:0},4:{failure:0,advantage:-1,threat:1},5:{failure:0,advantage:-1,threat:1},6:{failure:0,advantage:-1,threat:1},7:{failure:0,advantage:-2,threat:2},8:{success:-1,advantage:-1,failure:1,threat:1}},setback:{dice:"d6",1:{failure:0,threat:0},2:{failure:0,threat:0},3:{success:-1,failure:1,threat:0},4:{success:-1,failure:1,threat:0},5:{advantage:-1,failure:0,threat:1},6:{advantage:-1,failure:0,threat:1}},challenge:{dice:"d12",1:{failure:0,threat:0},2:{success:-1,failure:1,threat:0},3:{success:-1,failure:1,threat:0},4:{success:-2,failure:2,threat:0},5:{success:-2,failure:2,threat:0},6:{failure:0,advantage:-1,threat:1},7:{failure:0,advantage:-1,threat:1},8:{success:-1,advantage:-1,threat:1,failure:1},9:{success:-1,advantage:-1,threat:1,failure:1},10:{failure:0,advantage:-2,threat:2},11:{advantage:-2,failure:0,threat:2},12:{triumph:-1,failure:0,despair:1,threat:0}},force:{dice:"d12",1:{light:-1,dark:1},2:{light:-1,dark:1},3:{light:-1,dark:1},4:{light:-1,dark:1},5:{light:-1,dark:1},6:{light:-1,dark:1},7:{light:-2,dark:2},8:{light:1},9:{light:1},10:{light:2},11:{light:2},12:{light:2}}},rollStarWarsDice=function(t,e){var n,i;if((t=starWarsMap[t])&&(t=t[diceRoll(t.dice)]))for(n=Object.keys(t),i=0;i<n.length;i++)e[n[i]]||(e[n[i]]=0),e[n[i]]+=t[n[i]];return e};return{calculateDiceRoll:calculateDiceRoll,parseDiceRoll:parseDiceRoll,reduceDiceRoll:reduceDiceRoll,rawDiceRoll:rawDiceRoll,setDnD:function(){rollMap=dndRollMap,dndStatCurve=!0},setSWRPG:function(){rollMap=swrpgRollMap,dndStatCurve=!1}}}();class EventEmitter{constructor(){this._listeners={},this._bindedListeners={},this._onceListeners={},this._bound=[]}get _events(){return Object.keys(this._listeners)}$bounded(t){-1===this._bound.indexOf(t)&&this._bound.push(t)}$unbounded(t){var e=this._bound.indexOf(t);-1!==e&&this._bound.splice(e,1)}$on(t,e,n){void 0===e&&(e=t,t=void 0),"function"!=typeof e&&rsSystem.log.error("Listener is not a function: ",e),"object"==typeof n?(this._bindedListeners[t]=this._bindedListeners[t]||[],this._bindedListeners[t].push({listener:e,binding:n})):(this._listeners[t]=this._listeners[t]||[],-1===this._listeners[t].indexOf(e)&&this._listeners[t].push(e))}$once(t,e){void 0===e&&(e=t,t=void 0),this._onceListeners[t]=this._onceListeners[t]||[],-1===this._onceListeners[t].indexOf(e)&&this._onceListeners[t].push(e)}$off(t,e,n){var i;if(void 0===e&&(e=t,t=void 0),this._onceListeners[t]=this._onceListeners[t]||[],-1!==(i=this._onceListeners[t].indexOf(e)))return this._onceListeners[t].splice(i,1),!0;if(this._listeners[t]=this._listeners[t]||[],-1!==(i=this._listeners[t].indexOf(e)))return this._listeners[t].splice(i,1),!0;for(i=0;this._bindedListeners[t]&&i<this._bindedListeners[t].length;i++)if(this._bindedListeners[t][i].listener===e)return this._bindedListeners[t].splice(i,1),!0;return!1}$emit(t,e){var n,i;if((i=this._listeners[t])&&i.length)for(n=0;n<i.length;n++)try{i[n](e)}catch(e){console.log("Emit Failed["+t+"]: ",i[n],e),rsSystem.log.warn(e)}if((i=this._bindedListeners[t])&&i.length)for(n=0;n<i.length;n++)try{i[n].listener.bind(i[n].binding)(e)}catch(t){rsSystem.log.warn(t)}(i=this._onceListeners[t])&&i.length&&(i.forEach(t=>{setTimeout(()=>{try{t(e)}catch(t){rsSystem.log.warn(t)}},0)}),i.splice(0))}}String.prototype.capitalize=function(){return this.length?this[0].toUpperCase()+this.substring(1):this},String.prototype.pluralize=function(t){var e;switch(this[this.length-1]){case"y":e=this.substring(0,this.length-1)+"ies";break;case"s":e=this;break;default:e=this+"s"}return t?e[0].toUpperCase()+e.substring(1):e},Array.prototype.uniquely||(Array.prototype.uniquely=function(t){return-1===this.indexOf(t)&&(this.push(t),!0)}),Array.prototype.purge||(Array.prototype.purge=function(t){var e=this.indexOf(t);return-1!==e&&(this.splice(e,1),!0)}),Array.prototype.contains||(Array.prototype.contains=function(t){for(var e=0;e<this.length;e++)if(this[e]&&(this[e]===t.id||this[e].id===t.id||this[e]===t||this[e].id===t))return!0;return-1!==this.indexOf(t)}),Array.prototype.intersection||(Array.prototype.intersection=function(t,e){var n,i,r,s,a=[];e=e||function(t,e){return t.equal&&t.equal(e)||t===e};var o=[t];for(n=2;n<arguments.length;n++)o.push(arguments[n]);for(n=0;n<o.length;n++)for(r=0;r<o[n].length;r++)for(s=!0,i=0;s&&i<this.length;i++)e(this[i],o[n][r])&&(a.uniquely(this[i]),s=!1);return a}),Array.prototype.difference||(Array.prototype.difference=function(t,e){var n,i,r,s=[];for(e=e||function(t,e){return t.equal&&t.equal(e)||t===e},n=0;n<this.length;n++){for(r=!0,i=0;r&&i<t.length;i++)e(this[n],t[i])&&(r=!1);r&&s.uniquely(this[n])}return s}),Array.prototype.union||(Array.prototype.union=function(t,e){var n,i,r,s,a=[];e=e||function(t,e){return t.equal&&t.equal(e)||t===e};var o=[this,t];for(n=2;n<arguments.length;n++)o.push(arguments[n]);for(n=0;n<o.length;n++)for(i=0;i<o[n].length;i++){for(s=!0,r=0;s&&r<a.length;r++)e(o[n][i],a[r])&&(s=!1);s&&a.push(o[n][i])}return a}),Array.prototype.hasCommon||(Array.prototype.hasCommon=function(t){if(this.length&&t&&t.length){var e,n={};for(e=0;e<this.length;e++)this[e]&&(n[this[e].id||this[e]]=this[e]);for(e=0;e<t.length;e++)if(t[e]&&n[t[e].id||t[e]])return!0}return!1}),function(){var t={};Array.prototype.sortBy=function(e){t[e]||(t[e]=function(t,n){return t[e]<n[e]?-1:t[e]>n[e]?1:0}),this.sort(t[e])}}(),String.prototype.sha256=function(){var t=0;function e(t){return i(n(r(t)))}function n(t){return a(v(s(t),8*t.length))}function i(e){var n,i,r=t?"0123456789ABCDEF":"0123456789abcdef",s="";for(i=0;i<e.length;i++)n=e.charCodeAt(i),s+=r.charAt(n>>>4&15)+r.charAt(15&n);return s}function r(t){for(var e,n,i="",r=-1;++r<t.length;)e=t.charCodeAt(r),n=r+1<t.length?t.charCodeAt(r+1):0,55296<=e&&e<=56319&&56320<=n&&n<=57343&&(e=65536+((1023&e)<<10)+(1023&n),r++),e<=127?i+=String.fromCharCode(e):e<=2047?i+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?i+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(i+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return i}function s(t){var e,n=Array(t.length>>2);for(e=0;e<n.length;e++)n[e]=0;for(e=0;e<8*t.length;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<24-e%32;return n}function a(t){var e,n="";for(e=0;e<32*t.length;e+=8)n+=String.fromCharCode(t[e>>5]>>>24-e%32&255);return n}function o(t,e){return t>>>e|t<<32-e}function l(t,e){return t>>>e}function c(t,e,n){return t&e^~t&n}function u(t,e,n){return t&e^t&n^e&n}function d(t){return o(t,2)^o(t,13)^o(t,22)}function p(t){return o(t,6)^o(t,11)^o(t,25)}function h(t){return o(t,7)^o(t,18)^l(t,3)}function f(t){return o(t,17)^o(t,19)^l(t,10)}var m=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];function v(t,e){var n,i,r,s,a,o,l,v,y,b,_,x,w=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],k=new Array(64);for(t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e,y=0;y<t.length;y+=16){for(n=w[0],i=w[1],r=w[2],s=w[3],a=w[4],o=w[5],l=w[6],v=w[7],b=0;b<64;b++)k[b]=b<16?t[b+y]:g(g(g(f(k[b-2]),k[b-7]),h(k[b-15])),k[b-16]),_=g(g(g(g(v,p(a)),c(a,o,l)),m[b]),k[b]),x=g(d(n),u(n,i,r)),v=l,l=o,o=a,a=g(s,_),s=r,r=i,i=n,n=g(_,x);w[0]=g(n,w[0]),w[1]=g(i,w[1]),w[2]=g(r,w[2]),w[3]=g(s,w[3]),w[4]=g(a,w[4]),w[5]=g(o,w[5]),w[6]=g(l,w[6]),w[7]=g(v,w[7])}return w}function g(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return function(){return e(this)}}();class NameGenerator{constructor(t){"string"==typeof t&&(t=t.split(/[\s,]/)),this.consumeCorpus(t)}consumeCorpus(t){var e,n,i,r,s,a,o;for(this.corpus=t,this.compendium={},n=0;n<t.length;n++)for(t[n]=t[n].toLowerCase(),a=t[n].split(/\s+/),this.nextChain("parts",a.length),i=0;i<a.length;i++)for(o=a[i],this.nextChain("nameLen",o.length),e=o[0],this.nextChain("initial",e),r=o.substr(1),s=e;r.length>0;)e=r[0],this.nextChain(s,e),r=r.substr(1),s=e;this.scaleChain()}nextChain(t,e){this.compendium[t]?this.compendium[t][e]?this.compendium[t][e]++:this.compendium[t][e]=1:(this.compendium[t]={},this.compendium[t][e]=1)}scaleChain(){var t,e,n,i,r={};for(t in this.compendium)for(e in r[t]=0,this.compendium[t])n=this.compendium[t][e],i=Math.floor(Math.pow(n,1.3)),this.compendium[t][e]=i,r[t]+=i;this.compendium.tableLen=r}create(){var t,e,n,i,r,s=this.selectLink("parts"),a=[];for(i=0;i<s;i++){for(t=this.selectLink("nameLen"),n=r=this.selectLink("initial"),e=r;n.length<t;)n+=r=this.selectLink(e),e=r;a.push(n)}return a.join(" ")}fill(t){for(var e=0;e<t.length;e++)t[0]=this.create()}selectLink(t){var e,n,i=this.compendium.tableLen[t],r=Math.floor(Math.random()*i);for(e in n=0,this.compendium[t])if(r<(n+=this.compendium[t][e]))return e;return"-"}}var Random=function(){var t={},e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n=[3783881093,2494927111,3766780621,3541804571,2343263609,4271224597,3115287881,4109045791,2158664831,3510296173,2689904369,4180297687,2268261277,2756095609,4115152771,2556163361,2952835597,3403327397,2712149633,3410404919,2924574931,3333008281,3690651493,3013192673,2969385701,2955295307,3032492779,3960590021,2805715459,3337902781,3804572227,2335034021,2582267587,2958945247,2592830183,2209475663,4220530351,3318365971,2544051259,2891718733,3610193693,2275489487,3198025421,2554533937,2799440671,3941695391,3716801377,2223869371,3718018879,2367159497,2261889571,2173486571,2332243241,2523367733,3107453347,3668697443,2562403769,2669349601,2535796871,3440330161,3112117651,3762603979,2509589527,3716623871,3729575831,4054188389,3097853243,3369911407,2875713103,4274731649,2854955317,3145160819,2246898299,3954365759,3295914001,2684605381,3693555841,3650616239,2211501107,3078399943,2244643231,4100529919,2157781709,3817996913,4206605927,3988859983,3723993373,2626983451,2715342403,3304261111,3297724823,2403262133,3400846997,4076091827,3188032261,4113980441,2635716373,4282879231,4024231091,2734901357,3848282357,2343371761,3861478421,3094594411,3584208359,2521299983,4135096649,2181191147,3250000627,2755071229,2397283117,3167566291,2338468343,3778014049,3677737991,3660024631,3626171453,2841047369,3615991003,2382238171,3544041307,2726901493,2388193879,2934065117,2862570967,2593735427,4122857171,3058009223,2591770039,2316734417,4123111151,2513447917,2242575389,2197495919,3853997897,2510969261,3253227889,3692284903,3865489847,2383751047,2488156337,3873266141,3544654277,3625994027,2913627499,2661154543,4110965843,3643082581,4238440463,2863518739,2949103403,3389217451,3041546567,2419782623,3891771943,2564109811,4281939983,3559251221,2245329017,2970530413,3207807919,2972622463,3156414299,3515488313,3436713961,3316565117,4230025159,3140333657,2611977983,3308432093,2391417547,4111766567,3171855587,3159191071,4019705623,3810990977,3512840249,4043486719,3437598947,3540666317,2404588631,3878130583,2848970191,2278644259,2325115813,2490937483,2710971299,3071114833,2776646969,3968213233,2733563641,2201396167,4090557853,4172529733,2253518987,2502059101,2396799073,2566442759,2409476549,2585532343,2873871547,3337321601,2447048651,4082517793,3719910043,2256504661,3718573631,3233968043,3091106507,2763521843,3359122969,3697818899,3981142987,2336761411,3651186943,2397556519,2253684529,3986755247,3237646897,2301050201,3354543743,3202509917,2855451293,3864007759,2882362411,2582305777,2408324077,2939177531,3269663893,3185267963,2189994007,3412026161,3656187629,3518975491,2804956223,4112152271,3878797051,4126810447,3523563629,3368365699,3700987519,4155691753,2369120947,3526481653,2545380517,4066510001,3475572671,4161363919,2353023151,3868622249,3184314583,3919560607,3640063319,2246423479,4070314307,3788495857,2771631293,3886017203,3606471917,3427204771,4079644421,3210342131,2677707433,2878049497,3828492581,3074520721,2846942639,2268827159,3499747631,3388725187,4041428929,2832352723,2157096863,2527990481,3102697513,4193335793,3524806009,3881066741,3371138371,3936293953,4046195731,3844391399,4230781439,4263473359,3413939567,2389728347,3935645261,3541758281,2357164127,3607577723,3906118057,4023074401,3820879687,3508017251,3706884451,2261954837,3621913921,4006473641,2830227629,2837284771,3862799249,3534710689,2671212017,2535161471,4144816391,3264360941,3055363429,2195038073,3579840617,3537196457,2928647899,3228724231,2722891447,3390555881,4062387661,3049201031,4205066759,2409822707,3875496167,3475214117,3082679291,2896532959,2813041279,3793762151,3323784103,2850910141,4196521363,3238021411,3203177057,2821837439,3627146629,3871123639,3745652809,2538919573,2191068337,4135184017,2371731977,3487488041,3522720307,4074553823,3790417193,2177423533,3927130111,2778190313,2482810229,3053366453,3914563687,4092365813,4280733013,2662529689,4049483693,2315984263,2510664953,3452670203,2739824179,2365667693,2756335321,3398927531,2320401241,3632268427,3646501787,3461787559,3311763101,2886453161,2900929679,2999230901,2586262331,2325388657,3996115021,4177698593,2367748021,3497286293,2749707391,2241775849,3195883357,2516092009,2334444661,4069929517,3781541887,2380893289,3602484461,3941515003,3001709653,2192490247,2526824921,4192171391,2650683533,3959395669,2745123529,3937366309,3312535841,3878453549,2345982137,2380216913,4145800231,3530863669,3041828833,4037009633,2320981087,3363512213,3162684617,2748444329,2360250989,2750433239,3489615071,4077069757,3424013011,2371777987,4288860689,2436312583,3650256223,2319019411,2719513759,2202840121,2972326873,2641301231,3813742789,2770076357,2679191369,2366559709,2304339179,4224850783,3209488943,4078456391,2969029237,3268851527,3340347181,4182275917,3481478131,2491954807,4213310053,2318134921,2369087527,3289685513,3793818883,2348954533,2806266877,2726255263,3821479471,2184811753,4104066049,2562896771,2300237971,3210463747,2550802867,3062256833,3521517749,3047451817,3517798607,2278515047,3134396999,3595264709,3910901321,2621467969,3536448767,3547116641,3448108441,3137147179,2301667183,3380663191,3674654897,3253487953,3475067201,2192777729,3726743117,4114883263,2302843603,2341109609,3679140721,3570597623,3669530119,3594876877,3476949043,2653677659,4196402261,3291824363,2382366583,2847922919,3102321749,3641824237,3505520477,2156154887,3909250259,2636466991,2149626781,2369187053,4264542749,2603671717,3917164883,4154070101,2356440869,2879125181,2364629419,4240278043,2917571197,2619410327,3826830269,2732154947,2297901833,2179174747,4102073629,2342116277,3261719387,2943337237,2793011581,3617794879,4003125221,2753966461,4009338269,2159995589,3157206461,2882375623,2294288881,2835254491,2274319981,3093650881,3630723073,3665248469,3935088067,3516639943,3503179717,2939219779,4269909719,3334734049,2462323207,3382808321,2518572281,3054336029,3010697717,2592464141,3446776019,2602272347,2351390803,3176639519,3190893487,2722271953,4003946173,2542684217,2820376453,2391402619,2967073679,3511669823,2449985633,2919933997,2262720461,4118345219,2298856123,3802043537,3483835463,3273612359,3784663867,3466375477,2591307583,2263159687,3577462879,2839419241,2769522103,3192785161,3721645099,2242129433,2726106571,2606882513,2896590637,3112378487,3702994657,2816873009,3134443223,4169136163,2996356609,4279209307,2937037871,2915811413,2700438583,3813616231,2410757851,2850468739,4053269663,2675206159,3968645167,2444856917,2263288427,3804958727,3361780091,2946463337,2290225981,2560247293,2210876279,2641250383,3621198731,3461402773,3987150989,2335173223,3269497981,3710829631,3229309403,2230883747,3946978493,3455830999,3072734293,4208706193,3499682569,3652135303,2377476221,3643762433,2987786377,4080224353,2960618117,2187688007,3552279697,2307007447,3505360193,3291729191,2306962607,3749202901,2498939593,3443368421,2183122673,3449507029,2223702991,2893214281,4072372169,3463328591,2804394311,2943422051,3217219169,2326305743,2565365291,3584079203,2327043353,2870470177,3939700081,3356310743,3345817627,3033963841,3011930153,3964461197,2302569193,3047628629,2818709921,2950336033,3162903071,4191963551,4215784231,3179941907,2889811207,3939168619,2457232997,3854642003,2603139989,4054536383,2578958693,3537749653,3833283781,2169426911,3688785277,4262969551,3297399529,2919101623,2894075867,3366971791,2411824691,4284305453,2965173719,3299927941,2222643329,2477452097,4265402263,3538169639,3227177641,3896682341,2449936543,3167618731,2662922291,3434045983,2841581251,3167420129,3098247067,3176063833,3148918631,3090832903,2169792137,2584415221,3450210347,3356297837,2481539909,3384110657,4097421761,2560687837,3326749199,4168606531,3755231329,4091376769,2521145047,2790347801,3952907407,2540744021,3143475061,3436738973,3741015853,3036553189,2370968521,3267243349,3792036593,2475110641,2316656879,2945997521,3984388151,2463362789,4102154209,3213682163,2548204181,3500913593,2997416977,3690398051,4099544987,2496910979,2270641831,2158212499,3864603649,3383056207,3340425437,2830722823,2741218841,3132554489,3934324619,2481012109,2476697803,3390560791,3398170043,2678105921,4119704753,2341155749,2919869047,3779482561,3076317191,2421438281,3872873321,3999908137,2440995883,3852098479,3396921431,3056663411,3069838283,2911851121,4276445209,2267013901,2683364689,3674816567,2151533477,2421022847,2254240159,2537611501,3304967213,2580575339,2329298453,2300008313,4259011811,2227865609,3720870887,3928099991,3213163873,3278501651,3113990569,3526852279,3630661313,4095991069,4277584271,2571168713,4242427829,4259641129,2598394399,3821577847,3093897077,3285135253,4069752679,3013946471,2763861031,2351351647,2260249237,3810548233,4165872833,2410168141,3268101439,3261117929,3734761237,4118161219,2174761553,2481429289,2858839409,3232480289,3355131001,2579843261,3067519579,3610482409,2731417459,2555787323,4168154807,2550792143,3815858339,4142389997,3564359303,3920399689,4233732691,2237222921,2234522351,3233013083,3686293109,2930911343,3580313707,2486636521,3819527507,3719616347,3971621881,2578437649,2586025081,3220446247,2170994873,4039632419,3028966349,2299752841,3868836989,3673549843,2543463053,2875140199,3903273653,2885018491,3122490299,3041680463,2670610127,2509634629,3169500923,4144414333,3465131249,3470104663,3891648919,3669078121,3682309979,4242361243,3356553181,2999059909,3526272467,3892812433,3659833519,3062977739,4145659303,3418164979,3458648287,3831805447,2729624327,3901700029,2693080417,2331410407,3637111823,3682450693,2216229577,3564791291,2288889391,2402836853,3862167527,2640389743,2488116523,3147019483,3752504051,3666479249,3616056883,2280353617,3080008957,2657321003,2174622641,3530787413,4226500147,3702695197,4172017189,4172793479,2733328331,3501004519,2676516709,2409017047,2233864517,2263675787,2824546597,2953325909,3379641703,2873441027,3156796183,3369879889,2677058911,3543067093,3172749469,3795787781,2575960477,3884686181,2394621947,4263694663,4225583377,2570456143,2535105851,2275183753,2639770403,4066533893,2518750811,2330200429,2569043669,2656963849,3166256503,3688627993,2319116357,3702205883,3525610391,4050384647,2166151327,2517321311,2640019661,3327187601,2187506527,3417770893,3252640367,3066165727,3939084661,2906266547,3260431297,3757097713,3038191391,3895685567,2705828597,3059535481,3836117839,2835118709,3627978553,3163082147,2460206873,2402418373,3910068821,2584358747,3590716279,2166974531,2774318563,3657704081,2919192923,3446928539,3618814663,3792850387,3647811929,3343117009,3291092251,2905296109,2344310809,3245605939,2826644641,3786516763,2181490981,2662761811,3953720153,3943201057,3850379411,2961062177,4226340323,3729590177,4020396077,2719895303,3692706103,3154256689,3887770559,3483766193,2554831579,3701978767,2638395589,2922952051,4141489519,2342502703,3884692979,3100486567,2691715993,4116155191,4015136129,2988422399,2161794961,4026107521,3854970793,3026255329,4029504161,2215667249,2764765049,2414787839,3318724589,2579541409,3136547747,2496823961,3603738769,2324061163,3342006823,3280513177,4111968067,2373654337,3060593183,4251524551,3166580903,3405999323,3391483201,3688284643];return t.number=function(t,e){return e?Math.random()*t+e:Math.random()*t},t.integer=function(t,e){return e?Math.floor(Math.random()*t+e):Math.floor(Math.random()*t)},t.string=function(t){if(t){var n,i=[];for(n=0;n<t;n++)i[n]=e[this.integer(e.length)];return i.join("")}return null},t.prime=function(){return n[t.integer(n.length)]},t.identifier=function(e,n,i){void 0===e&&(e="id"),void 0===n&&(n=10);var r=t.string(n)+Date.now();return i&&(r+=t.string(i-r.length)),e+":"+r},t}();class UserInformation{constructor(t,e,n,i){this.username=t,this.name=i||"",this.token=n,this.id=e||null,this.established=Date.now(),this.last=this.established}setPasscode(t){t?this.passcode=t:delete this.code}toString(){return"User: "+this.username}toJSON(){return{username:this.username,passcode:this.passcode,established:this.established,age:this.last-this.established,last:this.last,tokenDefined:!!this.token,token:null}}}var rsSystem={version:"0.0.1",components:{},loading:{}};rsSystem.loading.process=[],rsSystem.loading.components={},rsSystem.loading.cLookup=[],rsSystem.loading.cAlign=[],rsSystem.loading.cScan=[],rsSystem.loading.destroyed=[],rsSystem.loading._tracking=200,rsSystem.register=function(t){var e=t.$el,n=$(t.$el);rsSystem.loading.components[t.$options._componentTag]=rsSystem.loading.components[t.$options._componentTag]||[],rsSystem.loading.components[t.$options._componentTag].push(t),rsSystem.loading.cLookup.push(e),rsSystem.loading.cAlign.push(t),rsSystem.loading.cScan.push(n),t.$once("hook:beforeDestroy",function(){rsSystem.loading.destroyed.unshift(t),rsSystem.loading.components[t.$options._componentTag].purge(t),rsSystem.loading.cLookup.purge(e),rsSystem.loading.cAlign.purge(t),rsSystem.loading.cScan.purge(n),rsSystem.loading.destroyed.length>rsSystem.loading._tracking&&rsSystem.loading.destroyed.splice(rsSystem.loading._tracking)})},rsSystem.lookup=function(t){var e;if(!(t=t||$0))throw new Error("No element selected");if(-1!==(e=rsSystem.loading.cLookup.indexOf(t)))return rsSystem.loading.cAlign[e];for(;t=t.parentElement;)if(-1!==(e=rsSystem.loading.cLookup.indexOf(t)))return rsSystem.loading.cAlign[e];throw new Error("VueComponent not found.")},rsSystem.settings={},rsSystem.settings.logging={},rsSystem.settings.logging.default=!1,rsSystem.settings.logging.trace=!1,rsSystem.settings.logging.debug=!1,rsSystem.settings.logging.info=!1,rsSystem.settings.logging.warn=!1,rsSystem.settings.logging.error=!0,rsSystem.settings.logging.fatal=!0,rsSystem.console={},rsSystem.console.log=function(...t){rsSystem.settings.logging.default&&console.log.apply(console.log,t)},rsSystem.log={},rsSystem.log.debug=function(...t){rsSystem.settings.logging.debug&&console.debug.apply(console.debug,t)},rsSystem.log.trace=function(...t){rsSystem.settings.logging.trace&&console.trace.apply(console.trace,t)},rsSystem.log.info=function(...t){rsSystem.settings.logging.info&&console.info.apply(console.info,t)},rsSystem.log.warn=function(...t){rsSystem.settings.logging.warn&&console.warn.apply(console.warn,t)},rsSystem.log.error=function(...t){rsSystem.settings.logging.error&&console.error.apply(console.error,t)},rsSystem.log.fatal=function(...t){var e,n=$(document).find("#error-anchor");for(e=0;e<t.length;e++)t[e]=JSON.stringify(t[e]);if(n.append("<p>"+t.join("</p><p>")+"</p>"),n.append("<button onclick='window.location.reload()'>Refresh</button>"),n.append("<button onclick='rsSystem.dismissError()'>Dismiss</button>"),rsSystem.settings.reporting&&rsSystem.settings.reporting.error){var i,r=new XMLHttpRequest;r.setRequestHeader("Content-type","application/json"),r.onreadystatechange=function(){console.log("Ready State: "+this.readyState)},(i={}).reporting=t,i=JSON.stringify(i),r.open("POST",rsSystem.settings.reporting.error,i),r.send(i)}console.error.apply(console.error,t)},rsSystem.dismissError=function(){$(document).find("#error-anchor").empty()},rsSystem.getBrowserName=function(){navigator.appVersion;var t,e,n,i=navigator.userAgent,r=navigator.appName,s=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10);return-1!=(e=i.indexOf("Opera"))?(r="Opera",s=i.substring(e+6),-1!=(e=i.indexOf("Version"))&&(s=i.substring(e+8))):-1!=(e=i.indexOf("MSIE"))?(r="Microsoft Internet Explorer",s=i.substring(e+5)):-1!=(e=i.indexOf("Chrome"))?(r="Chrome",s=i.substring(e+7)):-1!=(e=i.indexOf("Safari"))?(r="Safari",s=i.substring(e+7),-1!=(e=i.indexOf("Version"))&&(s=i.substring(e+8))):-1!=(e=i.indexOf("Firefox"))?(r="Firefox",s=i.substring(e+8)):(t=i.lastIndexOf(" ")+1)<(e=i.lastIndexOf("/"))&&(r=i.substring(t,e),s=i.substring(e+1),r.toLowerCase()==r.toUpperCase()&&(r=navigator.appName)),-1!=(n=s.indexOf(";"))&&(s=s.substring(0,n)),-1!=(n=s.indexOf(" "))&&(s=s.substring(0,n)),a=parseInt(""+s,10),isNaN(a)&&(s=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10)),{name:r,version:s}},rsSystem.AnonymousUser=new UserInformation("Anonymous","__anonymous"),rsSystem.GuestUser=new UserInformation("Guest","__guest","","Guest User"),rsSystem.settings.logging.default=!0,rsSystem.settings.logging.trace=!0,rsSystem.settings.logging.debug=!0,rsSystem.settings.logging.info=!0,rsSystem.settings.logging.warn=!0,rsSystem.EventBus=new EventEmitter,document.body.onkeydown=function(t){t&&t.key&&rsSystem.EventBus.$emit("key:"+t.key.toLowerCase(),t)},rsSystem.components={},rsSystem.component_classifications={},rsSystem.component=function(t,e,n){e.watch||(e.watch={}),e.watch.state||(e.watch.state={deep:!0,handler:function(){this.storageKeyID&&this.state&&"function"==typeof this.saveStorage&&this.saveStorage(this.storageKeyID,this.state)}}),rsSystem.components[t]=Vue.component(t,e)},rsSystem.availableNouns={},rsSystem.listingNouns=[],rsSystem.registerNoun=function(t,e){e=e||t.name,t.prototype._class=e,t.prototype._type=e,rsSystem.availableNouns[e]=t,t.unavailable||rsSystem.listingNouns.push(e)},rsSystem.Router=new VueRouter({mode:"hash"});class RSCalculator{constructor(t){this.variableExpression=new RegExp("([a-z_]+).?([a-z:_]+)?","g"),this.securityExpression=new RegExp("^[<>a-zA-Z0-9\\(\\)+-\\/\\* ]*$"),this.reductionExpression=new RegExp("[ \\(\\)\\[\\]:-]+","g"),this.trimLeadExpression=new RegExp("^_+"),this.trimEndExpression=new RegExp("_+$"),this.universe=t,this.skillMapping={},this.universe.$on("universe:modified",this.updateSkillMappings),this.universe.$on("initialized",this.updateSkillMappings)}updateSkillMappings(){var t,e,n;if(this.universe&&this.universe.indexes&&this.universe.indexes.skill)for(n=0;n<this.universe.indexes.skill.listing.length;n++)e=(t=this.universe.indexes.skill.listing[n]).name.replace(this.reductionExpression,"_").replace(this.trimLeadExpression,"").replace(this.trimEndExpression,"").toLowerCase(),this.skillMapping[e]=t.propertyKey}display(t,e,n,i){}process(expression,source,base,target){var variableExpression=new RegExp("([a-z_]+).?([a-z:_]+)?","g");if(!source)return expression;if(!expression||"number"==typeof expression)return expression;var processed=expression,variables,buffer;for(this.universe.debug&&console.log("Calculation: ",this);variables=variableExpression.exec(expression);)if(this.universe.debug&&console.log("Var Calculation: ",expression,source,base,target,variables),3===variables.length&&void 0!==variables[2]&&null!==variables[2])switch(variables[1]){case"source":if(!source)return expression;processed=processed.replace(variables[0],parseInt(source[this.skillMapping[variables[2]]||variables[2]])||0);break;case"target":if(!target)return expression;processed=processed.replace(variables[0],parseInt(target[variables[2]])||0);break;case"character":case"entity":case"ship":case"base":if(!base)return expression;processed=processed.replace(variables[0],parseInt(base[variables[2]])||0);break;case"starting":processed=processed.replace(variables[0],0);break;default:return console.warn("Calculator - Unknown variable root",expression,variables),expression}else if("string"==typeof processed)if(buffer=this.skillMapping[variables[1]]||variables[1],this.universe.debug&&console.log("Check: ",this,buffer,source,base,variables),source&&source[buffer])processed=processed.replace(variables[0],parseInt(source[buffer])||0);else{if(!base||!base[buffer])return expression;processed=processed.replace(variables[0],parseInt(base[buffer])||0)}if(expression=processed,!(expression&&"string"==typeof expression&&expression.length<150&&this.securityExpression.test(expression)))return expression;try{return eval(expression)}catch(t){return console.error("Exception["+source.id+"]: "+expression+"\n",t),expression}}}class RSLog extends EventEmitter{constructor(t,e){super(),this.universe=t,this.tracked=100,this.recent=[],this.levels=e||{log:30,trace:10,debug:20,info:30,warn:40,error:50,fatal:60}}setLogging(t){Object.assign(this.levels,t)}toJSON(){return this.levels}createLogEntry(t,e){if(this.levels[t]){var n={level:this.levels[t],time:Date.now(),details:e,type:t};console[t]&&console[t].apply(console[t],e),this.universe.send("log",n),this.recent.unshift(n),this.tracked&&this.recent>this.tracked&&this.recent.pop(),this.$emit(t,n)}}log(...t){this.createLogEntry("log",t)}trace(...t){this.createLogEntry("trace",t)}debug(...t){this.createLogEntry("debug",t)}info(...t){this.createLogEntry("info",t)}warn(...t){this.createLogEntry("warn",t)}error(...t){this.createLogEntry("error",t)}fatal(...t){this.createLogEntry("fatal",t)}}class RSObject extends EventEmitter{constructor(t,e){super(),this.universe=e,this._replacedReferences={},this._sourceData=_p(t),this._statContributions={},this._relatedErrors={},this._coreData={},this._registered={},this._knownKeys=[],this._formulas={},this._owner=null,this._loading={},this._known={},this._mods=[],this._shadow=JSON.parse(JSON.stringify(t)),this._actionsRecent=[],this._actionsLimit=5,this._listeningParentCycle=0,this._listeningParent=(()=>{var t=Date.now();this.universe.initialized&&this._listeningParentCycle<t&&(this._listeningParentCycle=t+1e3,this.recalculateProperties()),rsSystem.debug&&this._listeningParentCycle>=t&&console.log("Recycling: ",this)}),this._registered._marked=Date.now();var n,i=Object.keys(t);for(n=0;n<i.length;n++)"name"!==i[n]&&"description"!==i[n]&&"echo"!==i[n]&&(this._coreData[i[n]]=t[i[n]]);this._coreData.description=t.description,this._coreData.name=t.name,this._modifiers=[],this.id=t.id}get truename(){if(this._coreData.name)return this._coreData.name;var t=!!this._coreData.parent&&this.universe.index.index[this._coreData.parent];return t?t.name:this.id}get truedescription(){if(this._coreData.description)return this._coreData.description;var t=!!this._coreData.parent&&this.universe.index.index[this._coreData.parent];return t?t.description:""}get name(){var t=!!this._coreData.parent&&this.universe.index.index[this._coreData.parent];return this.hidden||this.must_know?this.hidden_name?this.hidden_name:t&&t.hidden_name?t.hidden_name:"Unknown":this._coreData.name?this._coreData.name:t&&t.name?t.name:this.id}get description(){var t=!!this._coreData.parent&&this.universe.index.index[this._coreData.parent];return this.hidden||this.must_know?this.hidden_description?this.hidden_description:t&&t.hidden_description?t.hidden_description:"Mystery":this._coreData.description?this._coreData.description:t&&t.description?t.description:""}commit(t){t._type=this._type,t.id=this.id,this.universe.send("modify:"+this._type,t)}commitAdditions(t,e){(e=e||{})._type=this._class||this._type,e._class=this._class,e.id=this.id,e.delta=t,this.universe.send("modify:"+this._type+":detail:additive",e)}commitSubtractions(t,e){(e=e||{})._type=this._type,e.id=this.id,e.delta=t,this.universe.send("modify:"+this._type+":detail:subtractive",e)}learnKnowledge(t){var e,n;for(this._shadow.learned||(this._shadow.learned={}),this._shadow.knowledge||(this._shadow.knowledge=[]),n=0;n<t.length;n++)this._shadow.learned[t[n]]||(this._shadow.learned[t[n]]=Date.now(),this._shadow.knowledge.push(t[n]),e=!0);e&&this.commit({knowledge:this._shadow.knowledge,learned:this._shadow.learned})}learnOfObjects(t){var e;for(this._shadow.learned||(this._shadow.learned={}),e=0;e<t.length;e++)this._shadow.learned[t[e]]||(this._shadow.learned[t[e]]=Date.now());this.commitAdditions({known_objects:t},{learned:this._shadow.learned})}unlearnOfObjects(t){var e;for(this._shadow.learned||(this._shadow.learned={}),e=0;e<t.length;e++)this._shadow.learned[t[e]]||(this._shadow.learned[t[e]]=Date.now());this.commitSubtractions({known_objects:t},{learned:this._shadow.learned})}forgetKnowledge(t){if(!this.learned||!this.knowledge)return!1;var e,n;for(n=0;n<t.length;n++)this._shadow.learned[t[n]]&&(delete this._shadow.learned[t[n]],e=this._shadow.knowledge.indexOf(t[n]),this._shadow.knowledge.splice(e,1));e&&this.commit({knowledge:this._shadow.knowledge,learned:this._shadow.learned})}toJSON(){var t,e,n=Object.keys(this._coreData),i={};for(e=0;e<n.length;e++)if(n[e]&&"universe"!==n[e]&&"_"!==n[e][0]&&"$"!==n[e][0]&&"#"!==n[e][0])switch(typeof(t=this._coreData[n[e]])){case"number":case"string":case"boolean":case"boolean":i[n[e]]=t;break;case"object":t instanceof Array&&(i[n[e]]=t)}return i._class=this._class,i._type=this._class||this._type,i}cleanCurrentData(){for(var t=Object.keys(this),e=0;e<t.length;e++)"_"!==t[e][0]&&"universe"!==t[e]&&"description"!==t[e]&&"name"!==t[e]&&"function"!=typeof this[t[e]]&&delete this[t[e]]}inSlot(t){if(this.universe.debug&&console.debug("Check Slot["+this.id+"]: ",t),!t||!t.item)return this.universe.debug&&console.debug("No Equipment Slot["+this.id+"]"),!1;var e,n=Object.keys(t.item);for(e=0;e<n.length;e++)if(this.universe.debug&&console.debug("Check Slot["+n[e]+" for "+this.id+"]"),t.item[n[e]]&&t.item[n[e]].length&&-1!==t.item[n[e]].indexOf(this.id))return!0;return this.universe.debug&&console.debug("Failed Slot Check["+this.id+"]"),!1}unregisterListeners(){var t,e;for(t=Object.keys(this._registered),e=0;e<t.length;e++)"_"!==t[e][0]&&(this._registered[t[e]].$off?this._registered[t[e]].$off("modified",this.dependencyFired):console.warn("RSObject["+this.id+"] unable To Remove Listener? ",this._registered[t[e]]),delete this._registered[t[e]])}dependencyFired(t){this.recalculateProperties()}consumeSlotsFor(t,e,n){return RSObject.consumeSlotsFor(t,e,n)}recalculateProperties(t,e){if(!this.id)return!1;if(this.suppressed)return!1;this.recalculatePrefetch&&this.recalculatePrefetch(),t=t||this._replacedReferences,(e||this.debug||this.universe.debug)&&console.warn("replacedReferences: ",t),6e4<Date.now()-this._registered._marked&&this.unregisterListeners();var n,i,r,s,a,o,l,c,u,d=[],p={};for(a=Object.keys(this._statContributions),l=0;l<a.length;l++)delete this._statContributions[a[l]];for(p._equipped=this._coreData.equipped,p._replacedReferences=t,p._contributions=this._statContributions,p._calculated=[],p._overrides={},p._mods=[],a=Object.keys(this._relatedErrors),l=0;l<a.length;l++)delete this._relatedErrors[a[l]];if(this.slot)if(n=[].concat(this.slot),this._coreData.equipped){for(a=Object.keys(this._coreData.equipped),l=0;l<a.length;l++)if((r=Object.keys(this._coreData.equipped[a[l]])).length)for(p._overrides[a[l]]=[],c=0;c<r.length;c++)for(s=this._coreData.equipped[a[l]][r[c]],u=0;u<s.length;u++)if(this[a[l]]&&-1!==this[a[l]].indexOf(s[u])||this.universe.indexes[a[l]]&&this.universe.indexes[a[l]][s[u]]&&this.universe.indexes[a[l]][s[u]].inside===this.id)if(this.consumeSlotsFor(this.universe.index.lookup[s[u]],r[c],n))switch((e||this.debug||this.universe.debug)&&console.log(" > Record is slot valid: "+s[u]),a[l]){case"item":case"room":p._overrides[a[l]].push(s[u])}else(e||this.debug||this.universe.debug)&&console.log(" > Record is not slot valid: "+s[u]),this._relatedErrors[s[u]]={type:"error",message:"Not enough slots left",calculated:Date.now(),contents:s[u],slot:r[c]};else(e||this.debug||this.universe.debug)&&console.log(" > Record is not held valid: "+s[u]),this._relatedErrors[s[u]]={type:"error",message:"Item no longer in possession",calculated:Date.now(),contents:s[u],slot:r[c]}}else if(this.universe.indexes.slot)for(l=0;l<this.slot.length;l++)!(r=this.universe.indexes.slot.index[this.slot[l]])||p._overrides[r.accepts]||"item"!==r.accepts&&"room"!==r.accepts||(p._overrides[r.accepts]=[]);for(l=0;l<this._modifiers.length;l++)e?console.warn("Remove Listener: "+this.id+" from "+this._modifiers[l].id+": "+this._modifiers[l].$off("modified",this.recalculateProperties)):this._modifiers[l].$off("modified",this.recalculateProperties);if(this._modifiers.splice(0),this._coreData.parent&&(i=this._coreData._type&&this.universe.indexes[this._coreData._type].index[this._coreData.parent]||!this._coreData._type&&this.universe.index.index[this._coreData.parent]))for(this._listeningToParent!==i&&(this._listeningToParent&&this._listeningToParent.$off("modified",this._listeningParent),this._listeningToParent=i,i.$on("modified",this._listeningParent)),a=Object.keys(i._coreData),l=0;l<a.length;l++)"_"!==a[l][0]&&"template"!==a[l]&&"universe"!==a[l]&&"inactivated"!==a[l]&&(e&&(console.log("Checking Parent Base Key: "+a[l],i._coreData[a[l]]),console.log(" > Current: ",i[a[l]])),p._contributions[a[l]]||(p._contributions[a[l]]={}),p._contributions[a[l]][i.id]=!0,"object"==typeof i._coreData[a[l]]?null===i._coreData[a[l]]?p[a[l]]=null:i._coreData[a[l]]instanceof Array?(p[a[l]]||(p[a[l]]=[]),p[a[l]].push.apply(p[a[l]],i._coreData[a[l]])):p[a[l]]=Object.assign({},i._coreData[a[l]]):p[a[l]]=i._coreData[a[l]],this.universe.nouns,this.universe.nouns&&this.universe.nouns[a[l]]&&d.push(a[l]));else this._listeningToParent&&(this._listeningToParent.$off("modified",this._listeningParent),this._listeningParent=null);for(a=Object.keys(this._coreData),l=0;l<a.length;l++)"_"!==a[l][0]&&"universe"!==a[l]&&void 0!==this._coreData[a[l]]&&null!==this._coreData[a[l]]&&(e&&console.log("Checking Base Key: "+a[l],this._coreData[a[l]]),"object"==typeof this._coreData[a[l]]?null===this._coreData[a[l]]?p[a[l]]=null:this._coreData[a[l]]instanceof Array?p[a[l]]&&!this._coreData[a[l]].length||(p[a[l]]=[],p[a[l]].push.apply(p[a[l]],this._coreData[a[l]])):p[a[l]]=Object.assign({},this._coreData[a[l]]):p[a[l]]=this._coreData[a[l]],this.universe.nouns,this.universe.nouns&&this.universe.nouns[a[l]]&&d.push(a[l]));if(!p.name||void 0!==p.label&&null!==p.label||(p.label=p.name),d&&d.length)for(r={},l=0;l<d.length;l++)r[d[l]]||(r[d[l]]=!0,(e||this.debug||this.universe.debug)&&console.error("Reference Start["+d[l]+"]: ",_p(p)),this.loadNounReferenceModifications(d[l],p,e),(e||this.debug||this.universe.debug)&&console.log("Reference End["+d[l]+"]: ",_p(p)));for(p.modifierstats&&(p._mods=p._mods.concat(p.modifierstats)),p.modifierattrs&&(p._mods=p._mods.concat(p.modifierattrs)),l=0;l<p._mods.length;l++)r=this.universe.indexes.modifierattrs.index[p._mods[l]]||this.universe.indexes.modifierstats.index[p._mods[l]],(e||this.debug)&&console.log("Process Modification: ",r),r&&r.performModifications(p,this.id);if((e||this.debug||this.universe.debug)&&(console.warn("Modified Report"),console.log("Base: ",_p(p))),this.universe.indexes.player.index[this.universe.user.id].master?this._search=this.id.toLowerCase():this._search="",this.name&&(this._search+=this.name.toLowerCase()),this.type&&"function"==typeof this.type.join&&(this._search+=this.type.join(" ||| ")),this.description&&(this._search+=this.description.toLowerCase()),this.type&&this.type.toLowerCase&&(this._search+=this.type.toLowerCase()),this.classification&&this.classification.toLowerCase&&(this._search+=this.classification.toLowerCase()),this.location&&"string"==typeof this.location&&(this._search+=this.location.toLowerCase(),this.universe.index.lookup[this.location]&&this.universe.index.lookup[this.location].name&&(this._search+=this.universe.index.lookup[this.location].name.toLowerCase())),this.universe.calculator)for(o={},l=0;l<p._calculated.length;l++)this._formulas[p._calculated[l]]=p[p._calculated[l]],"string"!=typeof p[p._calculated[l]]||"undefined"===p._calculated[l]||o[p._calculated[l]]||((e||this.debug||this.universe.debug)&&console.warn("Calculator Processing["+p._calculated[l]+"]: ",p[p._calculated[l]]),p[p._calculated[l]]=this.universe.calculator.process(p[p._calculated[l]],this),o[p._calculated[l]]=!0,(e||this.debug||this.universe.debug)&&console.warn(" > Result["+p._calculated[l]+"]: ",p[p._calculated[l]]));for(a=Object.keys(this),l=0;l<a.length;l++)"_"!==a[l][0]&&"universe"!==a[l]&&"description"!==a[l]&&"name"!==a[l]&&"function"!=typeof this[a[l]]&&delete this[a[l]];for(a=Object.keys(p),l=0;l<a.length;l++)"_"!==a[l][0]&&"name"!==a[l]&&"description"!==a[l]&&"echo"!==a[l]&&"function"!=typeof this[a[l]]&&(this[a[l]]=p[a[l]]);this.delayed_data&&void 0!==this.data&&(this.delayed_data=!1),this.rebuildKnown(),this.recalculateHook&&this.recalculateHook(),this._calculated=p._calculated,this._mods=p._mods,this.$emit("modified",this)}loadNounReferenceModifications(t,e,n){var i,r,s,a,o;if(n=n||this.universe.debug,this.universe.nouns)if((i=e&&e._overrides&&e._overrides[t]?e._overrides[t]:e&&e._replacedReferences&&e._replacedReferences[t]?e._replacedReferences[t]:e[t])instanceof Array){for(a=0;a<i.length;a++)if(i[a]&&(r=this.universe.nouns[t][i[a]._sourced||i[a]])){if(r._mods&&(e._mods=e._mods.concat(r._mods),r._statContributions&&e._contributions))for(s=Object.keys(r._statContributions),o=0;o<s.length;o++)e._contributions[s[o]]||(e._contributions[s[o]]={}),Object.assign(e._contributions[s[o]],r._statContributions[s[o]]);this._registered[r.id]||(r.$on("modified",this.dependencyFired,this),this._registered[r.id]=r)}}else if(i&&(r=this.universe.nouns[t][i._sourced||i])){if(r._mods&&(e._mods=e._mods.concat(r._mods),r._statContributions&&e._contributions))for(s=Object.keys(r._statContributions),o=0;o<s.length;o++)e._contributions[s[o]]||(e._contributions[s[o]]={}),Object.assign(e._contributions[s[o]],r._statContributions[s[o]]);this._registered[r.id]||(r.$on("modified",this.dependencyFired,this),this._registered[r.id]=r)}}performModifications(t,e,n){if(this.needs_slot&&!this.inSlot(t._equipped))return!1;var i,r,s;for(r=0;this.condition&&r<this.condition.length;r++)if((i=this.universe.index.lookup[this.condition[r]])&&i.evaluate&&!i.evaluate(t,this.id))return!1;if(this.universe.index)for(r=0;r<rsSystem.listingNouns.length;r++)if(this[rsSystem.listingNouns[r]])if(this[rsSystem.listingNouns[r]]instanceof Array)for(s=0;s<this[rsSystem.listingNouns[r]].length;s++)this[rsSystem.listingNouns[r]][s]&&((i=this.universe.index.lookup[this[rsSystem.listingNouns[r]][s]._sourced||this[rsSystem.listingNouns[r]][s]])?i.performModifications(t,this.id):console.warn("Missing Reference["+this[rsSystem.listingNouns[r]]+"] in object["+this.id+"]"));else this[rsSystem.listingNouns[r]]&&(i=this.universe.index.lookup[this[rsSystem.listingNouns[r]]._sourced||this[rsSystem.listingNouns[r]]])&&i.performModifications(t,this.id);if(!this._owner&&this.owners&&this.owners.length)for(this._owner={},r=0;r<this.owners.length;r++)this._owner[this.owners[r]]=!0;if(t._calculated)for(this._calculated={},r=0;r<t._calculated.length;r++)this._calculated[t._calculated[r]]||(this._calculated[t._calculated[r]]=!0);return!0}performActionEvent(t){this._actionsRecent.push(t),this._actionsLimit<this._actionsRecent.length&&this._actionsRecent.splice(this._actionsLimit),this.$emit("acted:"+t.type,this)}loadDelta(t){if((this.debug||rsSystem.debug)&&(this._lastDelta=_p(t)),t.owners)for(this._owner={},e=0;e<t.owners.length;e++)this._owner[t.owners[e]]=!0;var e,n=Object.keys(t);for(e=0;e<n.length;e++)if("function"!=typeof this[n[e]]&&"echo"!==n[e])switch(n[e]){case"+delta":this.loadAddDelta(t,t[n[e]]);break;case"-delta":this.loadSubDelta(t,t[n[e]]);break;case"_delta":case"delta":break;default:this._coreData[n[e]]=t[n[e]]}this.loadDeltaHook&&this.loadDeltaHook(t),this.recalculateProperties()}loadAddDelta(t,e){var n,i;if(e||(e=t.delta||t._delta||t["+delta"]),e){for(n=Object.keys(e),i=0;i<n.length;i++)this._coreData[n[i]]=this.processAsAdditive(this._coreData[n[i]],e[n[i]]);if(e.owners)for(i=0;i<e.owners.length;i++)this._owner[e.owners[i]]=!0}}loadSubDelta(t,e){var n,i;if(e||(e=t.delta||t._delta||t["+delta"]),e){for(n=Object.keys(e),i=0;i<n.length;i++)this._coreData[n[i]]=this.processAsSubtractive(this._coreData[n[i]],e[n[i]]);if(e.owners)for(i=0;i<e.owners.length;i++)this._owner[e.owners[i]]=!1}}processAsAdditive(t,e){return t?"number"==typeof t?parseFloat((t+(e||0)).toFixed(2)):t instanceof Array?(e instanceof Array?t.push.apply(t,e):t.push(e),t):"string"==typeof t?t+e:void 0:"number"==typeof e?parseFloat(e.toFixed(2)):e}processAsSubtractive(t,e){var n,i;if("number"==typeof t)return parseFloat((t-e).toFixed(2));if(t instanceof Array){if(e instanceof Array)for(i=0;i<e.length;i++)-1!==(n=t.indexOf(e[i]))&&t.splice(n,1);else-1!==(n=t.indexOf(e))&&t.splice(n,1);return t}return"string"==typeof t&&"string"==typeof e?(-1!==(n=t.indexOf(e))&&(t=t.substring(0,n)+t.substring(n+e.length)),t):t||"number"!=typeof e?void 0:-1*parseFloat(e.toFixed(2))}retrieve(){this._loading.data||(this._loading.data=setTimeout(()=>{this._loading.data&&(console.warn("Data load for object["+this.id+"] timed out"),delete this._loading.data)},RSObject.loadTimeout),this.universe.send("data:retrieve",{_class:this._class,id:this.id}))}loadData(t){this._loading.data&&clearTimeout(this._loading.data),this.delayed_data=!1,this._coreData.data=t.data,this._shadow.data=t.data,this.data=t.data,this.$emit("modified")}isOwner(t){return this._owner?!!this._owner[t]:!!this.owners&&-1!==this.owners.indexOf(t)}rebuildKnown(){var t,e,n,i;for(n=0;n<this._knownKeys.length;n++)delete this._known[this._knownKeys[n]];if(this._knownKeys.splice(0),this.known_objects)for(n=0;n<this.known_objects.length;n++)this._known[this.known_objects[n]]||(this._known[this.known_objects[n]]=[]),this._known[this.known_objects[n]].push(this.id),this._knownKeys.push(this.known_objects[n]);if(this.knowledge&&this.knowledge.length)for(n=0;n<this.knowledge.length;n++)if((t=this.universe.indexes.knowledge.index[this.knowledge[n]])&&t.related&&t.related.length)for(i=0;i<t.related.length;i++)e=t.related[i],this._known[e]||(this._known[e]=[]),this._known[e].push(t.id),this._knownKeys.push(e)}knowsOf(t,e,n){return!(n&&(!this.knowledge||-1===this.knowledge.indexOf(n.id||n)))&&(!!t&&("object"==typeof t?this._known[t.id]&&this._known[t.id].length>=(t.known_threshold||e||1):(t=t.id||t,e||(e=1),this._known[t]&&this._known[t].length>=e)))}equal(t){return!!t&&this.id===t.id}}RSObject.consumeSlotsFor=function(t,e,n){if(!(t&&e&&n&&n.length))return!1;var i,r=[],s=-1;for(i=t.slots_used>1?t.slots_used:1;-1!==(s=n.indexOf(e,s+1))&&r.length<i;)-1!==s&&r.push(s);if(r.length===i){for(s=r.length-1;0<=s;s--)n.splice(r[s],1);return!0}return!1},RSObject.loadTimeout=5e3;class RSSheet extends EventEmitter{constructor(t,e){}}!function(){var t=new showdown.Converter({tables:!0}),e=["class","style","data","data-id","uri","href","src","draggable","value","id"],n={whiteList:{span:e,img:e,div:e,h1:e,h2:e,h3:e,h4:e,h5:e,h6:e,ul:e,ol:e,li:e,p:e,a:e}},i="${",r="}$",s={icon:"",id:""};rsSystem.component("RSShowdown",{inherit:!0,props:{universe:{required:!0,type:Object}},methods:{rsshowdown:function(e,a,o,l){return t.makeHtml(function(t,e,a,o,l){var c,u,d,p,h,f,m,v,g,y=e.indexes.player.index[e.user.username];for(m=t.indexOf(i);-1!==m&&-1!==(g=t.indexOf(r,m))&&m+3<g;){if(u=t.substring(m,g+2),c={},-1===(v=(p=t.substring(m+2,g)).indexOf(",")))f=p;else switch((f=p.split(",")).length){default:case 4:o=e.index.lookup[f[3]];case 3:c.classes=f[2];case 2:c.id=f[1].trim();case 1:f=f[0]}if(f){if("="===f[0])f=e.calculateExpression(f.substring(1),a,o,l),d=$('<span class="calculated-result rendered-value '+c.classes+'">'+f+"</span>");else if("~"===f[0]){if(2===(f=f.substring(1).split(".")).length)switch(f[0]){case"base":f=o[f[1]]||"";break;case"target":f=l[f[1]]||"";break;default:f=a[f[1]]||""}else f=a[f[0]]||"";d=$('<span class="'+c.classes+'">'+f+"</span>")}else"?"===f[0]?(f=f.substring(1).trim(),d=(h=c.id&&e.index.index[c.id]||a)&&h._formulas&&h._formulas[f]?$('<span class="rendered-value value-formula">'+h._formulas[f]+"</span>"):$('<span class="rendered-value value-formula not-found not-known">Unknown</span>')):"#"===f[0]?((f=f.substring(1).trim())&&(f=e.index.index[f])||a&&(f=a),f||(f=s),d=$('<a class="'+f.icon+'" data-id="'+f.id+'"></a>')):'"'===f[0]?(f=f.substring(1).trim(),d=$('<span class="">'+f+"</span>")):d=(v=e.index.index[c.id||f])?$('<a class="rendered-value linked-value '+c.classes+'" data-id="'+(c.id||v.id)+'">'+f+"</a>"):$('<span class="calculated-result rendered-value '+c.classes+' not-found">'+f+"[Not Known]</span>");c.classes&&d.css(c.classes),t=t.replace(u,d[0].outerHTML)}m=t.indexOf(i,m+1)}return y&&!y.allow_scripting?filterXSS(t,n):t}(e,this.universe,a,o,l))}}})}();class RSUniverse extends EventEmitter{constructor(t){super(),this.index=new SearchIndex,this.version="Disconnected",this.debugConnection=!1,this.initialized=!1,this.loggedOut=!1,this.processEvent={},this.timeouts={},this.indexes={},this.echoed={},this.nouns={},this.echoTimeout=1e4,this.indexes.all=this.index,this.latency=0,this.connection={},this.connection.maxHistory=100,this.connection.authenticator=null,this.connection.user=null,this.connection.reconnectAttempts=0,this.connection.connectMark=0,this.connection.retries=0,this.connection.reconnecting=!1,this.connection.closing=!1,this.connection.master=!1,this.connection.lastError=!1,this.connection.history=[],this.importing={},this.importing.active=!1,this.importing.abort=!1,this.importing.imported=[],this.importing.skipped=[],this.importing.failed=[],this.connection.entry=((t,e,n,i)=>{var r={};"object"==typeof t?(n=t,t=void 0):"number"==typeof t&&(e=t,t=void 0),void 0===e?e=30:"object"==typeof e&&(n=e,e=30),r.user=this.connection.user.toJSON(),r.time=Date.now(),r.message=t,r.level=e,r.error=i,r.data=n,this.connection.history.unshift(r),this.connection.history.length>this.connection.maxHistory&&this.connection.history.pop()}),this.tracking={},t.calculator||(this.calculator=new RSCalculator(this)),this.log=new RSLog(this),this.$on("world:state",t=>{this.initialized||this.$emit("initializing",t),this.loadState(t)}),this.processEvent.ping=(t=>{var e=t.received-t.ping;this.latency?this.latency=(this.latency+e/2)/2:this.latency=e/2,this.latency=parseInt(this.latency)});var e=()=>{this.send("ping",{ping:Date.now()}),setTimeout(e,6e4)};setTimeout(e,1e4)}connect(t,e){if(!e)throw new Error("No address specified");return t||(t=rsSystem.AnonymousUser),this.version="Unknown",this.connection.user=t,this.connection.address=e,new Promise((n,i)=>{this.loggedOut=!1,this.connection.entry("Connecting to Universe",{address:e});var r=new WebSocket(e+"?authenticator="+t.token+"&username="+t.username+"&id="+t.id+"&name="+t.name+"&passcode="+t.passcode);r.onopen=(t=>{this.closing=!1,this.connection.connectMark=Date.now(),this.connection.entry("Connection Established",t),this.connection.reconnecting&&(this.connection.reconnecting=!1,this.$emit("reconnected",this)),this.$emit("connected",this)}),r.onerror=(t=>{this.connection.entry("Connection Failure",50,t),rsSystem.log.fatal({message:"Connection Failure",error:t}),this.connection.lastErrorAt=Date.now(),this.connection.lastError="Connection Fault",this.connection.socket=null,this.connection.reconnecting||(this.connection.entry("Mitigating Lost Connection",40),this.connection.reconnecting=!0,this.$emit("error",{message:"Connection Issues",event:t})),this.reconnect()}),r.onclose=(t=>{this.connection.entry("Connection Closed",40,t),this.connection.closing?this.connection.closing&&this.$emit("disconnected",this):4e3===t.code?this.$emit("badlogin",{message:"Bad login",event:t}):this.connection.reconnecting||(this.connection.entry("Mitigating Lost Connection",40),this.connection.lastErrorAt=Date.now(),this.connection.lastError="Connection Fault",this.connection.reconnecting=!0,this.$emit("error",{message:"Connection Issues",event:t}),this.reconnect(t)),this.connection.socket=null}),r.onmessage=(t=>{var e,n;this.connection.syncMark=t.time,this.connection.last=Date.now();try{(e=JSON.parse(t.data)).received=Date.now(),e.sent=parseInt(e.sent),e.version&&e.version!==this.version&&(this.version=e.version),(this.debugConnection||this.debug||rsSystem.debug)&&console.log("Connection - Received: ",_p(e),this.echoed[e.echo]),e.echo&&"function"==typeof this.echoed[e.echo]?(n=this.echoed[e.echo],clearTimeout(this.timeouts[e.echo]),delete this.timeouts[e.echo],delete this.echoed[e.echo],n(e.data||e.event||e)):e.echo&&e.event&&!e.event.echo&&(e.event.echo=e.echo,e.echo=this.echoed[e.echo],delete this.echoed[e.echo]),this.$emit(e.type,e.event),e.echo&&this.$emit("echoing",e),this.connection.entry(e.type+" Message received","error"===e.type?50:30,e),(this.debugConnection||this.debug)&&console.log("Emission["+e.type+":complete]: ",e.event),this.processEvent[e.type]?this.processEvent[e.type](e):this.$emit(e.type+":complete",e.event)}catch(n){console.error("Communication Exception: ",n),this.connection.entry("Error processing message",50,t,n),this.$emit("warning",{message:{text:"Failed to parse AQ Connection message"},fields:{message:e,exception:n}})}}),this.$on("model:deleted",t=>{var e=this.nouns[t._class||t.type][t.id];e&&((this.debug||rsSystem.debug)&&console.warn("Deleting Record: "+(t._class||t.type)+" - "+t.id+": ",t,e),this.index.unindexItem(e),this.indexes[t._class||t.type]&&(this.indexes[t._class||t.type].unindexItem(e),delete this.nouns[t._class||t.type][t.id]),this.$emit("universe:modified",this),this.$emit("universe:modified:complete",this))}),this.$on("model:modified",t=>{var e=this.nouns[t._class||t.type][t.id];e?((this.debug||rsSystem.debug)&&console.info("Modifying Record: "+(t._class||t.type)+" - "+t.id+": ",t),e.loadDelta(t.modification)):((this.debug||rsSystem.debug)&&console.warn("Building new record: "+(t._class||t.type)+" - "+t.id+": ",t),this.nouns[t._class||t.type]||(this.nouns[t._class||t.type]={}),this.nouns[t._class||t.type][t.id]=new rsSystem.availableNouns[t._class||t.type](t.modification,this),this.nouns[t._class||t.type][t.id].recalculateProperties(),this.indexes[t._class||t.type].indexItem(this.nouns[t._class||t.type][t.id]),this.index.indexItem(this.nouns[t._class||t.type][t.id]),this.$emit("universe:built",this.nouns[t._class||t.type][t.id])),this.$emit("universe:modified",this),this.$emit("modified",this),this.$emit("universe:modified:complete",this)}),this.$on("entity:rolled",t=>{var e=this.nouns.entity[t.id];e&&(t.type="rolled",e.performActionEvent(t))}),this.$on("entity:action",t=>{var e=this.nouns[t._class||t.type][t.id];e?((this.debug||rsSystem.debug)&&console.info("Entity Action Received: "+(t._class||t.type)+" - "+t.id+": ",t),e.performActionEvent(t.modification)):rsSystem.log.error("Event Target Missing",t)}),this.$on("control",t=>{switch(this.debugConnection&&console.warn("Control Event: ",t),t.data.control){case"page":document.hasFocus()&&this.checkEventCondition(t.data.condition)&&(window.location="#"+t.data.url)}}),this.$on("data:receive",t=>{this.loadData(t)}),this.connection.socket=r,this.user=t,n()})}calculateExpression(t,e,n,i){return this.calculator?this.calculator.process(t,e,n,i).toString():t.toString()}displayExpression(t,e,n,i){return this.calculator?this.calculator.display(t,e,n,i).toString():t.toString()}checkEventCondition(t){if(!t)return!0;var e,n=Object.keys(t),i=!0;for(e=0;i&&e<n.length;e++)switch(n[e]){case"hash":i=new RegExp(t[n[e]]).test(location.hash);break;default:console.warn("Unknown Event Conditional["+n[e]+"]: ",t)}return i}reconnect(t){setTimeout(()=>{rsSystem.log.warn("Possible Reconnect: ",t),(!t||t.code<4100)&&this.connection.retries<5?(rsSystem.log.warn("Connection Retrying...\n",this),this.connection.reconnectAttempts++,this.connection.retries++,this.connect(this.connection.user,this.connection.address)):(this.$emit("disconnected",this),rsSystem.log.error("Reconnect Giving up\n",this),this.loggedOut=!0)},1e3)}disconnect(){this.connection.socket?(this.connection.entry("Disconnecting"),this.connection.socket.close(),this.connection.reconnecting=!1,this.connection.closing=!0,this.connection.socket=null,this.connection.address=null):this.connection.entry("Unable to disconnect, Universe not connected",40)}logout(){this.loggedOut=!0,this.disconnect()}loadState(t){return new Promise((e,n)=>{var i,r,s,a,o,l,c=Object.keys(t);for(c.unshift("modifierattrs"),c.unshift("modifierstats"),c.unshift("condition"),l=0;l<c.length;l++)if(r=c[l],i=rsSystem.availableNouns[r]){if(t[r])for(s=Object.keys(t[r]),this.nouns[r]||(this.indexes[r]=new SearchIndex,this.nouns[r]={}),o=0;o<s.length;o++)a=s[o],this.nouns[r][a]?this.nouns[r][a].loadDelta(t[r][a]):(this.nouns[r][a]=new i(t[r][a],this),this.nouns[r][a]._type=r,this.indexes[r].indexItem(this.nouns[r][a]),this.index.indexItem(this.nouns[r][a])),this.nouns[r][a]}else rsSystem.log.error("Noun does not have a registered constructor: "+r,t[r]);for(o=0;o<this.index.listing.length;o++)this.index.listing[o].recalculateProperties&&this.index.listing[o].recalculateProperties();for(o=0;o<this.index.listing.length;o++)this.index.listing[o].recalculateProperties&&this.index.listing[o].recalculateProperties();for(o=0;o<rsSystem.listingNouns.length;o++)this.nouns[rsSystem.listingNouns[o]]||(this.indexes[rsSystem.listingNouns[o]]=new SearchIndex,this.nouns[rsSystem.listingNouns[o]]={});this.initialized||(this.initialized=!0,this.$emit("initialized",this)),this.$emit("universe:modified",this)})}loadData(t){var e=this.nouns[t._class][t.id];e?e.loadData(t):rsSystem.log.warn("Unable to locate noun for data: ",t)}send(t,e,n){if(e=e||{},this.connection.socket){if(this.connection.retries=0,"object"!=typeof e)throw new Error("Only objects can be sent");return e.echo||(e.echo=Random.identifier("echo")),e={sent:Date.now(),echo:e.echo,event:t,data:e},this.debugConnection&&console.log("Connection - Sending: ",e),n?(this.echoed[e.echo]=n,this.timeouts[e.echo]=setTimeout(()=>{this.echoed[e.echo]&&(delete this.echoed[e.echo],fail(new Error("Send Timedout")))},this.echoTimeout)):this.echoed[e.echo]=e,this.connection.socket.send(JSON.stringify(e)),e.echo}}promisedSend(t,e){return e=e||{},new Promise((n,i)=>{if(t)if(this.connection.socket){if("object"!=typeof e)throw new Error("Only objects can be sent");e.echo||(e.echo=Random.identifier("echo")),e={sent:Date.now(),echo:e.echo,event:t,data:e},this.debugConnection&&console.log("Connection - Sending: ",e),this.echoed[e.echo]=(()=>{n()}),this.connection.socket.send(JSON.stringify(e)),this.timeouts[e.echo]=setTimeout(()=>{this.echoed[e.echo]&&(delete this.echoed[e.echo],i(new Error("Send Timedout")))},this.echoTimeout)}else i(new Error("Connection not available"));else i(new Error("No Event Type Provided"))})}importData(t,e){if(!this.importing.active){var n,i,r,s,a;for(Vue.set(this.importing,"active",!0),Vue.set(this.importing,"abort",!1),this.importing.count=0,r=Object.keys(t),a=0;a<r.length;a++)this.importing.count+=(t[r[a]]?t[r[a]].length:0)||0;this.importing.imported.splice(0),this.importing.skipped.splice(0),this.importing.failed.splice(0),s=Random.identifier("tracker"),this.$once(s,t=>{n=t,Vue.set(n,"processed",this.importing.imported.length)}),this.$emit("track-progress",{message:"Importing Records",processing:this.importing.count,id:s}),r.forEach(r=>{t[r].forEach(t=>{t._class=t._class||r,t._type=t._type||r,i?i=i.then(()=>new Promise((i,s)=>{setTimeout(()=>{n&&!n.active&&(this.importing.abort=!0,n=null),this.importing.abort?s("Aborting"):e||!this.indexes[t._class].index[t.id]?(t._class=r,t._type=r,this.debugConnection&&console.log("Importing["+t.id+"]"),this.promisedSend("modify:"+t._class,t).then(i).catch(s)):(this.importing.skipped.push(t),this.debugConnection&&console.log("Skipping["+t.id+"]"),n&&Vue.set(n,"skipped",this.importing.skipped.length),i())},0)})):this.importOverwrites||!this.indexes[t._class].index[t.id]?i=this.promisedSend("modify:"+t._class,t):(this.importing.skipped.push(t),n&&Vue.set(n,"skipped",this.importing.skipped.length),n&&Vue.set(n,"skipped",this.importing.skipped.length),i=new Promise(t=>{t()})),i=i.then(e=>{this.importing.imported.push(t),this.debugConnection&&console.log(" > Finished |",t),n&&Vue.set(n,"processed",this.importing.imported.length+this.importing.failed.length)}).catch(e=>{this.importing.abort||(console.error(" > Failed |",t,e),this.importing.failed.push(t),n&&(Vue.set(n,"processed",this.importing.imported.length+this.importing.failed.length),Vue.set(n,"failed",this.importing.failed.length)))})})}),i?i.then(()=>{Vue.set(this.importing,"active",!1),n&&n.active&&(Vue.set(n,"icon","fas fa-check rs-light-green"),e?Vue.set(n,"message","Imported: "+this.importing.imported.length):Vue.set(n,"message","Imported: "+this.importing.imported.length+" (Skipped: "+this.importing.skipped.length+")"),this.$emit(n.id)),this.debugConnection&&console.warn("Import Completed")}).catch(t=>{Vue.set(this.importing,"active",!1),this.$emit(n.id),this.importing.abort?(Vue.set(this.importing,"abort",!1),n&&n.active&&(Vue.set(n,"icon","fas fa-check rs-light-red"),Vue.set(n,"message","Import Aborted"),Vue.set(n,"aborted",!0)),this.debugConnection&&console.error("Import Aborted")):(console.error("Import Error: ",t),n&&n.active&&(Vue.set(n,"icon","fas fa-exclamation-triangle rs-light-red"),Vue.set(n,"message",t.message)),this.debugConnection&&console.error("Import Failed"))}):Vue.set(this,"importing",!1)}}}rsSystem.component("RSSWStats",{inherit:!0,data:function(){var t,e,n,i={};for(i.entityStats={},i.entityStats.character={brawn:{name:"Brawn",info:"Similar to strength",class:"rs-red",icon:"fas fa-fist-raised"},agility:{name:"Agility",info:"",class:"rs-red",icon:"fas fa-fist-raised"},intellect:{name:"Intellect",info:"",class:"rs-red",icon:"fas fa-fist-raised"},cunning:{name:"Cunning",info:"",class:"rs-red",icon:"fas fa-fist-raised"},willpower:{name:"Willpower",info:"",class:"rs-red",icon:"fas fa-fist-raised"},pressence:{name:"Presence",info:"",class:"rs-red",icon:"fas fa-fist-raised"}},i.entityStats.ship={attack:{name:"Attack",info:"Similar to strength",class:"rs-red",icon:"fas fa-flame rot315"},evasion:{name:"Evasion",info:"Nimbleness of the ship. Allows it to dodge incoming fire.",class:"rs-green",icon:"fad fa-chevron-double-right"},hull:{name:"Hull",info:"Similar to strength",class:"rs-yellow",icon:"fas fa-th"},shield:{name:"Shield",info:"A ship's ability to absorb incoming damage before its hull begins to take damage",class:"rs-blue",icon:"fal fa-futbol"}},i.entityStats.flight={manuevers:{name:"Maneuvers",section:"piloting",info:"Control of your ship",icon:"fad fa-random",base:"agility"},pilotingplanetary:{name:"Planetary",section:"piloting",info:"",icon:"fas fa-fighter-jet",base:"cunning"},sensors:{name:"Sensors",section:"piloting",info:"Reading and controling a ship's sensor array",icon:"fas fa-signal-stream",base:"intellect"},tracking:{name:"Tracking",section:"piloting",info:"Follow a target",icon:"ra ra-targeted",base:"willpower"},hacking:{name:"Hacking",section:"piloting",info:"Remotely access another ship by force",icon:"fad fa-router",base:"intellect"}},i.entityStats.skill={astrogation:{name:"Astrogation",section:"general",info:"Course plotting.",icon:"fas fa-route",base:"intellect"},computers:{section:"general",info:"",icon:"fas fa-phone-laptop",base:"intellect"},mechanics:{section:"general",info:"",icon:"fas fa-wrench",base:"intellect"},medicine:{section:"general",info:"",icon:"fas fa-pills",base:"intellect"},coreworlds:{name:"Core Worlds",section:"knowledge",info:"",icon:"fas fa-globe",base:"intellect"},education:{section:"knowledge",info:"",icon:"fas fa-graduation-cap",base:"intellect"},lore:{section:"knowledge",info:"",icon:"fas fa-journal-whills",base:"intellect"},outerrim:{name:"Outer Rim",section:"knowledge",info:"",icon:"fal fa-planet-ringed",base:"intellect"},underworld:{section:"knowledge",info:"",icon:"fas fa-dungeon",base:"intellect"},xenology:{section:"knowledge",info:"",icon:"fas fa-user-alien",base:"intellect"},athletics:{name:"Athletics",section:"general",info:"Your innate abilities toward feats of body endurance and control.",icon:"fas fa-running",base:"brawn"},resilience:{section:"general",info:"",icon:"fas fa-shield",base:"brawn"},brawl:{section:"combat",info:"",icon:"fas fa-fist-raised",base:"brawn"},melee:{section:"combat",info:"",icon:"fas fa-running",base:"brawn"},charm:{name:"Charm",section:"general",info:"",icon:"fas fa-grin-hearts",base:"pressence"},cool:{section:"general",info:"",icon:"fal fa-snowflake",base:"pressence"},leadership:{section:"general",info:"",icon:"fas fa-users-crown",base:"pressence"},negotiation:{section:"general",info:"",icon:"fas fa-comments-dollar",base:"pressence"},coordination:{section:"general",info:"",icon:"fal fa-balance-scale",base:"agility"},stealth:{section:"general",info:"",icon:"fas fa-eye-slash",base:"agility"},gunnery:{section:"combat",info:"",icon:"fas fa-bow-arrow",base:"agility"},rangedweaponlight:{name:"Ranged (Light)",section:"combat",info:"",icon:"fas fa-horizontal-rule",base:"agility"},rangedweaponheavy:{name:"Ranged (Heavy)",section:"combat",info:"",icon:"fad fa-barcode-scan",base:"agility"},deception:{section:"general",info:"",icon:"fas fa-user-secret",base:"cunning"},perception:{section:"general",info:"",icon:"fas fa-eye",base:"cunning"},skulduggery:{section:"general",info:"",icon:"fad fa-briefcase",base:"cunning"},streetwise:{section:"general",info:"",icon:"fas fa-road",base:"cunning"},survival:{section:"general",info:"",icon:"fas fa-campground",base:"cunning"},coercion:{section:"general",info:"",icon:"fas fa-comment-slash",base:"willpower"},discipline:{section:"general",info:"",icon:"fas fa-alarm-exclamation",base:"willpower"},vigilance:{section:"general",info:"",icon:"fas fa-street-view",base:"willpower"},planetary:{name:"Planetary Knowledge",section:"knowledge",info:"General knowledge of planets. Can not be leveled manually.",controlled:!0,icon:"fad fa-planet-ringed",base:"intellect"}},Object.assign(i.entityStats.skill,i.entityStats.flight),Object.assign(i.entityStats,i.entityStats.character),Object.assign(i.entityStats,i.entityStats.skill),Object.assign(i.entityStats,i.entityStats.ship),e=Object.keys(i.entityStats),n=0;n<e.length;n++)"character"!==e[n]&&"ship"!==e[n]&&"skill"!==e[n]&&(i.entityStats[e[n]].name||(i.entityStats[e[n]].name=e[n].capitalize()),i.entityStats[e[n]].propertyKey="skill_"+e[n],i.entityStats[e[n]].enhancementKey="skill_enhanced_"+e[n],i.entityStats[e[n]].bonusKey="skill_bonuses_"+e[n],i.entityStats[e[n]].id=e[n]);for(i.characterStats=["brawn","agility","intellect","cunning","willpower","pressence"],i.characterStatsListing=[],n=0;n<i.characterStats.length;n++)i.characterStatsListing.push(i.entityStats[i.characterStats[n]]);for(i.shipStats=["attack","evasion","hull","shield"],i.skillStats=Object.keys(i.entityStats.skill).sort(),i.skillStatsListing=[],i.listAllStats=i.characterStats.concat(i.shipStats).concat(i.skillStats),i.skillStatsSections={},n=0;n<i.skillStats.length;n++)(t=i.entityStats[i.skillStats[n]])?(t.section&&!i.skillStatsSections[t.section]&&(i.skillStatsSections[t.section]=[]),i.skillStatsSections[t.section].push(i.entityStats[i.skillStats[n]]),i.skillStatsListing.push(t)):console.error("Unaligned Skill/Stat Key: "+i.skillStats[n]);for(i.skillStatsSectionsListing=Object.keys(i.skillStatsSections),i.shipStatList=[],n=0;n<i.shipStats.length;n++)i.shipStatList.push(i.entityStats[i.shipStats[n]]);for(e=Object.keys(i.entityStats),n=0;n<e.length;n++)i.entityStats[e[n]]._search=i.entityStats[e[n]]._search||"",i.entityStats[e[n]].id&&(i.entityStats[e[n]]._search+=i.entityStats[e[n]].id.toLowerCase()),i.entityStats[e[n]].name&&(i.entityStats[e[n]]._search+=i.entityStats[e[n]].name.toLowerCase()),i.entityStats[e[n]].info&&(i.entityStats[e[n]]._search+=i.entityStats[e[n]].info.toLowerCase()),i.entityStats[e[n]].base&&(i.entityStats[e[n]]._search+=i.entityStats[e[n]].base.toLowerCase());return i},methods:{}}),function(){var t=/[^a-zA-Z0-9]/g,e=/[ _-]/g,n={p:"fas fa-dice-d12 rs-yellow",a:"fas fa-dice-d8 rs-green",b:"fas fa-dice-d6 rs-light-blue",c:"fas fa-dice-d12 rs-red",d:"fas fa-dice-d8 rs-purple",s:"fas fa-dice-d6 rs-black",f:"fas fa-dice-d12 rs-white",w:"fal fa-dice-d6 rs-white"},i=["p","a","b","c","d","s","w","f"];rsSystem.component("RSComponentUtility",{inherit:!0,mixins:[],props:{universe:{type:Object}},data:function(){var t={};return t.diceTypes=i,t},computed:{},watch:{},mounted:function(){},methods:{getDice:function(t,e){return this.renderRoll(this.getSkillRoll(t,e))},getSkillRoll:function(t,e){var n,i={};if(i.p=0,i.a=0,i.b=0,i.c=0,i.d=0,i.s=0,i.s=0,i.f=0,"string"==typeof(e=e||this.entity)){if(!this.universe)throw new Error("Universe parameter required in "+this.$vnode.tag);t=this.universe.indexes.entity.lookup[t]}if("string"==typeof t){if(!this.universe)throw new Error("Universe parameter required in "+this.$vnode.tag);t=this.universe.indexes.skill.lookup[t]}if(t&&e){for(n=0;n<e[t.base]||n<e[t.propertyKey];n++)n<e[t.base]&&n<e[t.propertyKey]?++i.p:++i.a;for(n=0;n<e[t.bonusKey];n++)++i.b}return this.entity["skill_amend_"+t.property]&&this.addRolls(i,Dice.parseDiceRoll(this.entity["skill_amend_"+t.property])),i},addRolls:function(t,...e){var n,r;for(t||(t={}),n=0;n<i.length;n++)isNaN(t[i[n]])&&(t[i[n]]=0);for(r=0;r<e.length;r++)for(n=0;n<i.length;n++)isNaN(e[r][i[n]])||(t[i[n]]+=e[r][i[n]]);return t},renderRoll:function(t,e){var r,s;for(e=e||[],r=0;r<i.length;r++)for(s=0;t[i[r]]&&s<t[i[r]];s++)e.push(n[i[r]]);return e},showInfo:function(t,e,n){t&&t.id&&this.isOwner(t)&&(!e&&this.entity&&(e=this.entity),rsSystem.EventBus.$emit("display-info",{target:n,record:t,base:e}))},isOwner:function(t,e){return!!(e=this.player||e).master||(!!t.is_public||!t.is_private&&(t.owner===this.player.id||(!(!t.owners||-1===t.owners.indexOf(this.player.id))||!(t.owner||t.owners&&0!==t.owners.length))))},sharesOne:function(t,e){var n,i;for(n=0;n<t.length;n++)for(i=0;i<e.length;i++)if(t[n]===e[i])return t[n];return null},raceHasDataset:function(t){return(t=t||this.models[this.state.current].race)&&this.universe.indexes.race.index[t]&&this.universe.indexes.race.index[t].dataset||!t&&this.universe.defaultDataset},getRacialNameGenerator:function(t){var e,n,i=null;if(t&&this.universe.indexes.race.index[t]&&this.universe.indexes.race.index[t].dataset){for(e="",n=0;n<this.universe.indexes.race.index[t].dataset.length;n++)this.universe.indexes.dataset.index[this.universe.indexes.race.index[t].dataset[n]]&&(e+=" "+this.universe.indexes.dataset.index[this.universe.indexes.race.index[t].dataset[n]].set);i=new NameGenerator(e)}else this.universe.defaultDataset&&(this.universe.defaultDataset.set||this.universe.defaultDataset.recalculateProperties(),i=new NameGenerator(this.universe.defaultDataset.set));return i},idFromName:function(n){return n?n.toLowerCase().replace(e,":").replace(t,""):""},uniqueByID:function(t){if(!t)return t;var e,n={};for(e=t.length-1;0<=e;e--)n[t[e].id]?t.splice(e,1):n[t[e].id]=!0;return t},sortData:function(t,e){var n,i;if(void 0!==t.order&&void 0!==e.order&&null!==t.order&&null!==e.order){if(t.order<e.order)return-1;if(t.order>e.order)return 1}if((void 0===t.order||null===t.order)&&void 0!==e.order&&null!==e.order)return-1;if((void 0===e.order||null===e.order)&&void 0!==t.order&&null!==t.order)return 1;if(void 0!==t.name&&void 0!==e.name&&null!==t.name&&null!==e.name){if((n=t.name.toLowerCase())<(i=e.name.toLowerCase()))return-1;if(n>i)return 1}if(t.date||e.date){if((void 0===t.name||null===t.name)&&void 0!==e.name&&null!==e.name)return-1;if((void 0===e.name||null===e.name)&&void 0!==t.name&&null!==t.name)return 1;if((void 0===t.date||null===t.date)&&void 0!==e.date&&null!==e.date)return-1;if((void 0===e.date||null===e.date)&&void 0!==t.date&&null!==t.date)return 1;if(t.date<e.date)return-1;if(t.date>e.date)return 1}return t.id<e.id?-1:t.id>e.id?1:0}}})}(),rsSystem.component("RSEquipmentControl",{inherit:!0,mixins:[],props:{},computed:{},watch:{},methods:{}}),Vue.directive("enter",{bind:function(t,e){if("function"==typeof e.value){var n=function(t){if("Enter"===t.code)return t.preventDefault(),!1};$(t).keypress(n),$(t).keydown(n),$(t).keyup(function(t){if("Enter"===t.code)return e.value(),t.preventDefault(),!1})}}}),Vue.directive("new",{bind:function(t,e){if("function"==typeof e.value){var n=function(t){if(t.ctrlKey&&"KeyN"===t.code)return t.preventDefault(),!1};$(t).keypress(n),$(t).keydown(n),$(t).keyup(function(t){if(t.ctrlKey&&"KeyN"===t.code)return e.value(),t.preventDefault(),!1})}}}),Vue.directive("save",{bind:function(t,e){if("function"==typeof e.value){var n=function(t){if(t.ctrlKey&&"KeyS"===t.code)return t.preventDefault(),!1};$(t).keypress(n),$(t).keydown(n),$(t).keyup(function(t){if(t.ctrlKey&&"KeyS"===t.code)return e.value(),t.preventDefault(),!1})}}}),Vue.directive("tab",{bind:function(t,e){var n=function(t){if("Tab"===t.code)return t.preventDefault(),!1};$(t).keypress(n),$(t).keydown(n),$(t).keyup(function(e){if("Tab"===e.code){var n=t.selectionStart;return t.value=t.value.substring(0,n)+"\t"+t.value.substring(t.selectionEnd),t.selectionStart=n+1,t.selectionEnd=n+1,e.preventDefault(),!1}})}}),Vue.directive("filedrop",{bind:function(t,e){if("function"==typeof e.value){t.addEventListener("dragenter",function(e){t.classList.add("overlay")}),t.addEventListener("dragleave",function(e){t.classList.remove("overlay")}),t.addEventListener("drop",function(n){return t.classList.remove("overlay"),n.stopPropagation(),n.preventDefault(),e.value(n.dataTransfer),!1})}}}),Vue.directive("wheel",{bind:function(t,e){"function"==typeof e.value&&t.addEventListener("mousewheel",e.value)}}),Vue.directive("pan",{bind:function(t,e){if("function"==typeof e.value){var n=new Hammer(t);n.get("pan").set({direction:Hammer.DIRECTION_ALL}),n.on("pan",e.value)}}}),Vue.directive("pinch",{bind:function(t,e){if("function"==typeof e.value){var n=new Hammer(t),i={};e.modifiers.left?i.direction=Hammer.DIRECTION_LEFT:e.modifiers.right?i.direction=Hammer.DIRECTION_RIGHT:e.modifiers.up?i.direction=Hammer.DIRECTION_UP:e.modifiers.down&&(i.direction=Hammer.DIRECTION_DOWN),n.get("pinch").set(i),e.modifiers.in&&n.on("pinchin",e.value),e.modifiers.out&&n.on("pinchout",e.value)}}}),Vue.directive("swipe",{bind:function(t,e){if("function"==typeof e.value){var n=new Hammer(t),i={};e.modifiers.left?i.direction=Hammer.DIRECTION_LEFT:e.modifiers.right?i.direction=Hammer.DIRECTION_RIGHT:e.modifiers.up?i.direction=Hammer.DIRECTION_UP:e.modifiers.down&&(i.direction=Hammer.DIRECTION_DOWN),n.get("swipe").set(i),n.on("swipe",e.value)}}});class RSAbility extends RSObject{constructor(t,e){super(t,e)}}class RSAction extends RSObject{constructor(t,e){super(t,e),this._targeted=[]}fire(t,e,n){var i,r;if(this.response&&this.response.length)for(r=0;r<this.response.length;r++)(i=RSAction.response.index[this.response[r]])&&i.reaction(t,e,n)}filterTargets(t,e){var n,i;if(this.response&&this.response.length)for(i=0;i<this.response.length;i++)(n=RSAction.response.index[this.response[i]])&&n.filter&&(t=t.filter(n.filter(this,e)));return t}recalculateHook(){var t,e;if(this._targeted.splice(0),this.response&&RSAction.response)for(e=0;e<this.response.length;e++)(t=RSAction.response.index[this.response[e]])&&t.target&&this._targeted.push.apply(this._targeted,t.target);this._targeted.length&&(this.targets=this._targeted.join(", "))}}setTimeout(function(){RSAction.response=new SearchIndex,RSAction.response.indexItem({name:"Test",id:"Test",target:["item"],reaction:function(t,e,n){console.log("Action Test Sending: ",t,e,n),t&&e&&n&&t.universe.promisedSend("action:test",{origin:t.id||t,source:e.id||e,target:n.id||n}).then(function(t){console.log("Action Test Response: ",t)}).catch(function(t){console.warn("Action Test Failure: ",t)})}}),RSAction.response.indexItem({name:"Draw",id:"Draw",reaction:function(t,e){t&&e&&t.universe.send("action:draw",{origin:t.id||t,source:e.id||e})}}),RSAction.response.indexItem({name:"Recharge",id:"Recharge",target:["item"],reaction:function(t,e,n){t&&e&&n&&t.universe.send("action:recharge",{origin:t.id||t,source:e.id||e,target:n.id||n})},filter:function(t,e){return function(n){var i=!0;return!(!n||!0===n.charged||void 0===n.charged||null===n.charged)&&(t&&(i&&t.cancontain&&t.cancontain.length&&(i=t.cancontain.hasCommon(n.type)),i&&t.notcontain&&t.notcontain.length&&(i=!t.notcontain.hasCommon(n.type))),e&&(i&&e.cancontain&&e.cancontain.length&&(i=e.cancontain.hasCommon(n.type)),i&&e.notcontain&&e.notcontain.length&&(i=!e.notcontain.hasCommon(n.type))),i)}}}),RSAction.response.listing.sortBy("name")},0);class RSArchetype extends RSObject{constructor(t,e){super(t,e)}recalculateHook(){this.parent&&this.universe.indexes.archetype.index[this.parent]&&(this._search+=" ||| "+this.universe.indexes.archetype.index[this.parent].name.toLowerCase())}}class RSBook extends RSObject{constructor(t,e){super(t,e)}}class RSCondition extends RSObject{constructor(t,e){super(t,e)}evaluate(t,e){if(!this.type||!t[this.type])return!1;var n,i,r,s,a=0;if(this.singleton&&this.singleton.length)for(n=t[this.type].indexOf(e),i=this.limited||1,s=0;s<this.singleton.length;s++)if(-1!==(r=t[this.type].indexOf(this.singleton[s]))&&r<n&&++a>=i)return!1;return!0}}class RSDatapoint extends RSObject{constructor(t,e){super(t,e)}get name(){return this._coreData.property}recalculateProperties(){var t,e=Object.keys(this._coreData);for(t=0;t<e.length;t++)"name"!==e[t]&&"description"!==e[t]&&"_"!==e[t][0]&&"function"!=typeof this[e[t]]&&(this[e[t]]=this._coreData[e[t]]);if(!this.raw&&this.option_index)if(this.universe.indexes[this.option_index])switch(this.type){case"select":this.options=this.universe.indexes[this.option_index].listing;break;case"multireference":this.source_index=this.universe.indexes[this.option_index];break;default:rsSystem.log.warn("Unknown index usage type["+this.type+"]",{type:this.type})}else console.warn("Datapoint references invalid index",this)}}class RSDataset extends RSObject{constructor(t,e){super(t,e)}recalculateHook(){this.default_set&&(this.universe.defaultDataset=this)}}class RSDatausage extends RSObject{constructor(t,e){super(t,e),this.suppressed=!0}}class RSEffect extends RSObject{constructor(t,e){super(t,e),this._alterationLookup={}}recalculatePrefetch(){var t;if(this.alters&&this.alters.length)for(t=0;t<this.alters.length;t++)delete this._alterationLookup[this.alters[t]]}recalculateHook(){var t;if(this.alters&&this.alters.length)for(t=0;t<this.alters.length;t++)this._alterationLookup[this.alters[t]]=!0;this.indicators&&(this.indicators.split?this.indicators=this.indicators.split(/[\s,]+/):console.warn("Effect["+this.id+"] has an unsplittable indicator specified: ",this.indicators))}}class RSEntity extends RSObject{constructor(t,e){super(t,e),this._coreData.equipped?this._equipBuffer=JSON.parse(JSON.stringify(this._coreData.equipped)):this._equipBuffer={},this._coreData.effect?this._effectBuffer=JSON.parse(JSON.stringify(this._coreData.effect)):this._effectBuffer=[],t.location||(t.location="location:universe")}assignEffect(t,e){t=t.id||t,(e=e||{}).id=t+":"+this._effectBuffer.length+":"+Date.now(),e._sourced=t,e.time=this.universe.time_game||this.universe.time||Date.now(),this._effectBuffer.push(e),this.commit({effect:this._effectBuffer})}assignEffectIndicator(t,e){if((t=t.id||t)&&this._effectBuffer.length){var n,i=-1;for(e||(e=null),n=0;-1===i&&n<this._effectBuffer.length;n++)this._effectBuffer[n].id===t&&(i=n);if(-1!==i)return this._effectBuffer[i].indicator=e,this.commit({effect:this._effectBuffer}),!0}return!1}editEffect(t,e){if((t=t.id||t)&&this._effectBuffer.length&&e){var n,i=-1;for(n=0;-1===i&&n<this._effectBuffer.length;n++)this._effectBuffer[n].id===t&&(i=n);if(-1!==i)return Object.assign(this._effectBuffer[i],e),this.commit({effect:this._effectBuffer}),!0}}dismissEffect(t){if((t=t.id||t)&&this._effectBuffer.length){var e,n=-1;for(e=0;-1===n&&e<this._effectBuffer.length;e++)this._effectBuffer[e].id===t&&(n=e);if(-1!==n)return this._effectBuffer.splice(n,1),this.commit({effect:this._effectBuffer}),!0}return!1}recalculateHook(){var t,e;for(this.encumberance_max=5+(this.brawn||0)+(this.encumberance_bonus||0),this.encumberance=0,t=this.universe.indexes.item.translate(this.item),e=0;e<t.length;e++)t[e].encumberance&&(this.encumberance+=t[e].encumberance);this.is_shop&&(this.rarity_max=this.rarity_max||5,this.rarity_min=this.rarity_min||0,this.rarity_mean=this.rarity_mean||(this.rarity_max-this.rarity_min)/2+this.rarity_min,this.rarity_spread=this.rarity_spread||1,this.rarity_inverted=1/this.rarity_spread),void 0!==this.rarity_mean&&this.rarity_max<this.rarity_mean?this.rarity_mean=this.rarity_max:void 0!==this.rarity_mean&&this.rarity_mean<this.rarity_min&&(this.rarity_mean=this.rarity_min),this.linked_location&&(t=this.universe.indexes.location.index[this.linked_location])&&t.image&&(this.image=t.image)}setPilot(t){}restockFunction(t){return this.is_shop&&this.restock_base?-1*Math.pow(this.rarity_inverted*t-this.rarity_inverted*this.rarity_mean,2)+this.restock_base:0}equipSlot(t,e){"string"==typeof t&&(t=this.universe.index.lookup[t]),"string"==typeof e&&(e=this.universe.index.lookup[e]),t.accepts&&e._type===t.accepts?t.itemtype&&t.itemtype.hasCommon(e.itemtype)||t.type&&t.type.hasCommon(e.type)?(this._equipBuffer[t.accepts]||(this._equipBuffer[t.accepts]={}),this._equipBuffer[t.accepts][t.id]||(this._equipBuffer[t.accepts][t.id]=[]),this._equipBuffer[t.accepts][t.id].push(e.id),this.commit({equipped:this._equipBuffer})):console.warn("Slot["+t.id+"] does not accept that equipment type"):t.accepts?t.accepts!==e._class&&console.warn("Slot["+t.id+"] does not accept that equipment class["+e._class+"@"+e.id+"]"):console.warn("Slot["+t.id+"] accepts no records")}unequipSlot(t,e){var n;"string"==typeof t&&(t=this.universe.index.lookup[t]),"string"==typeof e&&(e=this.universe.index.lookup[e]),t.accepts&&this._equipBuffer[t.accepts]&&this._equipBuffer[t.accepts][t.id]&&-1!==(n=this._equipBuffer[t.accepts][t.id].indexOf(e.id))?(this._equipBuffer[t.accepts][t.id].splice(n,1),this.commit({equipped:this._equipBuffer})):t.accepts?-1===n&&console.warn("Slot["+t.id+"] does not have that equipment["+e.id+"] equipped"):console.warn("Slot["+t.id+"] accepts no records")}}class RSEvent extends RSObject{constructor(t,e){super(t,e),this._alterationLookup={}}}class RSHistory extends RSObject{constructor(t,e){super(t,e)}}RSHistory.ignore=!0;class RSImage extends RSObject{constructor(t,e){super(t,e),this.data&&(this._blob=this.base64toBlob(this.data,this.content_type))}base64toBlob(t,e){e=e||"";for(var n=atob(t),i=n.length,r=Math.ceil(i/1024),s=new Array(r),a=0;a<r;++a){for(var o=1024*a,l=Math.min(o+1024,i),c=new Array(l-o),u=o,d=0;u<l;++d,++u)c[d]=n[u].charCodeAt(0);s[a]=new Uint8Array(c)}return new Blob(s,{type:e})}}class RSInventory extends RSObject{constructor(t,e){super(t,e)}performModifications(t){return!0}}class RSItem extends RSObject{constructor(t,e){super(t,e)}recalculatePrefetch(){this._coreData.no_modifiers||this.no_modifiers?this._replacedReferences.item=[]:this._replacedReferences.item=!1}recalculateHook(){var t,e,n=0;if(this.adds_encumberance&&this.item&&this.item.length){for(e=0;e<this.item.length;e++)(t=this.universe.indexes.item.lookup[this.item[e]])&&(n+=parseInt(t.encumberance)||0);this.scaled_encumberance&&this.contents_max&&(n=parseInt(Math.ceil(this.scaled_encumberance*(n/this.contents_max))))}this.encumberance?this.encumberance+=n:this.encumberance=n}performModifications(t,e,n){return!this.no_modifiers&&super.performModifications(t,e,n)}}class RSItemType extends RSObject{constructor(t,e){super(t,e)}}class RSJournal extends RSObject{constructor(t,e){super(t,e),this._alterationLookup={}}get name(){return this.hidden?this.hiddenName?this.hiddenName:"Unknown":this._coreData.name?this._coreData.name:this._coreData.session&&this.universe.indexes.session&&this.universe.indexes.session.index&&this.universe.indexes.session.index[this._coreData.session]?this.universe.indexes.session.index[this._coreData.session].name:this.id}recalculateHook(){var t;this._search||(this._search=""),(t=this.universe.indexes.entity.index[this.editor])&&(this._search+=" ||| "+t.name.toLowerCase())}}class RSKnowledge extends RSObject{constructor(t,e){super(t,e)}}class RSLoadout extends RSObject{constructor(t,e){super(t,e)}}class RSLocale extends RSObject{constructor(t,e){super(t,e),this._alterationLookup={}}recalculateHook(){var t;this.thickness=parseFloat(this.thickness)||2,this.opacity=parseFloat(this.opacity)||.05;try{if(this.path&&this.path.length&&(!this.values||this._pastPath!=this.path)&&(this._pastPath=this.path,this.values=this.path.split(";"),this.values&&this.values.length))for(t=0;t<this.values.length;t++)this.values[t]=this.values[t].split(","),this.values[t][0]=parseFloat(this.values[t][0])||0,this.values[t][1]=parseFloat(this.values[t][1])||0,this.values[t][0]/=100,this.values[t][1]/=100;(this.x||this.y)&&(this._x=(parseFloat(this.x)||0)/100,this._y=(parseFloat(this.y)||0)/100)}catch(t){console.error("Locale["+this.id+"] Exception: ",t),this.exception=t.message}}}class RSLocation extends RSObject{constructor(t,e){super(t,e),!this.type||this.type instanceof Array||(this.type=[this.type]),this._childLocations=[],this.coordinates||(this.coordinates=[]),t.showing&&(this.showing=t.showing)}appendPath(t,e){void 0===this._shadow.path&&(this._shadow.path=""),this._shadow.path?this._shadow.path+=" ;"+t+","+e:this._shadow.path=t+","+e,this.commit({path:this._shadow.path})}loadDeltaHook(t){t.showing&&(this.showing=t.showing)}recalculateHook(){var t,e,n,i,r=[this.id],s="";if(this._childLocations.splice(0),this.location){for(i=0;i<r.length;i++)for(t=r[i],n=0;n<this.universe.indexes.location.listing.length;n++)(e=this.universe.indexes.location.listing[n])&&e.location===t&&(this._childLocations.push(e),s+=e._search,r.push(e.id));this._search+=" ||| "+s,(e=this.universe.indexes.location.index[this.location])&&(this._search+=" ||| "+e.name)}this.thickness=parseFloat(this.thickness)||2,this.opacity=parseFloat(this.opacity)||.05;try{if(this.path&&this.path.length&&(!this.values||this._pastPath!=this.path)&&(this._pastPath=this.path,this.values=this.path.split(";"),this.values&&this.values.length))for(n=0;n<this.values.length;n++)this.values[n]=this.values[n].split(","),this.values[n][0]=parseFloat(this.values[n][0])||0,this.values[n][1]=parseFloat(this.values[n][1])||0,this.values[n][0]/=100,this.values[n][1]/=100;(this.x||this.y)&&(this._x=(parseFloat(this.x)||0)/100,this._y=(parseFloat(this.y)||0)/100)}catch(t){console.error("Locale["+this.id+"] Exception: ",t),this.exception=t.message}}}class RSLogLevel{constructor(t,e){t.level&&(e.log.levels[t.level]=t.value),t.setTracked&&(e.log.tracked=t.setTracked)}}RSLogLevel.ignore=!0;class RSManeuver extends RSObject{constructor(t,e){super(t,e)}recalculateSheet(){}}class RSMinigame extends RSObject{constructor(t,e){super(t,e)}}class RSModifier extends RSObject{constructor(t,e){super(t,e)}_evaluateConditions(t){return!0}_evaluateCondition(t,e,n){}}class RSModifierAttributes extends RSModifier{constructor(t,e){super(t,e)}performModifications(t,e,n){var i,r=Object.keys(this._coreData);for(n&&console.warn("Perform Mod["+e+"]: "+this.id),i=0;i<r.length;i++)if(!RSModifierAttributes._skip[r[i]]&&"_"!==r[i][0]&&"history"!==r[i]&&"created"!==r[i]&&"updated"!==r[i])if(t._contributions&&(t._contributions[r[i]]||(t._contributions[r[i]]={}),t._contributions&&(t._contributions[r[i]]||(t._contributions[r[i]]={}),t._contributions[r[i]][e]=!0)),t[r[i]])switch(typeof this._coreData[r[i]]){case"boolean":case"string":case"number":rsSystem.debug&&console.log("Applying["+this.id+" @ "+r[i]+"]: "+this._coreData[r[i]],this),-1!==r[i].indexOf("adjust")?t[r[i]]?t[r[i]]=t[r[i]]+" + "+this._coreData[r[i]]:t[r[i]]=this._coreData[r[i]]:RSModifierAttributes._appendedProperties[r[i]]?t[r[i]]=t[r[i]]+this._coreData[r[i]]:t[r[i]]=this._coreData[r[i]]}else t[r[i]]=this._coreData[r[i]]}}RSModifierAttributes._appendedProperties={description:!0,note:!0},RSModifierAttributes._setAppend=function(t,e){void 0===e&&(e=!0),RSModifierAttributes._appendedProperties[t]=!!e},RSModifierAttributes._skip={name:!0,id:!0};class RSModifierStats extends RSModifier{constructor(t,e){super(t,e)}performModifications(t,e,n){n=n||this.universe.debug;var i,r,s=Object.keys(this._coreData);for(n&&console.warn("Perform Mod["+e+"]: "+this.id),i=0;i<s.length;i++){if(n&&console.warn("Check Key Mod["+this.id+"]: "+s[i]+" oftype "+typeof this[s[i]],_p(t[s[i]]),_p(this._coreData[s[i]])),!RSModifierStats._skip[s[i]]&&s[i]&&"_"!==s[i][0]&&"history"!==s[i]&&"created"!==s[i]&&"updated"!==s[i])if("undefined"===e&&console.warn("???: ",this,t),t._contributions&&(t._contributions[s[i]]||(t._contributions[s[i]]={}),t._contributions[s[i]][e]=!0),t[s[i]])switch(typeof this[s[i]]){case"string":t[s[i]]=this._coreData[s[i]]+" + "+t[s[i]],t._calculated&&t._calculated.push(s[i]);break;case"boolean":t[s[i]]=this._coreData[s[i]]||t[s[i]];break;case"number":"number"==typeof t[s[i]]?t[s[i]]=t[s[i]]+this._coreData[s[i]]:(t[s[i]]=t[s[i]].toString()+" + "+this._coreData[s[i]],t._calculated&&t._calculated.push(s[i]));break;case"object":if(null!==this._coreData[s[i]])if(t[s[i]]instanceof Array)for(r=0;r<this._coreData[s[i]].length;r++)t[s[i]].push(this._coreData[s[i]][r]);else Object.assign(t[s[i]],this._coreData[s[i]])}else null!==this._coreData[s[i]]&&("object"==typeof this._coreData[s[i]]?this._coreData[s[i]]instanceof Array?(t[s[i]]=[],t[s[i]].push.apply(t[s[i]],this._coreData[s[i]])):t[s[i]]=Object.assign({},this._coreData[s[i]]):t[s[i]]=this._coreData[s[i]],t._calculated&&t._calculated.push(s[i]));n&&console.log(" > Result of Key Mod["+this.id+"]: "+s[i],_p(t[s[i]]))}}}RSModifierStats._skip={description:!0,master_note:!0,name:!0,id:!0};class RSNote extends RSObject{constructor(t,e){super(t,e)}recalculateSheet(){}}class RSParty extends RSObject{constructor(t,e){super(t,e)}recalculateHook(){var t,e,n=0;try{if(this.entity&&this.entity.length)for(n=(t=this.universe.indexes.entity.index[this.entity[0]]).speed||0,e=1;e<this.entity.length;e++)(t=this.universe.indexes.entity.index[this.entity[e]])&&!isNaN(t.speed)&&t.speed<n&&(n=t.speed||0)}catch(t){rsSystem.log.warn("Failed to calculate party["+this.id+"] speed: ",t)}this.speed=n}setLocation(t){var e,n,i={};for(i.location=t,this.commit(i),n=0;this.entity&&n<this.entity.length;n++)(e=this.universe.indexes.entity.index[this.entity[n]])&&e.commit(i)}removeMember(t){this.universe.send("modify:entity:detail:subtractive",{id:this.id,_type:"party",delta:{entity:t}})}addMember(t){this.universe.send("modify:entity:detail:additive",{id:this.id,_type:"party",delta:{entity:t}})}giveCredits(t){var e,n={};if(this.entity)for(n.delta={},n.delta.credits=t,n._type="entity",e=0;e<this.entity.length;e++)n.id=this.entity[e],this.universe.send("modify:entity:detail:additive",n)}}class RSPlanet extends RSObject{constructor(t,e){super(t,e)}}class RSPlayer extends RSObject{constructor(t,e){super(t,e)}loadDeltaHook(){Object.keys(this._coreData)}recalculateSheet(){}}class RSPlaylist extends RSObject{constructor(t,e){super(t,e)}}class RSRace extends RSObject{constructor(t,e){super(t,e)}}class RSRoom extends RSObject{constructor(t,e){super(t,e)}}class RSSession extends RSObject{constructor(t,e){super(t,e),this._alterationLookup={},isNaN(this.destiny_light)&&(this.destiny_light=0),isNaN(this.destiny_dark)&&(this.destiny_dark=0),isNaN(this.active_players)&&(this.active_players=0)}get name(){return"Session "+this._coreData.name}recalculateHook(){this.countPlayers()}countPlayers(){var t,e=0;for(t=0;t<this.universe.indexes.player.listing.length;t++)this.universe.indexes.player.listing[t].connections>0&&e++;e!==this.active_players&&(this.active_players=e)}rollDestiny(){var t,e,n,i=0,r=0;for(0===this.active_players&&this.countPlayers(),t=this.active_players-1,n=0;n<t;n++)(e=Dice.calculateDiceRoll("1f")).light>0&&(i+=e.light),e.dark>0&&(r+=e.dark);this.commit({destiny_starting:i+" Light, "+r+" Dark",destiny_light:i,destiny_dark:r})}}class RSSetting extends RSObject{constructor(t,e){super(t,e)}recalculateHook(){this._shadow.value!==this.value&&(this.universe.$emit(this.id,this.value),this._shadow.value=this.value,this._updated=Date.now())}}class RSSex extends RSObject{constructor(t,e){super(t,e)}}class RSSkill extends RSObject{constructor(t,e){super(t,e),this.id&&(this.property=this.id.replace("skill:","")),this.propertyKey="skill_"+this.property,this.enhancementKey="skill_enhanced_"+this.property,this.bonusKey="skill_bonuses_"+this.property}recalculateHook(){this.base&&(this._search+=this.base.toLowerCase()),this.id&&(this.property=this.id.replace("skill:","")),this.propertyKey="skill_"+this.property,this.enhancementKey="skill_enhanced_"+this.property,this.bonusKey="skill_bonuses_"+this.property}}class RSSlot extends RSObject{constructor(t,e){super(t,e)}acceptsRecord(t){return!(this.itemtype&&this.itemtype.length||this.type&&this.type.length)||(!(!this.itemtype||!this.itemtype.hasCommon(t.itemtype))||!(!this.type||!this.itemtype.hasCommon(t.type)))}}class RSStreamURL extends RSObject{constructor(t,e){super(t,e)}loadDeltaHook(){}recalculateSheet(){}}class RSType extends RSObject{constructor(t,e){super(t,e)}}class RSWidget extends RSObject{constructor(t,e){super(t,e)}}class RSWidgetConfiguration extends RSObject{constructor(t,e){super(t,e)}}rsSystem.component("messagePanel",{inherit:!0,mixins:[],props:{universe:{required:!0,type:Object},user:{required:!0,type:Object}},data:function(){var t={messages:[],tracking:{}};return t},watch:{},mounted:function(){rsSystem.register(this),this.universe.$on("track-progress",this.trackProgress),this.universe.$on("error",this.receiveMessage)},methods:{trackProgress:function(t){this.tracking[t.id]={},t.active=!0,t.type="progress",t.processed=0,this.messages.push(t),this.universe.$emit(t.id,t),this.universe.$once(t.id,()=>{Vue.delete(this.tracking,t.id)})},receiveMessage:function(t){t._display_time=new Date(t.time),t._display_time.getTime()||(t._display_time=new Date),t.type="notification",t.message||(t.data?t.data.message?t.message=t.data.message:t.data.description&&(t.message=t.data.description):t.error?t.error.message?t.message=t.error.message:t.error.description&&(t.message=t.error.description):t.message="Unidentified Error - See Logs: "+JSON.stringify(t)),this.messages.unshift(t),this.messages.length>5&&this.messages.pop()},dismissMessage:function(t){var e=this.messages.indexOf(t);t.active&&Vue.set(t,"active",!1),-1!==e&&this.messages.splice(e,1)}},beforeDestroy:function(){this.universe.$off("error",this.update)},template:Vue.templified("common/panels/message.html")});class SearchIndex extends EventEmitter{constructor(t){var e,n;if(super(),this.lookup={},this.listing=[],this.named={},this.index={},this.selected={},t=t||this.source){if(this.source=t,t instanceof Array)for(n={},e=0;e<t.length;e++)t[e].id&&(this.lookup[t[e].id]=t[e],this.listing.push(t[e]),n.name=t[e].name&&t[e].name.toLowerCase?t[e].name.toLowerCase():"",n.id=t[e].id.toLowerCase(),this.index[n.id]=t[e],this.index[n.name]=t[e]);else if(t instanceof Object)for(n=Object.keys(t),e=0;e<n.length;e++)n[e]&&"undefined"!=n[e]&&(this.lookup[n[e]]=t[n[e]],this.listing.push(this.lookup[n[e]]),n.name=this.lookup[n[e]].name&&this.lookup[n[e]].name.toLowerCase?this.lookup[n[e]].name.toLowerCase():"",n.id=n[e].toLowerCase(),this.index[n.id]=this.lookup[n[e]],this.index[n.name]=this.lookup[n[e]]);this.$emit("indexed")}}reindex(){this.clearIndex(),this.indexSet(this.source)}indexSet(t){var e,n;if(t=t||this.source){if(this.source=t,t instanceof Array)for(n={},e=0;e<t.length;e++)t[e].id&&(this.lookup[t[e].id]=t[e],this.listing.push(t[e]),n.name=t[e].name&&t[e].name.toLowerCase?t[e].name.toLowerCase():"",n.id=t[e].id.toLowerCase(),this.index[n.id]=t[e],this.index[n.name]=t[e]);else if(t instanceof Object)for(n=Object.keys(t),e=0;e<n.length;e++)n[e]&&"undefined"!=n[e]&&(this.lookup[n[e]]=t[n[e]],this.listing.push(this.lookup[n[e]]),n.name=this.lookup[n[e]].name&&this.lookup[n[e]].name.toLowerCase?this.lookup[n[e]].name.toLowerCase():"",n.id=n[e].toLowerCase(),this.index[n.id]=this.lookup[n[e]],this.index[n.name]=this.lookup[n[e]]);this.$emit("indexed")}else rsSystem.log.warn("Emtpy Search Index")}select(t){if(t){var e;if(t instanceof Array||t.constructor&&"Array"===t.constructor.name)for(var n=0;n<t.length;n++)t[n]&&(e=t[n].id||t[n],this.lookup[e]?this.selected[e]=this.lookup[e]:rsSystem.log.warn("Can not select non-indexed record: ",t[n]));else e=t.id||t,this.lookup[e]?this.selected[e]=this.lookup[e]:rsSystem.log.warn("Can not select non-indexed record: ",t);this.$emit("selection")}}unselect(t){if(t){var e;if(t instanceof Array||t.constructor&&"Array"===t.constructor.name)for(var n=0;n<t.length;n++)t[n]&&(e=t[n].id||t[n],this.lookup[e]?delete this.selected[e]:rsSystem.log.warn("Can not unselect non-indexed record: ",t[n]));else e=t.id||t,this.lookup[e]?delete this.selected[e]:rsSystem.log.warn("Can not select non-indexed record: ",t);this.$emit("selection")}}clearSelection(){this.unselect(this.selection)}clearIndex(){var t,e;for(this.listing.splice(0,this.listing.length),e=Object.keys(this.index),t=0;t<e.length;t++)delete this.selected[e[t]],delete this.lookup[e[t]],delete this.index[e[t]],delete this.named[e[t]];this.source=null,this.$emit("indexed")}toggleSelect(t){return this.selected[t.id]?(delete this.selected[t.id],this.$emit("selection"),!1):(this.selected[t.id]=t,this.$emit("selection"),!0)}isSelected(t){return!!this.selected[t.id||t]}get selection(){return Object.keys(this.selected)}list(t,e,n){var i,r,s,a;if(t&&"object"==typeof t)for(r=r||Object.keys(t),t.null&&(t.null=t.null.toLowerCase()),i=0;i<this.listing.length;i++){for(a=!0,s=0;a&&s<r.length;s++)if("null"==r[s])this.listing[i]._search||(this.listing[i]._search=this.createSearchString(this.listing[i])),-1===this.listing[i]._search.indexOf(t.null)&&(a=!1);else switch(typeof this.listing[i][r[s]]){case"string":t[r[s]]instanceof RegExp?a=t[r[s]].test(this.listing[i][r[s]]):-1===this.listing[i][r[s]].indexOf(t[r[s]])&&(a=!1);break;case"boolean":!!this.listing[i][r[s]]!=!!t[r[s]]&&(a=!1);break;case"undefined":case void 0:case"object":switch(typeof t[r[s]]){case"boolean":!!this.listing[i][r[s]]!=!!t[r[s]]&&(a=!1);break;default:a=!1}break;default:t[r[s]]instanceof Array?a=-1!==t[r[s]].indexOf(this.listing[i][r[s]]):this.listing[i][r[s]]!=t[r[s]]&&(a=!1)}!a||e.customFilter&&!e.customFilter(this.listing[i])||n.push(this.listing[i])}else n.push.apply(n,this.listing);if(void 0!==e.order&&e.sortKey)if(e.sorter)n.sort(e.sorter),e.order&&n.reverse();else{var o=e.order?1:-1,l=e.order?-1:1;n.sort(function(t,n){return(t=t[e.sortKey]||"")<(n=n[e.sortKey]||"")?l:t>n?o:0})}return e.limit&&n.splice(0,parseInt(e.limit)),e.paging&&(e.paging.count=parseInt(Math.ceil(n.length/e.paging.per)),e.paging.current>=e.paging.count&&(e.paging.current=e.paging.count-1),e.paging.current<0&&(e.paging.current=0),n.splice(e.paging.current*e.paging.per+e.paging.per),n.splice(0,e.paging.current*e.paging.per)),e.paging}createSearchString(t){var e="";return t.name&&t.name.toLowerCase&&(e+=t.name.toLowerCase()),t.id&&(e+=t.id),t.location&&(e+=t.location),t.origin&&(e+=t.origin),t.owner&&(e+=t.owner),t.backstory&&(e+=t.backstory.toLowerCase()),t.description&&(e+=t.description.toLowerCase()),t.note&&(e+=t.note.toLowerCase()),t.hiddenState&&(e+="?"),e}get(t){return this.lookup[t]||this.named[t]}indexItem(t){var e;if(t instanceof Array||t.constructor&&"Array"===t.constructor.name){for(e=0;e<t.length;e++)t[e].id?this.lookup[t[e].id]?Object.assign(this.lookup[t[e].id],t[e]):(this.listing.push(t[e]),this.lookup[t[e].id]=t[e],this.named[t[e].name]=t[e],this.index[t[e].name]=t[e],this.index[t[e].id]=t[e]):console.warn("Unidentified Search Index Update[Array]: ",t[e]);this.$emit("indexed")}else t.id?(this.lookup[t.id]?Object.assign(this.lookup[t.id],t):(this.listing.push(t),this.lookup[t.id]=t,this.named[t.name]=t,this.index[t.name]=t,this.index[t.id]=t),this.$emit("indexed")):console.warn("Search Index unable to index item due to lack of identifier: ",t)}unindexItem(t){var e,n;if(t instanceof Array||t.constructor&&"Array"===t.constructor.name){for(n=0;n<t.length;n++)(e=t[n].id||t[n])&&this.lookup[e]&&(this.listing.splice(this.listing.indexOf(this.lookup[e]),1),delete this.named[this.lookup[e].name],delete this.index[this.lookup[e].name],delete this.lookup[e],delete this.index[e]);this.$emit("indexed")}else(t=t.id||t)&&this.lookup[t]&&(this.listing.splice(this.listing.indexOf(this.lookup[t]),1),delete this.named[this.lookup[t].name],delete this.index[this.lookup[t].name],delete this.lookup[t],delete this.index[t],this.$emit("indexed"))}translate(t,e){if(e||(e=[]),t)for(var n=0;n<t.length;n++)this.lookup[t[n]]&&e.push(this.lookup[t[n]]);return e}}rsSystem.component("DataManager",{inherit:!0,mixins:[],props:[],mounted:function(){},methods:{readFile:function(t){return new Promise(function(e,n){var i=new FileReader;i.onload=function(n){e({data:n.currentTarget.result,name:t.name,size:t.size})},i.onerror=n,i.readAsText(t)})},encodeFile:function(t){return new Promise(function(e,n){var i=new FileReader;i.onload=function(n){e({data:n.currentTarget.result,name:t.name,size:t.size})},i.onerror=n,i.readAsDataURL(t)})},base64toBlob:function(t,e){e=e||"";for(var n=atob(t),i=n.length,r=Math.ceil(i/1024),s=new Array(r),a=0;a<r;++a){for(var o=1024*a,l=Math.min(o+1024,i),c=new Array(l-o),u=o,d=0;u<l;++d,++u)c[d]=n[u].charCodeAt(0);s[a]=new Uint8Array(c)}return new Blob(s,{type:e})}}}),rsSystem.component("RSMasterControls",{inherit:!0,mixins:[],props:{player:{required:!0,type:Object},universe:{required:!0,type:Object}},data:function(){var t={nameGenerators:{},spawned:0};return t},mounted:function(){},methods:{generateEvent:function(t){if(this.player.master){var e={_class:"event",_type:"event"};switch(e.name=t.capitalize()+" (New)",e.id="event:"+t+":"+Date.now(),e.date=Date.now(),e.category=t,e.active=!0,e.screen=!0,e.master_note="Generated "+t+" event.\n\n",e.state={},e.order={},e.dice={expression:"",history:[]},t){case"combat":e.icon="fas fa-swords";break;case"story":e.icon="far fa-book-open";break;default:e.icon="fas fa-newspaper"}this.universe.send("modify:event",e)}},startNewCombat:function(){var t={_class:"event",_type:"event",name:"Combat (New)"};t.id="event:combat:"+Date.now(),t.date=Date.now(),t.category="combat",t.active=!0,t.screen=!0,t.state={},t.order={},t.dice={},t.master_note="Generated combat event from master screen.\n\n",this.universe.send("modify:event",t)},addRecordToCombat:function(t){},removeRecordToCombat:function(t){},stopCombat:function(t){},deleteRecord:function(t){t&&t._class&&t.id&&this.universe.send("delete:"+t._class,t)},log:function(t){console.log("Log: ",t)},copyItemToEntity:function(t,e){if(this.player.master){var n={};n.target=e,n.item=t,this.universe.send("give:item",n)}},getNameGenerator:function(t){var e,n,i=null;if(t&&this.universe.indexes.race.index[t]&&this.universe.indexes.race.index[t].dataset)if(this.nameGenerators[t])i=this.nameGenerators[t];else{for(e="",n=0;n<this.universe.indexes.race.index[t].dataset.length;n++)this.universe.indexes.dataset.index[this.universe.indexes.race.index[t].dataset[n]]&&(e+=" "+this.universe.indexes.dataset.index[this.universe.indexes.race.index[t].dataset[n]].set);i=new NameGenerator(e),Vue.set(this.nameGenerators,t,i)}else this.universe.defaultDataset&&(this.nameGenerators._default?i=this.nameGenerators._default:(this.universe.defaultDataset.set||(console.warn("Update: ",this.universe.defaultDataset),this.universe.defaultDataset.recalculateProperties()),i=new NameGenerator(this.universe.defaultDataset.set),Vue.set(this.nameGenerators,"_default",i)));return i},generateName:function(t){var e,n,i="";if(t.randomize_name){if(t.randomize_name_dataset&&(e=this.universe.indexes.dataset.index[t.randomize_name_dataset])?e=new NameGenerator(e.set):t.race&&(e=this.getNameGenerator(t.race)),t.randomize_name_prefix&&(i+=t.randomize_name_prefix,t.randomize_name_spacing&&(i+=" ")),e)for(i+=e.corpus[Random.integer(e.corpus.length)].capitalize(),n=1;n<t.randomize_name;n++)t.randomize_name_spacing&&(i+=" "),i+=e.corpus[Random.integer(e.corpus.length)].capitalize();return t.randomize_name_suffix&&(i+=" "+t.randomize_name_suffix),i}return t.name},spawnItem:function(t){if(t&&this.player.master&&t.template&&"item"===t._class){var e={};return e.parent=t.id,e.name=t.name,e.id=t.id+":"+this.spawned+++":"+Date.now(),e._class="item",e._type="item",this.universe.send("modify:item",e),e.id}return null},spawnEntity:function(t,e){if(t&&this.player.master&&t.template&&"entity"===t._class){var n,i,r,s,a,o,l={},c={};if(l.parent=t.id,l.name=this.generateName(t),l.name===t.name&&(l.name+=" (New)"),l.id=t.id+":"+this.spawned+++":"+Date.now(),l._class="entity",l._type="entity",e&&(this.universe.indexes.player.index[e]?l.owners=[this.target]:e&&this.universe.indexes.entity.index[e]&&(l.inside=e)),t.item)for(l.item=[],s=0;s<t.item.length;s++)(n=this.universe.indexes.item.index[t.item[s]])&&n.template?(n=this.spawnItem(n))&&(c[t.item[s]]=n,l.item.push(n)):l.item.push(t.item[s]);if(t.equipped)for(l.equipped={},i=Object.keys(t.equipped),s=0;s<i.length;s++)for(l.equipped[i[s]]={},r=Object.keys(t.equipped[i[s]]),a=0;a<r.length;a++)for(l.equipped[i[s]][r[a]]=[],o=0;o<t.equipped[i[s]][r[a]].length;o++)l.equipped[i[s]][r[a]].push(c[t.equipped[i[s]][r[a]][o]]||t.equipped[i[s]][r[a]]);this.universe.send("modify:entity",l)}}}}),rsSystem.component("RSShopControls",{inherit:!0,mixins:[],props:{player:{required:!0,type:Object},universe:{required:!0,type:Object}},data:function(){return{}},mounted:function(){},methods:{buyItem:function(t,e){},sellItem:function(t,e){},copyItem:function(t,e){if(this.player.master){var n,i,r={};if(r.id=t.id+":"+e+":"+Date.now(),r.parent=t.id,r._class="item",r._type="item",t.randomize_name){if(r.name="",t.randomize_name_dataset&&(n=this.universe.indexes.dataset.index[t.randomize_name_dataset])&&(n=new NameGenerator(n.set)),t.randomize_name_prefix&&(r.name+=t.randomize_name_prefix+" "),n)for(r.name+=n.corpus[Random.integer(n.corpus.length)].capitalize(),i=1;i<t.randomize_name;i++)t.randomize_name_spacing&&(r.name+=" "),r.name+=n.corpus[Random.integer(n.corpus.length)].capitalize();t.randomize_name_suffix&&(r.name+=" "+t.randomize_name_suffix)}return this.universe.send("modify:item",r),r.id}return null},restockShop:function(t){if(this.player.master){var e,n,i,r,s,a,o=t.restock_max,l=[],c={},u=!0,d=0,p=0;for(1/t.restock_spread,a=0;a<this.universe.indexes.item.listing.length;a++)!(e=this.universe.indexes.item.listing[a]).template||e.restricted&&!t.restock_restricted||t.rarity_min&&!(t.rarity_min<=e.rarity)||t.rarity_max&&!(e.rarity<=t.rarity_max)||t.soldtypes&&!t.soldtypes.hasCommon(e.type)||(c[e.rarity]||(c[e.rarity]=[]),c[e.rarity].push(e));for(i=t.rarity_mean||t.rarity_min||0,t.rarity_spread,r=i,s=i,d=0;l.length<o&&d<o;){for(n=t.restockFunction(i),a=0;a<n;a++)c[i]&&(e=this.copyItem(c[i][Random.integer(c[i].length)],p++),l.push(e));u?((r+=1)>t.rarity_max&&(r=t.rarity_mean||t.rarity_max||0),i=r):((s-=1)<t.rarity_min&&(s=t.rarity_mean||t.rarity_min||0),i=s),u=!u,d++}t.restock_clear?this.universe.send("modify:"+t._class,{id:t.id,_class:t._class||t._type,_type:t._class||t._type,item:l}):this.universe.send("modify:"+t._class+":detail:additive",{id:t.id,_class:t._class||t._type,_type:t._class||t._type,"+delta":{item:l}})}}}}),rsSystem.component("StorageManager",{inherit:!0,mixins:[],props:["storageKey"],mounted:function(){this.universe&&this.universe.$on("universe:modified",()=>{this.$forceUpdate()})},methods:{loadStorage:function(t,e){t=t||this.storageKeyID||this.storageKey;var n=localStorage.getItem(t);return n?JSON.parse(n):e},saveStorage:function(t,e){if(!(t=t||this.storageKeyID||this.storageKey)||!e)throw new Error("Missing arguments");localStorage.setItem(t,JSON.stringify(e))}}}),rsSystem.component("RSCore",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.StorageManager],props:{storage_id:{type:String},universe:{required:!0,type:Object},user:{required:!0,type:Object}},computed:{player:function(){return this.universe.nouns.player[this.user.id]}},watch:{},mounted:function(){this.$el.onclick=(t=>{var e=t.srcElement.attributes.getNamedItem("data-id");e&&(e=this.universe.index.index[e.value])&&this.isOwner(e)&&(rsSystem.EventBus.$emit("display-info",e),t.stopPropagation(),t.preventDefault())})},methods:{getPlayer:function(){return this.universe.nouns.player[this.user.id]}}}),rsSystem.component("rsCards",{inherit:!0,mixins:[rsSystem.components.RSCore],props:{selection:{required:!1,type:String},labeling:{required:!1,type:String},corpus:{required:!0,type:Array},state:{required:!0,type:Object}},data:function(){var t={};return t.current=0,t},computed:{select_label:function(){return this.selection||"Select"},card_label:function(){return this.labeling||"Card"}},watch:{state:{deep:!0,handler:function(){this.update()}}},mounted:function(){rsSystem.register(this),this.$el.onclick=(t=>{var e=t.srcElement.attributes.getNamedItem("data-id");e&&(e=this.universe.index.index[e.value])&&this.isOwner(e)&&(t.stopPropagation(),rsSystem.EventBus.$emit("display-info",e))})},methods:{cardZIndex:function(t,e){return this.corpus.length+10-t},cardClass:function(t,e){return t<this.current?"passed":t===this.current?"current":void 0},cardOffset:function(t,e){var n=30*(t-this.current)+10;return"top: "+n+"px; left: "+n+"px;"},toCard:function(t){this.current!==t&&Vue.set(this,"current",t)},nextCard:function(){this.current<this.corpus.length-1?Vue.set(this,"current",this.current+1):Vue.set(this,"current",0)},prevCard:function(){this.current>0?Vue.set(this,"current",this.current-1):Vue.set(this,"current",this.corpus.length-1)},selectCard:function(t){this.$emit("selected",t)},update:function(){this.$forceUpdate()}},beforeDestroy:function(){this.universe.$off("universe:modified",this.update)},template:Vue.templified("components/cards.html")}),rsSystem.component("rsConnect",{inherit:!0,mixins:[rsSystem.components.StorageManager],props:{universe:{type:Object}},data:function(){var t={passcode:""};return t.store=this.loadStorage("_rs_connectComponentKey",{secure:void 0,passcode:"",username:"",address:""}),t.store.address||(t.store.address=location.host),void 0===t.store.secure&&(t.store.secure="http:"!==location.protocol),t},mounted:function(){rsSystem.register(this),this.universe&&this.universe.loggedOut?this.universe&&this.universe.loggedOut&&(this.universe.loggedOut=!1):"/"!==this.$route.path&&this.store.username&&this.store.address&&this.connect(),this.$route.query.address&&(Vue.set(this.store,"address",this.$route.query.address),this.$emit("message",{class:"rsbd-orange",icon:"fas fa-exclamation-triangle",heading:"Connection Address Set",text:'The connection address has been updated to "'+this.$route.query.address+'" based on the received query information from the URL provided.'}),this.$router.push("/"))},methods:{toggleSecure:function(){Vue.set(this.store,"secure",!this.store.secure)},clearSaved:function(){Vue.delete(this.store,"passcode")},getPasscodePlaceHolder:function(){return this.store.passcode?" < Saved Passcode > ":" Enter a Passcode..."},connect:function(){this.passcode&&Vue.set(this.store,"passcode",this.passcode.sha256()),this.saveStorage("_rs_connectComponentKey",this.store);var t={};t.user=new UserInformation(this.store.username,this.store.username),t.user.setPasscode(this.store.passcode),t.address="://"+this.store.address+"/connect",this.store.secure?t.address="wss"+t.address:t.address="ws"+t.address,this.$emit("connect",t)}},template:Vue.templified("components/connect.html")}),rsSystem.component("rsCount",{inherit:!0,mixins:[],props:{entity:{type:Object},accuracy:{default:2,type:Number},editable:{default:!1,type:Boolean},initial:{default:"add",type:String},value:{}},data:function(){var t={expression:"",open:!1};return t.operation=this.initial,t.operations={add:{icon:"far fa-plus-square rs-orange"},sub:{icon:"far fa-minus-square rs-orange"},sum:{icon:"far fa-sigma rs-orange"}},t.ops=["add","sub","sum"],t.shadow=this.toNumber(this.value||0),t.toggleElement=null,t.focusOn=null,t},mounted:function(){rsSystem.register(this),Vue.set(this,"toggleElement",this.$el.getElementsByClassName("op-toggle")[0]),Vue.set(this,"focusOn",this.$el.getElementsByClassName("op-expression")[0])},methods:{toNumber:function(t,e){return parseFloat(parseFloat(t).toFixed(this.accuracy))},cancel:function(){Vue.set(this,"operation",this.initial),Vue.set(this,"expression",""),Vue.set(this,"open",!1)},complete:function(){var t,e=this.expression;if(e.length)switch(e[0]){case"=":e=e.substring(1),Vue.set(this,"operation","sum");break;case"-":e=e.substring(1),Vue.set(this,"operation","sub");break;case"+":e=e.substring(1),Vue.set(this,"operation","add")}if(t=Dice.calculateDiceRoll(e,this.entity).sum,t=this.toNumber(t)){switch(this.operation){case"sub":t=this.toNumber(this.value-t);break;case"add":t=this.toNumber(this.value+t);break;case"sum":break;default:console.warn("Unknown Operation: "+this.operation),t=NaN}isNaN(t)||(this.$emit("change",t),this.$emit("input",t))}Vue.set(this,"open",!1),document.activeElement==this.focusOn&&this.focusOn.blur(),this.toggleElement&&setTimeout(()=>{this.toggleElement.focus()},0)},toggle:function(){this.open&&document.activeElement!=this.focusOn?this.complete():(Vue.set(this,"operation",this.initial),this.focusOn&&this.focusOn.focus(),Vue.set(this,"open",!0))},nextOp:function(){this.open?Vue.set(this,"operation",this.ops[(this.ops.indexOf(this.operation)+1)%this.ops.length]):(Vue.set(this,"operation",this.initial),this.focusOn&&this.focusOn.focus(),Vue.set(this,"open",!0))}},template:Vue.templified("components/count.html")}),rsSystem.component("rsAutocomplete",{inherit:!0,mixins:[],props:{value:{required:!0},corpus:{required:!0,type:Object}},data:function(){var t={};return t.modeling=this.value,t.activeCompletion=null,t.reference_value="",t.completions=[],t},mounted:function(){rsSystem.register(this)},watch:{modeling:function(t,e){console.log("Auto: "+t+" -> "+e)}},methods:{inputReceived:function(){this.$emit("input",this.modeling)}},template:Vue.templified("components/field/autocomplete.html")}),function(){var t=60*(new Date).getTimezoneOffset()*1e3,e=function(t){if(!t)return"";var e,n,i=new Date;return i.setTime(t),n=i.getFullYear(),n+=(e=i.getMonth()+1)<10?"-0":"-",n+=e,n+=(e=i.getDate())<10?"-0":"-",n+=e};rsSystem.component("rsField",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.DataManager],props:{root:{required:!0,type:Object},field:{required:!0,type:Object}},data:function(){var t={};switch(Vue.set(this.field,"type",(this.field.type||"text").toLowerCase()),void 0===this.field.unset&&(this.field.unset="Select..."),t.fid=Random.identifier("field"),t.reference_value="",t.focused=!1,t.activeCompletion=null,t.completions=[],t.bufferChanging=!1,t.bufferLoading=!1,t.bufferTimeout=null,t.bufferMark=null,this.field.type){case"date":this.root[this.field.property]?t.buffer=e(this.root[this.field.property]):t.buffer="";break;default:t.buffer=this.root[this.field.property]}return this.field.filter&&(t.filterKeys=Object.keys(this.field.filter)),t},watch:{},mounted:function(){rsSystem.register(this),this.field.source_index&&this.field.source_index.listing&&this.field.source_index.listing.sort(this.sortData),this.$watch("root."+this.field.property,function(t,n){switch(this.field.type){case"date":Vue.set(this,"buffer",e(t));break;default:Vue.set(this,"buffer",t)}})},methods:{isVisible:function(){if(!this.field.condition)return!0;var t,e,n,i=Object.keys(this.field.condition);for(e=0;e<i.length;e++)switch(this.field.condition[i[e]].operation){case"<":if(this.root[i[e]]>=this.field.condition[i[e]].value)return!1;break;case"<=":if(this.root[i[e]]>this.field.condition[i[e]].value)return!1;break;case">":if(this.root[i[e]]<=this.field.condition[i[e]].value)return!1;break;case">=":if(this.root[i[e]]<this.field.condition[i[e]].value)return!1;break;case"=":if(this.root[i[e]]!=this.field.condition[i[e]].value)return!1;break;case"exists":if(!this.root[i[e]])return!1;break;case"!":if(this.root[i[e]])return!1;break;case"test":return!!this.root[i[e]]===this.field.condition[i[e]].value;case"contains":if(this.field.condition[i[e]].values){for(n=0;n<this.field.condition[i[e]].values.length;n++)if(-1===this.root[i[e]].indexOf(this.field.condition[i[e]].values[n]))return!1}else if(this.field.condition[i[e]].oneof){for(t=!0,n=0;t&&n<this.field.condition[i[e]].oneof.length;n++)this.root[i[e]]&&-1!==this.root[i[e]].indexOf(this.field.condition[i[e]].oneof[n])&&(t=!1);if(t)return!1}else if(-1===this.root[i[e]].indexOf(this.field.condition[i[e]].value))return!1;break;default:if(this.root[i[e]]!=this.field.condition[i[e]])return!1}return!0},deriveCompletions:function(t,e){console.log("Derive: ",t,e)},optionAvailable:function(t){if(this.filterKeys)for(var e=0;e<this.filterKeys.length;e++)if(t[this.filterKeys[e]]!=this.field.filter[this.filterKeys[e]])return!1;return!0},addReference:function(t){this.root[this.field.property]||Vue.set(this.root,this.field.property,[]),this.field.autocomplete?this.completions[this.activeCompletion]&&(this.root[this.field.property].push(this.completions[this.activeCompletion][this.field.optionValue]),Vue.set(this,"reference_value",""),this.completions.splice(0),this.emitChanged()):t&&(this.root[this.field.property]instanceof Array||Vue.set(this.root,this.field.property,[]),this.root[this.field.property].push(t),Vue.set(this,"reference_value",""),this.emitChanged())},selectCompletion:function(t){this.root[this.field.property]||Vue.set(this.root,this.field.property,[]),this.root[this.field.property].push(t[this.field.optionValue]),Vue.set(this,"reference_value",""),this.completions.splice(0)},editReference:function(t,e){Vue.set(this,"reference_value",e),this.dismissReference(t),$(this.$el).find("#editreference").focus()},dismissReference:function(t){this.root[this.field.property].splice(t,1),this.emitChanged()},openReference:function(t){t&&rsSystem.EventBus.$emit("display-info",t)},adjustCompletions:function(t){switch(t.key){case"ArrowUp":return this.activeCompletion>0&&Vue.set(this,"activeCompletion",this.activeCompletion-1),!1;case"ArrowDown":return this.activeCompletion<this.completions.length-1&&Vue.set(this,"activeCompletion",this.activeCompletion+1),!1;case"Escape":return Vue.set(this,"reference_value",""),Vue.set(this,"activeCompletion",0),this.completions.splice(0),!1}return!0},validSelectionOption:function(t){return!this.field.uniqueness||!this.root[this.field.property]||-1===this.root[this.field.property].indexOf(t)},deriveCompletions:function(t,e){if(!e||this.adjustCompletions(e))if(t){t=t.toLowerCase();var n,i=0;if(this.completions.splice(0),this.field.source_index)for(n=0;n<this.field.source_index.listing.length&&i<5;n++)this.field.source_index.listing[n].name&&-1!==this.field.source_index.listing[n].name.toLowerCase().indexOf(t)&&this.validSelectionOption(this.field.source_index.listing[n])&&(this.completions.push(this.field.source_index.listing[n]),i++);Vue.set(this,"activeCompletion",0)}else this.completions.splice(0)},blurring:function(){this.$emit("blur",this.field),Vue.set(this,"focused",!1),this.bufferLoading||this.$emit("complete",this.field)},focusing:function(){this.$emit("focus",this.field),Vue.set(this,"focused",!0)},checkField:function(){return!!this.root[this.field.property]&&((!this.field.min||!(this.root[this.field.property]<this.field.min||this.root[this.field.property].length<this.field.min))&&((!this.field.max||!(this.root[this.field.property]>this.field.max||this.root[this.field.property].length>this.field.max))&&(!(this.field.validation.pattern&&!this.field.validation.pattern.test(this.root[this.field.property]))&&!(this.field.validation.method&&!this.field.validation.method(this.root[this.field.property])))))},processDate:function(){Vue.set(this.root,this.field.property,new Date(this.buffer).getTime()+t)},bufferChangeProcess:function(){this.bufferMark<Date.now()?(Vue.set(this.root,this.field.property,this.buffer),Vue.set(this,"bufferLoading",!1),this.emitChanged()):(this.bufferChanging||(Vue.set(this,"bufferChanging",!0),this.$emit("changing")),setTimeout(()=>{this.bufferChangeProcess()},500))},bufferChanged:function(){Vue.set(this,"bufferMark",Date.now()+500),Vue.set(this,"bufferLoading",!0),setTimeout(()=>{this.bufferChangeProcess()},500)},emitChanged:function(){this.$emit("changed",{value:this.root[this.field.property],property:this.field.property,time:Date.now()}),this.field.onchange&&this.field.onchange(this.root[this.field.property]),this.focused||this.$emit("complete",this.field),Vue.set(this,"bufferChanging",!1)},selectFile:function(t){var e,n=$(this.$el).find("[id='"+this.fid+"']");console.warn("File Search: ",t),n&&n.length&&n[0].files.length&&(console.warn("Set Data"),this.encodeFile(n[0].files[0]).then(t=>{e=t.data,Vue.set(this.root,this.field.property,e)}))},set:function(t){Vue.set(this.root,this.field.property,t),this.emitChanged()},compose:function(t,e){return Vue.set(this.tracking[this.r],this.c,!1),Vue.set(this.tracking[this.r],this.c,!1),Vue.set(this.tracking[t],e,!0),Vue.set(this,"r",t),Vue.set(this,"c",e),this.field.compose?this.field.compose(t,e):e+":"+t},separate:function(t){if(t){var e=t.split(":");return{c:e[0],r:e[1]}}return{}},sortData:function(t,e){var n,i;if(void 0!==t.order&&void 0!==e.order&&null!==t.order&&null!==e.order){if(t.order<e.order)return-1;if(t.order>e.order)return 1}if((void 0===t.order||null===t.order)&&void 0!==e.order&&null!==e.order)return-1;if((void 0===e.order||null===e.order)&&void 0!==t.order&&null!==t.order)return 1;if(void 0!==t.name&&void 0!==e.name&&null!==t.name&&null!==e.name){if((n=t.name.toLowerCase())<(i=e.name.toLowerCase()))return-1;if(n>i)return 1}return void 0!==t.name&&null!==t.name||void 0===e.name||null===e.name?void 0!==e.name&&null!==e.name||void 0===t.name||null===t.name?t.id<e.id?-1:t.id>e.id?1:0:1:-1}},template:Vue.templified("components/field.html")})}(),function(){var t={},e={},n={name:"cola",linkDistance:1e3,randomize:!1,infinite:!0,animate:!0,fit:!1};rsSystem.component("rsGraph",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility],props:{filters:{type:Object},id:{default:"graph_component",type:String},highlight:{type:Object,default:function(){return{}}},selected:{type:Array,default:function(){return[]}},nodes:{required:!0,type:Array},edges:{type:Array,default:function(){return[]}}},data:function(){console.log("Graph Data");var t={};return t.storageID="_rs_graphComponentKey:"+this.id,t.cytoLayout=null,t.cyto=null,t.activeNodes=[],t.indexNodes={},t.activeEdges=[],t.indexEdges={},t.notFound=!1,t.searchText="",t},watch:{nodes:function(t,e){console.log("DataSet: ",e,"\n ->\n",t),this.sync()}},mounted:function(){rsSystem.register(this),t[this.id]&&t[this.id].stop(),e[this.id]&&e[this.id].stop(),e[this.id]=cytoscape({container:document.getElementById(this.id),autounselectify:!0,boxSelectionEnabled:!1,panningEnabled:!0,userPanningEnabled:!0,zoomingEnabled:!0,userZoomingEnabled:!0,style:[{selector:"core",style:{"selection-box-border-color":"#8BB0D0","selection-box-color":"#AAD8FF","selection-box-opacity":"0.5"}},{selector:"node",style:{height:"30px",width:"30px",content:"data(name)","font-size":"12px","text-valign":"center","text-halign":"center","background-color":"#555","text-outline-color":"#000","text-outline-width":"2px","text-max-width":"50px","text-wrap":"wrap",color:"#c3b601","overlay-padding":"6px","z-index":"10"}},{selector:"edge",style:{content:"data(name)","line-color":"#c3b601","curve-style":"bezier","target-arrow-color":"#c3b601","target-arrow-shape":"triangle","text-outline-color":"#000","text-outline-width":"2px",color:"white"}}]}),t[this.id]=e[this.id].layout(n),t[this.id].run(),e[this.id].on("tap","node",t=>{var e;t&&t.target&&t.target.data&&(e=t.target.data())&&this.$emit("node",e)}),e[this.id].on("tap","edge",t=>{console.log("Tap[E]: ",t)}),this.sync()},methods:{activity:function(){this.notFound&&Vue.set(this,"notFound",!1)},centerOnSearch:function(){var t,e=this.searchText.toLowerCase(),n=this.getScape(),i=!1;t=function(t){console.log("Searching: ",t);var n=t.data();return e?n._search&&-1!=n._search.indexOf(e)?(i=!0,t.addClass("highlight"),t.style("border-color","#00ff00"),t.style("border-width","4px"),t.updateStyle(),!0):(t.removeClass("highlight"),t.removeStyle("border-color"),t.removeStyle("border-width"),t.updateStyle(),!1):(i=!0,!0)},this.getScape().animate({duration:500,center:{eles:n.filter(t)}}),i||Vue.set(this,"notFound",!0)},addElement:function(t){e[this.id].add(t),this.runLayout()},removeElement:function(t){var n=e[this.id].getElementById(t);n&&(n.remove(),this.runLayout())},getScape:function(){return e[this.id]},runLayout:function(){t[this.id]&&t[this.id].stop(),t[this.id]=e[this.id].elements().layout({name:"cola",infinite:!0,fit:!1,randomize:!1,animate:!0,linkDistance:1e3,complete:function(){console.warn("Complete"),e[this.id].fit()}}),t[this.id].run()},isVisible:function(){return console.log("Graph Visible"),!0},sync:function(){var t,n,i,r,s=!1;for(t=Object.keys(this.indexNodes),r=0;r<this.nodes.length;r++)this.indexNodes[this.nodes[r].id]?(t.splice(t.indexOf(this.nodes[r].id),1),e[this.id].getElementById(this.nodes[r].id).updateStyle()):(i={group:"nodes",data:this.nodes[r],style:{}},this.filters&&this.filters.node&&"function"==typeof this.filters.node&&(n=this.filters.node(this.nodes[r]))&&Object.assign(i.style,n),this.indexNodes[this.nodes[r].id]=!0,e[this.id].add(i),s=!0);for(r=0;r<t.length;r++)this.removeElement(t[r]),delete this.indexNodes[t[r]],s=!0;for(t=Object.keys(this.indexEdges),r=0;r<this.edges.length;r++)this.indexEdges[this.edges[r].id]?t.splice(t.indexOf(this.edges[r].id),1):(i={group:"edges",data:this.edges[r]},this.indexEdges[this.edges[r].id]=!0,e[this.id].add(i),s=!0);for(r=0;r<t.length;r++)this.removeElement(t[r]),delete this.indexEdges[t[r]],s=!0;s&&this.runLayout()}},template:Vue.templified("components/graph.html")})}(),rsSystem.component("rsRenderImage",{inherit:!0,mixins:[],props:{image:{required:!0,type:Object},modes:{default:"general",type:String},linked:{type:Object}},data:function(){var t={link:null,uri:null};return t},watch:{image:{deep:!0,handler:function(){this.update()}},linked:function(){this.update()}},mounted:function(){rsSystem.register(this),this.image.delayed_data?this.image.retrieve():this.update()},methods:{update:function(){this.image.linked?Vue.set(this,"uri",this.image.url):Vue.set(this,"uri",this.image.data),this.linked?this.link="/"+this.linked.linked+"/"+this.linked.id:this.link=!1,this.$forceUpdate()},classes:function(){var t;return t=this.modes?this.modes:"general",this.linked&&(t+=" linked"),t}},template:Vue.templified("components/image.html")}),rsSystem.component("systemInfo",{inherit:!0,mixins:[rsSystem.components.RSCore],props:{universe:{required:!0,type:Object},user:{required:!0,type:Object},options:{type:Object,default:function(){return{}}}},data:function(){var t={viewing:null,open:!1,history:[],target:null,base:null};return t},watch:{record:{deep:!0,handler:function(){console.warn("hold")}},"$route.query.information":function(t,e){t&&this.displayRecord(t)}},mounted:function(){rsSystem.register(this),this.$el.onclick=(t=>{var e=t.srcElement.attributes.getNamedItem("data-id");e&&(e=this.universe.index.index[e.value])&&this.isOwner(e)&&(rsSystem.EventBus.$emit("display-info",{record:e,base:this.viewing}),t.stopPropagation(),t.preventDefault())}),rsSystem.EventBus.$on("display-info",this.displayRecord),rsSystem.EventBus.$on("key:escape",this.closeInfo),this.universe.$on("universe:modified",this.update)},methods:{getTabIndex:function(){return this.open?5:-1},displayRecord:function(t){var e={viewing:this.viewing,target:this.target,base:this.base};!t||t instanceof RSObject||(t.record?(Vue.set(this,"target",t.target),Vue.set(this,"base",t.base||t.source),t="string"==typeof t.record?this.universe.index.index[t.record]:t.record):(t="string"==typeof t?this.universe.index.index[t]:this.universe.index.index[t.id]||this.universe.index.index[t.name],Vue.set(this,"target",void 0),Vue.set(this,"base",void 0))),t&&(this.viewing&&t.id===this.viewing.id?t.id===this.viewing.id&&this.closeInfo():(this.viewing&&(this.history.length&&this.viewing.id===t.id?console.warn("Repeated Shift? ",this.viewing.id):this.history.unshift(e),this.viewing.$off&&this.viewing.$off("modified",this.update)),Vue.set(this,"viewing",t),Vue.set(this,"open",!0),this.viewing.$on&&this.viewing.$on("modified",this.update)))},processRequest:function(t){},backOne:function(){if(this.history.length){var t=this.history.shift();Vue.set(this,"viewing",t.viewing),Vue.set(this,"target",t.target),Vue.set(this,"base",t.base),this.update()}},closeInfo:function(){rsSystem.EventBus.$emit("info:closed",this.viewing),Vue.set(this,"viewing",null),Vue.set(this,"open",!1),this.history.splice(0)},update:function(){this.$forceUpdate()}},beforeDestroy:function(){this.universe.$off("universe:modified",this.update),rsSystem.EventBus.$off("key:escape",this.closeInfo)},template:Vue.templified("components/info.html")}),rsSystem.component("rsObjectInfoBasic",{inherit:!0,mixins:[rsSystem.components.RSShowdown],props:{record:{required:!0,type:Object},player:{type:Object},options:{type:Object,default:function(){return{}}}},data:function(){var t={holdDescription:null,description:null,holdNote:null,note:null,profile:null,image:null,keys:["encumberance","content_type","content_max",""],id:null};return t},watch:{record:{deep:!0,handler:function(){this.update()}}},mounted:function(){this.$el.onclick=(t=>{var e=t.srcElement.attributes.getNamedItem("data-id");e&&(e=this.universe.index.index[e.value])&&rsSystem.EventBus.$emit("display-info",e)}),this.record.$on?this.record.$on("modified",this.update):console.warn("Record is not listenable? ",this.record),rsSystem.register(this),this.update()},methods:{update:function(){this.id&&this.id!==this.record.id?(this.universe.index.index[this.id]&&this.universe.index.index[this.id].$off&&this.universe.index.index[this.id].$off("modified",this.update),this.record.$on&&this.record.$on("modified",this.update),Vue.set(this,"id",this.record.id)):Vue.set(this,"id",this.record.id),this.record.description?this.holdDescription!==this.record.description&&(Vue.set(this,"holdDescription",this.record.description),Vue.set(this,"description",this.rsshowdown(this.record.description))):(Vue.set(this,"holdDescription",null),Vue.set(this,"description",null)),this.record.master_note?this.holdNote!==this.record.master_note&&(Vue.set(this,"holdNote",this.record.master_note),Vue.set(this,"note",this.rsshowdown(this.record.master_note))):(Vue.set(this,"holdNote",null),Vue.set(this,"note",null)),this.record.image&&this.universe.nouns.image[this.record.image]?Vue.set(this,"image",this.universe.nouns.image[this.record.image]):Vue.set(this,"image",null),this.record.profile&&this.universe.nouns.image[this.record.profile]?Vue.set(this,"profile",this.universe.nouns.image[this.record.profile]):Vue.set(this,"profile",null),this.keys.splice(0),this.keys.push.apply(this.keys,Object.keys(this.record)),this.$forceUpdate()}},beforeDestroy:function(){this.record&&this.record.$off&&this.record.$off("modified",this.update)},template:Vue.templified("components/info/render/bag.html")},"display"),function(){var t={},e={};t.types=!0,t.property=!0,t.enhancementKey=!0,t.propertyKey=!0,t.bonusKey=!0,t._delta=!0,t["+delta"]=!0,t["-delta"]=!0,t.delta=!0,t.randomize_name_spacing=!0,t.randomize_name_dataset=!0,t.randomize_name_prefix=!0,t.randomize_name_suffix=!0,t.randomize_name=!0,t.information_renderer=!0,t.auto_nearby_children=!0,t.invisibleProperties=!0,t.locked_attunement=!0,t.source_template=!0,t.path_exception=!0,t.known_objects=!0,t.modifierstats=!0,t.modifierattrs=!0,t.map_distance=!0,t.no_modifiers=!0,t.charges_max=!0,t.render_name=!0,t.auto_nearby=!0,t.restock_max=!0,t.declaration=!0,t.description=!0,t.for_players=!0,t.master_note=!0,t.background=!0,t.cancontain=!0,t.notcontain=!0,t.properties=!0,t.suppressed=!0,t.no_border=!0,t.condition=!0,t.exception=!0,t.singleton=!0,t.equipped=!0,t.obscured=!0,t.maneuver=!0,t.passcode=!0,t.property=!0,t.universe=!0,t.playable=!0,t.created=!0,t.dataset=!0,t.history=!0,t.learned=!0,t.updated=!0,t.widgets=!0,t.no_rank=!0,t.action=!0,t.alters=!0,t.linked=!0,t.loaded=!0,t.owners=!0,t.parent=!0,t.hidden=!0,t.screen=!0,t.class=!0,t.label=!0,t.state=!0,t.order=!0,t.name=!0,t.icon=!0,t.data=!0,t.dice=!0,t.echo=!0,t.url=!0,t.sid=!0,t.id=!0,t.x=!0,t.y=!0,t.wounds_start=!0,t.strain_start=!0,t.xp_start=!0,t.is_hostile=!0,t.is_public=!0,t.is_shop=!0,t.rarity_inverted=!0,t.restock_clear=!0,t.restock_base=!0,t.restock_max=!0,t.rarity_mean=!0,t.rarity_min=!0,t.rarity_max=!0,t.label_shadow_color=!0,t.label_shadow_blur=!0,t.label_shadow=!0,t.label_shadow=!0,t.label_thickness=!0,t.fill_thickness=!0,t.locked_ability=!0,t.label_opacity=!0,t.fill_opacity=!0,t.label_color=!0,t.fill_color=!0,t.thickness=!0,t.clickable=!0,t.show_name=!0,t.contained=!0,t.must_know=!0,t.has_path=!0,t.pathing=!0,t.opacity=!0,t.active=!0,t.curved=!0,t.pathed=!0,t.values=!0,t.color=!0,t.path=!0,t.coordinates=!0,t.shown_at=!0,t.profile=!0,t.showing=!0,t.viewed=!0,t.map=!0,e.ship_active_abilities="ability",e.requires_knowledge="knowledge",e.requires_ability="ability",e.archetypes="archetype",e.slot_usage="slot",e.involved="entity",e.members="entity",e.soldtypes="type",e.locals="entity",e.mentioned="all",e.skills_starting="skill";var n=/[^a-zA-Z]/g,i=/[ _-]/,r={},s={},a={},o={},l={};s.skills_starting="Available Starting Skills",s.skills_starting_count="Number of Starting Skills Selected",s.skill_amend_direct_check="Related Skill Checks",s.mentioned="Mentions",s.slot_usages="Slots Used",s.dependency="Dependencies",s.itemtype="Item Types",s.xp_cost="XP",s.slowfire="Slow Fire",s.autofire="Auto-Fire",s.stundamage="Stun Damage",s.limitedammo="Limited Ammo",s.soldtypes="Sold Types",s.entity=function(t,e){return"entity"===e._type?"Pilot":t};var c=function(t,e){return(t=(t.name||"").toLowerCase())<(e=(e.name||"").toLowerCase())?-1:t>e?1:0};a.accurate="ability:quality:accurate",a.pierce="ability:quality:pierce",a.critical="ability:quality:critical",a.slowfire="ability:quality:slowfiring",a.range="knowledge:combat:rangebands",o.durability=function(t,e,n,i){return 0===e?"issue-property":e<4?"warned-property":void 0},o.charged=function(t,e,n,i){if(!e)return"issue-property"},o.charges=function(t,e,n,i){if(!e)return"issue-property"},r.charges=function(t,e,n,i){return n.charges_max?e+" / "+n.charges_max:e},r.category=function(t,e,n,i){var r;return e&&-1!==(r=e.indexOf(":"))&&(e=e.substring(0,r).trim().capitalize()+" ("+e.substring(r+1).trim().capitalize()+")"),e},r.date=function(t,e){return(e=new Date(e)).toDateString()},r.related=function(t,e,n,i){return"to "+(e?e.length:0)+" records"},r.range=function(t,e,n,i){if(n.is_attachment)return e;switch(e){case 1:return"Engaged (1)";case 2:return"Short (2)";case 3:return"Medium (3)";case 4:return"Long (4)";case 5:return"Extreme (5)"}return e},r.targeted=function(t,e,n,i){return e?e.join(", "):"No Target"},r.activation=function(t,e,n,i){return e?e.capitalize():"None"},r.archetypes=function(t,e,n,i){},r.dependency=function(t,e,n,i){},r.piloting=function(t,e,n,i){return i.indexes.entity.index[e]?i.indexes.entity.index[e].name:e},r.editor=function(t,e,n,i){return i.indexes.entity.index[e]?i.indexes.entity.index[e].name:e},r.allegiance=function(t,e,n,i){return'<span class="'+e+'"></span>'},r.inside=function(t,e,n,i){var r=i.indexes.entity.lookup[e];return r?'<a data-id="'+e+'"><span class="'+r.icon+'" data-id="'+e+'"></span><span data-id="'+e+'">'+r.name+"</span></a>":"Unknown["+e+"]"},r.accepts=function(t,e,n,i){if(e)switch(e){case"entity":return"Character or Ship";default:return e.capitalize()}return e},r.skill_check=function(t,e,n,i){if(!e||!i.indexes.skill||!i.indexes.skill.lookup)return e;var r=i.indexes.skill.lookup[e]||i.indexes.skill.lookup["skill:"+e];return r?r.name:e},r.indicators=function(t,e,n,i){return e&&e.length?e.length<10?e.join(", "):((e=[].concat(e).splice(0,10)).push("..."),e.join(", ")):""},r.size=function(t,e,n,r){if(!e)return"";if("string"!=typeof e)return e;var s,a=e.split(i);for(e="",s=0;s<a.length;s++)e?e+=" "+a[s].capitalize():e=a[s].capitalize();return e};var u=/_([a-z])/gi,d=function(t,e){return" "+e.capitalize()};rsSystem.component("rsObjectInfoBasic",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSMasterControls,rsSystem.components.RSShopControls,rsSystem.components.RSShowdown],props:{record:{required:!0,type:Object},universe:{required:!0,type:Object},target:{type:Object},player:{type:Object},user:{type:Object},base:{type:Object},options:{type:Object,default:function(){return{}}}},data:function(){var t={};return t.referenceKeys=e,t.classNames=o,t.calculatedEncumberance=0,t.adjustingDurability=0,t.adjustingCharges=0,t.collapsed=!0,t.relatedError=null,t.knowledgeLink=a,t.displayRaw=l,t.holdDescription=null,t.linkedLocation=null,t.restocking=!1,t.description=null,t.calculated={},t.holdNote=null,t.session=null,t.profile=null,t.image=null,t.note=null,t.id=null,t.showDistribution=!1,t.showContributions={},t.availableTemplates={},t.availableTemplates.entity=[],t.availableEntities=[],t.eventToReference="",t.copyToEntity="",t.partyToAdd="",t.copyToHere="",t.transfer_targets=[],t.transfer_target="",t.attach_targets=[],t.attach_target="",t.shownLocations=[],t.locations=[],t.shownEntities=[],t.entities=[],t.hiddenEntities=[],t.movableEntities=[],t.movingEntity="",t.availableSlots=[],t.equipToSlot="",t.partiesPresent=[],t.parties=[],t.entityToMove="",t.partyToMove="",t.activeEvents=[],t.actions=[],t.equipped=[],t.relatedArchetypes=[],t.relatedKnowledge=[],t.relatedAbilities=[],t.keys=[],t},watch:{record:{deep:!0,handler:function(){this.update()}}},mounted:function(){this.universe.$on("model:modified",this.update),this.record.$on?this.record.$on("modified",this.update):console.warn("Record is not listenable? ",this.record),rsSystem.register(this),this.update()},methods:{highlight:function(){var t,e=$(this.$el).find(".displayed-id");e[0]&&(e[0].select(),document.execCommand("copy"),e.css({"background-color":"#63b35d"}),window.getSelection?(t=window.getSelection().toString(),window.getSelection().removeAllRanges()):document.selection&&(t=document.selection.toString(),document.selection.empty()),t&&(rsSystem.EventBus.$emit("copied-id",t),this.$emit("copying",t)),setTimeout(function(){e.css({"background-color":"transparent"})},5e3))},visible:function(e,n){return e&&void 0!==n&&null!==n&&""!==n&&"image"!==e&&"_"!==e[0]&&!t[e]&&(!this.record.invisibleProperties||-1===this.record.invisibleProperties.indexOf(e))},isArray:function(t){return t instanceof Array},hasLearnDependencies:function(){switch(this.record._type){case"ability":return(!this.record.requires_ability||!this.record.requires_ability.length||this.hasMapped("ability",this.record.requires_ability,this.record.dependency_type))&&(!this.record.requires_knowledge||!this.record.requires_knowledge.length||this.hasMapped("knowledge",this.record.requires_knowledge,this.record.dependency_type))&&(!this.record.archetypes||!this.record.archetypes.length||this.hasMapped("archetype",this.record.archetypes))}return!1},classByXP:function(t){var e;if(this.base&&this.base.xp&&this.base.xp>=t)return"meets-requirements";if(this.record.archetypes&&this.record.archetypes.length){if(!this.base.archetype)return"requirements";for(e=0;e<this.record.archetypes.length;e++)if(-1!==this.base.archetype.indexOf(this.record.archetypes[e]))return"meets-requirements"}return"requirements"},classByRequirements:function(){var t,e;if(this.base){if(this.base.ability)for(e=0;e<this.base.ability.length;e++)if(t=this.universe.indexes.ability.index[this.base.ability[e]]){if(t.requires_ability&&-1!==t.requires_ability.indexOf(this.record.id))return"requirements"}else console.warn("Requirement for Missing Ability["+this.base.ability[e]+"] in Record["+this.record.id+"]");if(this.base.knowledge)for(e=0;e<this.base.knowledge.length;e++)if(t=this.universe.indexes.knowledge.index[this.base.knowledge[e]]){if(t.requires_knowledge&&-1!==t.requires_knowledge.indexOf(this.record.id))return"requirements"}else console.warn("Requirement for Missing Knowledge["+this.base.knowledge[e]+"] in Record["+this.record.id+"]")}return"meets-requirements"},canForgetAbility:function(){return!this.record.locked_ability&&this.hasLearnedAbility()},hasMapped:function(t,e,n){var i,r=0;if(t&&e&&this.base&&this.base[t]&&this.base[t].length)for(i=0;i<this.base[t].length;i++)if(-1!==e.indexOf(this.base[t][i])){if("any"===n||!n)return!0;r++}return r===e.length},canLearnAbility:function(){return!this.record.locked_ability&&this.base&&this.player&&(this.player.master||this.base.owner===this.player.id||this.base.owners&&-1!==this.base.owners.indexOf(this.player.id))&&("ability"===this.record._type||"ability"===this.record._class)&&!this.hasLearnedAbility()&&this.hasLearnDependencies()},hasLearnedAbility:function(){return this.record&&this.base&&this.base.ability&&-1!==this.base.ability.indexOf(this.record.id)},learnAbility:function(){if(!this.record.locked_ability){var t,e,n=parseInt(this.record.xp_cost)||0;this.base&&"meets-requirements"===this.classByXP(n)&&-1===(e=(t=this.base.ability||[]).indexOf(this.record.id))&&(e=parseInt(this.base.xp-n),this.base.commit({ability:t.concat(this.record.id),xp:e}))}},forgetAbility:function(){if(!this.record.locked_ability){var t,e,n=parseInt(this.record.xp_cost)||0;this.base&&"meets-requirements"===this.classByRequirements()&&-1!==(e=(t=this.base.ability||[]).indexOf(this.record.id))&&(t.splice(e,1),e=parseInt(this.base.xp+n),this.base.commit({ability:t,xp:e}))}},canTransfer:function(){var t,e;if(this.record.untradable)return!1;for(e=0;this.base&&this.base.item&&e<this.base.item.length;e++){if((t=this.universe.indexes.item.index[this.base.item[e]])&&t.item&&-1!==t.item.indexOf(this.record.id))return!0;t||console.warn("Invalid Item? "+this.base.item[e],t)}return this.base&&(this.base.item&&-1!==this.base.item.indexOf(this.record.id)||this.base.inventory&&-1!==this.base.inventory.indexOf(this.record.id))},canTransferToSelf:function(){return this.base&&!(this.base.item&&-1!==this.base.item.indexOf(this.record.id)||this.base.inventory&&-1!==this.base.inventory.indexOf(this.record.id))},canAttach:function(){return this.base&&(this.record.hardpoints||this.record.contents_max)},canUnequip:function(){if(this.target){if(this.base&&"slot"===this.target._type&&this.base.equipped&&this.base.equipped[this.target.accepts]&&this.base.equipped[this.target.accepts][this.target.id]&&-1!==this.base.equipped[this.target.accepts][this.target.id].indexOf(this.record.id))return this.target}else if(this.base&&this.base.slot&&this.base.slot.length&&this.base.item&&-1!==this.base.item.indexOf(this.record.id)&&this.availableSlots.length)for(var t=0;t<this.availableSlots.length;t++)if(this.base.equipped&&this.base.equipped[this.availableSlots[t].accepts]&&this.base.equipped[this.availableSlots[t].accepts][this.availableSlots[t].id]&&-1!==this.base.equipped[this.availableSlots[t].accepts][this.availableSlots[t].id].indexOf(this.record.id))return this.availableSlots[t];return!1},unequip:function(){var t=this.canUnequip();t&&this.base&&this.base.unequipSlot(t,this.record)},canEquip:function(){if(this.base&&this.base.slot&&this.base.slot.length&&this.base.item&&-1!==this.base.item.indexOf(this.record.id)&&this.availableSlots.length){for(var t=0;t<this.availableSlots.length;t++)if(this.base.equipped&&this.base.equipped[this.availableSlots[t].accepts]&&this.base.equipped[this.availableSlots[t].accepts][this.availableSlots[t].id]&&-1!==this.base.equipped[this.availableSlots[t].accepts][this.availableSlots[t].id].indexOf(this.record.id))return!1;return!0}return!1},equip:function(t){t&&"cancel"!==t&&this.base.equipSlot(t,this.record),Vue.set(this,"equipToSlot","")},transferObject:function(){this.transfer_target&&"cancel"!==this.transfer_target&&this.universe.send("give:item",{source:this.base.id,target:this.transfer_target,item:this.record.id}),Vue.set(this,"transfer_target","")},attachObject:function(){this.attach_target&&"cancel"!==this.attach_target&&this.universe.send("give:item",{source:this.base.id,target:this.record.id,item:this.attach_target}),Vue.set(this,"attach_target","")},setCurrentSession:function(){this.universe.indexes.setting.index["setting:current:session"]&&this.universe.indexes.setting.index["setting:current:session"].commit({value:this.record.id})},hideRecord:function(){this.record.commit({hidden:!this.record.hidden})},activateRecord:function(){this.record.commit({active:!this.record.active})},dischargeRecord:function(){this.record.commit({charged:!this.record.charged})},obscureRecord:function(){this.record.commit({obscured:!this.record.obscured})},knownRecord:function(){this.record.commit({must_know:!this.record.must_know})},screenRecord:function(){this.record.commit({screen:!this.record.screen})},adjustDurability:function(t){this.record.commit({durability:t})},adjustCharges:function(t){this.record.commit({charges:t})},prettifyKey:function(t){},nameClassing:function(t){return this.classNames[t]?this.classNames[t](t,this.record[t],this.record,this.universe):""},prettifyPropertyName:function(t,e){var n;switch(typeof this.record._prettifyName){case"function":return this.record._prettifyName(t);case"object":if(this.record._prettifyName[t])return this.record._prettifyName[t]}if(s[t])switch(typeof s[t]){case"string":return s[t];case"function":return s[t](t,e,this.universe)}return t.startsWith("skill_amend_")&&(n=this.universe.indexes.skill.index["skill:"+t.substring(12)])?n.name+" Bonus":t.startsWith("skill_enhanced_")&&(n=this.universe.indexes.skill.index["skill:"+t.substring(15)])?n.name+" (Career)":t.replace(u,d).capitalize()},prettifyPropertyValue:function(t,e,n,i){var s,a="";switch(this.record._calculated&&this.record._calculated[t]&&(s=this.universe.calculateExpression(e,this.record,this.base,this.target))!=e&&(a=" [ "+e+" ]",e=s),typeof this.record._prettifyValue){case"function":e=this.record._prettifyValue(t,e,n,i||this.universe);break;case"object":this.record._prettifyValue[t]&&(e=this.record._prettifyValue[t])}if(r[t])switch(typeof r[t]){case"string":e=r[t];break;case"function":e=r[t](t,e,n,i||this.universe)}if(e instanceof Array);else switch(typeof e){case"object":e=e.hidden_name||e.name||e.id||e.description;default:this.universe.indexes[t]}return e+a},copyEntityHere:function(t){window.open("/#/nouns/entity/"+t+'?copy=true&values={"location":"'+this.record.id+'"}',"building"),Vue.set(this,"copyToHere","")},prettifyReferenceValue:function(t,e,n){},toClassName:function(t){return"property-"+t.replace(n,"-")},displayInfo:function(t){},canDashboard:function(){return"entity"===this.record._type&&this.record.classification&&this.isOwner(this.record)},viewDashboard:function(t,e){var n=location.pathname+"#/dashboard/"+this.record.classification+"/"+this.record.id;t?(window.open(n),e&&window.focus()):window.location=n},viewShopInventory:function(){var t=location.pathname+"#/shop/"+this.record.id;this.base?window.location=t+"/"+this.base.id:window.location=t},canMoveTo:function(t){return t=t||this.player.entity,!("location"!==this.record._type&&("entity"!==this.record._type||"character"===this.record.classification)||!t||!this.universe.indexes.entity.index[t])},canTravelTo:function(t){return t=t||this.player.entity,!("location"!==this.record._type&&("entity"!==this.record._type||"character"===this.record.classification)||!t||!this.universe.indexes.entity.index[t]||this.universe.indexes.entity.index[t].location===this.record.id||this.universe.indexes.entity.index[t].inside===this.record.id)},travelToHere:function(t){t=t||this.player.entity,this.canTravelTo(t)&&this.universe.indexes.entity.index[t].commit({location:this.record.id})},editRecord:function(t,e){var n=location.pathname+"#/nouns/"+this.record._type+"/"+this.record.id;t?(window.open(n,"building"),e&&window.focus()):window.location=n},movePartyHere:function(t){var e,n,i={};switch(this.record._type){case"entity":i.inside=this.record.id;break;default:i[this.record._type]=this.record.id}if(t=this.universe.indexes.party.index[t])for(t.commit(i),n=0;t.entity&&n<t.entity.length;n++)(e=this.universe.indexes.entity.index[t.entity[n]])&&e.commit(i);Vue.set(this,"partyToMove","")},moveEntityHere:function(t){var e={};switch(this.record._type){case"entity":e.inside=this.record.id;break;default:e[this.record._type]=this.record.id}(t=this.universe.indexes.entity.index[t])&&t.commit(e),Vue.set(this,"entityToMove",""),Vue.set(this,"movingEntity","")},addMeasurePoint:function(t){rsSystem.EventBus.$emit("measure-point",t||this.record)},restockLocation:function(){this.restocking||(Vue.set(this,"restocking",!0),this.restockShop(this.record),setTimeout(()=>{Vue.set(this,"restocking",!1)},1e3))},openCombatEvent:function(t,e){var n=location.pathname.replace("?","")+"#/combat/"+this.record.id;t?(window.open(n,"event"),e&&window.focus()):window.location=n},showDirectProperties:function(){return!this.record.hide_properties&&!this.record.hide_stats},showInheritRelations:function(){return!this.record.hide_relations&&!this.record.hide_stats},amendEventWithParty:function(t){Vue.set(this,"partyToAdd",""),t=this.universe.indexes.party.index[t],console.log("Adding Party: ",t),this.record.commitAdditions({involved:t.entity})},addEntityToEvent:function(t){Vue.set(this,"eventToReference",""),(t=this.universe.indexes.event.index[t]).commitAdditions({involved:this.id})},showDestinyUsage:function(){},useDestinyToken:function(t){this.session&&(t&&this.session.destiny_dark>0?(console.log("use"),this.universe.send("destiny:dark")):!t&&this.session.destiny_light>0&&this.universe.send("destiny:light"))},showAllLocations:function(){this.shownLocations.splice(0);for(var t=0;t<this.locations.length;t++)this.shownLocations.push(this.locations[t])},showAllEntities:function(){this.shownEntities.splice(0);for(var t=0;t<this.entities.length;t++)this.shownEntities.push(this.entities[t])},showRestockDistribution:function(){Vue.set(this,"showDistribution",!0),setTimeout(()=>{this.renderRestockDistribution()},0)},toggleContributions:function(t){Vue.set(this.showContributions,t,!this.showContributions[t])},directPropertyClasses:function(t){return this.calculated[t]?"calculated-value":""},contributionClasses:function(t){return this.showContributions[t]?"open":"closed"},fireAction:function(t,e){t&&("cancel"!==e&&t.source.fire(this.base,this.record,e),t.targets&&Vue.set(t,"target",""))},update:function(){var t,e,n,i,r,s,a,o;for((t=this.universe.indexes.setting.index["setting:current:session"])&&Vue.set(this,"session",this.universe.indexes.session.index[t.value]),isNaN(this.record.durability)||Vue.set(this,"adjustingDurability",this.record.durability),isNaN(this.record.charges)||Vue.set(this,"adjustingCharges",this.record.charges),this.id&&this.id!==this.record.id?(this.universe.index.index[this.id]&&this.universe.index.index[this.id].$off&&this.universe.index.index[this.id].$off("modified",this.update),this.record.$on&&this.record.$on("modified",this.update),Vue.set(this,"id",this.record.id)):Vue.set(this,"id",this.record.id),this.record.description?Vue.set(this,"description",this.rsshowdown(this.record.description,this.record,this.base,this.target)):(Vue.set(this,"holdDescription",null),Vue.set(this,"description",null)),this.record.master_note?this.holdNote!==this.record.master_note&&(Vue.set(this,"holdNote",this.record.master_note),Vue.set(this,"note",this.rsshowdown(this.record.master_note,this.record,this.base))):(Vue.set(this,"holdNote",null),Vue.set(this,"note",null)),this.record.image&&this.universe.nouns.image[this.record.image]?Vue.set(this,"image",this.universe.nouns.image[this.record.image]):Vue.set(this,"image",null),this.record.profile&&this.universe.nouns.image[this.record.profile]?Vue.set(this,"profile",this.universe.nouns.image[this.record.profile]):Vue.set(this,"profile",null),this.keys.splice(0),this.keys.push.apply(this.keys,Object.keys(this.record)),this.record.name&&this.record.label&&this.record.name===this.record.label&&this.keys.splice(this.keys.indexOf("label"),1),this.partiesPresent.splice(0),r={},s=0;s<this.universe.indexes.party.listing.length;s++)if((t=this.universe.indexes.party.listing[s]).location===this.record.id&&this.partiesPresent.push(t),this.base&&t.entity&&-1!==t.entity.indexOf(this.base.id))for(a=0;a<t.entity.length;a++)r[t.entity[a]]||(r[t.entity[a]]=!0);if(this.transfer_targets.splice(0),this.attach_targets.splice(0),this.base){if(this.base.inside&&(r[this.base.inside]=!0),"item"===(e=this.base)._class)for(s=0;s<this.universe.indexes.entity.listing.length;s++)if(t=this.universe.indexes.entity.listing[s],(this.player.master||t.owners&&-1!==t.owners.indexOf(this.player.id))&&t.item&&-1!==t.item.indexOf(this.base.id)){this.transfer_targets.push(t),e=t;break}for(s=0;s<this.universe.indexes.entity.listing.length;s++)(t=this.universe.indexes.entity.listing[s]).obscured||t.mob||t.template||t.id===e.id||t.location!==e.location&&t.inside!==e.inside&&t.id!==e.inside&&t.inside!==e.id&&t.entity!==e.id&&t.id!==e.entity&&!r[t.id]||this.transfer_targets.push(t);if(this.transfer_targets.sort(c),this.record.hardpoints||this.record.contents_max)for(s=0;this.base.item&&s<this.base.item.length;s++)(t=this.universe.indexes.item.lookup[this.base.item[s]]).id===this.record.id||t.untradable||t.id===this.record.id||t.untradable||!(!this.record.cancontain||!this.record.cancontain.length||t.itemtype&&t.itemtype.length&&this.record.cancontain.hasCommon(t.itemtype)||t.type&&t.type.length&&this.record.cancontain.hasCommon(t.type))||this.record.notcontain&&this.record.notcontain.length&&(!t.type||!t.type.length||this.record.notcontain.hasCommon(t.type))||this.attach_targets.push(t);this.attach_targets.sort(c)}if(t=this.player?this.player.id:null,this.availableTemplates.entity.splice(0),this.movableEntities.splice(0),this.hiddenEntities.splice(0),this.shownEntities.splice(0),this.entities.splice(0),this.shownLocations.splice(0),this.locations.splice(0),this.record&&this.record.id&&"location"===this.record._class||"entity"===this.record._class){for(s=0;s<this.universe.indexes.entity.listing.length;s++)(!this.universe.indexes.entity.listing[s].owners&&!this.universe.indexes.entity.listing[s].owner||this.universe.indexes.entity.listing[s].owners&&-1!==this.universe.indexes.entity.listing[s].owners.indexOf(t)||this.universe.indexes.entity.listing[s].owner===t)&&this.universe.indexes.entity.listing[s].location!==this.record.id&&this.universe.indexes.entity.listing[s].inside!==this.record.id&&this.movableEntities.push(this.universe.indexes.entity.listing[s]),"location"===this.record._type&&this.universe.indexes.entity.listing[s].template&&this.availableTemplates.entity.push(this.universe.indexes.entity.listing[s]),this.universe.indexes.entity.listing[s].location!==this.record.id&&this.universe.indexes.entity.listing[s].inside!==this.record.id||(this.universe.indexes.entity.listing[s].hidden||this.universe.indexes.entity.listing[s].obscured?this.hiddenEntities.push(this.universe.indexes.entity.listing[s]):(this.shownEntities.push(this.universe.indexes.entity.listing[s]),this.entities.push(this.universe.indexes.entity.listing[s])));if("location"===this.record._class){for(s=0;s<this.universe.indexes.location.listing.length;s++)this.universe.indexes.location.listing[s]&&this.universe.indexes.location.listing[s].location===this.record.id&&(this.shownLocations.push(this.universe.indexes.location.listing[s]),this.locations.push(this.universe.indexes.location.listing[s]));if(this.record.pathing)for(s=0;s<this.record.pathing.length;s++)this.record.pathing[s]&&-1===this.loctions.indexOf(this.record.pathing[s])&&(this.shownLocations.push(this.record.pathing[s]),this.locations.push(this.record.pathing[s]))}}if(this.shownLocations.sortBy(c),this.shownEntities.sortBy(c),this.shownLocations.splice(7),this.shownEntities.splice(7),this.availableSlots.splice(0),this.base&&this.base.slot&&this.base.slot.length)for(s=0;s<this.base.slot.length;s++)!(n=this.universe.indexes.slot.lookup[this.base.slot[s]])||-1!==this.availableSlots.indexOf(n)||n.itemtype&&!n.itemtype.hasCommon(this.record.itemtype)&&n.type&&!n.type.hasCommon(this.record.type)||this.availableSlots.push(n);if(n=0,this.record.item&&this.record.item.length)for(s=0;s<this.record.item.length;s++)(t=this.universe.indexes.item.lookup[this.record.item[s]])?n+=parseInt(t.encumberance)||0:console.warn({message:"Invalid item in record",record:this.record,item:this.record.item[s]});for(Vue.set(this,"calculatedEncumberance",n),this.parties.splice(0),s=0;s<this.universe.indexes.party.listing.length;s++)this.universe.indexes.party.listing[s].active&&this.parties.push(this.universe.indexes.party.listing[s]);if(this.relatedKnowledge.splice(0),this.base&&this.base.knowledge)for(s=0;s<this.base.knowledge.length;s++)(t=this.universe.indexes.knowledge.lookup[this.base.knowledge[s]])&&t.related&&-1!==t.related.indexOf(this.record.id)&&this.relatedKnowledge.push(t);if(this.relatedKnowledge.sortBy("name"),this.relatedAbilities.splice(0),"archetype"===this.record._class)for(s=0;s<this.universe.indexes.ability.listing.length;s++)(t=this.universe.indexes.ability.listing[s])&&t.archetypes&&-1!==t.archetypes.indexOf(this.record.id)&&this.relatedAbilities.push(t);if(this.relatedAbilities.sortBy("name"),this.relatedArchetypes.splice(0),"archetype"===this.record._class)for(s=0;s<this.universe.indexes.archetype.listing.length;s++)(t=this.universe.indexes.archetype.listing[s])&&t.parent===this.record.id&&this.relatedArchetypes.push(t);for(this.relatedArchetypes.sortBy("name"),this.availableEntities.splice(0),s=0;s<this.universe.indexes.entity.listing.length;s++)this.universe.indexes.entity.listing[s]&&(this.universe.indexes.entity.listing[s].screen||this.universe.indexes.entity.listing[s].owner||this.universe.indexes.entity.listing[s].owners&&this.universe.indexes.entity.listing[s].owners.length)&&this.availableEntities.push(this.universe.indexes.entity.listing[s]);if(this.availableEntities.sortBy("name"),this.equipped.splice(0),this.record.equipped)for(t=Object.keys(this.record.equipped),s=0;s<t.length;s++)for(r=Object.keys(this.record.equipped[t[s]]),a=0;a<r.length;a++)if((i=this.universe.indexes.slot.lookup[r[a]])&&this.record.equipped[t[s]][i.id]&&this.record.equipped[t[s]][i.id].length)for(o=0;o<this.record.equipped[t[s]][i.id].length;o++)(n=this.universe.index.lookup[this.record.equipped[t[s]][i.id][o]])&&this.equipped.push([i,n]);if(this.actions.splice(0),this.record.action&&this.record.action.length)for(s=0;s<this.record.action.length;s++)if(t=this.universe.indexes.action.index[this.record.action[s]]){if((r={}).name=t.label||t.name,r.icon=t.icon||"fas fa-chart-network",r.source=t,r.source._targeted.length&&(r.target="",r.targets=[],this.base)){for(a=0;a<r.source._targeted.length;a++)this.base[r.source._targeted[a]]instanceof Array?r.targets.push.apply(r.targets,this.base[r.source._targeted[a]]):r.targets.push(this.base[r.source._targeted[a]]);r.targets=this.universe.index.translate(r.targets),r.source.filterTargets&&(r.targets=r.source.filterTargets(r.targets,this.record))}this.actions.push(r)}for(this.activeEvents.splice(0),s=0;s<this.universe.indexes.event.listing.length;s++)this.universe.indexes.event.listing[s]&&this.universe.indexes.event.listing[s].active&&this.activeEvents.push(this.universe.indexes.event.listing[s]);if(this.activeEvents.sort(this.sortData),this.base&&this.base._relatedErrors&&this.base._relatedErrors[this.record.id]?Vue.set(this,"relatedError",this.rsshowdown(this.base._relatedErrors[this.record.id].message||this.base._relatedErrors[this.record.id],this.record,this.base,this.target)):Vue.set(this,"relatedError",null),!this.player.hide_contributed&&this.record._calculated)for(s=0;s<this.record._calculated.length;s++)if(this.calculated[this.record._calculated[s]]?this.calculated[this.record._calculated[s]].involved.splice(0):Vue.set(this.calculated,this.record._calculated[s],{result:0,involved:[]}),Vue.set(this.calculated[this.record._calculated[s]],"result",this.universe.calculator.process(this.record[this.record._calculated[s]],this.record,this.base)),this.record._statContributions&&this.record._statContributions[this.record._calculated[s]]){for(t=Object.keys(this.record._statContributions[this.record._calculated[s]]),a=0;a<t.length;a++)t[a]!==this.record.id&&this.universe.indexes.all.index[t[a]]&&(this.player.master||!this.universe.indexes.all.index[t[a]].obscured&&!this.universe.indexes.all.index[t[a]].template)&&this.calculated[this.record._calculated[s]].involved.push(this.universe.indexes.all.index[t[a]]);this.calculated[this.record._calculated[s]].result!=this.record[this.record._calculated[s]]&&this.calculated[this.record._calculated[s]].involved.push(this.base)}this.record.linked?Vue.set(this,"linkedLocation",this.record):this.record.linked_location?!(t=this.universe.indexes.location.index[this.record.linked_location])||this.linkedLocation&&this.linkedLocation.id===t.id||(this.linkedLocation&&this.linkedLocation.$off("modified",this.update),Vue.set(this,"linkedLocation",t),this.linkedLocation.$on("modified",this.update)):this.linkedLocation&&(this.linkedLocation.id!==this.record.id&&this.linkedLocation.$off("modified",this.update),Vue.set(this,"linkedLocation",null)),this.record.restock_base&&this.player.master&&setTimeout(()=>{this.renderRestockDistribution()},10),this.$forceUpdate()},renderRestockDistribution:function(){var t,e,n,i,r,s,a,o,l,c,u,d,p,h,f=10,m=10,v=50,g=50,y=350-g-m,b=300-f-v,_=this.record.rarity_max||5,x=this.record.rarity_min||0,w=this.record.rarity_mean||(_-x)/2+x,k=this.record.rarity_spread||1,S=this.record.restock_base,C=1/k;for(u=function(t){return this.record&&"function"==typeof this.record.restockFunction?this.record.restockFunction(t):-1*Math.pow(C*t-C*w,2)+S},s=d3.line().x(function(t){return o(t.x)}).y(function(t){return l(t.y)}),d=x,c=[];d<=_;)(h=u(d))>0&&c.push({x:parseFloat(d.toFixed(1)),y:h}),d+=1;(p=d3.select(".restock-graph")).selectAll("*").remove(),(p=d3.select(".restock-graph").append("svg").attr("width",y+g+m).attr("height",b+f+v)).append("text").attr("x",y/2+g).attr("y",b+f+v-10).style("text-anchor","middle").text("Rarity"),p.append("text").attr("transform","rotate(-90)").attr("y",0).attr("x",-b/2).attr("dy","1em").style("text-anchor","middle").text("Number of Items"),a=p.append("g").append("circle").style("fill","none").attr("stroke","black").attr("r",8.5).style("opacity",0),r=p.append("g").append("text").style("opacity",0).attr("text-anchor","left").attr("alignment-baseline","middle"),p=p.append("g").attr("transform","translate("+g+","+f+")"),i=d3.bisector(function(t){return t.x}).left,t=function(){r.style("opacity",1),a.style("opacity",1)},e=function(){var t=o.invert(d3.mouse(this)[0]),e=i(c,t,0),n=c[e];n&&(a.attr("cx",o(n.x)+g).attr("cy",l(n.y)+f),r.html("Rarity["+parseInt(n.x)+"]: "+parseInt(n.y)+" Items").attr("x",g+10).attr("y",f))},n=function(){r.style("opacity",0),a.style("opacity",0)},p.append("rect").style("fill","none").style("pointer-events","all").attr("width",y).attr("height",b).on("mouseover",t).on("mousemove",e).on("mouseout",n),o=d3.scaleLinear().domain([x-1,_+1]).range([0,y]),p.append("g").attr("transform","translate(0,"+b+")").call(d3.axisBottom(o)),l=d3.scaleLinear().domain([0,S+1]).range([b,0]),p.append("g").call(d3.axisLeft(l)),p.append("path").datum(c).attr("stroke","steelblue").attr("stroke-width",2).attr("fill","none").attr("d",s(c))},openStarwarsFandom:function(){window.open("https://starwars.fandom.com/wiki/"+this.record.name.replace("System","system"))}},beforeDestroy:function(){this.universe.$off("model:modified",this.update),this.record&&this.record.$off&&this.record.$off("modified",this.update)},template:Vue.templified("components/info/render/basic.html")},"display")}(),function(){var t={id:!0,name:!0,universe:!0,icon:!0,modifierstats:!0,modifierattrs:!0,invisibleProperties:!0,description:!0,echo:!0};rsSystem.component("rsObjectInfo",{inherit:!0,mixins:[rsSystem.components.RSShowdown],props:{record:{required:!0,type:Object},player:{type:Object},target:{type:Object},user:{type:Object},base:{type:Object},options:{type:Object,default:function(){return{}}}},data:function(){var t={holdDescription:null,description:null,keys:[],id:null};return t},watch:{},mounted:function(){},methods:{visible:function(e){return e&&"_"!==e[0]&&!t[e]&&(!this.record.invisibleProperties||-1===this.record.invisibleProperties.indexOf(e))},update:function(){}},beforeDestroy:function(){this.record&&this.record.$off&&this.record.$off("modified",this.update)},render:function(t){var e=!1,n={};return(e=[t(this.record.information_renderer||"rs-object-info-basic",{props:{universe:this.universe,options:this.options,player:this.player,record:this.record,target:this.target,base:this.base,user:this.user}})])||(e=[t("div")]),n["object-info"]=!0,this.record.information_classes&&(n[this.record.information_classes]=!0),t("div",{class:n},e)}})}(),rsSystem.component("rsObjectInfoSlot",{inherit:!0,mixins:[rsSystem.components.RSShowdown],props:{record:{required:!0,type:Object},player:{type:Object},options:{type:Object,default:function(){return{}}}},data:function(){return{}},mounted:function(){this.$el.onclick=(t=>{var e=t.srcElement.attributes.getNamedItem("data-id");e&&(e=this.universe.index.index[e.value])&&rsSystem.EventBus.$emit("display-info",e)}),this.record.$on&&this.record.$on("modified",this.update),rsSystem.register(this),this.update()},methods:{update:function(){this.$forceUpdate()}},beforeDestroy:function(){this.record&&this.record.$off&&this.record.$off("modified",this.update)},template:Vue.templified("components/info/render/slot.html")},"display"),rsSystem.component("rsRenderedText",{inherit:!0,mixins:[rsSystem.components.RSShowdown,rsSystem.components.RSCore],props:{text:{required:!0,type:String},universe:{required:!0,type:Object},entity:{required:!0,type:Object},target:{type:Object},base:{type:Object},options:{type:Object,default:function(){return{}}}},data:function(){return{}},watch:{state:{deep:!0,handler:function(){this.saveStorage(this.storageKeyID,this.state)}}},mounted:function(){this.$el.onclick=(t=>{var e=t.srcElement.attributes.getNamedItem("data-id");e&&(e=this.universe.index.index[e.value])&&rsSystem.EventBus.$emit("display-info",e)}),this.character.$on("modified",this.update),rsSystem.register(this),this.update()},methods:{update:function(){}},beforeDestroy:function(){this.character.$off("modified",this.update)},template:Vue.templified("components/info/text.html")}),rsSystem.component("rsListing",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSCore],props:{id:{default:"listcomp",type:String},checker:{type:Function},empty:{type:String},placeholder:{default:"Filter List...",type:String},active:{type:String},emit:{type:Boolean},infobase:{type:Object},list:{required:!0,type:Array}},data:function(){var t={};return t.storageKeyID="_rs_listingComponentKey:"+this.id,t.state=this.loadStorage(t.storageKeyID,{search:""}),t},watch:{state:{deep:!0,handler:function(){this.saveStorage(this.storageKeyID,this.state)}}},mounted:function(){rsSystem.register(this),this.sync()},methods:{isVisible:function(t){return!this.state.search||t&&t._search&&-1!==t._search.indexOf(this.state.search.toLowerCase())},entryStyleClass:function(t){var e="";return this.checker&&this.player&&!this.checker(t,this.player)&&(e+="disabled"),!this.active||t.id!==this.active&&t.id!==this.active.id||(e+=" active"),e},openListed:function(t){this.emit?this.$emit("open",t):this.showInfo(t,this.infobase)},sync:function(){}},template:Vue.templified("components/listing.html")}),function(){var t={icon:"",class:"buffer",label:""};rsSystem.component("systemMenu",{inherit:!0,mixins:[rsSystem.components.RSCore],props:{},data:function(){var e={storageID:"_rs_menuComponentKey"};return e.state=this.loadStorage(e.storageID,{labels:!0}),void 0===e.state.labels&&(e.state.labels=!0),e.myentity=null,e.navigationItems=[],e.navigationItems.push({icon:"fas fa-jedi",action:"navigate",label:"Dashboard",path:"/dashboard",highlight:"/dashboard",conditionals:[{master:!1}]}),e.navigationItems.push({icon:"fas fa-street-view",action:"navigate",label:"Locality",path:"/locality",highlight:"/locality",conditionals:[{master:!1}]}),e.navigationItems.push({icon:"fas fa-warehouse-alt",action:"navigate",label:"Storage",path:"/storage",highlight:"/storage",conditionals:[{master:!1}]}),e.navigationItems.push({icon:"fas fa-journal-whills",action:"navigate",label:"Journal",path:"/journal",highlight:"/journal",conditionals:[{master:!1}]}),e.navigationItems.push({icon:"far fa-desktop",action:"navigate",label:"Screen",path:"/master",highlight:"/master",conditionals:[{master:!0}]}),e.navigationItems.push({icon:"fad fa-galaxy",action:"navigate",label:"Galaxy",path:"/galaxy",highlight:"/galaxy",conditionals:[{master:!0}]}),e.navigationItems.push({icon:"fas fa-treasure-chest",action:"navigate",label:"Nouns",path:"/nouns",highlight:"/nouns",conditionals:[{master:!0}]}),e.navigationItems.push({icon:"fas fa-map",action:"navigate",label:"Map",path:"/map",highlight:"/map"}),e.navigationItems.push({icon:"fas fa-users",action:"navigate",label:"Party",path:"/party",highlight:"/party",conditionals:[{master:!0}]}),e.navigationItems.push({icon:"fas fa-swords",action:"navigate",label:"Combat",path:"/combat",highlight:"/combat",conditionals:[{master:!0}]}),e.navigationItems.push(t),e.navigationItems.push({icon:"far fa-user",action:"navigate",label:"Account",path:"/account",highlight:"/account"}),e.navigationItems.push({icon:"far fa-server",action:"navigate",label:"System",path:"/system",highlight:"/system"}),e.navigationItems.push({icon:"far fa-question-square",action:"navigate",label:"About",path:"/about",highlight:"/about"}),e.generalItems=[],e.shrinkItem={icon:"far fa-text-width",action:"toggle-labels",label:"Shrink"},e.generalItems.push(e.shrinkItem),e.generalItems.push(t),e.generalItems.push({icon:"far fa-sign-out",action:"logout",label:"Logout"}),e},watch:{$route:{deep:!0,handler:function(){this.$forceUpdate()}},state:{deep:!0,handler:function(t){this.saveStorage(this.storageID,this.state)}},player:{deep:!0,handler:function(){this.player&&this.player.entity&&!this.myentity?(Vue.set(this,"myentity",this.universe.indexes.entity.index[this.player.entity]),this.myentity&&this.navigationItems.unshift({icon:this.myentity.icon||"fas fa-dice-d20",action:"navigate",label:this.myentity.name,path:"/dashboard/"+this.myentity.classification+"/"+this.player.entity,conditionals:[{master:!1}]})):!this.myentity||this.player&&this.player.entity||(Vue.set(this,"myentity",null),this.navigationItems.pop())}}},mounted:function(){rsSystem.register(this)},methods:{isActive:function(t){if(t.conditionals){for(var e=0;e<t.conditionals.length;e++)if(this.evaluateConditional(t.conditionals[e]))return!0;return!1}return!0},evaluateConditional:function(t){var e,n=Object.keys(t);for(e=0;e<n.length;e++)switch(n[e]){case"master":if(!0===t[n[e]])return this.player.master;if(!1===t[n[e]])return!this.player.master}},getClassSettings:function(){var t="full standard undocked";return this.state.labels||(t+=" collapsed"),t},processNavigation:function(t){switch(t.action){case"navigate":break;case"toggle-labels":Vue.set(this.state,"labels",!this.state.labels),this.state.labels?Vue.set(this.shrinkItem,"label","Shrink"):Vue.set(this.shrinkItem,"label","Expand");break;case"logout":"/"!==this.$route.path?this.$router.push("/").then(()=>{this.universe.logout()}):this.universe.logout();break;case"none":break;default:this.universe.log.warn({message:"Unknown action["+t.action+"] in menu navigation",item:t})}}},template:Vue.templified("components/menu.html")})}(),function(){var t,e,n,i,r,s,a,o,l,c;(e=new SearchIndex).indexItem({name:"Session Start",id:"game:session_start"}),e.indexItem({name:"Long Rest",id:"entity:long_rest"}),e.indexItem({name:"Short Rest",id:"entity:short_rest"}),e.indexItem({name:"Meditation",id:"entity:meditation"}),e.indexItem({name:"Top of Round",id:"entity:round_start"}),t=[{label:"ID",property:"id",type:"text"},s={label:"Parent",property:"parent",type:"select",optionValue:"id",optionLabel:"name"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"Renderer",property:"information_renderer",type:"text"},{label:"XP Cost",property:"xp_cost",type:"text"},{label:"Charge After",property:"charge_after",type:"text"},{label:"Charges On",property:"charges_on",type:"multireference",source_index:e,optionValue:"id",optionLabel:"name",uniquely:!0},l={label:"Types",property:"type",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Activation",property:"activation",type:"select",raw:!0,options:["automatic","passive","active"]},{label:"Template",property:"template",type:"checkbox"},{label:"Locked",property:"locked_ability",type:"checkbox"},{label:"Hidden",property:"hidden",type:"checkbox"},{label:"Obscured",property:"obscured",type:"checkbox"},{label:"Dependency Type",property:"dependency_type",type:"select",optionValue:"id",optionLabel:"name",options:[{name:"Default (Any)",id:void 0},{name:"Any",id:"any"},{name:"All",id:"all"}]},i={label:"Archetypes",property:"archetypes",type:"multireference",optionValue:"id",optionLabel:"name"},n={label:"Abilities",property:"requires_ability",type:"multireference",optionValue:"id",optionLabel:"name"},r={label:"Knowledges",property:"requires_knowledge",type:"multireference",optionValue:"id",optionLabel:"name"},a={label:"Attributes",property:"modifierattrs",type:"multireference",optionValue:"id",optionLabel:"name"},o={label:"Stats",property:"modifierstats",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Description",property:"description",type:"textarea"},c={label:"Notes",property:"note",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsAbility",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.ability=t,e},mounted:function(){s.options=this.universe.indexes.ability.listing,s.options.sortBy("name"),i.source_index=this.universe.indexes.archetype,n.source_index=this.universe.indexes.ability,r.source_index=this.universe.indexes.knowledge,a.source_index=this.universe.indexes.modifierattrs,o.source_index=this.universe.indexes.modifierstats,l.source_index=this.universe.indexes.type,c.source_index=this.universe.indexes.note},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n;t=[{label:"ID",property:"id",type:"text"},n={label:"Parent",property:"parent",type:"select",optionValue:"id",optionLabel:"name"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"Label",property:"label",type:"text"},{label:"Renderer",property:"information_renderer",type:"text"},e={label:"Responses",property:"response",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Description",property:"description",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsAction",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.action=t,e},mounted:function(){n.options=this.universe.indexes.action.listing,n.options.sortBy("name"),e.source_index=RSAction.response},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n,i,r;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"Renderer",property:"information_renderer",type:"text"},{label:"Order",property:"order",type:"number"},n={label:"Parent",property:"parent",type:"select",optionValue:"id",optionLabel:"name"},{label:"Classifications",property:"classification",type:"select",raw:!0,options:["primary","secondary","tertiary","custom"]},{label:"Playable",property:"playable",type:"checkbox"},{label:"Hidden",property:"hidden",type:"checkbox"},{label:"Obscured",property:"obscured",type:"checkbox"},e={label:"Conditions",property:"condition",type:"multireference",optionValue:"id",optionLabel:"name"},i={label:"Attributes",property:"modifierattrs",type:"multireference",optionValue:"id",optionLabel:"name"},r={label:"Stats",property:"modifierstats",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Description",property:"description",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsArchetype",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.archetype=t,e},mounted:function(){n.options=this.universe.indexes.archetype.listing,e.source_index=this.universe.indexes.condition,i.source_index=this.universe.indexes.modifierattrs,r.source_index=this.universe.indexes.modifierstats},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e;e=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Engagement Flags",property:"__engagement",type:"label"},{label:"Weapon",property:"is_weapon",type:"checkbox"},{label:"Ranged",property:"is_ranged",type:"checkbox",condition:{is_weapon:{operation:"exists"}}},{label:"Melee",property:"is_melee",type:"checkbox",condition:{is_weapon:{operation:"exists"}}},{label:"Charges and Recharging",property:"__charges",type:"label"},{label:"Max Charges",property:"charges_max",type:"number"},{label:"Session Gain",property:"charges_gain_session",type:"number"},{label:"Session Rate",property:"charges_rate_session",type:"number"},{label:"Long Gain",property:"charges_gain_long",type:"number"},{label:"Long Rate",property:"charges_rate_long",type:"number"},{label:"Short Gain",property:"charges_gain_short",type:"number"},{label:"Short Rate",property:"charges_rate_short",type:"number"},{label:"Career Skill Flag",property:"__enhanced",type:"label"}],t=[{label:"Description",property:"description",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsModifierAttrs",{inherit:!0,mixins:[rsSystem.components.RSSWStats],props:{universe:{required:!0,type:Object}},data:function(){var t={};return t.fields=this.fields||{},t.fields.modifierattrs=[],t.fields.modifierattrs.push.apply(t.fields.modifierattrs,e),t},mounted:function(){var e;for(e=0;e<this.universe.indexes.skill.listing.length;e++)this.fields.modifierattrs.push({label:this.universe.indexes.skill.listing[e].name,property:"skill_enhanced_"+this.universe.indexes.skill.listing[e].property,type:"checkbox"});for(this.fields.modifierattrs.push({label:"Skill Adjustments",property:"__skilladjustments",type:"label"}),e=0;e<this.universe.indexes.skill.listing.length;e++)this.fields.modifierattrs.push({label:this.universe.indexes.skill.listing[e].name+" (Σ)",property:"adjusts_skill_"+this.universe.indexes.skill.listing[e].property,type:"text"});this.fields.modifierattrs.push.apply(this.fields.modifierattrs,t)},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n,i,r;t=[{label:"ID",property:"id",type:"text"},{label:"Parent",property:"parent",type:"select",optionValue:"id",optionLabel:"name"},{label:"Name",property:"name",type:"text"},{label:"Conditional Flag Checks",property:"__checks",type:"label"},{label:"Is Equipped",property:"is_equipped",type:"checkbox"},{label:"Is Charged",property:"is_charged",type:"checkbox"},{label:"Has Charges",property:"has_charges",type:"checkbox"},{label:"Reference Requirements",property:"__refreq",type:"label"}],e=[{label:"Documentation",property:"__docs",type:"label"},{label:"Description",property:"description",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsCondition",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var s={};if(!n){for(n={},r=0;r<rsSystem.listingNouns.length;r++)i={label:rsSystem.listingNouns[r],property:rsSystem.listingNouns[r],type:"multireference",autocomplete:!0,optionValue:"id",optionLabel:"name"},n[rsSystem.listingNouns[r]]=i,t.push(i);t=t.concat(e)}return s.fields=this.fields||{},s.fields.condition=t,s},mounted:function(){for(r=0;r<rsSystem.listingNouns.length;r++)n[rsSystem.listingNouns[r]].source_index=this.universe.indexes[rsSystem.listingNouns[r]]},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e;t=[{label:"ID",property:"id",type:"text"},{label:"Label",property:"name",type:"text"},{label:"Property",property:"property",type:"text"},{label:"Section",property:"section",type:"text"},{label:"Order",property:"order",type:"number"},{label:"Type",property:"type",type:"select",raw:!0,options:["text","color","textarea","checkbox","number","range","date","select","multireference"]},{label:"Unique Values",property:"uniqueness",type:"checkbox",condition:{type:"multireference"}},{label:"Raw Values",property:"raw",type:"checkbox",condition:{type:"select"}},{label:"Numeric Values",property:"numeric_values",type:"checkbox",condition:{type:{operation:"contains",oneof:["multireference"]},raw:{operation:"exists"}}},{label:"Option Value",property:"optionValue",type:"text",condition:{type:{operation:"contains",oneof:["select","multireference"]},raw:{operation:"!"}}},{label:"Option Label",property:"optionLabel",type:"text",condition:{type:{operation:"contains",oneof:["select","multireference"]},raw:{operation:"!"}}},e={label:"Option Index",property:"option_index",type:"select",raw:!0,condition:{type:{operation:"contains",oneof:["select","multireference"]},raw:{operation:"!"}}},{label:"Available Options",property:"options",type:"multireference",raw:!0,condition:{type:{operation:"contains",oneof:["select","multireference"]},raw:{operation:"exists"}}},{label:"Autocomplete",property:"autocomplete",type:"checkbox",condition:{type:{operation:"contains",oneof:["multireference"]},raw:{operation:"!"}}},{label:"Primary Stat",property:"primary",type:"checkbox"},{label:"Inactive",property:"inactive",type:"checkbox"},{label:"Description",property:"description",type:"textarea"}],rsSystem.component("NounFieldsDatapoint",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.datapoint=t,e},mounted:function(){e.options=[""].concat(rsSystem.listingNouns)},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"Default Set",property:"default_set",type:"checkbox"},{label:"Data Set",property:"set",type:"textarea"},{label:"Description",property:"description",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsDataset",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.dataset=t,e},mounted:function(){},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n;t=[{label:"ID",property:"id",type:"text"},n={label:"Name",property:"name",type:"select",raw:!0},e={label:"Datapoints",property:"datapoint",type:"multireference",autocomplete:!0,optionValue:"id",optionLabel:"property",uniqueness:!0},{label:"Description",property:"description",type:"textarea"}],rsSystem.component("NounFieldsDatausage",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.datausage=t,e},mounted:function(){e.source_index=this.universe.indexes.datapoint,n.options=rsSystem.listingNouns},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n,i,r;t=new SearchIndex([{name:"area",id:"area"},{name:"building",id:"building"},{name:"character",id:"character"},{name:"ship",id:"ship"},{name:"station",id:"station"}]),e=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"Duration",property:"duration",type:"number"},{label:"Activation",property:"activation",type:"select",raw:!0,options:["automatic","passive","active"]},{label:"Debuff",property:"debuff",type:"checkbox"},{label:"Removable",property:"removable",type:"checkbox"},{label:"Addable",property:"addable",type:"checkbox"},{label:"Hidden",property:"hidden",type:"checkbox"},{label:"Obscured",property:"obscured",type:"checkbox"},{label:"Alters",property:"alters",type:"multireference",optionValue:"id",optionLabel:"name",source_index:t,noinfo:!0},n={label:"Attributes",property:"modifierattrs",type:"multireference",optionValue:"id",optionLabel:"name"},i={label:"Stats",property:"modifierstats",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Indicators",property:"indicators",type:"textarea"},r={label:"Notes",property:"note",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Description",property:"description",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsEffect",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var t={};return t.fields=this.fields||{},t.fields.effect=e,t},mounted:function(){n.source_index=this.universe.indexes.modifierattrs,i.source_index=this.universe.indexes.modifierstats,r.source_index=this.universe.indexes.note},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n,i,r,s,a,o,l,c,u,d,p,h,f,m,v,g,y,b,_,x,w,k,S,C,E,M;f={label:"Image",property:"image",type:"select",optionValue:"id",optionLabel:"name"},t=[{label:"ID",property:"id",type:"text"},g={label:"Parent",property:"parent",type:"select",optionValue:"id",optionLabel:"name"},{label:"Name",property:"name",type:"text"},{label:"Label",property:"label",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"Allegiance",property:"allegiance",knowledge:"knowledge:system:icons",type:"text"},{label:"Age",property:"age",type:"number"},{label:"Height",property:"height",type:"number"},{label:"Mass",property:"mass",type:"number"},{label:"Experience",property:"xp",type:"number"},{label:"Credits",property:"credits",type:"number"},{label:"Cost",property:"cost",type:"number"},M={label:"Entity Types",property:"type",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Classification",property:"classification",type:"select",raw:!0,options:["base","building","character","ship","station"]},{label:"Silhouette",property:"silhouette",type:"select",raw:!0,options:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,25,30,35,40,45,50,60,70,80,90,100]},{label:"Pilot Skill",property:"pilot_skill",type:"number",condition:{classification:"character"}},{label:"Model",property:"model",type:"text",condition:{classification:{operation:"contains",oneof:["station","ship","building","base"]}}},e={label:"Floor Plan",property:"linked_location",type:"select",optionValue:"id",optionLabel:"name",condition:{classification:{operation:"contains",oneof:["building","ship","station","base"]}}},{label:"Required Crew",property:"required_crew",type:"number",condition:{classification:{operation:"contains",oneof:["ship"]}}},{label:"Maximum Crew",property:"maximum_crew",type:"number",condition:{classification:{operation:"contains",oneof:["ship"]}}},s={label:"Maneuvers",property:"maneuver",type:"multireference",optionValue:"id",optionLabel:"name",condition:{classification:"ship"}},n={label:"Active Piloting Abilities",property:"ship_active_abilities",type:"multireference",optionValue:"id",optionLabel:"name",condition:{classification:"ship"}},x={label:"Pilot",property:"entity",type:"select",optionValue:"id",optionLabel:"name",condition:{classification:"ship"}},w={label:"Races",property:"race",type:"select",optionValue:"id",optionLabel:"name",condition:{classification:"character"}},E={label:"Sex",property:"sex",type:"select",optionValue:"id",optionLabel:"name",condition:{classification:"character"}},{label:"Template",property:"template",type:"checkbox"},{label:"Name Prefix",property:"randomize_name_prefix",type:"text",raw:!0,condition:{template:!0}},{label:"Name Suffix",property:"randomize_name_suffix",type:"text",raw:!0,condition:{template:!0}},u={label:"Name Dataset",property:"randomize_name_dataset",type:"select",optionValue:"id",optionLabel:"name",condition:{randomize_name:{operation:"exists"}}},{label:"Random Name",property:"randomize_name",type:"select",raw:!0,condition:{template:!0},options:[0,1,2,3,4,5,6]},{label:"Name Spacing",property:"randomize_name_spacing",type:"checkbox"},{label:"No Map Border",property:"no_border",type:"checkbox"},{label:"Must Know",property:"must_know",type:"checkbox"},{label:"Hidden",property:"hidden",type:"checkbox"},{label:"Hidden Name",property:"hidden_name",type:"text",condition:{hidden:{operation:"exists"}}},{label:"Obscured",property:"obscured",type:"checkbox"},{label:"Screen",property:"screen",type:"checkbox"},S={label:"Slots",property:"slot",type:"multireference",optionValue:"id",optionLabel:"name"},l={label:"Location",property:"location",type:"select",optionValue:"id",optionLabel:"name"},{label:"X Coordinate",property:"x",type:"number",condition:{location:{operation:"exists"}}},{label:"Y Coordinate",property:"y",type:"number",condition:{location:{operation:"exists"}}},h={label:"Inside",property:"inside",type:"select",optionValue:"id",optionLabel:"name"},{label:"Size",property:"size",type:"select",raw:!0,options:["tiny","small","medium","large","huge","gigantic","city","mountainous","enormouos","planetary","star_system","galactic"]},c={label:"Profile",property:"profile",type:"select",optionValue:"id",optionLabel:"name"},{label:"Inactivated",property:"inactive",type:"checkbox"},{label:"Is Hostile",property:"is_hostile",type:"checkbox"},{label:"Is Public",property:"is_public",type:"checkbox"},{label:"Is Private",property:"is_private",type:"checkbox"},{label:"Is Shop",property:"is_shop",type:"checkbox"},a={label:"Available Shop Types",property:"soldtypes",type:"multireference",optionValue:"id",optionLabel:"name",condition:{is_shop:!0}},{label:"Restock Base",property:"restock_base",type:"number",condition:{is_shop:!0}},{label:"Restock Max",property:"restock_max",type:"number",condition:{is_shop:!0}},{label:"Restock Clear",property:"restock_clear",type:"checkbox",condition:{is_shop:!0}},{label:"No Cost",property:"no_cost",type:"checkbox",condition:{is_shop:!0}},{label:"Sells Restricted",property:"restock_restricted",type:"checkbox",condition:{is_shop:!0}},{label:"Rarity Min",property:"rarity_min",type:"number",condition:{is_shop:!0}},{label:"Rarity Max",property:"rarity_max",type:"number",condition:{is_shop:!0}},{label:"Rarity Mean",property:"rarity_mean",type:"number",condition:{is_shop:!0}},{label:"Rarity Spread",property:"rarity_spread",type:"number",condition:{is_shop:!0}},y={label:"Attribute Modifers",property:"modifierattrs",type:"multireference",optionValue:"id",optionLabel:"name"},C={label:"Stat Modifers",property:"modifierstats",type:"multireference",optionValue:"id",optionLabel:"name"},p={label:"Effects",property:"effect",type:"multireference",optionValue:"id",optionLabel:"name"},i={label:"Knowledge",property:"knowledge",type:"multireference",optionValue:"id",optionLabel:"name"},m={label:"Knowns",property:"known_objects",type:"multireference",optionValue:"id",optionLabel:"name",condition:{classification:"character"}},r={label:"Archetypes",property:"archetype",type:"multireference",optionValue:"id",optionLabel:"name",condition:{classification:"character"}},o={label:"Abilities",property:"ability",type:"multireference",optionValue:"id",optionLabel:"name"},b={label:"Items",property:"item",type:"multireference",optionValue:"id",optionLabel:"name"},d={label:"Widgets",property:"widget",type:"multireference",optionValue:"id",optionLabel:"name"},k={label:"Rooms",property:"room",type:"multireference",optionValue:"id",optionLabel:"name",condition:{classification:{operation:"contains",oneof:["building","ship","station","base"]}}},v={label:"Owners",property:"owners",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Hidden Description",property:"hidden_description",type:"textarea",condition:{hidden:{operation:"exists"}}},{label:"Description",property:"description",type:"textarea"},_={label:"Notes",property:"note",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Motivations",property:"motivations",type:"textarea"},{label:"Obligations",property:"obligations",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsEntity",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.entity=t,e},mounted:function(){e.options=this.universe.indexes.location.listing,l.options=this.universe.indexes.location.listing,l.options.sortBy("name"),u.options=this.universe.indexes.dataset.listing,u.options.sortBy("name"),c.options=this.universe.indexes.image.listing,c.options.sortBy("name"),h.options=this.universe.indexes.entity.listing,g.options=h.options,h.options.sortBy("name"),f.options=this.universe.indexes.image.listing,f.options.sortBy("name"),x.options=this.universe.indexes.entity.listing,x.options.sortBy("name"),w.options=this.universe.indexes.race.listing,w.options.sortBy("name"),E.options=this.universe.indexes.sex.listing,E.options.sortBy("name"),n.source_index=this.universe.indexes.ability,i.source_index=this.universe.indexes.knowledge,r.source_index=this.universe.indexes.archetype,y.source_index=this.universe.indexes.modifierattrs,C.source_index=this.universe.indexes.modifierstats,s.source_index=this.universe.indexes.maneuver,o.source_index=this.universe.indexes.ability,p.source_index=this.universe.indexes.effect,d.source_index=this.universe.indexes.widget,a.source_index=this.universe.indexes.type,v.source_index=this.universe.indexes.player,_.source_index=this.universe.indexes.note,k.source_index=this.universe.indexes.room,S.source_index=this.universe.indexes.slot,M.source_index=this.universe.indexes.type,b.source_index=this.universe.indexes.item,m.source_index=this.universe.index},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n,i,r,s,a;(e=["combat","minigame","news","story"]).sort(),e.push("custom"),t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",type:"text"},{label:"Date",property:"date",type:"date"},{label:"Category",property:"category",type:"select",raw:!0,options:e},n={label:"Mini Game",property:"minigame",type:"select",optionValue:"id",optionLabel:"name",condition:{category:"minigame"}},{label:"Active",property:"active",type:"checkbox"},{label:"Master Screen",property:"screen",type:"checkbox"},{label:"Hidden",property:"hidden",type:"checkbox"},{label:"Obscured",property:"obscured",type:"checkbox"},i={label:"Involved",property:"involved",type:"multireference",optionValue:"id",optionLabel:"name"},s={label:"Place",property:"place",type:"multireference",optionValue:"id",optionLabel:"name"},r={label:"Inside",property:"inside",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Description",property:"description",type:"textarea"},a={label:"Notes",property:"note",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsEvent",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.event=t,e},mounted:function(){n.options=this.universe.indexes.minigame.listing,n.options.sortBy("name"),i.source_index=this.universe.indexes.entity,r.source_index=this.universe.indexes.entity,s.source_index=this.universe.indexes.location,a.source_index=this.universe.indexes.note},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"URL Based",property:"linked",type:"checkbox"},{label:"Delayed",property:"delay_data",knowledge:"knowledge:image:delay",type:"checkbox",condition:{linked:{operation:"!"}}},{label:"URL",property:"url",knowledge:"knowledge:image:url",type:"text",condition:{linked:{operation:"exists"}}},{label:"Data",property:"data",knowledge:"knowledge:image:data",type:"file",accept:"image/*",condition:{linked:{operation:"!"}}},{label:"Description",property:"description",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsImage",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.image=t,e},mounted:function(){},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n,i,r,s,a,o,l,c,u,d,p,h,f,m;r={label:"Item Types (Deprecated)",property:"itemtype",type:"multireference",optionValue:"id",optionLabel:"name"},a={label:"Attunee",property:"attuned_to",type:"select",optionValue:"id",optionLabel:"name"},t=[{label:"ID",property:"id",type:"text"},l={label:"Parent",property:"parent",type:"select",optionValue:"id",optionLabel:"name"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"Price",property:"price",type:"number"},{label:"Cumbersome",property:"Cumbersome",type:"number"},{label:"Encumberance",property:"encumberance",type:"number"},{label:"Critical",property:"critical",type:"number"},{label:"Max Contents",property:"contents_max",type:"number"},{label:"Rarity",property:"rarity",type:"number"},{label:"Charges",property:"charges",type:"number"},{label:"Slots Used",property:"slots_used",type:"number"},s={label:"Profile",property:"profile",type:"select",optionValue:"id",optionLabel:"name"},p={label:"Skill",property:"skill_check",type:"select",optionValue:"id",optionLabel:"name"},{label:"Durability",property:"durability",type:"select",raw:!0,options:[10,9,8,7,6,5,4,3,2,1,0]},{label:"Info Render",property:"information_renderer",type:"select",optionValue:"id",optionLabel:"name",options:[{name:"Basic",id:void 0},{name:"Bag",id:"rssw-bag-render"}]},{label:"Charged",property:"charged",type:"checkbox"},{label:"Attunement",property:"attunement",type:"checkbox"},{label:"Restricted",property:"restricted",type:"checkbox"},{label:"Untradable",property:"untradable",type:"checkbox"},{label:"Locked Attunement",property:"locked_attunement",type:"checkbox"},{label:"No Modifiers",property:"no_modifiers",type:"checkbox"},{label:"Add Encumberance",property:"adds_encumberance",type:"checkbox",condition:{no_modifiers:!0}},{label:"Scaled Encumberance",property:"scaled_encumberance",type:"number",condition:{adds_encumberance:!0,no_modifiers:!0,contents_max:{operation:"exists"}}},{label:"Needs Slot",property:"needs_slot",type:"checkbox"},{label:"Ranged",property:"is_ranged",type:"checkbox"},{label:"Melee",property:"is_melee",type:"checkbox"},{label:"Template",property:"template",type:"checkbox"},{label:"Hidden",property:"hidden",type:"checkbox"},{label:"Obscured",property:"obscured",type:"checkbox"},{label:"Screen",property:"screen",type:"checkbox"},h={label:"Slot Usage",property:"slot_usage",type:"multireference",optionValue:"id",optionLabel:"name"},e={label:"Limited To Containing or Effecting These Types",property:"cancontain",type:"multireference",optionValue:"id",optionLabel:"name"},n={label:"Can not Contain or Effect These Types",property:"notcontain",type:"multireference",optionValue:"id",optionLabel:"name"},m={label:"Types",property:"type",type:"multireference",optionValue:"id",optionLabel:"name"},i={label:"Abilities",property:"ability",type:"multireference",optionValue:"id",optionLabel:"name"},o={label:"Actions",property:"action",type:"multireference",optionValue:"id",optionLabel:"name"},u={label:"Attachments",property:"item",type:"multireference",optionValue:"id",optionLabel:"name"},c={label:"Attributes",property:"modifierattrs",type:"multireference",optionValue:"id",optionLabel:"name"},f={label:"Stats",property:"modifierstats",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Description",property:"description",type:"textarea"},d={label:"Notes",property:"note",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsItem",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.item=t,e},mounted:function(){s.options=this.universe.indexes.image.listing,s.options.sortBy("name"),p.options=this.universe.indexes.skill.listing,p.options.sortBy("name"),a.options=this.universe.indexes.entity.listing,a.options.sortBy("name"),l.options=this.universe.indexes.item.listing,l.options.sortBy("name"),c.source_index=this.universe.indexes.modifierattrs,f.source_index=this.universe.indexes.modifierstats,i.source_index=this.universe.indexes.ability,r.source_index=this.universe.indexes.itemtype,e.source_index=this.universe.indexes.type,n.source_index=this.universe.indexes.type,o.source_index=this.universe.indexes.action,h.source_index=this.universe.indexes.slot,u.source_index=this.universe.indexes.item,m.source_index=this.universe.indexes.type,d.source_index=this.universe.indexes.note},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"Hidden",property:"hidden",type:"checkbox"},{label:"Obscured",property:"obscured",type:"checkbox"},{label:"Description",property:"description",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsItemType",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.itemtype=t,e},mounted:function(){},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n,i;t=[{label:"ID",property:"id",type:"text"},{label:"Title",property:"name",type:"text"},n={label:"Session",property:"session",type:"select",optionValue:"id",optionLabel:"name"},i={label:"Editor",property:"editor",type:"select",optionValue:"id",optionLabel:"name"},{label:"Created",property:"created",type:"number"},{label:"Updated",property:"updated",type:"number"},e={label:"Related",property:"related",type:"multireference",optionValue:"id",optionLabel:"name",autocomplete:!0},{label:"Description",property:"description",type:"textarea"}],rsSystem.component("NounFieldsJournal",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.journal=t,e},mounted:function(){i.options=this.universe.indexes.entity.listing,i.options.sortBy("name"),n.options=this.universe.indexes.session.listing,n.options.sortBy("name"),e.source_index=this.universe.index},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n,i,r,s,a,o=["quest","quest:task","quest:main","quest:seconary","ideas","ideas:force","ideas:electronics","ideas:skill","ideas:ability","ideas:job","things","things:army","things:ship","things:fleet","things:item","things:market","things:temple","peoples","peoples:ancestry","peoples:character","peoples:clan","peoples:creature","peoples:culture","peoples:language","peoples:empire","peoples:race","peoples:ruler","locations","locations:starsystem","locations:planet","locations:city","locations:continent","locations:expedition","locations:forest","locations:mountain","locations:temple","locations:sector"].sort();t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"Category",property:"category",type:"select",raw:!0,options:o},{label:"State",property:"state",type:"select",raw:!0,options:["undiscovered","pending","active","completed"]},{label:"Master Screen",property:"screen",type:"checkbox"},{label:"Hidden",property:"hidden",type:"checkbox"},{label:"Obscured",property:"obscured",type:"checkbox"},n={label:"Profile",property:"profile",type:"select",optionValue:"id",optionLabel:"name"},i={label:"Related",property:"related",type:"multireference",optionValue:"id",optionLabel:"name",autocomplete:!0},e={label:"Mentioned",property:"mentioned",type:"multireference",optionValue:"id",optionLabel:"name",autocomplete:!0},r={label:"Attributes",property:"modifierattrs",type:"multireference",optionValue:"id",optionLabel:"name"},s={label:"Stats",property:"modifierstats",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Description",property:"description",type:"textarea"},a={label:"Notes",property:"note",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsKnowledge",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.knowledge=t,e},mounted:function(){n.options=this.universe.indexes.image.listing,n.options.sortBy("name"),r.source_index=this.universe.indexes.modifierattrs,s.source_index=this.universe.indexes.modifierstats,a.source_index=this.universe.indexes.note,e.source_index=this.universe.index,i.source_index=this.universe.index},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",type:"text"},{label:"Label Color",property:"label_color",type:"text"},{label:"Label Opacity",property:"label_opacity",type:"number"},{label:"X Coordinate",property:"x",type:"number"},{label:"Y Coordinate",property:"y",type:"number"},{label:"Order",property:"order",type:"number"},{label:"Color",property:"color",type:"text"},{label:"Opacity",property:"opacity",type:"number"},{label:"Thickness",property:"thickness",type:"number"},e={label:"Residence",property:"residence",type:"select",optionValue:"id",optionLabel:"name"},{label:"Pathed",property:"pathed",type:"checkbox"},{label:"Curved",property:"curved",type:"checkbox"},{label:"Contained",property:"contained",type:"checkbox"},{label:"Fill Color",property:"fill_color",type:"text",condition:{contained:{operation:"exists"}}},{label:"Fill Opacity",property:"fill_opacity",type:"number",condition:{contained:{operation:"exists"}}},{label:"Show Name",property:"show_name",type:"checkbox"},{label:"Clickable",property:"clickable",type:"checkbox"},n={label:"Pathing",property:"pathing",type:"multireference",optionValue:"id",optionLabel:"name",condition:{pathed:{operation:"exists"}}},{label:"Path",property:"path",type:"textarea",condition:{pathed:{operation:"!"}}},{label:"Description",property:"description",type:"textarea"}],rsSystem.component("NounFieldsLocale",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.locale=t,e},mounted:function(){e.options=this.universe.indexes.location.listing,e.options.sortBy("name"),n.source_index=this.universe.indexes.location},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n,i,r,s,a,o,l,c,u;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Label",property:"label",type:"text"},{label:"Label Sizing",property:"label_sizing",type:"number"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"Hidden",property:"hidden",type:"checkbox"},{label:"Obscured",property:"obscured",type:"checkbox"},{label:"Must Know",property:"must_know",type:"checkbox"},l={label:"Locals",property:"locals",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Include Child Location Present Entities in Locals",property:"auto_nearby_children",type:"checkbox"},{label:"Include Present Entities in Locals",property:"auto_nearby",type:"checkbox"},{label:"X Coordinate",property:"x",type:"number"},{label:"Y Coordinate",property:"y",type:"number"},{label:"Order",property:"order",type:"number"},{label:"Size",property:"size",type:"select",raw:!0,options:["tiny","small","medium","large","huge","gigantic","city","mountainous","enormous","planetary","interplanetary","star_system","interstellar","galactic","verse"]},{label:"Link",property:"linked",type:"select",raw:!0,options:["map"]},{label:"Map Distance",property:"map_distance",type:"number",condition:{linked:"map"}},r={label:"Resides In",property:"location",type:"select",optionValue:"id",optionLabel:"name"},s={label:"Profile",property:"profile",type:"select",optionValue:"id",optionLabel:"name"},o={label:"Image",property:"image",type:"select",optionValue:"id",optionLabel:"name"},n={label:"Background",property:"background",type:"select",optionValue:"id",optionLabel:"name"},{label:"No Map Border",property:"no_border",type:"checkbox"},{label:"Has Path?",property:"has_path",type:"checkbox"},{label:"Label Color",property:"label_color",type:"text",condition:{has_path:{operation:"exists"}}},{label:"Label Opacity",property:"label_opacity",type:"number",condition:{has_path:{operation:"exists"}}},{label:"Label Shadow",property:"label_shadow",type:"checkbox",condition:{has_path:{operation:"exists"}}},{label:"Label Shadow Color",property:"label_shadow_color",type:"text",condition:{label_shadow:{operation:"exists"}}},{label:"Shadow Blur",property:"label_shadow_blur",type:"number",condition:{label_shadow:{operation:"exists"}}},{label:"Color",property:"color",type:"text",condition:{has_path:{operation:"exists"}}},{label:"Opacity",property:"opacity",type:"number",condition:{has_path:{operation:"exists"}}},{label:"Thickness",property:"thickness",type:"number",condition:{has_path:{operation:"exists"}}},{label:"Pathed",property:"pathed",type:"checkbox",condition:{has_path:{operation:"exists"}}},{label:"Curved",property:"curved",type:"checkbox",condition:{has_path:{operation:"exists"}}},{label:"Contained",property:"contained",type:"checkbox",condition:{has_path:{operation:"exists"}}},{label:"Fill Color",property:"fill_color",type:"text",condition:{contained:{operation:"exists"}}},{label:"Fill Opacity",property:"fill_opacity",type:"number",condition:{contained:{operation:"exists"}}},{label:"Show Name",property:"show_name",type:"checkbox",condition:{contained:{operation:"exists"},render_name:{operation:"!"}}},{label:"Render Name",property:"render_name",type:"checkbox",condition:{contained:{operation:"exists"},show_name:{operation:"!"}}},a={label:"Pathing",property:"pathing",type:"multireference",optionValue:"id",optionLabel:"name",autocomplete:!0,condition:{has_path:!0,pathed:{operation:"exists"}}},{label:"Path",property:"path",type:"textarea",condition:{has_path:!0,pathed:{operation:"!"}}},u={label:"Types",property:"type",type:"multireference",optionValue:"id",optionLabel:"name"},i={label:"Playlists",property:"playlist",type:"multireference",optionValue:"id",optionLabel:"name"},e={label:"Knowledge",property:"knowledge",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Description",property:"description",type:"textarea"},c={label:"Notes",property:"note",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsLocation",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.location=t,e},mounted:function(){r.options=this.universe.indexes.location.listing,r.options.sortBy("name"),s.options=this.universe.indexes.image.listing,s.options.sortBy("name"),n.options=this.universe.indexes.image.listing,o.options=this.universe.indexes.image.listing,o.options.sortBy("name"),e.source_index=this.universe.indexes.knowledge,i.source_index=this.universe.indexes.playlist,a.source_index=this.universe.indexes.location,l.source_index=this.universe.indexes.entity,u.source_index=this.universe.indexes.type,c.source_index=this.universe.indexes.note},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"Order",property:"order",type:"number"},{label:"Speed",property:"speed",type:"select",raw:!0,options:[0,1,2,3,4,5,6,7,8,9,10]},{label:"Energy Cost",property:"energy",type:"select",raw:!0,options:[0,1,2,3,4,5,6,7,8,9,10]},{label:"Stress",property:"stress",type:"select",optionValue:"id",optionLabel:"name",options:[{name:"Red",id:"red"},{name:"White",id:"white"},{name:"Green",id:"green"}]},{label:"Description",property:"description",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsManeuver",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.maneuver=t,e},mounted:function(){},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",type:"text"},{label:"Inactive",property:"inactive",type:"checkbox"},{label:"Game Medium",property:"medium",type:"select",raw:!0,options:["cards","board","words","gestures"]},{label:"Board Shape",property:"shape",type:"select",raw:!0,options:["circle","grid","polygon"],condition:{medium:{operation:"contains",oneof:["cards","board"]}}},{label:"Dim: Width",property:"width",type:"number"},{label:"Dim: Length",property:"length",type:"number"},{label:"Is Radial?",property:"radial",type:"checkbox"},{label:"Inner Unified",property:"radial_unified",type:"number",condition:{radial:{operation:"exists"}}},{label:"Uses Inventory",property:"inventory_additions",type:"checkbox"},{label:"Player Selected",property:"inventory_additions_selected",type:"checkbox"},e={label:"Provided Items",property:"provided",type:"multireference",optionValue:"id",optionLabel:"name",autocomplete:!0,condition:{medium:{operation:"contains",oneof:["cards","board"]}}},n={label:"Used Types",property:"used_types",type:"multireference",optionValue:"id",optionLabel:"name",condition:{medium:{operation:"contains",oneof:["cards","board"]},inventory_additions:{operation:"exists"}}},{label:"Description",property:"description",type:"textarea"},{label:"Master Notes",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsMinigame",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.minigame=t,e},mounted:function(){e.source_index=this.universe.indexes.item,n.source_index=this.universe.indexes.type},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},e={label:"Knowledge",property:"knowledge",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Description",property:"description",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsNote",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.note=t,e},mounted:function(){e.source_index=this.universe.indexes.knowledge},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n,i;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Label",property:"label",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"Description",property:"description",type:"textarea"},e={label:"Location",property:"location",type:"select",optionValue:"id",optionLabel:"name"},i={label:"Inside",property:"inside",type:"select",optionValue:"id",optionLabel:"name"},{label:"Order",property:"order",type:"select",raw:!0,options:[20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0]},{label:"Hide Stats",property:"hide_stats",knowledge:"knowledge:system:hide:stats",type:"checkbox"},{label:"Hide Relations",property:"hide_relations",knowledge:"knowledge:system:hide:relations",type:"checkbox",condition:{hide_stats:{operation:"test",value:!1}}},{label:"Hide Properties",property:"hide_properties",knowledge:"knowledge:system:hide:properties",type:"checkbox",condition:{hide_stats:{operation:"test",value:!1}}},{label:"Suppressed",property:"suppressed",knowledge:"knowledge:system:suppressed",type:"checkbox"},{label:"Active",property:"active",type:"checkbox"},{label:"Hidden",property:"hidden",knowledge:"knowledge:system:hidden",type:"checkbox"},{label:"Obscured",property:"obscured",knowledge:"knowledge:system:obscured",type:"checkbox"},n={label:"Members",property:"entity",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"X Coordinate",property:"x",type:"number",condition:{location:{operation:"exists"}}},{label:"Y Coordinate",property:"y",type:"number",condition:{location:{operation:"exists"}}},{label:"Notes",property:"note",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsParty",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.party=t,e},mounted:function(){var t;for(e.options=this.universe.indexes.location.listing,e.options.sortBy("name"),i.options=[],t=0;t<this.universe.indexes.entity.listing.length;t++)this.universe.indexes.entity.listing[t].template||i.options.push(this.universe.indexes.entity.listing[t]);i.options.sortBy("name"),n.source_index=this.universe.indexes.entity},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e;t=[{label:"ID",property:"id",type:"text"},{label:"Username",property:"username",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Passcode",property:"passcode",type:"text"},{label:"E-Mail",property:"email",type:"text"},{label:"Discord",property:"linked_discord",type:"text"},e={label:"Entity",property:"entity",type:"select",optionValue:"id",optionLabel:"name"},{label:"Master",property:"master",type:"checkbox"},{label:"Description",property:"description",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsPlayer",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.player=t,e},mounted:function(){e.options=this.universe.indexes.entity.listing,e.options.sortBy("name")},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"General",property:"general",type:"checkbox"},{label:"Combat",property:"combat",type:"checkbox"},{label:"Hidden",property:"hidden",type:"checkbox"},{label:"Obscured",property:"obscured",type:"checkbox"},e={label:"Streams",property:"streams",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Description",property:"description",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsPlaylist",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.playlist=t,e},mounted:function(){e.source_index=this.universe.indexes.streamurl},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n,i,r,s,a;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},n={label:"Profile",property:"profile",type:"select",optionValue:"id",optionLabel:"name"},{label:"Playable",property:"playable",type:"checkbox"},{label:"Skill Count",property:"skills_starting_count",type:"number"},i={label:"Possible Starting Skills",property:"skills_starting",type:"multireference",optionValue:"id",optionLabel:"name"},e={label:"Name Generation Dataset",property:"dataset",type:"multireference",optionValue:"id",optionLabel:"name"},r={label:"Attributes",property:"modifierattrs",type:"multireference",optionValue:"id",optionLabel:"name"},s={label:"Stats",property:"modifierstats",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Description",property:"description",type:"textarea"},a={label:"Notes",property:"note",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsRace",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.race=t,e},mounted:function(){n.options=this.universe.indexes.image.listing,n.options.sortBy("name"),r.source_index=this.universe.indexes.modifierattrs,s.source_index=this.universe.indexes.modifierstats,e.source_index=this.universe.indexes.dataset,i.source_index=this.universe.indexes.skill,a.source_index=this.universe.indexes.note},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n,i,r,s,a;t=[{label:"ID",property:"id",type:"text"},i={label:"Parent",property:"parent",type:"select",optionValue:"id",optionLabel:"name"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},e={label:"Profile",property:"profile",type:"select",optionValue:"id",optionLabel:"name"},{label:"Template",property:"template",type:"checkbox"},n={label:"Effects",property:"effect",type:"multireference",optionValue:"id",optionLabel:"name"},r={label:"Attributes",property:"modifierattrs",type:"multireference",optionValue:"id",optionLabel:"name"},s={label:"Stats",property:"modifierstats",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Description",property:"description",type:"textarea"},a={label:"Notes",property:"note",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsRoom",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var o={};return o.fields=this.fields||{},o.fields.room=t,e.options=this.universe.indexes.image.listing,e.options.sortBy("name"),i.options=this.universe.indexes.room.listing,i.options.sortBy("name"),r.source_index=this.universe.indexes.modifierattrs,s.source_index=this.universe.indexes.modifierstats,n.source_index=this.universe.indexes.effect,a.source_index=this.universe.indexes.note,o},mounted:function(){},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e;t=[{label:"ID",property:"id",type:"text"},{label:"Number",property:"name",type:"text"},{label:"Title",property:"title",type:"text"},{label:"Real Date",property:"date",type:"number"},{label:"Game Time",property:"time",type:"number"},{label:"Starting Destiny",property:"destiny_starting",type:"text"},{label:"Light",property:"destiny_light",type:"number"},{label:"Dark",property:"destiny_dark",type:"number"},e={label:"Related",property:"related",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Description",property:"description",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsSession",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.session=t,e},mounted:function(){e.source_index=this.universe.index},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Value",property:"value",type:"textarea"},{label:"Description",property:"description",type:"textarea"}],rsSystem.component("NounFieldsSetting",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.setting=t,e},mounted:function(){},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n,i;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"Hidden",property:"hidden",type:"checkbox"},{label:"Obscured",property:"obscured",type:"checkbox"},e={label:"Attributes",property:"modifierattrs",type:"multireference",optionValue:"id",optionLabel:"name"},i={label:"Stats",property:"modifierstats",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Description",property:"description",type:"textarea"},n={label:"Notes",property:"note",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsSex",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.sex=t,e},mounted:function(){e.source_index=this.universe.indexes.modifierattrs,i.source_index=this.universe.indexes.modifierstats,n.source_index=this.universe.indexes.note},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n;n=function(t,e){return t&&t.name&&(t=t.name),e&&e.name&&(e=e.name),(t=t||"")<(e=e||"")?-1:t>e?1:0},t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"Order",property:"order",type:"number"},{label:"Section",property:"section",type:"select",raw:!0,options:["combat","custom","general","knowledge","piloting","subskill"]},e={label:"Base",property:"base",type:"select",optionValue:"id",optionLabel:"name"},{label:"No Rank",property:"no_rank",type:"checkbox"},{label:"No Roll",property:"no_roll",type:"checkbox"},{label:"Hidden",property:"hidden",type:"checkbox"},{label:"Obscured",property:"obscured",type:"checkbox"},{label:"Description",property:"description",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsSkill",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.skill=t,e},mounted:function(){e.options=this.characterStatsListing,e.options.sort(n)},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n,i,r,s;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"Price",property:"price",type:"number"},{label:"Encumberance",property:"encumberance",type:"number"},{label:"Points",property:"points",type:"number"},{label:"Order",property:"order",type:"number"},{label:"Accepts",property:"accepts",type:"select",raw:!0,options:["item","room","entity"]},e={label:"Item Types",property:"itemtype",type:"multireference",optionValue:"id",optionLabel:"name",condition:{accepts:"item"}},r={label:"Accepted Types",property:"type",type:"multireference",optionValue:"id",optionLabel:"name"},n={label:"Attributes",property:"modifierattrs",type:"multireference",optionValue:"id",optionLabel:"name"},i={label:"Stats",property:"modifierstats",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Combat Slot",property:"combat_slot",type:"checkbox"},{label:"No Inheritance",property:"no_inheritance",type:"checkbox"},{label:"Hidden",property:"hidden",type:"checkbox"},{label:"Obscured",property:"obscured",type:"checkbox"},s={label:"Notes",property:"note",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Description",property:"description",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsSlot",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.slot=t,e},mounted:function(){n.source_index=this.universe.indexes.modifierattrs,i.source_index=this.universe.indexes.modifierstats,e.source_index=this.universe.indexes.itemtype,s.source_index=this.universe.indexes.note,r.source_index=this.universe.indexes.type},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n,i,r,s,a,o,l,c,u;o=["general","engaged","short","medium","long","extreme"],u=["proficiency","ability","boost","challenge","difficulty","setback","setforward"],i=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Soak",property:"soak",type:"text"},{label:"Max Wound",property:"wounds_max",type:"text"},{label:"Max Strain",property:"strain_max",type:"text"},{label:"Start Wound",property:"wounds_start",type:"text"},{label:"Start Strain",property:"strain_start",type:"text"},{label:"XP Start",property:"xp_start",type:"text"},{label:"General Defense",property:"defense_general",type:"text"},{label:"Melee Defense",property:"defense_melee",type:"text"},{label:"Range Defense",property:"defense_range",type:"text"},{label:"Pilot Skill",property:"pilot_skill",type:"text"},{label:"Point Cost",property:"point_cost",type:"text"},{label:"XP Cost",property:"xp_cost",type:"text"},{label:"Slots Used",property:"slots_used",type:"number"},{label:"Energy Output",property:"energy_out",type:"text"},{label:"Energy Consumption",property:"energy_consume",type:"text"},{label:"Energy Potential",property:"energy_potential",type:"text"},{label:"Mass",property:"mass",type:"text"},{label:"Speed",property:"speed",type:"text"},{label:"Encumberance",property:"encumberance",type:"text"},{label:"Encumberance Bonus",property:"encumberance_bonus",type:"text"},{label:"Max Contents",property:"contents_max",type:"text"},{label:"Scaled Encumberance",property:"scaled_encumberance",type:"text"},{label:"Rarity",property:"rarity",type:"text"},{label:"Hardpoints",property:"hardpoints",type:"text"},{label:"Concealment",property:"concealment",type:"text"},{label:"Ship Specific Stats",property:"__shipstats",type:"label"},{label:"Required Crew",property:"required_crew",type:"text"},{label:"Ship Shield",property:"shield",type:"text"},{label:"Ship Attack",property:"attack",type:"text"},{label:"Ship Evasion",property:"evasion",type:"text"},{label:"Ship Hull",property:"hull",type:"text"},{label:"Bonus: Boost",property:"bonus_boost",type:"text"},{label:"Bonus: Speed",property:"bonus_ship_speed",type:"text"},{label:"Charges and Recharging",property:"__charges",type:"label"},{label:"Max Charges",property:"charges_max",type:"text"},{label:"Session Gain",property:"charges_gain_session",type:"text"},{label:"Session Rate",property:"charges_rate_session",type:"text"},{label:"Long Gain",property:"charges_gain_long",type:"text"},{label:"Long Rate",property:"charges_rate_long",type:"text"},{label:"Short Gain",property:"charges_gain_short",type:"text"},{label:"Short Rate",property:"charges_rate_short",type:"text"},{label:"Item Qualities",property:"__qualities",type:"label"},{label:"Quality",property:"quality",type:"text"},{label:"Damage",property:"damage",type:"text"},{label:"Critical",property:"critical",type:"text"},{label:"Critical Bonus",property:"critical_damage_bonus",type:"text"},{label:"Accurate",property:"accurate",type:"text"},{label:"Inaccurate",property:"inaccurate",type:"text"},{label:"Auto-Fire",property:"autofire",type:"text"},{label:"Slow Fire",property:"slowfire",type:"text"},{label:"Breach",property:"breach",type:"text"},{label:"Blast",property:"blast",type:"text"},{label:"Concussive",property:"concussive",type:"text"},{label:"Cortosis",property:"cortosis",type:"text"},{label:"Burn",property:"burn",type:"text"},{label:"Cumbersome",property:"cumbersome",type:"text"},{label:"Defensive",property:"defensive",type:"text"},{label:"Deflection",property:"deflection",type:"text"},{label:"Disorient",property:"disorient",type:"text"},{label:"Knockdown",property:"knockdown",type:"text"},{label:"Ensnare",property:"ensnare",type:"text"},{label:"Inferior",property:"inferior",type:"text"},{label:"Ion",property:"ion",type:"text"},{label:"Guided",property:"guided",type:"text"},{label:"Limited Ammo",property:"limitedammo",type:"text"},{label:"Linked",property:"linked",type:"text"},{label:"Pierce",property:"pierce",type:"text"},{label:"Prepare",property:"prepare",type:"text"},{label:"Stun Damage",property:"stundamage",type:"text"},{label:"Sunder",property:"sunder",type:"text"},{label:"Superior",property:"superior",type:"text"},{label:"Tractor",property:"tractor",type:"text"},{label:"Stun",property:"stun",type:"text"},{label:"Vicious",property:"vicious",type:"text"}],e=[r={label:"Abilities",property:"ability",type:"multireference",optionValue:"id",optionLabel:"name"},s={label:"Effects",property:"effect",type:"multireference",optionValue:"id",optionLabel:"name"},a={label:"Skills",property:"skill",type:"multireference",optionValue:"id",optionLabel:"name"},l={label:"Slots",property:"slot",type:"multireference",optionValue:"id",optionLabel:"name"},n={label:"Conditions",property:"condition",type:"multireference",optionValue:"id",optionLabel:"name"},c={label:"Types",property:"type",type:"multireference",optionValue:"id",optionLabel:"name"}],t=[{label:"Description",property:"description",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsModifierStats",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSSWStats],props:{universe:{required:!0,type:Object}},data:function(){var n,r,s={};for(s.fields=this.fields||{},s.fields.modifierstats=[],s.fields.modifierstats.push.apply(s.fields.modifierstats,i),s.fields.modifierstats.push({label:"Combat Range Bonuses",property:"__crb",type:"label"}),s.fields.modifierstats.push({label:"Attack Range",property:"range",type:"text"}),n=0;n<o.length;n++)for(r=0;r<u.length;r++)s.fields.modifierstats.push({label:o[n].capitalize()+" "+u[r],property:"range_"+o[n]+"_"+u[r],type:"text"});for(s.fields.modifierstats.push({label:"Attributes",property:"__attr",type:"label"}),s.fields.modifierstats.push({property:"brawn",label:"Brawn",type:"text"}),s.fields.modifierstats.push({property:"agility",label:"Agility",type:"text"}),s.fields.modifierstats.push({property:"intellect",label:"Intellect",type:"text"}),s.fields.modifierstats.push({property:"cunning",label:"Cunning",type:"text"}),s.fields.modifierstats.push({property:"willpower",label:"Willpower",type:"text"}),s.fields.modifierstats.push({property:"pressence",label:"Pressence",type:"text"}),s.fields.modifierstats.push({label:"Skills",property:"__skills",type:"label"}),this.universe.indexes.skill.listing.sort(this.sortData),n=0;n<this.universe.indexes.skill.listing.length;n++)s.fields.modifierstats.push({label:this.universe.indexes.skill.listing[n].name,property:this.universe.indexes.skill.listing[n].propertyKey,type:"text"});for(s.fields.modifierstats.push({label:"Skill Amendments",property:"__skillamendments",type:"label"}),s.fields.modifierstats.push({label:"Specific Check (+)",property:"skill_amend_direct_check",type:"text"}),n=0;n<this.universe.indexes.skill.listing.length;n++)s.fields.modifierstats.push({label:this.universe.indexes.skill.listing[n].name+" (+)",property:"skill_amend_"+this.universe.indexes.skill.listing[n].property,type:"text"});return s.fields.modifierstats.push.apply(s.fields.modifierstats,e),s.fields.modifierstats.push.apply(s.fields.modifierstats,t),s},mounted:function(){n.source_index=this.universe.indexes.condition,r.source_index=this.universe.indexes.ability,s.source_index=this.universe.indexes.effect,a.source_index=this.universe.indexes.skill,c.source_index=this.universe.indexes.type,l.source_index=this.universe.indexes.slot},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"URL",property:"url",type:"textarea"},{label:"Description",property:"description",type:"textarea"}],rsSystem.component("NounFieldsStreamURL",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.streamurl=t,e},mounted:function(){},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e,n,i;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"Order",property:"order",type:"number"},{label:"Ranged",property:"is_ranged",type:"checkbox"},{label:"Melee",property:"is_melee",type:"checkbox"},{label:"Hidden",property:"hidden",type:"checkbox"},{label:"Obscured",property:"obscured",type:"checkbox"},e={label:"Attributes",property:"modifierattrs",type:"multireference",optionValue:"id",optionLabel:"name"},n={label:"Stats",property:"modifierstats",type:"multireference",optionValue:"id",optionLabel:"name"},i={label:"Notes",property:"note",type:"multireference",optionValue:"id",optionLabel:"name"},{label:"Description",property:"description",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsType",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.type=t,e},mounted:function(){e.source_index=this.universe.indexes.modifierattrs,n.source_index=this.universe.indexes.modifierstats,i.source_index=this.universe.indexes.note},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t,e;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"name",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"Declaration",property:"declaration",type:"text"},{label:"Storage ID",property:"sid",type:"text"},{label:"Template",property:"template",type:"checkbox"},{label:"For Players",property:"for_players",type:"checkbox"},{label:"Hidden",property:"hidden",type:"checkbox"},{label:"Obscured",property:"obscured",type:"checkbox"},e={label:"Configurations",property:"configurations",type:"multireference",optionValue:"id",optionLabel:"label"},{label:"Description",property:"description",type:"textarea"},{label:"Master Note",property:"master_note",type:"textarea"}],rsSystem.component("NounFieldsWidget",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.widget=t,e},mounted:function(){e.source_index=this.universe.indexes.widgetconfiguration},methods:{update:function(){}},beforeDestroy:function(){}})}(),function(){var t;t=[{label:"ID",property:"id",type:"text"},{label:"Name",property:"label",type:"text"},{label:"Icon",property:"icon",knowledge:"knowledge:system:icons",type:"text"},{label:"Type",property:"type",type:"select",raw:!0,options:["checkbox","number","text"]}],rsSystem.component("NounFieldsWidgetConfiguration",{inherit:!0,props:{universe:{required:!0,type:Object}},data:function(){var e={};return e.fields=this.fields||{},e.fields.widgetconfiguration=t,e},mounted:function(){},methods:{update:function(){}},beforeDestroy:function(){}})}();class FieldDescriptor{constructor(t){Object.assign(this,t)}}!function(){var t=/[ _-]/g,e=/[^a-zA-Z0-9]+/g,n=function(t,e){return(t=(t.name||"").toLowerCase())<(e=(e.name||"").toLowerCase())?-1:t>e?1:0},i=function(e,n){if(!n.id){if(!n.name)throw new Error("No ID or name");n.id=e+":"+n.name.toLowerCase().replace(t,"")}return n.id=n.id.toLowerCase().trim(),n.name&&(n.name=n.name.trim()),n};rsSystem.component("rsNouns",{inherit:!0,mixins:[rsSystem.components.StorageManager,rsSystem.components.DataManager,rsSystem.components.NounFieldsWidgetConfiguration,rsSystem.components.NounFieldsModifierStats,rsSystem.components.NounFieldsModifierAttrs,rsSystem.components.NounFieldsArchetype,rsSystem.components.NounFieldsCondition,rsSystem.components.NounFieldsDatapoint,rsSystem.components.NounFieldsDatausage,rsSystem.components.NounFieldsKnowledge,rsSystem.components.NounFieldsStreamURL,rsSystem.components.NounFieldsItemType,rsSystem.components.NounFieldsLocation,rsSystem.components.NounFieldsPlaylist,rsSystem.components.NounFieldsMinigame,rsSystem.components.NounFieldsManeuver,rsSystem.components.NounFieldsAbility,rsSystem.components.NounFieldsDataset,rsSystem.components.NounFieldsJournal,rsSystem.components.NounFieldsSession,rsSystem.components.NounFieldsSetting,rsSystem.components.NounFieldsAction,rsSystem.components.NounFieldsEntity,rsSystem.components.NounFieldsEffect,rsSystem.components.NounFieldsLocale,rsSystem.components.NounFieldsPlayer,rsSystem.components.NounFieldsWidget,rsSystem.components.NounFieldsEvent,rsSystem.components.NounFieldsImage,rsSystem.components.NounFieldsParty,rsSystem.components.NounFieldsSkill,rsSystem.components.NounFieldsItem,rsSystem.components.NounFieldsNote,rsSystem.components.NounFieldsRace,rsSystem.components.NounFieldsRoom,rsSystem.components.NounFieldsSlot,rsSystem.components.NounFieldsType,rsSystem.components.NounFieldsSex],props:{universe:{required:!0,type:Object},player:{required:!0,type:Object},built:{type:Object}},data:function(){var t,e={};for(e.availableToCopy=[],e.nameGenerators={},e.attaching=null,e.rawValue="{}",e.message=null,e.isValid=!0,e.models={},e.copy=null,e.nouns=rsSystem.listingNouns.sort(),e.storageKeyID="_rs_nounComponentKey",e.state=this.loadStorage(e.storageKeyID,{current:"player",building:{}}),this.$route.params.type&&(e.state.current=this.$route.params.type),t=0;t<e.nouns.length;t++)e.state.building[e.nouns[t]]||(e.state.building[e.nouns[t]]={}),e.models[e.nouns[t]]=new rsSystem.availableNouns[e.nouns[t]](e.state.building[e.nouns[t]],this.universe),e.models[e.nouns[t]]._coreData=e.state.building[e.nouns[t]];return e.extra_properties=[],e},watch:{copy:function(t){if(t){var e,n,i,r=this.universe.nouns[this.state.current][t];if(n=r?JSON.stringify(r,null,4):"{}",n=JSON.parse(n),r){if(r.template&&this.state.building[this.state.current].parent!==r.id&&(this.$route.params.oid!==r.id||this.$route.params.oid===r.id&&"true"===this.$route.query.copy)){if((n={}).parent=r.id,n.id=r.id+":"+Date.now(),n.name="",r.randomize_name){if(r.randomize_name_dataset&&(e=this.universe.indexes.dataset.index[r.randomize_name_dataset])?e=new NameGenerator(e.set):r.race&&(e=this.getGenerator(r.race)),r.randomize_name_prefix&&(n.name+=r.randomize_name_prefix+" "),e)for(n.name+=e.corpus[Random.integer(e.corpus.length)].capitalize(),i=1;i<r.randomize_name;i++)r.randomize_name_spacing&&(n.name+=" "),n.name+=e.corpus[Random.integer(e.corpus.length)].capitalize();r.randomize_name_suffix&&(n.name+=" "+r.randomize_name_suffix)}}else if(r&&(!r||r.template)||"true"!==this.$route.query.copy||(n.id+=":"+Date.now()),this.$route.query.values)try{r=JSON.parse(this.$route.query.values),Object.assign(n,r)}catch(t){console.warn("Failed to load values due to parse exception: ",t)}}else n.id=t;n=JSON.stringify(n,null,4),Vue.set(this,"rawValue",n),Vue.set(this,"copy",null)}},"state.current":function(t,e){this.state.building[t]?Vue.set(this,"rawValue",JSON.stringify(this.state.building[t],null,"\t")):Vue.set(this,"rawValue",{}),this.buildAvailableCopies()},state:{deep:!0,handler:function(){this.models[this.state.current].id=this.state.building[this.state.current].id,this.models[this.state.current].recalculateProperties(),this.saveStorage(this.storageKeyID,this.state),this.$emit("change"),this.$forceUpdate()}},"$route.params":{deep:!0,handler:function(t){this.$route.params.type&&(Vue.set(this.state,"current",t.type),this.broadcastModel()),this.$route.params.oid&&setTimeout(()=>{Vue.set(this,"copy",t.oid)},0)}},rawValue:function(t){try{var e,n,i=JSON.parse(t);for(e=Object.keys(this.state.building[this.state.current]),n=0;n<e.length;n++)Vue.delete(this.state.building[this.state.current],e[n]);for(e=Object.keys(i),n=0;n<e.length;n++)Vue.set(this.state.building[this.state.current],e[n],i[e[n]]);if(i instanceof Array&&Vue.set(this.state.building[this.state.current],"length",i.length),Vue.set(this,"message",null),Vue.set(this,"isValid",!0),this.built){for(e=Object.keys(this.built),n=0;n<e.length;n++)Vue.set(this.built,e[n],null);for(e=Object.keys(i),n=0;n<e.length;n++)Vue.set(this.built,e[n],i[e[n]])}this.$emit("change")}catch(t){Vue.set(this,"message","Invalid: "+t.message),Vue.set(this,"isValid",!1)}}},mounted:function(){rsSystem.register(this),this.state.building[this.state.current]?Vue.set(this,"rawValue",JSON.stringify(this.state.building[this.state.current],null,"\t")):Vue.set(this,"rawValue","{}"),this.$route.params.oid&&Vue.set(this,"copy",this.$route.params.oid),this.universe.$on("universe:modified",this.universeUpdate),this.models[this.state.current].recalculateProperties(),this.$emit("model",this.models[this.state.current]),this.universeUpdate()},methods:{nameRandomization:function(t,e){var n,i="";if(t.randomize_name){if(e||(t.randomize_name_dataset&&(e=this.universe.indexes.dataset.index[t.randomize_name_dataset])?e=new NameGenerator(e.set):t.race&&(e=this.getGenerator(t.race))),t.randomize_name_prefix&&(i+=t.randomize_name_prefix+" "),e)for(i+=e.corpus[Random.integer(e.corpus.length)].capitalize(),n=1;n<t.randomize_name;n++)t.randomize_name_spacing&&(i+=" "),i+=e.corpus[Random.integer(e.corpus.length)].capitalize();t.randomize_name_suffix&&(i+=" "+t.randomize_name_suffix)}return i},viewParentInfo:function(){rsSystem.EventBus.$emit("display-info",this.state.building[this.state.current].parent)},activeCopying:function(){return"true"===this.$route.query.copy},changeHandler:function(t){},buildAvailableCopies:function(){this.availableToCopy.splice(0),this.availableToCopy.push.apply(this.availableToCopy,this.universe.indexes[this.state.current].listing),this.availableToCopy.sort(n)},clearField:function(t){Vue.set(this.state.building[this.state.current],t.property,null),this.built&&Vue.set(this.built,t.property,null)},hasGenerator:function(t){return(t=t||this.models[this.state.current].race)&&this.universe.indexes.race.index[t]&&this.universe.indexes.race.index[t].dataset||!t&&this.universe.defaultDataset},pullRandomName:function(t){this.models[this.state.current].randomize_name?Vue.set(this.state.building[this.state.current],"name",this.nameRandomization(this.models[this.state.current],t)):"session"===this.state.current?Vue.set(this.state.building[this.state.current],"name",new String(this.universe.indexes.session.listing.length+1)):(t=t||this.getGenerator(this.state.building[this.state.current].race))&&Vue.set(this.state.building[this.state.current],"name",t.corpus[Random.integer(t.corpus.length)].capitalize()+" "+t.corpus[Random.integer(t.corpus.length)].capitalize())},randomizeName:function(t){(t=t||this.getGenerator(this.models[this.state.current].race))&&Vue.set(this.state.building[this.state.current],"name",t.create().capitalize()+" "+t.create().capitalize())},setDateNow:function(t){Vue.set(this.state.building[this.state.current],t,Date.now())},getGenerator:function(t){var e,n,i=null;if(t&&this.universe.indexes.race.index[t]&&this.universe.indexes.race.index[t].dataset)if(this.nameGenerators[t])i=this.nameGenerators[t];else{for(e="",n=0;n<this.universe.indexes.race.index[t].dataset.length;n++)this.universe.indexes.dataset.index[this.universe.indexes.race.index[t].dataset[n]]&&(e+=" "+this.universe.indexes.dataset.index[this.universe.indexes.race.index[t].dataset[n]].set);i=new NameGenerator(e),Vue.set(this.nameGenerators,t,i)}else this.universe.defaultDataset&&(this.nameGenerators._default?i=this.nameGenerators._default:(this.universe.defaultDataset.set||(console.warn("Update: ",this.universe.defaultDataset),this.universe.defaultDataset.recalculateProperties()),i=new NameGenerator(this.universe.defaultDataset.set),Vue.set(this.nameGenerators,"_default",i)));return i},broadcastModel:function(){this.$emit("model",this.models[this.state.current]),this.models[this.state.current].recalculateProperties()},openKnowledge:function(t){this.universe.index.index[t]?rsSystem.EventBus.$emit("display-info",this.universe.index.index[t]):console.warn("ID Not Found for Knowledge: ",t)},getIDFromName:function(){var n,i,r=this.models[this.state.current];if(r.name){if("session"===this.state.current){for(n=r.label;n.length<5;)n="0"+n;i=this.state.current+":"+(n.toLowerCase?n.toLowerCase().replace(t,"").replace(e,":"):n)}else i=this.state.current+":"+(r.name.toLowerCase?r.name.toLowerCase().replace(t,"").replace(e,":"):r.name);switch(this.state.current){case"ability":r.archetypes&&r.archetypes.length&&(r.archetypes instanceof Array&&r.archetypes.length&&(n=this.universe.indexes.archetype.index[r.archetypes[0]])||(n=this.universe.indexes.archetype.index[r.archetypes]))&&(i+=":"+n.name.toLowerCase().replace(t,"")),r.xp_cost&&(i+=":"+r.xp_cost);default:return i}}},syncID:function(){Vue.set(this.state.building[this.state.current],"id",this.getIDFromName())},adjust:function(t){t},completed:function(t){switch(t){case"name":this.models[this.state.current]&&!this.models[this.state.current].id&&Vue.set(this.state.building[this.state.current],"id",this.getIDFromName())}},sync:function(t){this.built&&Vue.set(this.built,t.property,t.value)},labelNoun:function(t){return t.name?t.template?t.name+" (Template)":t.source_template?t.name+" (..."+t.id.replace(t.source_template,"")+")":t.name+" (..."+t.id.substring(t.id.length-15)+")":t.id},newObject:function(){var t,e=Object.keys(this.state.building[this.state.current]);if(this.built)for(t=0;t<e.length;t++)Vue.delete(this.state.building[this.state.current],e[t]),Vue.set(this.built,e[t],null);else for(t=0;t<e.length;t++)Vue.delete(this.state.building[this.state.current],e[t]);this.$route.query.values?Vue.set(this,"rawValue",this.$route.query.values):Vue.set(this,"rawValue","{}"),this.broadcastModel()},dropObject:function(){this.state.building[this.state.current]._type=this.state.current,this.universe.send("delete:"+this.state.current,i(this.state.current,this.state.building[this.state.current]))},fileAttach:function(t){try{t.items[0].getAsFile()}catch(t){console.error("Ex: ",t)}},selectImage:function(t){var e,n,i,r=$(this.$el).find("#attacher");if("image"===this.state.current&&r&&r.length&&r[0].files.length){if(this.state.building[this.state.current])if(n=Object.keys(this.state.building[this.state.current]),this.built)for(i=0;i<n.length;i++)Vue.delete(this.state.building[this.state.current],n[i]),Vue.set(this.built,n[i],null);else for(i=0;i<n.length;i++)Vue.delete(this.state.building[this.state.current],n[i]);e={},this.encodeFile(r[0].files[0]).then(t=>{e.data=t.data,t.name=t.name.substring(0,t.name.lastIndexOf(".")),e.id="image:"+t.name.replace(/\./g,":"),e.name=t.name,Vue.set(this,"rawValue",JSON.stringify(e,null,4)),r[0].value=null})}},toggleEditMode:function(){var t,e,n;if(this.state.advanced_editor){try{for(t=JSON.parse(this.rawValue),e=Object.keys(this.state.building[this.state.current]),n=0;n<e.length;n++)Vue.delete(this.state.building[this.state.current],e[n]);for(e=Object.keys(t),n=0;n<e.length;n++)Vue.set(this.state.building[this.state.current],e[n],t[e[n]])}catch(t){console.error("Parse Failed: ",t),Vue.set(this,"error",t.message)}Vue.set(this.state,"advanced_editor",!1)}else Vue.set(this,"rawValue",JSON.stringify(this.state.building[this.state.current],null,4)),Vue.set(this.state,"advanced_editor",!0)},displayCopyFromParent:function(t){return this.state.building[this.state.current].parent&&"parent"!==t.property&&this.universe.indexes[this.state.current].index[this.state.building[this.state.current].parent]&&this.universe.indexes[this.state.current].index[this.state.building[this.state.current].parent][t.property]&&this.universe.indexes[this.state.current].index[this.state.building[this.state.current].parent][t.property].length},copyParent:function(t){var e;this.state.building[this.state.current].parent&&(e=this.universe.indexes[this.state.current].index[this.state.building[this.state.current].parent])&&Vue.set(this.state.building[this.state.current],t,JSON.parse(JSON.stringify(e[t])))},copyNoun:function(t){var e,n={},i=Object.keys(t);for(e=0;e<i.length;e++)i[e]&&"_"!==i[e][0]&&(n[i[e]]=t[i[e]]);return setTimeout(()=>{this.$emit("change")},1),n},saveEvent:function(t){if("KeyS"===t.code&&t.ctrlKey)return this.modify(),t.stopPropagation(),t.preventDefault(),!1},universeUpdate:function(){this.buildAvailableCopies()},modify:function(){var t;if(this.isValid)if(this.state.building[this.state.current]instanceof Array||this.state.building[this.state.current][0]&&this.state.building[this.state.current].length)for(var e=0;e<this.state.building[this.state.current].length;e++)this.state.building[this.state.current][e]._type=this.state.current,this.universe.send("modify:"+this.state.current,i(this.state.current,this.state.building[this.state.current][e]));else this.state.building[this.state.current]._type=this.state.current,(t=i(this.state.current,this.state.building[this.state.current])).passcode&&(t.passcode=t.passcode.sha256()),this.universe.send("modify:"+this.state.current,t),delete t.passcode}},beforeDestroy:function(){this.universe.$off("universe:modified",this.universeUpdate)},template:Vue.templified("components/nouns.html")})}(),rsSystem.component("rsPanelSelect",{inherit:!0,mixins:[rsSystem.components.RSShowdown,rsSystem.components.RSCore],props:{corpus:{required:!0,type:Array},summary:{type:Object},fields:{type:Array},fill:{type:Array,default:function(){return[]}},placeholder:{type:String,default:"Filter Items..."},panelstyle:{type:Function,default:function(t){return""}},paneltext:{},state:{type:Object}},data:function(){var t={filtertext:"",filter:"",images:{}};return t},watch:{filter:function(t){Vue.set(this,"filtertext",t.toLowerCase())}},mounted:function(){rsSystem.register(this),this.update()},methods:{updateFilter:function(t){Vue.set(this,"filtertext",t.toLowerCase())},getPanelText:function(t){return"string"==typeof this.paneltext?this.rsshowdown(this.paneltext,t):"function"==typeof this.paneltext?this.paneltext(t):""},getStatLabel:function(t,e){return e?this.summary[e]?this.summary[e]:e.capitalize():""},getStatValue:function(t,e){return t[e]},update:function(){for(var t=0;t<this.corpus.length;t++)Vue.set(this.images,this.corpus[t].id,this.universe.indexes.image.index[this.corpus[t].profile||this.corpus[t].image]);this.$forceUpdate()}},beforeDestroy:function(){},template:Vue.templified("components/panelselect.html")}),rsSystem.component("rsswCareerRecordDisplay",{inherit:!0,mixins:[rsSystem.components.RSShowdown],props:{record:{required:!0,type:Object}},data:function(){var t={holdDescription:null,description:null};return t},mounted:function(){this.record&&this.record.$on&&this.record.$on("modified",this.update),rsSystem.register(this),this.update()},methods:{update:function(){this.record.description?this.holdDescription!==this.record.description&&(Vue.set(this,"holdDescription",this.record.description),Vue.set(this,"description",this.rsshowdown(this.holdDescription))):(Vue.set(this,"holdDescription",null),Vue.set(this,"description",null)),this.$forceUpdate()}},beforeDestroy:function(){this.record&&this.record.$off&&this.record.$off("modified",this.update)},template:Vue.templified("components/rssw/career/display.html")}),function(){var t=[0,1,2,3,4],e=0;rsSystem.component("rsswCharacterAbilities",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSSWStats,rsSystem.components.RSCore],props:{universe:{required:!0,type:Object},character:{required:!0,type:Object},state:{type:Object}},data:function(){var n={};return n.storageKeyID="_rssw_characterabilityComponentKey"+this.character.id,n.levelBars=t,n.leveling="",n.instance=e++,n.customSkills=[],n.levelSkills=[],n.subSkills=[],n.dependencies=[],n.archetypes=[],n.abilities=[],n},watch:{},mounted:function(){this.universe.$on("model:modified",this.update),this.character.$on("modified",this.update),rsSystem.register(this),this.update()},methods:{update:function(){}},beforeDestroy:function(){this.universe.$off("model:modified",this.update),this.character.$off("modified",this.update)},template:Vue.templified("components/rssw/character/abilities.html")})}(),function(){var t=[0,1,2,3,4],e=0,n=function(t,e){if(t.classification==e.classification)return 0;switch(t.classification){case"primary":return-1;case"secondary":return 1}};rsSystem.component("rsswCharacterImproveAbility",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSSWStats,rsSystem.components.RSCore],props:{universe:{required:!0,type:Object},character:{required:!0,type:Object},state:{type:Object}},data:function(){var n={};return n.storageKeyID="_rssw_characterabilityimproveComponentKey"+this.character.id,n.levelBars=t,n.leveling="",n.filters={},n.filters.node=(t=>{var e={};return t.requires_ability&&0!==t.requires_ability.length||(e["text-outline-color"]="#000",e["background-color"]="#0e57ea"),this.character.ability&&t&&-1!==this.character.ability.indexOf(t.id)&&(e["text-outline-color"]="#000",e["background-color"]="white",e.color="white"),"active"===t.activation&&(e["background-color"]="#670505"),e}),n.preview=null,n.instance=e++,n.customSkills=[],n.levelSkills=[],n.subSkills=[],n.dependencies=[],n.archetypes=[],n.abilities=[],n},watch:{},mounted:function(){this.universe.$on("model:modified",this.update),this.character.$on("modified",this.update),rsSystem.register(this),this.update()},methods:{closeDisplay:function(){this.$emit("close"),this.preview&&(this.state.selected_archetype===this.preview.id&&Vue.delete(this.state,"selected_archetype"),Vue.set(this,"preview",null))},selectArchetype:function(t){Vue.set(this.state,"selected_archetype",t),this.update()},appendAbilities:function(t){var e,n,i,r;for(i=0;this.universe.indexes.ability&&i<this.universe.indexes.ability.listing.length;i++)if((n=this.universe.indexes.ability.listing[i])&&n.archetypes&&-1!==n.archetypes.indexOf(t))for(this.abilities.push(n),r=0;n.requires_ability&&r<n.requires_ability.length;r++)(e=this.universe.indexes.ability.index[n.requires_ability[r]])&&this.dependencies.push({id:n.id+e.id,target:n.id,source:e.id})},update:function(){var t,e;for(this.dependencies.splice(0),this.archetypes.splice(0),this.abilities.splice(0),e=0;this.character.archetype&&e<this.character.archetype.length;e++)(t=this.universe.indexes.archetype.index[this.character.archetype[e]])&&"primary"!==t.classification&&(this.archetypes.push(t),this.state.selected_archetype||this.appendAbilities(t.id));this.state.selected_archetype&&this.appendAbilities(this.state.selected_archetype),this.character.archetype&&-1!==this.character.archetype.indexOf(this.state.selected_archetype)||(t=this.universe.indexes.archetype.index[this.state.selected_archetype])&&Vue.set(this,"preview",t),this.archetypes.sort(n)}},beforeDestroy:function(){this.universe.$off("model:modified",this.update),this.character.$off("modified",this.update)},template:Vue.templified("components/rssw/character/abilities/improve.html")})}(),function(){var t=["damage","soak","wounds","wounds_max","strain","strain_max","defense_general","defense_range","defense_melee","injury"],e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],n=[-2,-1,0,1,2,3,4,5,6,7,8,9,10],i=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151];rsSystem.component("rsswCharacterBoard",{inherit:!0,mixins:[rsSystem.components.RSSWStats,rsSystem.components.RSCore],props:{character:{required:!0,type:Object}},data:function(){var r,s={};for(s.injuryValues=i,s.highValues=e,s.lowValues=n,r=0;r<t.length;r++)s[t[r]]=0;return s},mounted:function(){this.character.$on("modified",this.update),rsSystem.register(this),this.update()},watch:{wounds:function(t,e){this.character.commit({wounds:t})},strain:function(t,e){this.character.commit({strain:t})},injury:function(t,e){this.character.commit({injury:t})}},methods:{infoStat:function(t){rsSystem.EventBus.$emit("display-info",{source:this.character,record:"knowledge:stat:"+t})},setStat:function(){},getEquippedDefensiveStats:function(t,e){var n,i,r,s;if(!t)throw new Error("No type specified for rsswCharacterBoard.getEquippedDefensiveStats");for((e=e||{}).general=e.general||0,e.melee=e.melee||0,e.range=e.range||0,i=Object.keys(this.character.equipped[t]),r=0;r<i.length;r++)for(s=0;s<this.character.equipped[t][i[r]].length;s++)(n=this.universe.indexes[t].index[this.character.equipped[t][i[r]][s]])?(n.defense_general&&n.defense_general>e.general&&(e.general=n.defense_general),n.defense_melee&&n.defense_melee>e.melee&&(e.melee=n.defense_melee),n.defense_range&&n.defense_range>e.range&&(e.range=n.defense_range)):console.warn("Unknown Object["+t+"] Specified in Character["+this.character.id+" Equipped: "+this.character.equipped[t][i[r]][s]);return e},update:function(){var e,n={};for(e=0;e<t.length;e++)Vue.set(this,t[e],this.character[t[e]]||0);Vue.set(this,"soak",this.soak+(this.character.brawn||0)),this.character.equipped&&this.character.equipped.item&&this.getEquippedDefensiveStats("item",n),n.general>n.range?Vue.set(this,"defense_range",n.general):Vue.set(this,"defense_range",n.range),n.general>n.melee?Vue.set(this,"defense_melee",n.general):Vue.set(this,"defense_melee",n.melee)}},beforeDestroy:function(){this.character.$off("modified",this.update)},template:Vue.templified("components/rssw/character/board.html")})}(),rsSystem.component("rsswEntityDescription",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSShowdown,rsSystem.components.RSSWStats,rsSystem.components.RSCore],props:{entity:{required:!0,type:Object}},data:function(){var t={};return t.storageKeyID="_rs_journalComponentKey"+this.entity.id,t.mdDescription=null,t.description="",t.state=this.loadStorage(t.storageKeyID,{viewing:!1}),t},watch:{state:{deep:!0,handler:function(){this.saveStorage(this.storageKeyID,this.state)}}},mounted:function(){rsSystem.register(this),this.$el.onclick=(t=>{var e=t.srcElement.attributes.getNamedItem("data-id");e&&(e=this.universe.index.index[e.value])&&this.isOwner(e)&&rsSystem.EventBus.$emit("display-info",e)}),this.entity.$on("modified",this.update),this.update()},methods:{toggleDescription:function(){this.state.viewing?Vue.set(this.state,"viewing",!1):(Vue.set(this,"mdDescription",this.rsshowdown(this.entity.description,this.entity)),Vue.set(this.state,"viewing",!0))},changed:function(t,e){var n={};n[t]=e,this.entity.commit(n)},update:function(){this.entity.description&&Vue.set(this,"mdDescription",this.rsshowdown(this.entity.description,this.entity)),this.entity.description!=this.description&&Vue.set(this,"description",this.entity.description)}},beforeDestroy:function(){this.entity.$off("modified",this.update)},template:Vue.templified("components/rssw/character/description.html")}),rsSystem.component("rsswCharacterRecordDisplay",{inherit:!0,mixins:[],props:{record:{required:!0,type:Object}},data:function(){return{}},mounted:function(){this.record.$on("modified",this.update),rsSystem.register(this),this.update()},methods:{update:function(){this.$forceUpdate()}},beforeDestroy:function(){this.record.$off("modified",this.update)},template:Vue.templified("components/rssw/character/display.html")}),rsSystem.component("rsswEntityHistory",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSCore],props:{entity:{required:!0,type:Object}},data:function(){var t={maxHistory:300,last:0};return t.index=new SearchIndex,t.ids=1,t.history=[],t.named={xp:"experience"},t},mounted:function(){this.entity.$on("modified",this.update),rsSystem.register(this),this.update()},watch:{},methods:{setStat:function(){},filter:function(t){},getRelated:function(t){var e,n;if(!t||!t.difference)return!1;if(Vue.set(t,"report",{gained:[],loss:[]}),0===(e=Object.keys(t.difference)).length)return!1;for(n=0;n<e.length;n++)t.difference[e[n]]>0?t.report.gained.push(this.universe.index.lookup[e[n]]):t.report.loss.push(this.universe.index.lookup[e[n]]);return!0},copyRecord:function(t){return Object.assign({},t)},getPrevious:function(t){if(this.universe.indexes[t.modified])return this.universe.indexes[t.modified].index[t.previous]},getCurrent:function(t){if(this.universe.indexes[t.modified])return this.universe.indexes[t.modified].index[t.current]},getGeneral:function(t,e){return e?this.universe.indexes[e].index[t]:this.universe.index.index[t]},update:function(){var t,e,n=0;if(this.entity.history){for(e=0;e<this.entity.history.length&&e<50;e++)if(this.last<this.entity.history[e].time){switch(n<(t=this.copyRecord(this.entity.history[e])).time&&(n=t.time),t.id=this.ids++,t._date=new Date(t.time),t._dateString=t._date.toLocaleDateString(),t._timeString=t._date.toLocaleTimeString(),t._search=t._dateString,t.type){case"record_acquired_or_loss":t.icon="fas fa-sort-circle",this.getRelated(t);break;default:t.icon="fas fa-history"}this.index.indexItem(t),this.last?this.history.unshift(t):this.history.push(t)}n&&Vue.set(this,"last",n),this.history.length>this.maxHistory&&this.history.splice(this.maxHistory)}}},beforeDestroy:function(){this.entity.$off("modified",this.update)},template:Vue.templified("components/rssw/character/history.html")}),function(){var t=0;rsSystem.component("rsswCharacterInfo",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSShowdown,rsSystem.components.RSSWStats,rsSystem.components.RSCore],props:{character:{required:!0,type:Object}},data:function(){var t={};return t.storageKeyID="_rs_infoComponentKey"+this.character.id,t.specializationText="",t.careerText="",t.race=null,t.displayAbilityTrees=!1,t.energy_consumption=0,t.energy_output=0,t.encumberance_max=0,t.encumberance=0,t.experience=0,t.credits=0,t.displaySpecializations=!1,t.availableSpecializations=[],t.displayCareers=!1,t.availableCareers=[],t.specializations=[],t.careers=[],t.archetypeStats={},t.mdDescription=null,t.description="",t.state=this.loadStorage(t.storageKeyID,{viewing:!1}),t.state.panel_descriptions=!0,t.piloting=null,t.location=null,this.session=null,t.inside=null,t.destinyTokens=[],t.sithTokens=[],t.abilities=[],t.inventory=[],t.loadout=[],t.effects=[],t.items=[],t.rooms=[],t.calculating=!1,t},watch:{state:{deep:!0,handler:function(){this.saveStorage(this.storageKeyID,this.state)}}},mounted:function(){rsSystem.register(this),this.$el.onclick=(t=>{var e=t.srcElement.attributes.getNamedItem("data-id");e&&(e=this.universe.index.index[e.value])&&this.isOwner(e)&&(rsSystem.EventBus.$emit("display-info",{source:this.character,base:this.character,record:e}),t.stopPropagation(),t.preventDefault())}),this.universe.$on("model:modified",this.updateFromUniverse),this.character.$on("modified",this.update),this.updateFromUniverse(),this.update()},methods:{showInfo:function(t){this.isOwner(t)&&rsSystem.EventBus.$emit("display-info",{source:this.character,base:this.character,record:t})},exitEntity:function(t){this.character.commit({inside:null})},stopPiloting:function(t){t.commit({entity:null})},closeCareers:function(){Vue.set(this,"displayCareers",!1)},openCareers:function(){Vue.set(this,"displayCareers",!0)},getCareerXPCost:function(t){return 0===this.careers.length?0:10*(this.careers.length+1)},getSpecializationsXPCost:function(t){var e;return 0===this.specializations.length?0:(e=10*(this.specializations.length+1),this.careers.contains(t.parent)?e:e+10)},closeSpecializations:function(){Vue.set(this,"displaySpecializations",!1)},openSpecializations:function(){Vue.set(this,"displaySpecializations",!0)},styleSpecializationPanel:function(t){var e="";return-1===this.careers.indexOf(t.parent)&&(e+="external-specialization "),(!this.archetypeStats[t.id]||this.character.xp<this.archetypeStats[t.id].cost)&&(e+="red-shadow "),e},getSpecializationPanelText:function(t){var e,n,i,r=this.universe.indexes.archetype.index[t.parent],s=[];for(n=Object.keys(t),i=0;i<n.length;i++)n[i].startsWith("skill_enhanced_")&&(e=this.universe.indexes.skill.lookup["skill:"+n[i].substring(15)])&&s.push('<a class="linked-value" data-id="'+e.id+'">'+e.name+"</a>");return s.length&&(s="<span>This specialization focuses in the following skills:</span><ul><li>"+s.join("</li><li>")+"</li></ul>"),r?'<div class="panel-stats">\n\t\t\t\t\t\t<div class="panel-stat">\n\t\t\t\t\t\t\t<span class="stat-label">Career</span>\n\t\t\t\t\t\t\t<span>:</span>\n\t\t\t\t\t\t\t<span class="stat-value">'+r.name+"</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>"+s:""},previewSpecializationAbilities:function(t){Vue.set(this.state,"selected_archetype",t.id),this.openAbilities()},learnSpecialization:function(t){var e,n=this.getSpecializationsXPCost(t);this.displaySpecializations&&n<=this.experience&&(Vue.set(this,"displaySpecializations",!1),(e={}).archetype=[t.id],e.xp=-n,this.character.commitAdditions(e),Vue.set(this,"experience",this.experience-n))},closeAbilities:function(){Vue.set(this,"displayAbilityTrees",!1)},openAbilities:function(){Vue.set(this,"displayAbilityTrees",!0)},getXPCostClassing:function(t){return this.character.xp<t?"red-shadow":""},updateCharacter:function(){this.calculating||(Vue.set(this,"calculating",!0),this.character.recalculateProperties(),setTimeout(()=>{Vue.set(this,"calculating",!1)},1e3))},getSex:function(){if(this.character.sex){var t=this.character.sex.indexOf(":");return-1===t?this.character.sex:this.character.sex.substring(t+1)}return""},getEnergyIcon:function(){return this.energy_consumption>this.energy_output?"far fa-battery-empty rs-red":this.energy_consumption==this.energy_output||this.energy_consumption>this.energy_output-.15*this.energy_output?"far fa-battery-quarter rs-orange":this.energy_consumption&&this.energy_output?"far fa-battery-three-quarters rs-green":"far fa-battery-full rs-green"},getEncumberanceIcon:function(){return this.encumberance>this.encumberance_max?"fas fa-person-carry rs-red":this.encumberance==this.encumberance_max||this.encumberance>this.encumberance_max-.15*this.encumberance_max?"fas fa-person-carry rs-orange":"fas fa-person-carry rs-green"},toggleDescription:function(){this.state.viewing?Vue.set(this.state,"viewing",!1):(Vue.set(this,"mdDescription",this.rsshowdown(this.character.description,this.character)),Vue.set(this.state,"viewing",!0))},changed:function(t,e){var n={};n[t]=e,this.character.commit(n)},changeEvent:function(t,e){var n={};n[t]=e,this.character.commit(n)},showTokenInfo:function(){this.showInfo("knowledge:token:destiny")},updateFromSession:function(){if(this.session){for(;this.session.destiny_light>this.destinyTokens.length;)this.destinyTokens.push(t++);for(this.session.destiny_light<this.destinyTokens.length&&this.destinyTokens.splice(this.session.destiny_light);this.session.destiny_dark>this.sithTokens.length;)this.sithTokens.push(t++);this.session.destiny_dark<this.sithTokens.length&&this.sithTokens.splice(this.session.destiny_dark)}},updateFromUniverse:function(){var t,e,n;for((t=this.universe.indexes.setting.index["setting:current:session"])&&(t=this.universe.indexes.session.index[t.value])!=this.session&&(this.session&&this.session.$off("modified",this.updateFromSession),Vue.set(this,"session",t),this.session.$on("modified",this.updateFromSession),this.updateFromSession()),n=0;!e&&n<this.universe.indexes.entity.listing.length;n++)"ship"===(t=this.universe.indexes.entity.listing[n]).classification&&t.entity===this.character.id&&(e=t);if(e?Vue.set(this,"piloting",e):Vue.set(this,"piloting",null),e=0,this.character.item)if(this.items.length!==this.character.item.length){if(this.items.splice(0),this.character.item&&this.character.item.length)for(n=0;n<this.character.item.length;n++)(t=this.universe.nouns.item[this.character.item[n]])?(e+=t.encumberance||0,this.items.push(t)):console.warn("Item Not Found: "+this.character.item[n])}else for(n=0;n<this.character.item.length;n++)(t=this.universe.nouns.item[this.character.item[n]])?e+=t.encumberance||0:console.warn("Item Not Found: "+this.character.item[n]);if(Vue.set(this,"encumberance",e),this.effects.splice(0),this.character.effect)for(n=0;n<this.character.effect.length;n++)(t=this.universe.nouns.effect[this.character.effect[n]])&&this.effects.push(t)},update:function(t){var e,n;if(Vue.set(this,"race",this.universe.nouns.race[this.character.race]),this.availableSpecializations.splice(0),this.availableCareers.splice(0),this.specializations.splice(0),this.abilities.splice(0),this.careers.splice(0),this.rooms.splice(0),this.experience!==this.character.xp&&Vue.set(this,"experience",this.character.xp||0),this.description!==this.character.description&&Vue.set(this,"description",this.character.description),this.credits!==this.character.credits&&Vue.set(this,"credits",this.character.credits||0),(!this.location&&this.character.location||this.location&&this.location.id!==this.character.location)&&Vue.set(this,"location",this.universe.indexes.location.index[this.character.location]),(!this.inside&&this.character.inside||this.inside&&this.inside.id!==this.character.inside)&&Vue.set(this,"inside",this.universe.indexes.entity.index[this.character.inside]),this.character.description&&Vue.set(this,"mdDescription",this.rsshowdown(this.character.description,this.character)),this.encumberance_max=5+this.character.brawn+(this.character.encumberance_bonus||0),this.character.room&&this.character.room.length)for(n=0;n<this.character.room.length;n++)(e=this.universe.nouns.room[this.character.room[n]])?this.rooms.push(e):console.warn("Room Not Found: "+this.character.room[n]);if(this.character.archetype)for(n=0;n<this.character.archetype.length;n++)if(e=this.universe.nouns.archetype[this.character.archetype[n]])switch(e.classification){case"secondary":this.specializations.push(e);break;case"primary":this.careers.push(e)}if(this.energy_consumption=this.character.energy_consume||0,this.energy_output=this.character.energy_out||0,this.character.ability)for(n=0;n<this.character.ability.length;n++)(e=this.universe.nouns.ability[this.character.ability[n]])&&e.type&&-1!==e.type.indexOf("character")&&this.abilities.push(e);for(n=0;n<this.universe.indexes.archetype.listing.length;n++)"secondary"===(e=this.universe.indexes.archetype.listing[n]).classification&&e.parent&&-1==this.specializations.indexOf(e)&&(this.archetypeStats[e.id]||(this.archetypeStats[e.id]={}),this.archetypeStats[e.id].cost=this.getSpecializationsXPCost(e),this.availableSpecializations.push(e));this.availableSpecializations.sortBy("parent")}},beforeDestroy:function(){this.session&&this.session.$off("modified",this.updateFromSession),this.universe.$off("model:modified",this.updateFromUniverse),this.character.$off("modified",this.update)},template:Vue.templified("components/rssw/character/info.html")})}(),function(){var t=function(t,e){return t.name&&!e.name?-1:!t.name&&e.name?1:t.name<e.name?-1:t.name>e.name?1:0};rsSystem.component("rsswEntityJournal",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSShowdown,rsSystem.components.RSSWStats,rsSystem.components.RSCore],props:{entity:{required:!0,type:Object}},data:function(){var t={};return t.storageKeyID="_rs_journalComponentKey"+this.entity.id,t.mdDescription=null,t.description="",t.state=this.loadStorage(t.storageKeyID,{viewing:!1}),t.state.control_blocks||(t.state.control_blocks={}),isNaN(t.state.open_blocks)&&(t.state.open_blocks=0),t.state.entry||(t.state.entry={}),t.state.entry.related||(t.state.entry.related=[]),t.state.entry.id||(t.state.entry.id="journal:"+this.entity.id+":"+Date.now()),t.state.entry.editor||(t.state.entry.editor=this.entity.id),t.state.entry.session=this.universe.indexes.setting.index["setting:current:session"],t.state.entry.session?t.state.entry.session=t.state.entry.session.value:(t.state.entry.session=this.universe.indexes.session.listing[this.universe.indexes.session.listing.length-1],t.state.entry.session&&(t.state.entry.session=t.state.entry.session.id)),t.editingMask="",t.editing=null,t.addKnown="",t.sessions=[],t.entries=[],t.knowns=[],t.rendering="",t.entry={},t.titleField={label:"Title",property:"name",type:"text"},t.sessionField={label:"Sessions",property:"session",type:"select",unset:"No Session",persistUnset:!0,options:t.sessions,optionLabel:"name",optionValue:"id"},t.entryField={label:"Journal Entry",property:"description",type:"textarea"},t.sessionField.options.sortBy("id"),t.syncTimeout=null,t.syncLock=!1,t},watch:{state:{deep:!0,handler:function(){this.saveStorage(this.storageKeyID,this.state)}}},mounted:function(){rsSystem.register(this),this.$el.onclick=(t=>{var e=t.srcElement.attributes.getNamedItem("data-id");e&&(e=this.universe.index.index[e.value])&&this.isOwner(e)&&(rsSystem.EventBus.$emit("display-info",e),t.stopPropagation(),t.preventDefault())}),this.universe.$on("setting:current:session",this.updateSession),this.universe.$on("universe:modified",this.update),this.entity.$on("modified",this.update),this.update()},methods:{addKnownEntry:function(t){Vue.set(this,"addKnown",""),this.toggleRelated(t)},getRecordName:function(t){return!this.universe.index.index[t]||this.universe.index.index[t].must_know&&!this.entity.knowsOf(this.universe.index.index[t])?"Unknown":this.universe.index.index[t].name},editorClass:function(){var t="tier-"+this.state.open_blocks;return this.state.open_blocks>0&&(t+=" tier-one"),t},blockClass:function(t){var e="";return this.state.control_blocks[t]&&(e+=" open-block"),e},toggleBlock:function(t){Vue.set(this.state.control_blocks,t,!this.state.control_blocks[t]),this.state.control_blocks[t]?Vue.set(this.state,"open_blocks",this.state.open_blocks+1):Vue.set(this.state,"open_blocks",this.state.open_blocks-1)},toggleRelated:function(t){if(t){t=t.id||t;var e=this.state.entry.related.indexOf(t);-1===e?this.state.entry.related.push(t):this.state.entry.related.splice(e,1)}this.sync()},newEntry:function(){if(this.syncLock)return null;var t,e;for(t=Object.keys(this.state.entry),e=0;e<t.length;e++)this.state.entry[t[e]]instanceof Array?this.state.entry[t[e]].splice(0):Vue.delete(this.state.entry,t[e]);Vue.set(this.state.entry,"id","journal:"+this.entity.id+":"+Date.now()),Vue.set(this.state.entry,"editor",this.entity.id),Vue.set(this.state.entry,"name",""),(t=this.universe.indexes.setting.index["setting:current:session"])&&t.value?Vue.set(this.state.entry,"session",t.value):(t=this.universe.indexes.session.listing[this.universe.indexes.session.listing.length-1])&&Vue.set(this.state.entry,"session",t.id)},editEntry:function(t){if(this.syncLock)return null;var e,n=Object.keys(t);for(Vue.set(this.state.entry,"description",t.description),Vue.set(this.state.entry,"name",t.name),e=0;e<n.length;e++)"_"!==n[e][0]&&"universe"!==n[e]&&(console.log("Set["+n[e]+"]: ",t[n[e]],t),Vue.set(this.state.entry,n[e],t[n[e]]))},sync:function(){this.syncLock||Vue.set(this,"syncLock",!0),this.syncTimeout&&clearTimeout(this.syncTimeout),Vue.set(this,"syncTimeout",setTimeout(()=>{this.commitSync()},500))},syncWait:function(){this.syncLock||Vue.set(this,"syncLock",!0)},commitSync:function(){if(this.state.entry.id){var t,e=Object.keys(this.state.entry),n={};for(n.updated=Date.now(),n._type="journal",t=0;t<e.length;t++)"_"!==e[t][0]&&"universe"!==e[t]&&(n[e[t]]=this.state.entry[e[t]]);this.universe.send("update:journal",n)}Vue.set(this,"syncTimeout",null),Vue.set(this,"syncLock",!1)},getEntryClass:function(t){return t&&this.state.entry.id===t.id?"selected":t||this.universe.indexes.journal.index[this.state.entry.id]?"unselected":"selected"},getKnownClass:function(t){return-1===this.state.entry.related.indexOf(t.id)?"unselected":"selected"},updateSession:function(t){this.universe.indexes.session.index[this.state.entry.id]||Vue.set(this.state.entry,"session",t)},update:function(){var e,n,i;for(this.entries.splice(0),i=0;i<this.universe.indexes.journal.listing.length;i++)(e=this.universe.indexes.journal.listing[i])&&e.editor&&e.editor===this.entity.id&&this.entries.push(e);for(this.entries.sort(this.sortData),this.knowns.splice(0),n={},i=0;i<this.entity._knownKeys.length;i++)!(e=this.universe.index.index[this.entity._knownKeys[i]])||e.obscured||n[e.id]||(this.knowns.push(e),n[e.id]=!0);for(this.knowns.sort(t),this.sessions.splice(0),i=0;i<this.universe.indexes.session.listing.length;i++)!(e=this.universe.indexes.session.listing[i])||e.obscured||e.hidden||this.sessions.push(e);this.sessions.sortBy("id")}},beforeDestroy:function(){this.universe.$off("setting:current:session",this.updateSession),this.universe.$off("universe:modified",this.update),this.entity.$off("modified",this.update),this.entry&&this.entry.$off&&this.entry.$off("modified",this.update)},template:Vue.templified("components/rssw/character/journal.html")})}(),function(){var t=[0,1,2,3,4],e=0;rsSystem.component("rsswCharacterImproveSkills",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSSWStats,rsSystem.components.RSCore],props:{universe:{required:!0,type:Object},character:{required:!0,type:Object},state:{type:Object}},data:function(){var n={};return n.storageKeyID="_rssw_characterskillsimproveComponentKey"+this.character.id,n.levelBars=t,n.leveling="",n.instance=e++,n.customSkills=[],n.levelSkills=[],n.subSkills=[],n},watch:{},mounted:function(){this.universe.$on("model:modified",this.update),this.character.$on("modified",this.update),rsSystem.register(this),this.update()},methods:{update:function(){}},beforeDestroy:function(){this.universe.$off("model:modified",this.update),this.character.$off("modified",this.update)},template:Vue.templified("components/rssw/character/skills/improve.html")})}(),function(){var t=[0,1,2,3,4],e=0,n=[{icon:"ra ra-bomb-explosion",property:"success",label:"Success"},{icon:"fad fa-jedi",property:"advantage",label:"Advantage"},{icon:"xwm xwing-miniatures-font-epic",property:"triumph",label:"Triumph"},{icon:"fal fa-triangle rot180",property:"failure",label:"Failure"},{icon:"rsswx rsswx-threat",property:"threat",label:"Threat"},{icon:"rsswx rsswx-despair",property:"despair",label:"Despair"}];rsSystem.component("rsswSkillSection",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSSWStats,rsSystem.components.RSCore],props:{character:{required:!0,type:Object},existing:{type:Array},debug:{type:Boolean},named:{type:String},state:{type:Object}},data:function(){var i={};return i.rollProperties=n,i.instance=e++,i.levelBars=t,i.formulas={},i.skills=[],i.rolls={},i},mounted:function(){this.character.$on("modified",this.update),rsSystem.register(this),this.update()},methods:{styleDiceDisplay:function(t){return t.length>5?"font-size: "+(16-1.3*(t.length-5))+"px":""},clearRoll:function(t){Vue.delete(this.state.rolls,t)},skillNameTouched:function(t){this.$emit("nametouched",t)},skillRollTouched:function(t){this.$emit("rolltouched",t)},skillTouched:function(t){this.$emit("touched",t)},isVisible:function(t){return!this.state||!this.state.search||-1!==t._search.indexOf(this.state.search)},getRollFormula:function(t){var e;return e=this.character[t.base]<this.character[t.propertyKey]?(this.character[t.base]||0)+"proficiency + "+((this.character[t.propertyKey]||0)-(this.character[t.base]||0))+"ability + ":(this.character[t.propertyKey]||0)+"proficiency + "+((this.character[t.base]||0)-(this.character[t.propertyKey]||0))+"ability + ",e+=(this.character[t.bonusKey]||0)+"boost",this.character["skill_amend_"+t.property]&&(e+=" + "+this.character["skill_amend_"+t.property]),Dice.parseDiceRoll(e)},getDice:function(t){var e,n=[];for(e=0;e<this.character[t.base]||e<this.character[t.propertyKey];e++)e<this.character[t.base]&&e<this.character[t.propertyKey]?n.push("fas fa-dice-d12 rs-yellow"):n.push("fas fa-dice-d8 rs-green");for(e=0;e<this.character[t.bonusKey];e++)n.push("fas fa-dice-d6 rs-lightblue");return n},enhancedSkill:function(t){return!!this.character[t.enhancementKey]},update:function(){var t;if(this.skills.splice(0),this.named)for(t=0;t<this.universe.indexes.skill.listing.length;t++)this.universe.indexes.skill.listing[t].hidden||this.universe.indexes.skill.listing[t].obscured||this.universe.indexes.skill.listing[t].section!==this.named||this.skills.push(this.universe.indexes.skill.listing[t]);if(this.existing)for(t=0;t<this.existing.length;t++)this.skills.push(this.existing[t]);for(this.uniqueByID(this.skills),this.skills.sort(this.sortData),t=0;t<this.skills.length;t++)Vue.set(this.formulas,this.skills[t].id,this.getRollFormula(this.skills[t])),Vue.set(this.rolls,this.skills[t].id,this.getDice(this.skills[t]));this.$forceUpdate()}},beforeDestroy:function(){this.character.$off("modified",this.update)},template:Vue.templified("components/rssw/character/skills/section.html")})}(),function(){var t=[0,1,2,3,4],e=0;rsSystem.component("rsswCharacterSkills",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSSWStats,rsSystem.components.RSCore],props:{character:{required:!0,type:Object},state:{type:Object}},data:function(){var n={};return n.storageKeyID="_rssw_characterskillsComponentKey"+this.character.id,n.levelBars=t,n.leveling="",n.instance=e++,n.customSkills=[],n.levelSkills=[],n.subSkills=[],this.state&&!this.state.rolls&&Vue.set(this.state,"rolls",{}),n},watch:{},mounted:function(){this.character.$on("modified",this.update),rsSystem.register(this),this.update()},methods:{viewSkill:function(t){this.state&&this.state.infoSkill&&this.showInfo(this.universe.indexes.skill.lookup[t],this.entity)},skillNameTouched:function(t){this.viewSkill(t.id)},skillRollTouched:function(t){if(this.state&&!t.no_roll)if(this.state.emitSkillRoll)this.character.$emit("roll-skill",t);else if(this.state.rollSkill){var e=this.getDiceExpression(t),n=Dice.calculateDiceRoll(e);n.id=this.character.id,n._expression=e,n._label=t.name,Vue.set(this.state.rolls,t.id,n),this.universe.send("entity:rolled",n)}},skillTouched:function(t){if(this.state&&this.state.rollSkill&&!t.no_roll){console.log("Rolling Skill");var e=this.getDiceExpression(t),n=Dice.calculateDiceRoll(e);n._expression=e,n._label=t.name,Vue.set(this.state.rolls,t.id,n),this.universe.send("entity:rolled",n)}else this.leveling===t.id&&this.viewSkill(t.id);t.can_rank&&Vue.set(this,"leveling",t.id)},getXPCost:function(t,e){if(!(t=this.universe.indexes.skill.lookup[t]))return"";var n=this.character[t.propertyKey]||0;return n>=5?"X":e>0?(this.character[t.enhancementKey]?5:10)*(n+1):-1*(this.character[t.enhancementKey]?5:10)*n},levelSkill:function(t,e){if(!(t=this.universe.indexes.skill.lookup[t]))return"";var n=this.character[t.propertyKey]||0,i=this.getXPCost(t.id,e),r={};e>0&&i<=this.character.xp?(r[t.propertyKey]=n+1,r.xp=this.character.xp-i,isNaN(r.xp)||this.character.commit(r)):e<0&&n>0&&(r[t.propertyKey]=n-1,r.xp=this.character.xp-i,isNaN(r.xp)||this.character.commit(r))},getDiceExpression:function(t){var e,n="",i={};return e=this.character[t.propertyKey]||0,i.b=this.character[t.bonusKey]||0,this.character[t.base]<e?(i.a=e-this.character[t.base],i.p=this.character[t.base]):(i.a=this.character[t.base]-e,i.p=e),this.character["skill_amend_"+t.property]&&(n+=" + "+this.character["skill_amend_"+t.property]),Dice.reduceDiceRoll(i.a+"a + "+i.b+"b + "+i.p+"p + "+n)},getDice:function(t){var e,n=[];for(e=0;e<this.character[t.base];e++)e<this.character[t.base]&&e<this.character[t.propertyKey]?n.push("fas fa-dice-d12 rs-yellow"):n.push("fas fa-dice-d8 rs-green rot45");for(e=0;this.character[t.bonusKey]&&e<this.character[t.bonusKey];e++)n.push("fas fa-dice-d6 rs-lightblue");return n},enhancedSkill:function(t){return!!this.character[t.enhancementKey]},update:function(){var t,e,n={};for(this.customSkills.splice(0),this.levelSkills.splice(0),e=0;e<this.universe.indexes.skill.listing.length;e++)this.universe.indexes.skill.listing[e].section&&!this.universe.indexes.skill.listing[e].no_rank&&this.levelSkills.push(this.universe.indexes.skill.listing[e]);if(this.character.skill)for(e=0;e<this.character.skill.length;e++)(t=this.universe.indexes.skill.lookup[this.character.skill[e]])&&!n[t.id]&&(this.customSkills.push(t),n[t.id]=!0,t.no_rank||this.levelSkills.push(t));this.uniqueByID(this.levelSkills),this.levelSkills.sort(this.sortData),this.$forceUpdate()}},beforeDestroy:function(){this.character.$off("modified",this.update)},template:Vue.templified("components/rssw/character/skills.html")})}(),rsSystem.component("rsswCharacterStats",{inherit:!0,mixins:[rsSystem.components.RSSWStats,rsSystem.components.RSCore],props:{character:{required:!0,type:Object}},data:function(){var t={keys:["brawn","agility","intellect","cunning","willpower","pressence"],leveling:""};return t},mounted:function(){this.character.$on("modified",this.update),rsSystem.register(this)},methods:{viewSkill:function(t){this.showInfo(this.universe.indexes.skill.lookup["skill:"+t],this.entity)},skillTouched:function(t){this.leveling===t&&this.viewSkill(t),Vue.set(this,"leveling",t)},noIncrease:function(t){return this.character[t]>=5||this.getXPCost(t,1)>this.character.xp},canDecrease:function(t){return void 0===this.character._coreData[t]||this.character._coreData[t]<=0},getXPCost:function(t,e){return e>0?10*(parseInt(this.character[t])+e):-1*parseInt(this.character[t])*10},levelStat:function(t,e){var n=this.character[t]||0,i=this.getXPCost(t,e),r={};e>0&&i<=this.character.xp?(r[t]=(this.character._coreData[t]||0)+1,r.xp=this.character.xp-i,isNaN(r.xp)||this.character.commit(r)):e<0&&n>0&&(r[t]=(this.character._coreData[t]||0)-1,r.xp=this.character.xp-i,isNaN(r.xp)||this.character.commit(r))},update:function(){this.$forceUpdate()}},beforeDestroy:function(){this.character.$off("modified",this.update)},template:Vue.templified("components/rssw/character/stats.html")}),function(){var t=["engaged","short","medium","long","extreme"],e={engaged:{difficulty:1,challenge:0,setback:0},short:{difficulty:1,challenge:0,setback:0},medium:{difficulty:2,challenge:0,setback:0},long:{difficulty:3,challenge:0,setback:0},extreme:{difficulty:4,challenge:0,setback:0}};rsSystem.component("rsswEntityWeaponItem",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSCore],props:{entity:{required:!0,type:Object},universe:{required:!0,type:Object}},data:function(){var e,n={};for(n.storageKeyID="_rs_weaponitemComponentKey:"+this.entity.id,n.mdDescription=null,n.description="",n.state=this.loadStorage(n.storageKeyID,{viewing:!1}),n.rangeBonus=0,n.rangeBands=t,n.adjustments={},n.equipped=[],n.items=[],e=0;e<t.length;e++)n.adjustments[t[e]]={};return n},watch:{state:{deep:!0,handler:function(){this.saveStorage(this.storageKeyID,this.state)}}},mounted:function(){rsSystem.register(this),this.$el.onclick=(t=>{var e=t.srcElement.attributes.getNamedItem("data-id");e&&(e=this.universe.index.index[e.value])&&this.isOwner(e)&&rsSystem.EventBus.$emit("display-info",e)}),this.entity.$on("modified",this.update),this.update()},methods:{getAttackDice:function(t){var e=this.getSkillRoll(t.skill_check);return this.renderRoll(e)},getWeaponDamage:function(t){return t.damage?this.universe.calculateExpression(t.damage,t,this.entity):0},getRangeBandDifficulty:function(t,n){var i,r=Object.assign({},e[n]);if(this.adjustments[n])for(i=0;i<this.diceTypes.length;i++)this.adjustments[n][this.diceTypes[i]]&&(r[this.diceTypes[i]]=(r[this.diceTypes[i]]||0)+this.adjustments[n][this.diceTypes[i]]);if("engaged"!==n&&!t.is_ranged)return[];switch(n){case"engaged":t.is_melee||(r.difficulty=(r.difficulty||0)+2)}return this.renderRoll(r)},update:function(){var e,n,i,r,s,a={};for(s=0;s<this.items.length;s++)this.items[s].$off("modified",this.update);if(this.equipped.splice(0),this.items.splice(0),this.entity.equipped&&this.entity.equipped.item)for(n=Object.keys(this.entity.equipped.item),s=0;s<n.length;s++)if((i=this.universe.indexes.slot.lookup[n[s]])&&i.combat_slot&&this.entity.equipped.item[i.id]&&this.entity.equipped.item[i.id].length)for(r=0;r<this.entity.equipped.item[i.id].length;r++)(e=this.universe.indexes.item.lookup[this.entity.equipped.item[i.id][r]])&&!a[e.id]?(e.$on("modified",this.update),this.equipped.push(e),a[e.id]=!0):console.warn("Unknown Item? "+n[s],this.entity.equipped.item[i.id][r],e,this.entity);else console.warn("Unknown or Non-Combat Equipment Slot? "+n[s],i,this.entity);if(this.entity.item&&this.entity.item.length)for(s=0;s<this.entity.item.length;s++)(e=this.universe.indexes.item.lookup[this.entity.item[s]])&&e.damage&&!a[e.id]&&(e.$on("modified",this.update),this.items.push(e));for(s=0;s<t.length;s++){for(r=0;r<this.diceTypes.length;r++)Vue.delete(this.adjustments[t[s]],this.diceTypes[r]);for(r=0;r<this.diceTypes.length;r++)Vue.set(this.adjustments[t[s]],this.diceTypes[r],this.entity["range_"+t[s]+"_"+this.diceTypes[r]])}this.rangeBonus=this.entity.range||0}},beforeDestroy:function(){this.entity.$off("modified",this.update);for(var t=0;t<this.items.length;t++)this.items[t].$off("modified",this.update)},template:Vue.templified("components/rssw/character/weapons/item.html")})}(),function(){var t=["engaged","short","medium","long","extreme"],e={engaged:{d:1,c:0,s:0},short:{d:1,c:0,s:0},medium:{d:2,c:0,s:0},long:{d:3,c:0,s:0},extreme:{d:4,c:0,s:0}};rsSystem.component("rsswEntityWeapons",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSCore],props:{limited:{type:String},compact:{type:Boolean},entity:{required:!0,type:Object},universe:{required:!0,type:Object}},data:function(){var e,n={};for(n.storageKeyID="_rs_weaponsComponentKey:"+this.entity.id,n.mdDescription=null,n.description="",n.state=this.loadStorage(n.storageKeyID,{viewing:!1}),n.isRanged={},n.rangeBonus=0,n.rangeBands=t,n.adjustments={},n.equipped=[],n.items=[],n.rolls={},e=0;e<t.length;e++)n.adjustments[t[e]]={};return n},watch:{state:{deep:!0,handler:function(){this.saveStorage(this.storageKeyID,this.state)}}},mounted:function(){rsSystem.register(this),this.$el.onclick=(t=>{var e=t.srcElement.attributes.getNamedItem("data-id");e&&(e=this.universe.index.index[e.value])&&this.isOwner(e)&&rsSystem.EventBus.$emit("display-info",e)}),this.entity.$on("modified",this.update),this.update()},methods:{rollDice:function(t){},getAttackDice:function(t){var e=this.getSkillRoll(t.skill_check);return this.renderRoll(e)},getWeaponDamage:function(t){return t.damage?this.universe.calculateExpression(t.damage,t,this.entity):0},getRangeBandDifficultyRoll:function(t,n){var i,r=Object.assign({},e[n]);if(this.adjustments[n])for(i=0;i<this.diceTypes.length;i++)this.adjustments[n][this.diceTypes[i]]&&(r[this.diceTypes[i]]=(r[this.diceTypes[i]]||0)+this.adjustments[n][this.diceTypes[i]]);if("engaged"!==n&&!t.is_ranged)return[];switch(n){case"engaged":t.is_melee||(r.difficulty=(r.difficulty||0)+2)}return r},getRangeBandDifficulty:function(t,e){return this.renderRoll(this.getRangeBandDifficultyRoll(t,e))},getItemIcon:function(t){var e=t.icon;return this.entity._relatedErrors[t.id]&&(e+=" rs-light-red"),e},update:function(){var e,n,i,r,s,a={};for(s=0;s<this.items.length;s++)this.items[s].$off("modified",this.update);if(this.equipped.splice(0),this.items.splice(0),this.entity.equipped&&this.entity.equipped.item)for(n=Object.keys(this.entity.equipped.item),s=0;s<n.length;s++)if((i=this.universe.indexes.slot.lookup[n[s]])&&i.combat_slot&&this.entity.equipped.item[i.id]&&this.entity.equipped.item[i.id].length)for(r=0;r<this.entity.equipped.item[i.id].length;r++)(e=this.universe.indexes.item.lookup[this.entity.equipped.item[i.id][r]])&&!a[e.id]?(e.$on("modified",this.update),this.equipped.push(e),this.isRanged[e.id]=e.is_ranged,a[e.id]=!0,this.rolls[e.id]=this.getSkillRoll(e.skill_check),e.skill_amend_direct_check&&this.addRolls(this.rolls[e.id],Dice.parseDiceRoll(e.skill_amend_direct_check))):console.warn("Unknown Item? "+n[s],this.entity.equipped.item[i.id][r],e,this.entity);else console.warn("Unknown or Non-Combat Equipment Slot? "+n[s],i,this.entity);if(this.entity.item&&this.entity.item.length)for(s=0;s<this.entity.item.length;s++)(e=this.universe.indexes.item.lookup[this.entity.item[s]])&&e.is_weapon&&!a[e.id]&&(e.$on("modified",this.update),this.items.push(e),this.isRanged[e.id]=e.is_ranged);for(s=0;s<t.length;s++){for(r=0;r<this.diceTypes.length;r++)Vue.delete(this.adjustments[t[s]],this.diceTypes[r]);for(r=0;r<this.diceTypes.length;r++)Vue.set(this.adjustments[t[s]],this.diceTypes[r],this.entity["range_"+t[s]+"_"+this.diceTypes[r]])}this.rangeBonus=this.entity.range||0}},beforeDestroy:function(){this.entity.$off("modified",this.update);for(var t=0;t<this.items.length;t++)this.items[t].$off("modified",this.update)},template:Vue.templified("components/rssw/character/weapons.html")})}(),function(){var t=[{icon:"ra ra-bomb-explosion",property:"success",label:"Success"},{icon:"fad fa-jedi",property:"advantage",label:"Advantage"},{icon:"xwm xwing-miniatures-font-epic",property:"triumph",label:"Triumph"},{icon:"fal fa-triangle rot180",property:"failure",label:"Failure"},{icon:"rsswx rsswx-threat",property:"threat",label:"Threat"},{icon:"rsswx rsswx-despair",property:"despair",label:"Despair"},{icon:"fad fa-circle rs-white rs-secondary-black",property:"light",label:"Light"},{icon:"fad fa-circle rs-black rs-secondary-white",property:"dark",label:"Dark"}];rsSystem.component("rsswDiceBin",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSCore],props:{fullDisplay:{type:Boolean},entity:{type:Object},emitter:{type:Object},state:{type:Object}},data:function(){var e={};return e.rollProperties=t,e.bound=!1,this.state.expression||Vue.set(this.state,"expression",""),this.state.history||Vue.set(this.state,"history",[]),e},mounted:function(){rsSystem.register(this),this.entity&&(this.entity.$on("roll-expression",this.roll),this.entity.$on("roll-skill",this.rollSkill),Vue.set(this,"bound",!0)),this.emitter&&(this.emitter.$on("roll-expression",this.roll),Vue.set(this,"bound",!0))},methods:{rollSkill:function(t,e){this.state.entityRollListener&&this.roll(this.getSkillDiceExpression(t,e),t.name)},roll:function(t,e){var n;t?t.skill&&t.entity?this.roll(this.getSkillDiceExpression(t.skill,t.entity),t.skill.name):("object"==typeof t&&(e=e||t._label||t.label||t._name||t.name,t=t.expression),(n=Dice.calculateDiceRoll(t||this.state.expression,this.entity))._expression=t,n._label=e,this.state.history.unshift(n),this.emitter&&this.$forceUpdate(),this.entity&&(n.id=this.entity.id,this.universe.send("entity:rolled",n))):this.state.history.unshift({})},addExpression:function(t){var e,n,i,r=this.state.history[0];for(r||((r={})._expression="",this.state.history.unshift(r)),e=Dice.calculateDiceRoll(t),n=Object.keys(e),r._label&&(r._suffix?Vue.set(r,"_suffix",Dice.reduceDiceRoll(r._suffix+" + "+t)):Vue.set(r,"_suffix",t)),Vue.set(r,"_expression",Dice.reduceDiceRoll(r._expression+" + "+t)),i=0;i<n.length;i++)Vue.set(r,n[i],(r[n[i]]||0)+e[n[i]]);this.emitter&&this.$forceUpdate(),this.entity&&(e.id=this.entity.id,this.universe.send("entity:rolled",r))},getSkillDiceExpression:function(t,e){if(e=e||this.entity){var n,i="",r={};return n=e[t.propertyKey]||0,r.b=e[t.bonusKey]||0,e[t.base]<n?(r.a=n-e[t.base],r.p=e[t.base]):(r.a=e[t.base]-n,r.p=n),e["skill_amend_"+t.property]&&(i+=" + "+e["skill_amend_"+t.property]),Dice.reduceDiceRoll(r.a+"a + "+r.b+"b + "+r.p+"p + "+i)}return""},dismiss:function(t){this.state.history.splice(t,1),this.emitter&&this.$forceUpdate()},toggleExpressions:function(){Vue.set(this.state,"hideExpressions",!this.state.hideExpressions)},toggleLabels:function(){Vue.set(this.state,"hideLabels",!this.state.hideLabels)},clear:function(){this.state.history.length?this.state.history.splice(0):Vue.set(this.state,"expression",""),this.emitter&&this.$forceUpdate()},info:function(){rsSystem.EventBus.$emit("display-info",this.state.knowledge||"knowledge:dice:playerbin")},update:function(){}},beforeDestroy:function(){this.bound&&(this.entity&&(this.entity.$off("roll-skill",this.rollSkill),this.entity.$off("roll-expression",this.roll)),this.emitter&&this.emitter.$off("roll-expression",this.roll))},template:Vue.templified("components/rssw/dice/bin.html")})}(),function(){var t=[{icon:"ra ra-bomb-explosion",property:"success",name:"Success"},{icon:"fad fa-jedi",property:"advantage",name:"Advantage"},{icon:"xwm xwing-miniatures-font-epic",property:"triumph",name:"Triumph"},{icon:"fal fa-triangle rot180",property:"failure",name:"Failure"},{icon:"rsswx rsswx-threat",property:"threat",name:"Threat"},{icon:"rsswx rsswx-despair",property:"despair",name:"Despair"},{icon:"fad fa-circle rs-white rs-secondary-black",property:"light",name:"Light"},{icon:"fad fa-circle rs-black rs-secondary-white",property:"dark",name:"Dark"}];rsSystem.component("rsswDiceResult",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility],props:{universe:{type:Object},options:{type:Object,default:function(){return{}}},roll:{required:!0,type:Object}},data:function(){var e={};return e.rollProperties=t,e},mounted:function(){rsSystem.register(this),this.update()},methods:{dismiss:function(){this.$emit("dismiss",this.roll)},menu:function(){this.$emit("menu",this.roll)},update:function(){}},beforeDestroy:function(){},template:Vue.templified("components/rssw/dice/result.html")})}(),rsSystem.component("rsswDiceView",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility],props:{universe:{type:Object},entity:{},skill:{},labeling:{type:String},roll:{type:Object,default:function(){return{}}},rollName:{type:String},emit:{type:Boolean},stacked:{type:Boolean}},data:function(){var t={dice:[]};return t},watch:{roll:function(t){this.dice.splice(0),this.renderRoll(t,this.dice)}},mounted:function(){this.entity&&this.entity.$on("modified",this.update),rsSystem.register(this),this.roll&&this.setRoll(this.roll),this.update()},methods:{sendToDiceBin:function(){if(this.emit)this.$emit("touched");else{var t={expression:this.getRollExpression()};this.rollName&&(t._label=this.rollName),this.$emit("roll-expression",t),this.entity&&this.entity.$emit("roll-expression",t)}},getRollExpression:function(){var t,e="";for(t=0;t<this.diceTypes.length;t++)(this.roll[this.diceTypes[t]]||this.roll[this.diceTypes[t][0]])&&(e+=e?" + "+this.roll[this.diceTypes[t]]+this.diceTypes[t][0]:this.roll[this.diceTypes[t]]+this.diceTypes[t][0]);return e},clearRoll:function(){for(var t=0;t<this.diceTypes.length;t++)Vue.delete(this.roll,this.diceTypes[t])},setRoll:function(t){for(var e=0;e<this.diceTypes.length;e++)t[this.diceTypes[e]]&&Vue.set(this.roll,this.diceTypes[e],t[this.diceTypes[e]])},update:function(){this.dice.splice(0),this.entity&&this.skill&&this.universe&&this.setRoll(this.getSkillRoll(this.skill,this.entity)),this.renderRoll(this.roll,this.dice)}},beforeDestroy:function(){this.entity&&this.entity.$off("modified",this.update)},template:Vue.templified("components/rssw/dice/view.html")}),function(){var t=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151];rsSystem.component("rsswEntityBrief",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSSWStats,rsSystem.components.RSCore],props:{entity:{required:!0,type:Object}},data:function(){var e={shield:{}};return e.shield.current=0,e.shield.max=0,e.wounds={},e.wounds.current=0,e.wounds.max=0,e.strain={},e.strain.current=0,e.strain.max=0,e.injuryValues=t,e.injury=0,e.abilities=[],e.effects=[],e.lastRoll=null,e.rollSkill="",e.location=null,e.piloting=null,e.inside=null,e},mounted:function(){this.entity.$on("rolled",this.receiveRoll),this.entity.$on("modified",this.update),rsSystem.register(this),this.update()},methods:{close:function(){this.$emit("close",this.entity)},setStat:function(t,e){var n={};n[e]=t,this.entity.commit(n)},rollEntitySkill:function(t){Vue.set(this,"rollSkill",""),this.entity.$emit("roll-expression",{skill:this.universe.indexes.skill.index[t],entity:this.entity})},receiveRoll:function(t){},update:function(){this.wounds.current=this.entity.wounds||0,this.wounds.max=this.entity.wounds_max||0,this.strain.current=this.entity.strain||0,this.strain.max=this.entity.strain_max||0,this.shield.max=this.entity.shield||0,this.injury=this.entity.injury||0,Vue.set(this,"location",this.universe.indexes.location.index[this.entity.location]),Vue.set(this,"piloting",this.universe.indexes.entity.index[this.entity.piloting]),Vue.set(this,"inside",this.universe.indexes.entity.index[this.entity.inside]),this.abilities.splice(0),this.universe.indexes.ability.translate(this.entity.ability,this.abilities),this.effects.splice(0),this.universe.indexes.effect.translate(this.entity.effect,this.effects)}},beforeDestroy:function(){this.entity.$off("rolled",this.receiveRoll),this.entity.$off("modified",this.update)},template:Vue.templified("components/rssw/entity/brief.html")})}(),function(){var t={},e={id:"__emptyslot",_type:"empty_slot",name:"Empty Slot",icon:"far fa-square",description:"An empty ${~target.name,rs-blue}$ slot on ${~base.name,rs-blue}$"},n={},i={id:"__consumedslot",_type:"consumed_slot",name:"Consumed Slot",icon:"fas fa-square",description:"This ${~target.name,rs-blue}$ slot on ${~base.name,rs-blue}$ is being used as space for another component"};rsSystem.component("rsswEntityEquipment",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSCore],props:{entity:{required:!0,type:Object},initial:{type:String},state:{type:Object}},data:function(){var t={};return t.mode=this.state?this.state.mode:this.initial||"short",t.slotMapping={},t.slotCounts={},t.slotKeys=[],t.slots={},t},mounted:function(){rsSystem.register(this),this.universe.$on("model:modified",this.updateFromUniverse),this.entity.$on("modified",this.update),this.updateFromUniverse(),this.update()},watch:{entity:function(){this.update()}},methods:{getSlotClass:function(t,n,r){return this.entity._relatedErrors[n.id]?"rs-red":n._type===e._type?"rs-green":n._type===i._type?"rs-orange":t.itemtype&&!t.itemtype.hasCommon(n.itemtype)&&t.type&&!t.type.hasCommon(n.type)||!t.itemtype&&t.type&&!t.type.hasCommon(n.type)||!t.type&&t.itemtype&&!t.type.hasCommon(n.itemtype)?"rs-light-red":"rs-blue"},getModeClassing:function(){var t,e=this.mode;switch(!e&&this.state&&(e=this.state.mode),t=(e="string"==typeof e?e.split(/[\s]+/):"short")[0]){case"long":return t}return"short"},equipSlot:function(t,e){this.entity.equipSlot(t,e)},recalculateSlots:function(){var t;for(t=0;t<this.slotKeys.length;t++)Vue.delete(this.slots,this.slotKeys[t]);if(this.slotKeys.splice(0),this.entity.slot)for(t=0;t<this.entity.slot.length;t++)this.slots[this.entity.slot[t]]?Vue.set(this.slotCounts,this.entity.slot[t],this.slotCounts[this.entity.slot[t]]+1):(Vue.set(this.slots,this.entity.slot[t],this.universe.indexes.slot.lookup[this.entity.slot[t]]),Vue.set(this.slotCounts,this.entity.slot[t],1),this.slotKeys.push(this.entity.slot[t]),this.slotMapping[this.entity.slot[t]]||Vue.set(this.slotMapping,this.entity.slot[t],[]))},getEmptyIndicator:function(n){return t[n]||(t[n]=Object.assign({},e),t[n].id+=n),t[n]},getConsumedIndicator:function(t){return n[t]||(n[t]=Object.assign({},i),n[t].id+=t),n[t]},updateFromUniverse:function(){this.recalculateSlots(),this.slotKeys.sort(this.sortData)},update:function(){var t,e,n,i,r,s,a,o;for(this.state&&Vue.set(this,"mode",this.state.mode||"short"),this.recalculateSlots(),n=Object.keys(this.slotMapping),s=0;s<n.length;s++)this.slotMapping[n[s]].splice(0);if(this.entity.equipped)for(n=Object.keys(this.entity.equipped),s=0;s<n.length;s++)if(this.entity.equipped[n[s]])for(i=Object.keys(this.entity.equipped[n[s]]),a=0;a<i.length;a++)for(this.slotMapping[i[a]]||Vue.set(this.slotMapping,i[a],[]),o=0;o<this.entity.equipped[n[s]][i[a]].length;o++)if(t=this.universe.index.lookup[this.entity.equipped[n[s]][i[a]][o]]){if(this.slotMapping[i[a]].push(t),1<t.slots_used)for(r=1;r<t.slots_used;r++)this.slotMapping[i[a]].push(this.getConsumedIndicator(n[s]))}else console.warn("Unable to find equipped record["+this.entity.equipped[n[s]][i[a]][o]+"] for entity["+this.id+"]");for(n=Object.keys(this.slotMapping),s=0;s<n.length;s++)for(e=this.slotCounts[n[s]]-this.slotMapping[n[s]].length,o=0;o<e;o++)this.slotMapping[n[s]].push(this.getEmptyIndicator(n[s]));this.slotKeys.sort(this.sortData)}},beforeDestroy:function(){this.universe.$off("model:modified",this.updateFromUniverse),this.entity.$off("model:modified",this.update)},template:Vue.templified("components/rssw/entity/equipped.html")})}(),function(){var t={formatter:{icon:function(t){return"<span class='"+t+"'></span>"},info:function(t){return'<span class="fas fa-info-circle"></span>'}},sorter:{acquired:function(t,e){console.log("Sort Acquired: ",t,e)}},recordAction:{info:function(t){rsSystem.EventBus.$emit("display-info",t)}}};rsSystem.component("rsswEntityKnowledge",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSCore],props:{entity:{required:!0,type:Object},state:{type:Object}},data:function(){var t={};return t.knowledge=new SearchIndex,t.corpus=[],Vue.set(this.state,"noSelect",!0),this.state&&!this.state.filter&&Vue.set(this.state,"filter",{}),this.state&&!this.state.paging&&Vue.set(this.state,"paging",{}),this.state.paging.per||Vue.set(this.state.paging,"per",20),this.state.paging.current||Vue.set(this.state.paging,"current",0),this.state&&!this.state.headers?this.resetHeaders():this.rebindHeaders(),t},mounted:function(){this.entity.$on("modified",this.update),rsSystem.register(this),this.update()},methods:{resetHeaders:function(){this.state.headers||Vue.set(this.state,"headers",[]),this.state.headers.splice(0),this.state.headers.push({title:"",field:"icon"}),this.state.headers.push({title:"Name",field:"name"}),this.state.headers.push({title:"Acquired",field:"time"}),this.state.headers.push({title:"Relations",field:"related"}),this.state.headers.push({title:"Status",field:"status"}),this.state.headers.push({title:"",field:"info",hideBlock:!0,nosort:!0}),this.rebindHeaders()},rebindHeaders:function(){var e,n,i;for(e=Object.keys(t),n=0;n<this.state.headers.length;n++){for(i=0;i<e.length;i++)t[e[i]]&&(t[e[i]][this.state.headers[n].field]?Vue.set(this.state.headers[n],e[i],t[e[i]][this.state.headers[n].field]):Vue.delete(this.state.headers[n],e[i]));switch(this.state.headers[n].field){case"time":this.state.headers[n].formatter=((t,e)=>{if(!this.entity.learned)return"";var n=this.entity.learned[e.id];return'<span><span class="fas fa-calendar"><span> '+(n=n?(n=new Date(n)).toLocaleDateString():"[Unknown]")+"</span>"}),this.state.headers[n].sorter=((t,e)=>this.entity.learned?(t=this.entity.learned[t.id]||0)<(e=this.entity.learned[e.id]||0)?-1:t>e?1:0:0);break;case"status":this.state.headers[n].formatter=((t,e)=>{if(!this.entity.related_status)return"";var n=this.entity.related_status[e.id];switch(n){case"active":n="fas fa-brain";break;case"complete":n="fas fa-check";break;case"ignored":n="fas fa-times";break;case"favorited":n="fas fa-star";break;case"investigate":n="far fa-search-location";break;case"working":n="far fa-users-cog";break;case"learning":n="fad fa-book-reader";break;default:n=""}return'<span class="'+n+'"><span>'}),this.state.headers[n].sorter=((t,e)=>this.entity.related_status?(t=this.entity.related_status[t.id]||"")<(e=this.entity.related_status[e.id]||"")?-1:t>e?1:0:0);break;case"related":this.state.headers[n].formatter=((t,e)=>{var n=0;return e.related&&(n+=e.related.length),this.entity.related_mapping?(this.entity.related_mapping[e.id]&&(n+=this.entity.related_mapping[e.id].length),n):n}),this.state.headers[n].sorter=((t,e)=>{var n=0,i=0;return t.related&&(n+=t.related.length),e.related&&(i+=e.related.length),this.entity.related_mapping&&(this.entity.related_mapping[t.id]&&(n+=this.entity.related_mapping[t.id].length),this.entity.related_mapping[e.id]&&(i+=this.entity.related_mapping[e.id].length)),n<i?-1:n>i?1:0})}}},processAction:function(t){},update:function(){var t,e;if(this.entity.knowledge&&this.knowledge.listing.length!==this.entity.knowledge.length){for(e=0;e<this.entity.knowledge.length;e++)!this.knowledge.index[this.entity.knowledge]&&(t=this.universe.indexes.knowledge.lookup[this.entity.knowledge[e]])&&this.knowledge.indexItem(t);this.$forceUpdate()}}},beforeDestroy:function(){this.entity.$off("modified",this.update)},template:Vue.templified("components/rssw/entity/knowledge.html")})}(),function(){var t=[{title:"",field:"id"},{title:"",field:"_info",nosort:!0,recordAction:function(t){rsSystem.EventBus.$emit("display-info",t)}},{title:"",field:"icon",nosort:!0},{title:"Name",field:"name"},{title:"Encumberance",field:"encumberance"},{title:"Price",field:"price"}],e=[{label:"Price",field:"price"},{label:"Encumberance",field:"encumberance"}],n=function(t){return"<span class='"+t+"'></span>"},i=function(t){return"<div class='align-left'>"+t+"</span>"},r=function(t,e){return'<span class="fas fa-info-circle"></span>'};rsSystem.component("rsswShopInventory",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSShowdown,rsSystem.components.RSCore],props:{entity:{required:!0,type:RSEntity},customer:{type:RSEntity}},data:function(){var s={};return s.storageKeyID="rsswxshopinv:"+this.entity.id,s.state=this.loadStorage(s.storageKeyID,{}),s.state.cart||(s.state.cart={encumberance:0,cost:0}),s.state.selected||(s.state.selected=[]),void 0===s.state.paging&&(s.state.paging={},s.state.paging.per=20,s.state.paging.current=0,s.state.paging.pages=0,s.state.paging.spread=10),s.headers=t,s.headers[1].formatter=r,s.headers[2].formatter=n,s.headers[3].formatter=i,s.headers[0].formatter=function(t){return-1===s.state.selected.indexOf(t)?"":'<span class="fas fa-shopping-cart"></span>'},s.headers[0].sorter=function(t,e){return!t&&e?-1:t&&!e?1:(t=s.state.selected.indexOf(t.id),e=s.state.selected.indexOf(e.id),-1===t&&-1!==e?-1:-1!==t&&-1===e?1:0)},s.inventory=new SearchIndex,s.corpus=[],s.stats=e,s.cart={encumberance:0,price:0},s.checkingOut=null,s.toExpensive=!1,s.toHeavy=!1,s},mounted:function(){rsSystem.register(this),this.inventory.$on("selection",this.selected),this.universe.$on("echo:response",this.receive),this.universe.$on("echoing",this.receive),this.entity.$on("modified",this.update),this.update()},methods:{processAction:function(t){console.log("Process: ",t)},checkout:function(){console.log("Checkout: ",this.state.selected,"\nShop: ",this.entity,"\nCustomer: ",this.customer),this.customer&&Vue.set(this,"checkingOut",this.universe.send("shop:checkout",{shop:this.entity.id,customer:this.customer.id,checkout:this.state.selected,price:this.cart.price}))},receive:function(t){console.log("Echo Receive: ",t),this.checkingOut&&t.echo===this.checkingOut&&(Vue.set(this.cart,"encumberance",0),Vue.set(this.cart,"price",0),Vue.set(this,"checkingOut",null))},selected:function(){var t,n,i,r={};for(i=0;i<e.length;i++)r[e[i].field]=0;for(this.state.selected.splice(0),n=0;n<this.inventory.selection.length;n++)if(t=this.inventory.selected[this.inventory.selection[n]])for(this.state.selected.push(this.inventory.selection[n]),i=0;i<e.length;i++)r[e[i].field]+=t[e[i].field]||0;for(this.entity.no_cost&&(r.price=0),i=0;i<e.length;i++)Vue.set(this.cart,e[i].field,r[e[i].field]);this.customer&&(Vue.set(this,"toHeavy",this.customer.encumberance_max<this.customer.encumberance+r.encumberance),Vue.set(this,"toExpensive",r.price>this.customer.credits))},update:function(){this.inventory.clearIndex(),this.inventory.indexItem(this.universe.indexes.item.translate(this.entity.item)),this.inventory.select(this.state.selected),this.selected()}},beforeDestroy:function(){this.inventory.$off("selection",this.selected),this.universe.$off("echoing",this.receive),this.entity.$off("modified",this.update)},template:Vue.templified("components/rssw/entity/shopinventory.html")})}(),rsSystem.component("rsswEntitySummary",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSSWStats,rsSystem.components.RSCore],props:{entity:{required:!0,type:Object},selected:{type:Object},viewing:{type:RSObject}},data:function(){return{}},mounted:function(){this.entity.$on("rolled",this.receiveRoll),this.entity.$on("modified",this.update),rsSystem.register(this),this.update()},methods:{isActive:function(){return this.selected&&this.selected[this.entity.id]},emitClicked:function(){this.$emit("selected",this)},receiveRoll:function(t){},update:function(){}},beforeDestroy:function(){this.entity.$off("rolled",this.receiveRoll),this.entity.$off("modified",this.update)},template:Vue.templified("components/rssw/entity/summary.html")}),function(){var t,e,n,i=new EventEmitter;t={label:"Involved",property:"involved",type:"multireference",optionValue:"id",optionLabel:"name"},e={label:"Inside",property:"inside",type:"multireference",optionValue:"id",optionLabel:"name"},n={label:"Place",property:"place",type:"multireference",optionValue:"id",optionLabel:"name"},rsSystem.component("rsswCombatView",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSShowdown,rsSystem.components.RSSWStats,rsSystem.components.RSCore],props:{event:{required:!0,type:Object}},watch:{state:{deep:!0,handler:function(){this.saveStorage(this.storageKeyID,this.state)}},event:function(){console.log("Tracking..."),this.track&&this.track.$off("modified",this.update),this.event.$on("modified",this.update),Vue.set(this,"track",this.event),this.update()}},computed:{description:function(){return this.rsshowdown(this.event.description||"")}},data:function(){var r={};return t.source_index=this.universe.indexes.entity,e.source_index=this.universe.indexes.entity,n.source_index=this.universe.indexes.location,r.storageKeyID="_rs_combatviewComponentKey:"+this.event.id,r.state=this.loadStorage(r.storageKeyID,{search:""}),r.state.history||(r.state.history=[]),r.state.expression||(r.state.expression=""),r.collater=i,r.fields=[n,t,e],r.track=this.event,r.tracking={},r.selected=[],r.involved=[],r.tracing={},r.tracing.involved=[],r.tracing.inside=[],r.tracing.place=[],r.upNext=null,r.message="",this.event.state||this.event.commit({state:{}}),this.event.order||this.event.commit({order:{}}),this.event.dice||this.event.commit({dice:{}}),r},mounted:function(){this.event.$on("modified",this.update),rsSystem.register(this),this.update()},methods:{newRound:function(){var t;if(this.player.master){if(this.event.state.round)for(t=0;t<this.involved.length;t++)if(!this.event.state[this.involved[t].id])return Vue.set(this,"message","Has Not Gone: "+this.involved[t].name),!1;for(this.message&&Vue.set(this,"message",""),void 0===this.event.state.round?this.event.state.round=1:this.event.state.round++,this.involved.length&&(this.event.state.current=this.involved[0].id,this.involved.length>1&&(this.event.state.next=this.involved[1].id)),this.event.state.turn=0,t=0;t<this.involved.length;t++)this.event.state[this.involved[t].id]=!1;return this.event.commit({state:this.event.state}),this.universe.send("game:round:start",this.event),!0}return!1},nextTurn:function(){this.player.master&&(void 0===this.event.state.turn?this.event.state.turn=0:this.event.state.turn++,this.event.state.turn<this.event.involved.length&&(this.involved[this.event.state.turn]&&(this.event.state.current=this.involved[this.event.state.turn].id,this.event.state.next=this.involved[(this.event.state.turn+1)%this.involved.length].id),this.event.commit({state:this.event.state})),this.universe.send("game:round:turn",this.event))},unmarkAll:function(){for(var t=0;t<this.involved.length;t++)Vue.set(this.event.state,this.involved[t].id,!1);this.$forceUpdate()},markAll:function(){for(var t=0;t<this.involved.length;t++)this.event.state[this.involved[t].id]=!0;this.event.commit({state:this.event.state}),this.$forceUpdate()},finishEvent:function(){this.player.master&&this.event.commit({active:!1})},openEvent:function(){this.player.master&&this.event.commit({active:!0})},toggleEntity:function(t){this.event.state[t]=!this.event.state[t],this.event.commit({state:this.event.state}),this.$forceUpdate()},selectEntity:function(t){this.tracking[t.id]?(this.selected.splice(this.selected.indexOf(t),1),this.tracking[t.id]=!1):(this.tracking[t.id]=!0,this.selected.push(t)),this.$forceUpdate()},reorderInvolved:function(){this.event.commit({order:this.event.order}),this.involved.sort(this.sortInvolved)},sortInvolved:function(t,e){if(this.event.order[t.id]&&this.event.order[e.id]){if(this.event.order[t.id]<this.event.order[e.id])return-1;if(this.event.order[t.id]>this.event.order[e.id])return 1}else{if(this.event.order[t.id]&&!this.event.order[e.id])return-1;if(!this.event.order[t.id]&&this.event.order[e.id])return 1}return 0},setCurrent:function(t){this.event.state.current=t.id,this.event.commit({state:this.event.state})},getEntityStyling:function(t){var e="";return this.event.state&&this.event.state.current===t.id&&(e+=" current"),e},getIndicatorStyling:function(t){return this.event.state.next===t.id?"fas fa-clock":this.event.state.current===t.id?"fas fa-fas fa-chevron-double-right":"rs-transparent"},traceRoll:function(t){this.collater.$emit("roll-expression",t)},sync:function(t){var e={};e[t.property]=t.value,this.event.commit(e)},update:function(){var t,e,n={};for(this.involved.splice(0),e=0;e<this.involved.length;e++)this.involved[e].$off("roll-expression",this.traceRoll),this.involved[e].$off("roll-skill",this.traceRoll);if(this.event.involved){for(e=0;e<this.event.involved.length;e++)(t=this.universe.indexes.entity.index[this.event.involved[e]])&&(t.$on("roll-expression",this.traceRoll),t.$on("roll-skill",this.traceRoll),this.involved.push(t),n[t.id]=!0);this.involved.sort(this.sortInvolved)}for(e=0;e<this.selected.length;e++)n[this.selected[e].id]||(Vue.set(this.tracking,this.selected[e].id,!1),this.selected.splice(e--,1));if(this.tracing.involved.splice(0),this.event.involved)for(e=0;e<this.event.involved.length;e++)this.tracing.involved.push(this.event.involved[e]);if(this.tracing.inside.splice(0),this.event.inside)for(e=0;e<this.event.inside.length;e++)this.tracing.inside.push(this.event.inside[e]);if(this.tracing.place.splice(0),this.event.place)for(e=0;e<this.event.place.length;e++)this.tracing.place.push(this.event.place[e]);this.event.state.next&&(t=this.universe.indexes.entity.index[this.event.state.next])&&Vue.set(this,"upNext",t)}},beforeDestroy:function(){this.event.$off("modified",this.update);for(var t=0;t<this.involved.length;t++)this.involved[t].$off("roll-expression",this.traceRoll),this.involved[t].$off("roll-skill",this.traceRoll)},template:Vue.templified("components/rssw/events/combat.html")})}(),rsSystem.component("rsswFightingView",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSShowdown,rsSystem.components.RSSWStats,rsSystem.components.RSCore],props:{event:{required:!0,type:Object}},watch:{state:{deep:!0,handler:function(){this.saveStorage(this.storageKeyID,this.state)}}},data:function(){var t={};return t.storageKeyID="_rs_fightingviewComponentKey:"+this.event.id,t.state=this.loadStorage(t.storageKeyID,{search:""}),t.involved=[],t},mounted:function(){this.event.$on("modified",this.update),rsSystem.register(this),this.update()},methods:{getEntityStyling:function(t){var e="";return this.event.state&&this.event.state.current===t.id&&(e+=" current"),e},getIndicatorStyling:function(t){return this.event.state&&this.event.state.next===t.id?"fas fa-clock":this.event.state&&this.event.state.current===t.id?"fas fa-fas fa-chevron-double-right":"rs-transparent"},sortInvolved:function(t,e){if(this.event.order[t.id]&&this.event.order[e.id]){if(this.event.order[t.id]<this.event.order[e.id])return-1;if(this.event.order[t.id]>this.event.order[e.id])return 1}else{if(this.event.order[t.id]&&!this.event.order[e.id])return-1;if(!this.event.order[t.id]&&this.event.order[e.id])return 1}return 0},update:function(){console.log("Update..."),this.involved.splice(0),this.universe.indexes.entity.translate(this.event.involved,this.involved),this.involved.sort(this.sortInvolved)}},beforeDestroy:function(){console.log("Disengaging..."),this.event.$off("modified",this.update)},template:Vue.templified("components/rssw/events/fighting.html")}),function(){var t=[{title:"",field:"icon",nosort:!0,formatter:function(t){return"<span class='"+t+"'></span>"},recordAction:function(t){rsSystem.EventBus.$emit("display-info",t._item)}},{title:"Item",field:"name",recordAction:function(t){rsSystem.EventBus.$emit("display-info",t._item)}},{title:"Held By",field:"heldby",recordAction:function(t){rsSystem.EventBus.$emit("display-info",t._entity)}},{title:"Location",field:"location",recordAction:function(t){rsSystem.EventBus.$emit("display-info",t._location)}},{title:"Inside",field:"inside",recordAction:function(t){rsSystem.EventBus.$emit("display-info",t._inside)}},{title:"Container?",field:"within",recordAction:function(t){rsSystem.EventBus.$emit("display-info",t._within)}}];rsSystem.component("rsswItemsLocate",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSShowdown,rsSystem.components.RSSWStats,rsSystem.components.RSCore],props:{},watch:{state:{deep:!0,handler:function(){this.saveStorage(this.storageKeyID,this.state)}}},data:function(){var e={storageKeyID:"_rs_itemslocateviewComponentKey:"};return e.state=this.loadStorage(e.storageKeyID,{search:""}),void 0===e.state.paging&&(e.state.paging={},e.state.paging.per=20,e.state.paging.current=0,e.state.paging.pages=0,e.state.paging.spread=10),e.inventory=new SearchIndex,e.headers=t,e.entities=[],e.mapping={},e.corpus=[],e},mounted:function(){rsSystem.register(this),this.universe.$on("modified",this.update),this.update()},methods:{processAction:function(t){},buildItem:function(t,e,n){var i={};return i._entity=t,i._item=e,i._search=e.name+" | "+t.name,n&&(i._within=n,i._search+=n.name),t.location&&(i._location=this.universe.indexes.location.index[t.location],i._location&&(i._search+=" | "+i._location.name)),t.inside&&(i._inside=this.universe.indexes.entity.index[t.inside],i._inside&&(i._search+=" | "+i._inside.name)),i.name=e.name,i.id=e.id+"|"+t.id,i.heldby=i._entity.name,i.location=i._location?i._location.name:"",i.inside=i._inside?i._inside.name:"",i.within=i._within?i._within.name:"",i._search=i._search.toLowerCase(),i.icon=e.icon,i},rebindEntity:function(t){this.mapping[t.id]||Vue.set(this.mapping,t.id,[]),this.updateEntity(t)},updateEntity:function(t){var e,n;if(t&&t.id&&"entity"===t._class&&t.item)for(n=0;n<t.item.length;n++)(e=this.universe.indexes.item.index[t.item[n]])&&this.indexItem(t,e)},indexItem:function(t,e,n){var i,r,s=this.buildItem(t,e,n);if(this.inventory.indexItem(s),e.item&&e.item.length)for(r=0;r<e.item.length;r++)(i=this.universe.indexes.item.index[e.item[r]])&&this.indexItem(t,i,e)},unbindEntity:function(t){this.mapping[t.id]&&(this.inventory.unindexItem(this.mapping[t.id]),Vue.delete(this.mapping,t.id))},update:function(){var t,e,n,i;for(n=[],i=0;i<this.universe.indexes.entity.listing.length;i++)this.universe.indexes.entity.listing[i]&&this.universe.indexes.entity.listing[i].isOwner&&this.universe.indexes.entity.listing[i].isOwner(this.player.id)&&n.push(this.universe.indexes.entity.listing[i]);for(t=n.difference(this.entities),e=this.entities.difference(n),i=0;i<t.length;i++)this.rebindEntity(t[i]);for(i=0;i<e.length;i++)this.unbindEntity(e[i])}},beforeDestroy:function(){this.universe.$off("modified",this.update)},template:Vue.templified("components/rssw/items/locate.html")})}(),rsSystem.component("rsswJournalView",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSCore],data:function(){var t={related:[]};return t.known=new SearchIndex,t.activeEntity=null,t.entityList=[],t.entities={},t.entries=[],t.shown=[],t.root={},t.root.selected=[],t.field={},t.field.label="Filter by Knowns",t.field.property="selected",t.field.source_index=t.known,t.field.type="multireference",t.field.optionLabel="name",t.field.optionValue="id",t.field.autocomplete=!0,t.field.uniqueness=!0,t},mounted:function(){rsSystem.register(this),this.update()},methods:{filterEntries:function(){var t,e;for(this.shown.splice(0),e=0;e<this.entries.length;e++)t=this.entries[e],!(!this.root.selected.length||t.related&&t.related.length&&0===this.root.selected.difference(t.related).length)||this.activeEntity&&t.editor!==this.activeEntity||this.shown.push(t)},openEntry:function(t){this.showInfo(t,this.activeEntity?this.entities[this.activeEntity]:void 0)},focusEntity:function(t){console.log("Focus: ",t),this.activeEntity!==t.id?Vue.set(this,"activeEntity",t.id):Vue.set(this,"activeEntity",null),this.filterEntries()},update:function(){var t,e,n,i={};for(n=0;n<this.entityList.length;n++)Vue.delete(this.entities,this.entityList[n]);for(this.entityList.splice(0),n=0;n<this.universe.indexes.entity.listing.length;n++)this.universe.indexes.entity.listing[n]&&this.universe.indexes.entity.listing[n].owners&&-1!==this.universe.indexes.entity.listing[n].owners.indexOf(this.player.id)&&(Vue.set(this.entities,this.universe.indexes.entity.listing[n].id,this.universe.indexes.entity.listing[n]),this.entityList.push(this.universe.indexes.entity.listing[n]));for(this.known.clearIndex(),n=0;n<this.entityList.length;n++)for(e=0;e<this.entityList[n]._knownKeys.length;e++)!(t=this.universe.index.index[this.entityList[n]._knownKeys[e]])||t.obscured||i[t.id]||(this.known.indexItem(t),i[t.id]=!0);for(this.entries.splice(0),n=0;n<this.universe.indexes.journal.listing.length;n++)this.universe.indexes.journal.listing[n]&&this.entities[this.universe.indexes.journal.listing[n].editor]&&this.entries.push(this.universe.indexes.journal.listing[n]);this.known.listing.sort(this.sortData),this.entityList.sort(this.sortData),this.entries.sort(this.sortData),this.filterEntries()}},template:Vue.templified("components/rssw/journal/view.html")}),rsSystem.component("rsswMasterResults",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSSWStats,rsSystem.components.RSCore],props:{wid:{type:String}},watch:{state:{deep:!0,handler:function(){this.saveStorage(this.storageKeyID,this.state)}}},data:function(){var t={};return t.storageKeyID="_rs_resultviewComponentKey:"+this.wid,t.state=this.loadStorage(t.storageKeyID,{}),t.state.seen||(t.state.seen={}),t.state.max||(t.state.max=2),t.state.options||(t.state.options={}),void 0===t.state.options.hide_names&&(t.state.options.hide_names=!0),t.entities=[],t.active={},t},mounted:function(){this.universe.$on("entity:rolled",this.receiveRoll),rsSystem.register(this),this.load()},methods:{receiveRoll:function(t){t&&t.id?(this.active[t.id]||(Vue.set(this.active,t.id,this.universe.indexes.entity.index[t.id]),this.entities.push(this.active[t.id]),Vue.set(this.state.seen,t.id,[])),this.active[t.id]?(this.state.seen[t.id].unshift(t),this.state.seen[t.id].length>this.state.max&&this.state.seen[t.id].splice(this.state.max)):rsSystem.log.warn("Roll indicator received for unknown entity",t)):rsSystem.log.warn("Unknown roll indicator received",t)},dismissEntity:function(t,e){t&&void 0!==e&&(Vue.delete(this.state.seen,t.id),Vue.delete(this.active,t.id),this.entities.splice(e,1))},selectRoll:function(t){Vue.set(this.state,"active_roll",t.echo),this.$emit("selecting",t)},dismissRoll:function(t,e){t&&this.state.seen[t.id]&&void 0!==e&&this.state.seen[t.id].splice(e,1)},load:function(){var t,e,n=Object.keys(this.state.seen);for(e=0;e<n.length;e++)(t=this.universe.indexes.entity.index[n[e]])&&(this.active[n[e]]=t,this.entities.push(t))}},beforeDestroy:function(){this.universe.$off("entity:rolled",this.receiveRoll)},template:Vue.templified("components/rssw/master/results.html")}),function(){var t,e=[],n=[];for(t=(e=[-1e5,-9e4,-8e4,-7e4,-6e4,-5e4,-4e4,-3e4,-2e4,-1e4,-9e3,-8e3,-7e3,-6e3,-5e3,-4e3,-3e3,-2e3,-1e3,-900,-800,-700,-600,-500,-450,-400,-350,-300,-250,-200,-150,-100,-90,-80,-70,-60,-50,-45,-40,-35,-30,-25,-20,-15,-10,-5,-4,-3,-2,-1,0]).length-2;t>=0;t--)e.push(-1*e[t]);for(n=[-5],t=0;t<=35;t++)n.push(t);rsSystem.component("rsswParty",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSShowdown,rsSystem.components.RSCore],props:{universe:{required:!0,type:Object},record:{required:!0,type:Object},entities:{type:Array,default:function(){var t=[].concat(this.universe.indexes.entity.listing);return t.sort(this.sortData),t}}},data:function(){var t={};return t.credits=e,t.xps=n,t.storageKeyID="partystoragekey:"+this.record.id,t.state=this.loadStorage(t.storageKeyID,{hideMembers:!1}),t.newOrder=null,t.move_location="",t.addingMember="",t.location=null,t.inside=null,t.members=[],t.grantCredit=0,t.grantXP=0,t},watch:{record:function(t,e){e.$off("modified",this.update),t.$on("modified",this.update)},state:{deep:!0,handler:function(){this.saveStorage(this.storageKeyID,this.state)}}},mounted:function(){rsSystem.register(this),this.record.$on("modified",this.update),this.update()},methods:{toggleMembers:function(){Vue.set(this.state,"hideMembers",!this.state.hideMembers)},displayOption:function(t){return!(t.template||t.inactive||this.record.entity&&-1!==this.record.entity.indexOf(t.id))},setLocation:function(){this.record.setLocation(this.move_location),Vue.set(this,"move_location","")},changeOrder:function(t){this.record.commit({order:t})},giveCredits:function(t){var e,n={};if(this.record.entity)for(n.delta={},n.delta.credits=t,n._type="entity",e=0;e<this.record.entity.length;e++)n.id=this.record.entity[e],this.universe.send("modify:entity:detail:additive",n);Vue.set(this,"grantCredit",0)},giveXP:function(t){var e;for(e=0;e<this.members.length;e++)console.log("Give XP["+t+"]: "+this.members[e].id),this.members[e].commit({xp:this.members[e].xp+parseInt(t)});Vue.set(this,"grantXP",0)},removeMember:function(t){this.record.removeMember(t)},addMember:function(t){this.record.addMember(t),Vue.set(this,"addingMember",0)},update:function(){var t,e;if(this.members.splice(0),this.record.entity)for(e=0;e<this.record.entity.length;e++)(t=this.universe.indexes.entity.index[this.record.entity[e]])?this.members.push(t):console.warn("Skipped Party["+this.record.id+"] Member Record["+e+"] For Non-Existance: "+this.record.entity[e]);this.members.sort(this.sortData),Vue.set(this,"location",this.universe.indexes.location.index[this.record.location]),Vue.set(this,"inside",this.universe.indexes.entity.index[this.record.inside]),Vue.set(this,"newOrder",this.record.order)}},beforeDestroy:function(){this.record.$off("modified",this.update)},template:Vue.templified("components/rssw/party.html")})}(),function(){var t=function(t,e){return(t=(t.name||"").toLowerCase())<(e=(e.name||"").toLowerCase())?-1:t>e?1:0};rsSystem.component("rsswEntityInside",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSCore],props:{entity:{required:!0,type:Object}},data:function(){var t={availableEntities:[],entities:[],moving:"",crew:0};return t},mounted:function(){this.universe.$on("model:modified:complete",this.update),rsSystem.register(this),this.update()},watch:{entity:function(){this.update()}},methods:{moveEntity:function(t,e){(t=this.universe.indexes.entity.index[t])&&this.isOwner(t)&&t.commit({inside:e}),Vue.set(this,"moving",null)},showInfo:function(t){this.isOwner(t)&&rsSystem.EventBus.$emit("display-info",{source:this.entity,record:t})},getCountClass:function(){if(this.entity.required_crew){var t;if(0<=(t=this.crew/this.entity.required_crew)&&t<.6)return"rs-light-red";if(.6<=t&&t<1)return"rs-light-orange"}return this.entity.maximum_crew&&this.entity.maximum_crew<this.crew?"rs-red":"rs-green"},update:function(){var e,n,i=0;for(this.entities.splice(0),n=0;n<this.universe.indexes.entity.listing.length;n++)(e=this.universe.indexes.entity.listing[n]).inside===this.entity.id&&(this.entities.push(e),"character"!==e.classification||e.mob||i++);for(Vue.set(this,"crew",i),this.entities.sort(t),this.availableEntities.splice(0),n=0;n<this.universe.indexes.entity.listing.length;n++)(e=this.universe.indexes.entity.listing[n]).template||e.obscured||!this.isOwner(e)||-1!==this.entities.indexOf(e.id)||e.id===this.entity.id||e.inside===this.entity.id||this.availableEntities.push(e);this.availableEntities.sort(t)}},beforeDestroy:function(){this.universe.$off("model:modified:complete",this.update)},template:Vue.templified("components/rssw/ship/inside.html")})}(),function(){var t={icon:"fas fa-rocket-launch rot315",speed:"x"},e=function(t,e){return(t=t?t.order:0)<(e=e?e.order:0)?-1:t>e?1:0};rsSystem.component("rsswShipManeuver",{inherit:!0,mixins:[],props:{universe:{required:!0,type:Object},entity:{required:!0,type:Object},maneuverIcon:{default:"fas fa-angle-double-up",type:String},display:{default:!1,type:Boolean}},watch:{entity:function(){this.update()}},data:function(){var e={};return e.locked=t,e.maneuvers=[],e.open=!1,e.halfSlice=0,e.slice=0,e},mounted:function(){this.universe.$on("game:round:start",this.reset),this.entity.$on("modified",this.update),rsSystem.register(this),this.update()},methods:{toggleOpen:function(){Vue.set(this,"open",!this.open)},selectManeuver:function(t){this.display||(Vue.set(this,"locked",t),Vue.set(this,"open",!1))},getSpeedValue:function(e){return e==t?"X":e.speed?e.speed+(this.entity.bonus_ship_speed||0):0},maneuverStyleBackdrop:function(){return this.open?"width: 100%; height: "+this.$el.offsetWidth+"px; right: 0px":""},maneuverStyleContainer:function(t,e){return this.open?"transform: rotate("+(this.slice*t+90)+"deg); width: 50%; overflow: visible;":""},maneuverStyleSpeed:function(t,e){return this.open?"transform: rotate("+(this.slice*t+90)+"deg); width: 40%; overflow: visible;":""},maneuverStyleIcon:function(t,e){return"transform: rotate(-"+(this.slice*t+90)+"deg);"},reset:function(){Vue.set(this,"locked",t)},update:function(){var t,n;if(this.maneuvers.splice(0),this.entity.maneuver){for(n=0;n<this.entity.maneuver.length;n++)(t=this.universe.indexes.maneuver.index[this.entity.maneuver[n]])&&this.maneuvers.push(t);Vue.set(this,"slice",360/this.maneuvers.length),Vue.set(this,"halfSlice",this.slice/2),this.maneuvers.sort(e)}}},beforeDestroy:function(){this.universe.$off("game:round:start",this.reset),this.entity.$off("modified",this.update)},template:Vue.templified("components/rssw/ship/maneuver.html")})}(),function(){var t=function(t,e){return(t=(t.name||"").toLowerCase())<(e=(e.name||"").toLowerCase())?-1:t>e?1:0};rsSystem.component("rsswShipStats",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSShowdown,rsSystem.components.RSSWStats,rsSystem.components.RSCore],props:{ship:{required:!0,type:Object}},data:function(){var t={};return t.storageKeyID="maneuverstoragekey:"+this.ship.id,t.state=this.loadStorage(t.storageKeyID,{}),t.state.settings||(t.state.settings={}),t.state.settings.maneuvers||(t.state.settings.maneuvers={}),t.settings={},t.encumberance=0,t.properties={},t.image=null,t.items=[],t.points=0,t.availablePilots=[],t.editingPilot=!1,t.setPilot=null,t.pilot=null,t.skill=0,t.editingPilotAbility=!1,t.abilityDescription="",t.setPilotAbility="",t.pilotAbilities=[],t.pilotAbility=null,t.abilities=[],t.ability=null,t.trackEffectTimeout=null,t.effectDismissTimer={},t.effectDismissCount={},t.effectIndicators={},t.availableEffects={},t.showEffectInfo=null,t.effectSelector=null,t.effectsOpen=!1,t.activeEffects=[],t.shipEffects=[],t.availableSlots=[],t.mounted=[],t.points=0,t},watch:{ship:function(){this.update()}},mounted:function(){rsSystem.register(this),Vue.set(this,"effectSelector",$(this.$el).find(".effect-selector")),this.$el.onclick=(t=>{var e=t.srcElement.attributes.getNamedItem("data-id");e&&(e=this.universe.index.index[e.value])&&rsSystem.EventBus.$emit("display-info",e)}),this.universe.$on("model:modified:complete",this.updateFromUniverse),this.ship.$on("modified",this.update),this.updateFromUniverse(),this.update()},methods:{getAbilityIconClass:function(t){switch(t.activation){case"passive":return"rs-green";case"automatic":return"rs-yellow";default:return""}},toggleEffectMenu:function(t){void 0===t?Vue.set(this,"effectsOpen",!this.effectsOpen):Vue.set(this,"effectsOpen",!!t),this.effectsOpen?this.effectSelector.css({"max-height":100+50*this.shipEffects.length+"px"}):this.effectSelector.css({"max-height":""})},focusEffect:function(t){setTimeout(()=>{this.trackEffectTimeout&&(clearTimeout(this.trackEffectTimeout),this.trackEffectTimeout=null),Vue.set(this,"showEffectInfo",t.id)},1)},blurEffect:function(t){this.trackEffectTimeout=setTimeout(()=>{Vue.set(this,"showEffectInfo",null),this.trackEffectTimeout=null},500)},getEffectIcon:function(t){if(t){if(t.icon)return t.icon;if(this.availableEffects[t._sourced])return this.availableEffects[t._sourced].icon}return"ra ra-doubled"},assignEffect:function(t){this.ship.assignEffect(t),this.toggleEffectMenu(!1)},hasEffectHasIndicators:function(t){return this.availableEffects[t._sourced]&&this.availableEffects[t._sourced].indicators},alterIndicator:function(t,e){t.indicator!==e&&this.ship.assignEffectIndicator(t,e)},dismissEffect:function(t){console.log("Dismiss: "+t.id),this.effectDismissTimer[t.id]&&Date.now()-this.effectDismissTimer[t.id]<1e3?(this.effectDismissCount[t.id]+=1,3===this.effectDismissCount[t.id]&&this.ship.dismissEffect(t)):(this.effectDismissTimer[t.id]=Date.now(),this.effectDismissCount[t.id]=1)},editPilot:function(){Vue.set(this,"editingPilot",!this.editingPilot)},editPilotAbility:function(){Vue.set(this,"editingPilotAbility",!this.editingPilotAbility)},showInfo:function(t){rsSystem.EventBus.$emit("display-info",{base:this.ship,target:this.pilot,record:t})},getPilotClass:function(){return this.pilot?this.pilot&&this.pilot.inside!==this.ship.id?"rs-light-orange":"rs-white":"rs-light-red"},setNewPilot:function(t){Vue.set(this,"editingPilot",!1),""===t&&(t=null),this.ship.commit({entity:t})},setNewPilotAbility:function(t){Vue.set(this,"editingPilotAbility",!1),""===t&&(t=null),this.ship.commit({ship_active_abilities:[t]})},recalculate:function(){this.ship.recalculateProperties()},updated:function(t){var e={};e[t]=this.properties[t],this.ship.commit(e),console.log("Commit: ",e)},updateFromUniverse:function(){var e,n;for(this.availablePilots.splice(0),n=0;n<this.universe.indexes.entity.listing.length;n++)"character"===(e=this.universe.indexes.entity.listing[n]).classification&&this.isOwner(e)&&e.inside===this.ship.id&&this.availablePilots.push(e);for(this.availablePilots.sort(t),n=0;n<this.shipEffects.length;n++)Vue.delete(this.availableEffects,this.shipEffects[n].id);for(this.shipEffects.splice(0),n=0;n<this.universe.indexes.effect.listing.length;n++)(e=this.universe.indexes.effect.listing[n]).alters&&-1!==e.alters.indexOf("ship")&&(Vue.set(this.availableEffects,e.id,e),e.obscured&&!this.player.master||this.shipEffects.push(e));this.shipEffects.sort(this.sortData)},update:function(){var t,e,n;this.ship.points;for(this.ship.profile&&this.universe.nouns.image[this.ship.profile]?Vue.set(this,"image",this.universe.nouns.image[this.ship.profile]):Vue.set(this,"image",null),(t=this.universe.nouns.entity[this.ship.entity])?this.pilot?this.pilot.id!==t.id&&(this.pilot.$off("modified",this.update),t.$on("modified",this.update),Vue.set(this,"pilot",t)):(t.$on("modified",this.update),Vue.set(this,"pilot",t)):this.pilot&&(this.pilot.$off("modified",this.update),Vue.set(this,"pilot",null)),this.pilotAbilities.splice(0),this.abilities.splice(0),n=0;this.ship.ability&&n<this.ship.ability.length;n++)(t=this.universe.nouns.ability[this.ship.ability[n]])&&"ship"===t.type&&this.abilities.push(t);if(this.pilot)for(Vue.set(this,"skill",this.pilot.pilot_skill||0),n=0;this.pilot.ability&&n<this.pilot.ability.length;n++)if(t=this.universe.nouns.ability[this.pilot.ability[n]])switch(t.type){case"ship":this.abilities.push(t);break;case"pilot":this.pilotAbilities.push(t)}else console.warn("Unidentified Ability: "+this.pilot.ability[n]);for(this.pilot&&this.pilot.ability&&this.ship.ship_active_abilities&&this.ship.ship_active_abilities.length&&-1!==this.pilot.ability.indexOf(this.ship.ship_active_abilities[0])&&(t=this.universe.indexes.ability.index[this.ship.ship_active_abilities[0]])?(Vue.set(this,"abilityDescription",this.rsshowdown(t.description,this.ship,this.pilot)),Vue.set(this,"pilotAbility",t)):(Vue.set(this,"abilityDescription",this.rsshowdown(this.ship.description||"",this.ship)),Vue.set(this,"pilotAbility",null)),this.availableSlots.splice(0),n=0;this.ship.slot&&n<this.ship.slot.length;n++)(t=this.universe.indexes.slot.index[this.ship.slot[n]])&&this.availableSlots.push(t);for(this.mounted.splice(0),n=0;this.ship.item&&n<this.ship.item.length;n++)(t=this.universe.indexes.item.index[this.ship.item[n]])&&t.needs_slot&&this.mounted.push(t);if(this.ship.item){if(this.items.length!==this.ship.item.length){for(this.items.splice(0),e=0,n=0;n<this.ship.item.length;n++)(t=this.universe.indexes.item.index[this.ship.item[n]])&&(e+=t.encumberance,this.items.push(t));Vue.set(this,"encumberance",e)}}else this.items.splice(0);if(this.ship.effect&&this.ship.effect.length!==this.activeEffects.length){for(this.activeEffects.splice(0),n=0;n<this.ship.effect.length;n++)this.activeEffects.push(this.ship.effect[n]),Vue.set(this.effectIndicators,this.ship.effect[n].id,this.ship.effect[n].indicator||"");this.activeEffects.sort(this.sortData)}this.ship.name&&Vue.set(this.properties,"name",this.ship.name),this.ship.location?Vue.set(this.properties,"location",this.universe.indexes.location.index[this.ship.location]):Vue.set(this.properties,"location",null),this.ship.inside?Vue.set(this.properties,"inside",this.universe.indexes.entity.index[this.ship.inside]):Vue.set(this.properties,"inside",null),Vue.set(this,"points",this.ship.point_cost||0),this.uniqueByID(this.abilities),this.$forceUpdate()}},beforeDestroy:function(){this.universe.$off("model:modified",this.updateFromUniverse),this.ship.$off("modified",this.update),this.pilot&&this.pilot.$off("modified",this.update)},template:Vue.templified("components/rssw/ship/stats.html")})}(),function(){var t=0;rsSystem.component("rsswTokensDestiny",{inherit:!0,mixins:[],props:{universe:{required:!0,type:Object}},data:function(){var t={destinyTokens:[],sithTokens:[],session:null};return t},mounted:function(){rsSystem.register(this),this.universe.$on("model:modified",this.updateFromUniverse),this.updateFromUniverse()},methods:{updateFromUniverse:function(){var t;(t=this.universe.indexes.setting.index["setting:current:session"])&&(t=this.universe.indexes.session.index[t.value])!=this.session&&(this.session&&this.session.$off("modified",this.updateFromSession),Vue.set(this,"session",t),this.session.$on("modified",this.update),this.update())},showTokenInfo:function(){rsSystem.EventBus.$emit("display-info","knowledge:token:destiny")},update:function(){if(this.session){for(;this.session.destiny_light>this.destinyTokens.length;)this.destinyTokens.push(t++);for(this.session.destiny_light<this.destinyTokens.length&&this.destinyTokens.splice(this.session.destiny_light);this.session.destiny_dark>this.sithTokens.length;)this.sithTokens.push(t++);this.session.destiny_dark<this.sithTokens.length&&this.sithTokens.splice(this.session.destiny_dark)}}},beforeDestroy:function(){this.universe.$off("model:modified",this.updateFromUniverse),this.session&&this.session.$off("modified",this.update)},template:Vue.templified("components/rssw/tokens/destiny.html")})}(),rsSystem.component("syncedText",{inherit:!0,mixins:[rsSystem.components.RSCore],props:{id:{type:String}},data:function(){var t={};return this.id?(t.storageID="_rs_syncedtextComponentKey:"+this.id,t.state=this.loadStorage(t.storageID,{})):t.state={},t},watch:{state:{deep:!0,handler:function(t){this.storageID&&this.saveStorage(this.storageID,this.state)}}},mounted:function(){rsSystem.register(this)},methods:{},template:Vue.templified("components/syncedtext.html")}),rsSystem.component("rsTableControls",{inherit:!0,mixins:[rsSystem.components.RSCore],props:{index:{required:!0,type:Object},controls:{required:!1,type:Array},corpus:{required:!0,type:Array},state:{required:!0,type:Object}},data:function(){var t={start:0};return t},watch:{index:function(t,e){console.warn("Controls Index Updated: ",e,"\n -> \n",t),e.$off("selection",this.update),e.$off("indexed",this.update),t.$on("selection",this.update),t.$on("indexed",this.update),this.update()},state:{deep:!0,handler:function(){this.update()}}},mounted:function(){rsSystem.register(this),this.index.$on("selection",this.update),this.index.$on("indexed",this.update),this.update()},methods:{clearSelection:function(){this.index.clearSelection(),this.update()},allSelection:function(){this.index.select(this.corpus),this.update()},infoSelection:function(t){rsSystem.EventBus.$emit("display-info",t)},update:function(){this.$forceUpdate()}},beforeDestroy:function(){this.universe.$off("universe:modified",this.update),this.index.$off("selection",this.update),this.index.$off("indexed",this.update)},template:Vue.templified("components/table/controls.html")}),rsSystem.component("rsTablePaging",{inherit:!0,mixins:[rsSystem.components.RSCore],props:{index:{required:!0,type:Object},controls:{required:!1,type:Array},state:{required:!0,type:Object}},data:function(){var t={lastPage:0,pages:[]};return t},watch:{index:function(t,e){console.warn("Paging Index Updated: ",e,"\n -> \n",t),e.$off("selection",this.update),e.$off("indexed",this.update),t.$on("selection",this.update),t.$on("indexed",this.update),this.update()},state:{deep:!0,handler:function(){this.update()}}},mounted:function(){rsSystem.register(this),this.index.$on("indexed",this.update),this.update()},methods:{toPage:function(t){Vue.set(this.state.paging,"current",t)},classPage:function(t){return t===this.state.paging.current?"current-page":0===t?"first-page":t===this.state.paging.count-1?"last-page":"general-page"},update:function(){var t,e;if(this.pages.splice(0),this.state.paging&&this.state.paging.count)for(Vue.set(this,"lastPage",this.state.paging.count-1),this.state.paging.spread?(t=Math.min(this.state.paging.current+this.state.paging.spread,this.lastPage-1),e=Math.max(this.state.paging.current-this.state.paging.spread,1)):e=1;e<=t;e++)this.pages.push(e);this.$forceUpdate()}},beforeDestroy:function(){this.universe.$off("universe:modified",this.update),this.index.$off("selection",this.update),this.index.$off("indexed",this.update)},template:Vue.templified("components/table/paging.html")}),rsSystem.component("rsTable",{inherit:!0,mixins:[rsSystem.components.RSCore],props:{index:{required:!0,type:Object},corpus:{required:!0,type:Array},headers:{required:!0,type:Array},controls:{required:!1,type:Array},state:{required:!0,type:Object}},data:function(){var t={start:0};return this.state&&!this.state.filter&&Vue.set(this.state,"filter",{}),this.state&&this.state.filter&&(null===this.state.filter.null||void 0===this.state.filter.null)&&Vue.set(this.state.filter,"null",""),t},watch:{index:function(t,e){e.$off("selection",this.update),e.$off("indexed",this.update),t.$on("selection",this.update),t.$on("indexed",this.update),this.update()},"state.filter":{deep:!0,handler:function(){this.update()}},"state.paging.current":{deep:!0,handler:function(t){this.state.paging.tracked!==t&&(this.state.paging.tracked=t,this.update())}},"state.paging.per":{handler:function(){this.update()}}},mounted:function(){rsSystem.register(this),this.universe.$on("universe:modified",this.update),this.index.$on("selection",this.update),this.index.$on("indexed",this.update),this.$on("update-table",this.update),this.update()},methods:{headerAction:function(t){console.log("Header Action: ",t),"function"==typeof t.action?t.action(t):null===t.action||(this.state.sortKey===t.field?Vue.set(this.state,"order",!this.state.order):Vue.set(this.state,"sortKey",t.field),t.sorter?this.state.sorter!==t.sorter&&Vue.set(this.state,"sorter",t.sorter):Vue.delete(this.state,"sorter")),this.update()},isArray:function(t){return t instanceof Array||t&&t.constructor&&-1!==t.constructor.name.toLowerCase().indexOf("array")},formatObjectHeader:function(t){var e,n;for(n=Object.keys(t),e=0;e<n.length;e++)n[e],t[n[e]]},select:function(t,e){e.recordAction?e.recordAction(t,e):this.state.noSelect?this.state.noEmit||this.$emit("selected",t,e):(this.index.toggleSelect(t)?this.state.noEmit||this.$emit("selected",t,e):this.state.noEmit||this.$emit("unselected",t,e),this.$forceUpdate()),this.update()},update:function(){this.corpus.splice(0),this.index.list(this.state.filter,this.state,this.corpus)}},beforeDestroy:function(){this.universe.$off("universe:modified",this.update),this.index.$off("selection",this.update),this.index.$off("indexed",this.update)},template:Vue.templified("components/table.html")}),function(){var t=0,e={star_system:"far fa-solar-system rotX60",planet:"fad fa-globe-europe",station:"ra ra-satellite",moon:"fas fa-moon",city:"fas fa-city",marker:"fas fa-map-marker"},n={options:[{icon:"fad fa-map-marker-alt rs-white rs-secondary-red rs-secondary-solid",event:"set-crosshair",text:"Mark: Red",color:"red"},{icon:"fad fa-map-marker-alt rs-white rs-secondary-solid rs-secondary-orange",event:"set-crosshair",text:"Mark: Orange",color:"orange"},{icon:"fad fa-map-marker-alt rs-white rs-secondary-solid rs-secondary-green",event:"set-crosshair",text:"Mark: Green",color:"green"},{icon:"fad fa-map-marker-alt rs-white rs-secondary-solid rs-secondary-yellow",event:"set-crosshair",text:"Mark: Yellow",color:"yellow"},{icon:"fad fa-map-marker-alt rs-white rs-secondary-solid rs-secondary-blue",event:"set-crosshair",text:"Mark: Blue",color:"blue"},{icon:"fad fa-map-marker-alt rs-white rs-secondary-solid rs-secondary-purple",event:"set-crosshair",text:"Mark: Purple",color:"purple"},{icon:"fad fa-map-marker-alt rs-white rs-secondary-solid rs-secondary-black",event:"set-crosshair",text:"Mark: Black",color:"black"},{icon:"fad fa-map-marker-alt rs-white rs-secondary-solid rs-secondary-white",event:"set-crosshair",text:"Mark: White",color:"white"}]},i={icon:"fas fa-times rs-white",event:"clear-all-crosshair",text:"All Marks"},r={options:[{icon:"fad fa-map-marker-alt rs-white rs-secondary-red rs-secondary-solid",event:"clear-crosshair",text:"Mark: Red",color:"red"},{icon:"fad fa-map-marker-alt-slash rs-white rs-secondary-solid rs-secondary-orange",event:"clear-crosshair",text:"Mark: Orange",color:"orange"},{icon:"fad fa-map-marker-alt-slash rs-white rs-secondary-solid rs-secondary-green",event:"clear-crosshair",text:"Mark: Green",color:"green"},{icon:"fad fa-map-marker-alt-slash rs-white rs-secondary-solid rs-secondary-yellow",event:"clear-crosshair",text:"Mark: Yellow",color:"yellow"},{icon:"fad fa-map-marker-alt-slash rs-white rs-secondary-solid rs-secondary-blue",event:"clear-crosshair",text:"Mark: Blue",color:"blue"},{icon:"fad fa-map-marker-alt-slash rs-white rs-secondary-solid rs-secondary-purple",event:"clear-crosshair",text:"Mark: Purple",color:"purple"},{icon:"fad fa-map-marker-alt-slash rs-white rs-secondary-solid rs-secondary-black",event:"clear-crosshair",text:"Mark: Black",color:"black"},{icon:"fad fa-map-marker-alt-slash rs-white rs-secondary-solid rs-secondary-white",event:"clear-crosshair",text:"Mark: White",color:"white"},i]};rsSystem.component("rsViewer",{inherit:!0,mixins:[rsSystem.components.RSCore],props:{location:{required:!0,type:Object}},data:function(){var t={};return t.storageKeyID="_rs_viewerComponentKey"+this.location.id,t.state=this.loadStorage(t.storageKeyID,{zoomStep:1}),t.generateLocationClassingMap=e,t.state.crosshairing||(t.state.crosshairing={icon:"fal fa-crosshairs",event:"toggle-crosshair",text:"Crosshairs On",state:!1}),t.state.pathing||(t.state.pathing={icon:"fad fa-chart-scatter rs-secondary-transparent",event:"toggle-pathing",text:"Point Path Off",state:!1}),t.viewingEntity=null,t.state.generate_location=t.state.generate_location||"",t.state.viewed_at=t.state.viewed_at||0,t.state.search=t.state.search||"",t.state.alter=t.state.alter||"",void 0===t.state.labels&&(t.state.labels=!0),t.state.image?t.image=t.state.image:t.image=t.state.image={},void 0===t.state.markers&&(t.state.markers=!0),void 0===t.state.follow&&(t.state.follow=!0),void 0===t.state.master_view&&(t.state.master_view=""),void 0===t.state.hidden_legend&&(t.state.hidden_legend={}),void 0===t.state.path_fill&&(t.state.path_fill=""),void 0===t.state.view_party&&(t.state.view_party=""),void 0===t.state.distance_unit&&(t.state.distance_unit="m"),void 0===t.state.distance&&(t.state.distance=0),(void 0===t.state.measuring||t.state.measuring instanceof Array)&&(t.state.measuring={}),t.state.search?t.search_criteria=t.state.search.toLowerCase().split(" "):t.search_criteria=[],t.measurementCanvas=null,t.initializing=!0,t.baseFontSize=13,t.scaledSize=0,t.lengths=rsSystem.math.distance.lengths,t.distancing=[],t.totalLength=0,t.totalTime=0,t.distance=0,t.searchPrevious=t.state.search,t.searchError="",t.original={},t.backgroundImageNoun=null,t.sourceImageNoun=null,t.backgroundImage=null,t.sourceImage=null,t.parchment=null,t.element=null,t.ready=!1,t.action=null,t.isDragging=!1,t.dragX=null,t.dragY=null,t.focusedLocation=null,t.availableCanvases={},t.availableLocales={},t.pointsOfInterest=[],t.availablePOIs=[],t.coordinates=[],t.parties=[],t.locales=[],t.pins=!0,t.alter="",t.legendDisplayed=!0,t.legendOpen=!1,t.legendHidden={},t.isMaster=null,t.setMeasurements={icon:"fas fa-ruler-combined",event:"set-measurement",text:"Set Distance"},t.takeMeasurements={icon:"fas fa-drafting-compass",event:"measure-line",text:"Measure Line"},t.localeInfo={event:"info-key",icon:"fas fa-info-circle",shown:!1},t.menuOpen=!1,t.menuItems=[[{action:"zoomin",text:"Zoom",icon:"fas fa-plus-square"},{action:"zoomout",text:"Zoom",icon:"fas fa-minus-square"}],{action:"up",text:"Up",conditional:()=>!!this.location.location,icon:"far fa-arrow-alt-square-up"},{action:"reset",text:"Reset",icon:"far fa-expand-wide"}],t.menuItems.generateLocation={event:"generate-location"},t.menuItems.labelItem={action:"labels",text:"Labels"},t.menuItems.followItem={action:"follow",text:"Follow"},t.menuItems.markerItem={action:"markings",text:"Markers"},t.menuItems.fullscreen={action:"fullscreen",text:"Fill Page"},t.actions={},t.actions.open=!1,t.actions.header="Location",t.actions.options=[],t.actions.menu=null,t.addPointOption={icon:"fas fa-code-commit",event:"add-point",text:"Add Point"},t.setNamePointOption={icon:"fal fa-code-commit",event:"set-name-point",text:"Set Name Point"},t.canvas=null,t},watch:{state:{deep:!0,handler:function(){this.state.search!==this.state.search.toLowerCase()&&Vue.set(this.state,"search",this.state.search.toLowerCase()),this.saveStorage(this.storageKeyID,this.state)}},location:{handler:function(t,e){e.$off("modified",this.update),t.$on("modified",this.update)}},$route:{deep:!0,handler:function(){this.update()}}},mounted:function(){this.canvasElement=$("canvas.map-paths"),Vue.set(this,"element",$(this.$el)),"master"!==this.state.master_view&&(this.state.master_view&&Vue.set(this,"viewingEntity",this.universe.indexes.entity.index[this.state.master_view]),this.viewingEntity||Vue.set(this,"viewingEntity",this.universe.indexes.entity.index[this.player.entity])),rsSystem.register(this),rsSystem.EventBus.$on("measure-point",this.receiveMeasurementPoint),rsSystem.EventBus.$on("info:closed",this.clearSearch),rsSystem.EventBus.$on("copied-id",this.setMenuID),this.universe.$on("universe:modified",this.update),this.universe.$on("model:modified",this.update),this.location.$on("modified",this.update),this.update()},methods:{clearSearch:function(t){t&&this.focusedLocation===t.id&&Vue.set(this,"focusedLocation",null)},setMenuID:function(t){Vue.set(this.state,"alter",t)},searchMap:function(){var t,e,n=!1;if(Vue.set(this,"focusedLocation",null),"self"===this.search_criteria[0]){if((t=this.universe.indexes.entity.index[this.player.entity])&&(t=this.universe.indexes.location.index[t.location])){for(;t&&t.location!==this.location.id;)t=this.universe.indexes.location.index[t.location];t&&(Vue.set(this,"focusedLocation",t.id),this.centerView(t),n=!0)}}else{for(e=0;!n&&e<this.availablePOIs.length;e++)(t=this.availablePOIs[e]).x&&t.y&&this.testSearchCriteria(t._search,this.search_criteria)&&(Vue.set(this,"focusedLocation",t.id),this.centerView(t),n=!0);this.determinePOIs()}n?Vue.set(this,"searchError",""):Vue.set(this,"searchError","Not Found")},determinePOIs:function(){var t;for(this.pointsOfInterest.splice(0),t=0;t<this.availablePOIs.length;t++)this.poiNamed(this.availablePOIs[t])&&this.pointsOfInterest.push(this.availablePOIs[t])},centerView:function(t){var e,n,i;t&&(n=t.y/100*this.image.height,e=t.x/100*this.image.width,n-=(i=this.getViewport()).height/2,e-=i.width/2,this.apply({left:-1*e,top:-1*n}))},getGeneratedClass:function(){return e[this.state.generate_location]},idFromName:function(t){return"location:"+this.state.generate_location+":"+t.toLowerCase().replace(/[^0-9a-zA-Z_]+/g,"")},generateLocationNoun:function(t,e){var n={_type:"location"};n.name=this.state.generate_location_name,n.label=this.state.generate_location_name,n.id=this.idFromName(n.name),n.icon=this.getGeneratedClass(),n.location=this.location.id,n.type=[this.state.generate_location],n.x=t,n.y=e,n.master_note="Generated @"+(new Date).toString(),this.universe.indexes.location.index[n.id]?console.warn("Noun Already Exists: "+n.id):this.universe.send("modify:location",n)},clearSearch:function(){Vue.set(this,"focusedLocation",null),Vue.set(this.state,"search",""),Vue.set(this,"searchError",""),this.search_criteria.splice(0)},togglePOIFiltering:function(){Vue.set(this.state,"poiFiltering",!this.state.poiFiltering),this.filterPOIs()},filterPOIs:function(t){var e;if(t!==this.searchPrevious&&(Vue.set(this,"focusedLocation",null),Vue.set(this,"searchPrevious",t),this.search_criteria.splice(0),t))for(t=t.toLowerCase().split(" "),this.searchError&&Vue.set(this,"searchError","");t.length;)(e=t.pop().trim())&&this.search_criteria.push(e);this.determinePOIs()},testSearchCriteria:function(t,e){var n;if(e&&e.length){if(!t)return!1;for(n=0;n<e.length;n++)if(-1===t.indexOf(e[n]))return!1}return!0},toggleLegend:function(){Vue.set(this,"legendOpen",!this.legendOpen)},toggleMenu:function(){Vue.set(this,"menuOpen",!this.menuOpen)},toggleLocale:function(t){Vue.set(this.state.hidden_legend,t.id,!this.state.hidden_legend[t.id]),this.redrawPaths()},processAction:function(t,e){var n;switch(t.action){case"zoomin":this.zoomInOne();break;case"zoomout":this.zoomOutOne();break;case"markings":Vue.set(this.state,"markers",!this.state.markers);break;case"labels":Vue.set(this.state,"labels",!this.state.labels),this.redrawPaths();break;case"follow":Vue.set(this.state,"follow",!this.state.follow);break;case"reset":this.resetViewport();break;case"up":this.location.location&&(n=this.universe.indexes.location.index[this.location.location])&&(n.has_path?n.location&&this.$router.push("/map/"+n.location):this.$router.push("/map/"+n.id));break;case"fullscreen":Vue.set(this.state,"fullscreen",!this.state.fullscreen)}},openActions:function(t){var e,n,i,r=t.offsetX,s=t.offsetY;if((e=t.target.getAttribute("data-id")||t.target.parentNode.getAttribute("data-id"))&&(e=this.universe.index.index[e])&&e.x&&e.y&&(r=this.image.width*e.x/100,s=this.image.height*e.y/100),t.ctrlKey)this.appendPath(r/this.image.width*100,s/this.image.height*100);else if(t.shiftKey)this.setNamePoint(r/this.image.width*100,s/this.image.height*100);else{for(this.localeInfo.id=void 0,i=0;i<this.locales.length;i++)(n=this.locales[i]).contained&&(e=this.availableLocales[n.id])&&e.isPointInPath(r,s)&&(Vue.set(this.actions,"header",n.name),this.localeInfo.location=n,this.localeInfo.text=n.name,this.localeInfo.id=n.id);this.localeInfo.id&&!this.localeInfo.shown?(this.actions.options.unshift(this.localeInfo),this.localeInfo.shown=!0):!this.localeInfo.id&&this.localeInfo.shown&&(Vue.set(this.actions,"header","Location"),this.actions.options.shift(),this.localeInfo.shown=!1),Vue.set(this.actions,"x",r),Vue.set(this.actions,"y",s),Vue.set(this.actions,"open",!0),Vue.set(this,"action",null),setTimeout(()=>{$(this.$el).find("#viewgen").focus()})}},closeActions:function(){Vue.set(this.actions,"open",!1),Vue.set(this,"action",null)},getActionMenuStyle:function(){return"left: "+this.actions.x+"px; top: "+this.actions.y+"px;"},fire:function(e,i){var s,a;switch(e.event){case"set-crosshair":this.coordinates.push({id:"cross:"+t+++":"+Date.now(),x:this.actions.x/this.image.width*100,y:this.actions.y/this.image.height*100,standalone:this.state.crosshairing.state,pathed:this.state.pathing.state,color:e.color}),this.location.commit({coordinates:this.coordinates});break;case"clear-crosshair":for(s=[],a=0;a<this.coordinates.length;a++)this.coordinates[a].color===e.color&&s.push(this.coordinates[a]);s.length&&this.location.commitSubtractions({coordinates:s});break;case"clear-all-crosshair":this.coordinates.length&&this.location.commitSubtractions({coordinates:this.coordinates});break;case"toggle-crosshair":this.state.crosshairing.state?(Vue.set(this.state.crosshairing,"icon","fal fa-crosshairs"),Vue.set(this.state.crosshairing,"text","Crosshairs On"),Vue.set(this.state.crosshairing,"state",!1)):(Vue.set(this.state.crosshairing,"icon","fal fa-location-slash"),Vue.set(this.state.crosshairing,"text","Crosshairs Off"),Vue.set(this.state.crosshairing,"state",!0));break;case"toggle-pathing":this.state.pathing.state?(Vue.set(this.state.pathing,"icon","fad fa-chart-scatter rs-secondary-transparent"),Vue.set(this.state.pathing,"text","Point Path Off"),Vue.set(this.state.pathing,"state",!1)):(Vue.set(this.state.pathing,"icon","fad fa-chart-network rs-secondary-transparent"),Vue.set(this.state.pathing,"text","Point Path On"),Vue.set(this.state.pathing,"state",!0));break;case"set-map":this.location.commit({shown_at:Date.now(),showing:this.image});break;case"set-location":(s=this.universe.index.index[this.state.alter])&&this.player.master&&s.commit({location:this.location.id,y:this.actions.y/this.image.height*100,x:this.actions.x/this.image.width*100});break;case"add-point":this.appendPath(this.actions.x/this.image.width*100,this.actions.y/this.image.height*100);break;case"set-name-point":this.setNamePoint(this.actions.x/this.image.width*100,this.actions.y/this.image.height*100);break;case"set-current":this.player.master&&this.universe.send("control",{control:"page",url:"/map/"+this.location.id,condition:{hash:"^#/map"}});break;case"generate-location":this.player.master&&this.generateLocationNoun(this.actions.x/this.image.width*100,this.actions.y/this.image.height*100);break;case"set-mark":return this.action==n?Vue.set(this,"action",null):Vue.set(this,"action",n),null;case"clear-mark":return this.action==r?Vue.set(this,"action",null):Vue.set(this,"action",r),null;case"set-measurement":var o,l={},c={};l.x=this.state.measuring[this.location.id][0].x*this.image.width,l.y=this.state.measuring[this.location.id][0].y*this.image.height,c.x=this.state.measuring[this.location.id][1].x*this.image.width,c.y=this.state.measuring[this.location.id][1].y*this.image.height,o=rsSystem.math.distance.points2D(l,c)/(1+.1*this.state.image.zoom),o=Math.floor(o+.5),o=this.state.distance*(rsSystem.math.distance.convert[this.state.distance_unit]||1)/o,isNaN(o)||this.location.commit({map_distance:o});break;case"clear-measuring":this.state.measuring[this.location.id]&&(Vue.set(this,"totalLength",0),Vue.set(this,"totalTime",0),this.state.measuring[this.location.id].splice(0),this.renderMeasurements(),this.buildMenu());break;case"measure-line":this.state.measuring[this.location.id]||Vue.set(this.state.measuring,this.location.id,[]),this.state.measuring[this.location.id].push({x:this.actions.x/this.image.width,y:this.actions.y/this.image.height}),1===this.state.measuring[this.location.id].length&&this.buildMenu();break;case"info-key":this.showInfo(e.location)}Vue.set(this,"action",null),this.redrawPaths(),this.closeActions()},appendPath:function(t,e){var n;this.state.path_fill&&(n=this.universe.indexes.location.index[this.state.path_fill])&&this.player.master&&n.appendPath(t,e)},setNamePoint:function(t,e){var n;this.state.path_fill&&(n=this.universe.indexes.location.index[this.state.path_fill])&&this.player.master&&n.commit({x:t,y:e})},dismissCoordinate:function(t){if(this.player.master){var e=this.coordinates.indexOf(t);-1!==e&&(this.coordinates.splice(e,1),this.location.commit({coordinates:this.coordinates}))}},resetViewport:function(){Object.assign(this.image,this.original);var t=this.getViewport();this.image.zoom=0,this.image.left=t.width/2-this.image.width/2,this.image.top=t.height/2-this.image.height/2,this.apply(this.image)},getViewport:function(){return{height:this.element.outerHeight(),width:this.element.outerWidth()}},getDimensions:function(t){var e=new Image;e.onload=(()=>{this.image.height=e.height,this.image.width=e.width,this.image.ratio=e.width/e.height,Object.assign(this.original,this.image),Vue.set(this,"ready",!0),Vue.set(this,"parchment",this.element.find(".parchment")),this.apply(this.image)}),e.src=t},clicking:function(t){},down:function(t){switch(t.button){case 0:this.isDragging=!0,this.dragX=t.pageX,this.dragY=t.pageY}},up:function(t){this.isDragging=!1},out:function(t){t.fromElement.attributes.onexit&&"true"===t.fromElement.attributes.onexit.value&&(this.isDragging=!1)},panning:function(t){},dragging:function(t){if(this.isDragging){var e=this.parchment.css("left")||"0px",n=this.parchment.css("top")||"0px",i=this.dragX-t.pageX,r=this.dragY-t.pageY;e=parseInt(e.replace("px","")),n=parseInt(n.replace("px","")),e-=i,n-=r,this.apply({left:e,top:n}),this.dragX=t.pageX,this.dragY=t.pageY}},getCenter:function(){var t,e,n=this.getViewport(),i=n.height/2,r=n.width/2;return t=this.image.left-r,e=this.image.top-i,{x:-1*(t/this.image.width*100).toFixed(3),y:-1*(e/this.image.height*100).toFixed(3),left:t,top:e}},zoom:function(t){if(10>t&&t>-10){var e,n,i=this.original.height*(1+.1*t),r=this.original.width*(1+.1*t),s=this.getViewport(),a=s.height/2,o=s.width/2;n=(this.image.top-a)/this.image.height,e=(this.image.left-o)/this.image.width,n*=i,e*=r,n+=a,e+=o,this.apply({height:i,width:r,zoom:t,left:e,top:n})}},pan:function(t){var e,n,i=this.parchment.css("left")||"0px",r=this.parchment.css("top")||"0px";i=parseInt(i.replace("px","")),r=parseInt(r.replace("px","")),this.isDragging?(e=this.dragX-t.deltaX,n=this.dragY-t.deltaY):(this.isDragging=!0,e=t.deltaX,n=t.deltaY),i-=e,r-=n,t.isFinal?this.isDragging=!1:(this.dragX=t.deltaX,this.dragY=t.deltaY),this.apply({left:i,top:r})},wheeling:function(t){t.deltaY<0?this.zoomInOne():t.deltaY>0&&this.zoomOutOne()},zoomOutOne:function(){this.zoom(this.image.zoom-1)},zoomInOne:function(){this.zoom(this.image.zoom+1)},apply:function(t){if(this.parchment&&this.parchment.length){if(void 0===t.height&&(t.height=this.image.height),void 0===t.width&&(t.width=this.image.width),void 0===t.left&&(t.left=this.image.left),void 0===t.top&&(t.top=this.image.top),void 0===t.zoom&&void 0===this.image.zoom&&(t.zoom=0),10>t.zoom&&t.zoom>-10&&(this.image.height=this.original.height*(1+.1*t.zoom),this.image.width=this.original.width*(1+.1*t.zoom),Vue.set(this,"scaledSize",this.baseFontSize+t.zoom)),void 0!==t.zoom&&this.locales&&this.locales.length&&(this.image._lastzoom!==t.zoom||this.image._lastlocation!==this.location.id)){this.image._lastlocation=this.location.id,this.image._lastzoom=t.zoom;for(var e=0;e<this.locales.length;e++)this.availableCanvases[this.locales[e].id]&&(this.availableCanvases[this.locales[e].id].height=t.height,this.availableCanvases[this.locales[e].id].width=t.width);Object.assign(this.image,t),this.redrawPaths()}else this.image._lastlocation!==this.location.id&&(this.image._lastlocation=this.location.id),this.image._lastzoom!==t.zoom&&(this.image._lastzoom=t.zoom),Object.assign(this.image,t);this.parchment.css({height:t.height+"px",width:t.width+"px",left:t.left+"px",top:t.top+"px"}),this.saveStorage(this.storageKeyID,this.state)}},redrawPaths:function(){var t,e,n;for(n=0;n<this.locales.length;n++)(e=this.locales[n]).location===this.location.id&&e.has_path&&(this.availableLocales[e.id]&&this.availableLocales[e.id].parentNode||(t=$("[data-id='locale:"+e.id+"']")).length&&(this.availableLocales[e.id]=t[0].getContext("2d"),this.availableCanvases[e.id]=t[0],this.availableCanvases[e.id].height=this.image.height,this.availableCanvases[e.id].width=this.image.width),this.availableLocales[e.id]&&(this.availableLocales[e.id].clearRect(0,0,this.availableCanvases[e.id].width,this.availableCanvases[e.id].height),this.drawPath(this.availableLocales[e.id],e)));this.renderMeasurements()},drawPath:function(t,e){if(e&&e.has_path&&!this.state.hidden_legend[e.id]){var n,i,r,s=[];if(e.pathed)for(r=0;r<e.pathing.length;r++)(n=this.universe.indexes.location.index[e.pathing[r]])&&n.location===this.location.id&&(i=[n.x/100*this.image.width,n.y/100*this.image.height],s.push(i));else if(e.values&&e.values.length)for(r=0;r<e.values.length;r++)i=[e.values[r][0]*this.image.width,e.values[r][1]*this.image.height],s.push(i);if(s.length)return this.renderPath(t,e,s),t}return null},renderPath:function(t,e,n){var i,r,s;for(t.locationID=e.id,t.strokeStyle=e.color||"#FFFFFF",t.lineWidth=e.thickness,void 0!==e.opacity&&(t.globalAlpha=e.opacity),t.beginPath(),t.moveTo(n[0][0],n[0][1]),s=1;s<n.length;s++)e.curved?(i=(n[s-1][0]+n[s][0])/2,r=(n[s-1][1]+n[s][1])/2,t.quadraticCurveTo(i,r,n[s][0],n[s][1])):t.lineTo(n[s][0],n[s][1]);if(e.contained){for(t.closePath(),t.stroke(),t.fillStyle=e.fill_color||e.color||"#FFFFFF",void 0!==e.fill_opacity&&(t.globalAlpha=e.fill_opacity),t.beginPath(),t.moveTo(n[0][0],n[0][1]),s=1;s<n.length;s++)e.curved?(i=(n[s-1][0]+n[s][0])/2,r=(n[s-1][1]+n[s][1])/2,t.quadraticCurveTo(i,r,n[s][0],n[s][1])):t.lineTo(n[s][0],n[s][1]);t.closePath(),t.fill(),e.render_name&&void 0!==e._x&&void 0!==e._y&&(t.fillStyle=e.label_color||e.color||"#FFFFFF",t.font="bold "+(12+this.state.image.zoom)+"px Arial",t.shadowColor=e.label_shadow_color||"rgba(0, 0, 0, .4)",t.shadowBlur=e.label_shadow_blur||3,t.globalAlpha=e.label_opacity||1,t.shadowOffsetX=0,t.shadowOffsetY=0,t.fillText(e.label,e._x*this.image.width,e._y*this.image.height))}else t.stroke();return t},receiveMeasurementPoint:function(t){if(t&&t.x&&t.y){this.image.zoom;var e=t.x/100,n=t.y/100;this.state.measuring[this.location.id]||Vue.set(this.state.measuring,this.location.id,[]),this.state.measuring[this.location.id].push({x:e,y:n}),this.renderMeasurements(),1===this.state.measuring[this.location.id].length&&this.buildMenu()}},renderMeasurements:function(){var t,e,n,i,r,s,a,o,l,c,u,d,p,h,f,m,v=0,g=0;if(this.measurementCanvas||(t=$("#measuring"))&&t[0]&&Vue.set(this,"measurementCanvas",t[0]),this.state.view_party&&(n=this.universe.indexes.party.index[this.state.view_party]),t=this.measurementCanvas){if(t.getContext("2d").clearRect(0,0,t.width,t.height),t.height=this.image.height,t.width=this.image.width,t=t.getContext("2d"),Vue.set(this,"initializing",!1),this.state.measuring[this.location.id]&&this.state.measuring[this.location.id].length){for(o=[],t.clearRect(0,0,t.width,t.height),t.font=14+this.state.image.zoom+"px serif",t.strokeStyle="#FFFFFF",t.lineWidth=2,t.globalAlpha=.7,t.fillStyle="#FFFFFF",r=1+.1*this.state.image.zoom,t.beginPath(),l=this.state.measuring[this.location.id][0].x*this.image.width,c=this.state.measuring[this.location.id][0].y*this.image.height,t.moveTo(l,c),o.push([l,c]),f=1;f<this.state.measuring[this.location.id].length;f++)p=l+((u=this.state.measuring[this.location.id][f].x*this.image.width)-l)/2,h=c+((d=this.state.measuring[this.location.id][f].y*this.image.height)-c)/2,t.lineTo(u,d),o.push([u,d]),this.location.map_distance&&(i=rsSystem.math.distance.points2D(l,c,u,d)/r,i=Math.floor(i+.5),i=this.location.map_distance*i,a=rsSystem.math.distance.display(rsSystem.math.distance.reduceMeters(i),"",["pc","ly","km"]),v+=i,n&&n.speed&&(g+=s=i/n.speed,e="",(s=rsSystem.math.time.reduceSeconds(s)).Y&&(e+="$Yy "),s.M&&(e+="$Mm "),s.w&&(e+="$ww "),s.d&&(e+="$dd"),a+=" @"+rsSystem.math.time.display(s,e.trim())),t.fillText(a,p,h)),l=u,c=d;for(t.stroke(),t.strokeStyle="#FF2121",t.beginPath(),t.arc(o[0][0],o[0][1],t.lineWidth,0,rsSystem.math.distance.pi2),t.stroke(),t.strokeStyle="#FFFFFF",f=1;f<o.length;f++)t.beginPath(),t.arc(o[f][0],o[f][1],t.lineWidth,0,rsSystem.math.distance.pi2),t.stroke();v?Vue.set(this,"totalLength",rsSystem.math.distance.display(rsSystem.math.distance.reduceMeters(v),"",["pc","ly","km"])):Vue.set(this,"totalLength",null),g?(e="",(s=rsSystem.math.time.reduceSeconds(g)).Y&&(e+="$Yy "),s.M&&(e+="$Mm "),s.w&&(e+="$ww "),s.d&&(e+="$dd"),Vue.set(this,"totalTime",rsSystem.math.time.display(s,e.trim()))):Vue.set(this,"totalTime",null)}if(this.coordinates&&this.coordinates.length){for(o={},f=0;f<this.coordinates.length;f++)this.coordinates[f].pathed&&(o[this.coordinates[f].color]||(o[this.coordinates[f].color]=[]),o[this.coordinates[f].color].push({x:this.coordinates[f].x/100*this.image.width,y:this.coordinates[f].y/100*this.image.height}));for(i=Object.keys(o),f=0;f<i.length;f++){for(t.strokeStyle=i[f],t.lineWidth=2,t.beginPath(),t.moveTo(o[i[f]][0].x,o[i[f]][0].y),m=1;m<o[i[f]].length;m++)t.lineTo(o[i[f]][m].x,o[i[f]][m].y);t.stroke()}}}},elementVisible:function(t,e){if(t.template||t.hidden||t.obscured&&!this.player.master)return!1;t.must_know&&this.player.master},localeVisible:function(t){if(!this.elementVisible(t))return!1},poiStyling:function(t){if(!t)return"";var e,n,i="";if(this.search_criteria.length)if(t._search){for(e=!0,n=0;n<this.search_criteria.length;n++)if(-1===t._search.indexOf(this.search_criteria[n])){i+=" search-hidden",e=!1;break}e&&(i+=" search-found")}else i+=" search-hidden";return this.focusedLocation===t.id&&(i+=" search-found poi-focused"),t.no_border?i+=" no-border":i+=" map-border",i},poiNamed:function(t){return!(t.has_path&&!t.show_name)&&this.poiVisible(t)},poiVisible:function(t){var e,n;if(t.template||void 0===t.x||void 0===t.y||null===t.x||null===t.y)return!1;if(t.must_know&&(!this.player.master||"master"!==this.state.master_view)&&(!this.viewingEntity||!this.viewingEntity.knowsOf(t)))return!1;if(this.state.poiFiltering&&this.search_criteria.length){if(!t._search)return!1;for(n=0;n<this.search_criteria.length;n++)if(-1===t._search.indexOf(this.search_criteria[n]))return!1}return!(!this.player.master||"master"!==this.state.master_view)||!(t.hidden||t.obscured&&!this.player.master)&&(!t.required_knowledge||!(!(e=this.universe.nouns.entity[this.player.entity])||!(e=this.universe.nouns.knowledge[e.knowledge]))&&!!e[t.knowledge])},renderState:function(){var t="";return this.state.fullscreen&&(t+=" fullscreen"),t},poiClass:function(t){return t.class||t.icon},poiMenu:function(t){Vue.set(this,"focusedLocation",t.id),rsSystem.EventBus.$emit("display-info",t)},minorUpdate:function(){this.$forceUpdate()},submenuClasses:function(){return this.action&&this.action.options?"open":"close"},buildMenu:function(){this.actions.options.splice(0),this.player.master&&(this.localeInfo.shown&&this.actions.options.push(this.localeInfo),this.actions.options.push({icon:"fas fa-map",event:"set-map",text:"Set Location View"}),this.actions.options.push({icon:"fas fa-map-marked",event:"set-current",text:"Show Map"}),this.actions.options.push({icon:"fas fa-map-marker-alt",event:"set-mark",text:"Set Mark"}),this.actions.options.push({icon:"fas fa-map-marker-alt-slash",event:"clear-mark",text:"Clear Marks"}),this.actions.options.push(this.state.crosshairing),this.actions.options.push(this.state.pathing),this.actions.options.push(this.takeMeasurements),this.state.measuring[this.location.id]&&this.state.measuring[this.location.id].length&&this.actions.options.push({icon:"far fa-compass-slash",event:"clear-measuring",text:"Clear Measuring"}),this.actions.options.push({icon:"fas fa-chevron-double-right",event:"set-location",text:"Set Location"}))},update:function(t){var e,n,r,s,a;if(!this.location.image||this.sourceImageNoun&&this.sourceImageNoun.id===this.location.image||!(n=this.universe.nouns.image[this.location.image])?n=this.sourceImageNoun:(this.sourceImageNoun&&this.sourceImageNoun.$off("modified",this.update),Vue.set(this,"sourceImageNoun",n),this.sourceImageNoun.$on("modified",this.update)),!this.location.background||this.backgroundImageNoun&&this.backgroundImageNoun.id===this.location.background||!(e=this.universe.nouns.image[this.location.background])?e=this.backgroundImageNoun:(this.backgroundImageNoun&&this.backgroundImageNoun.$off("modified",this.update),Vue.set(this,"backgroundImageNoun",e),this.backgroundImageNoun.$on("modified",this.update)),n&&n.delayed_data&&n.retrieve(),e&&e.delayed_data&&e.retrieve(),n&&n.delayed_data||e&&e.delayed_data||!this.initializing&&t&&("location"!==t.type&&"entity"!==t.type&&"party"!==t.type||!t.modification||void 0===t.modification.x&&void 0===t.modification.y&&void 0===t.modification.map_distance)){if(t&&t.modification&&void 0!==t.modification.coordinates){if(this.coordinates.splice(0),this.location.coordinates&&this.location.coordinates.length)for(a=0;a<this.location.coordinates.length;a++)this.location.coordinates[a]&&this.coordinates.push(this.location.coordinates[a]);this.renderMeasurements()}}else{if(this.player.master&&this.buildMenu(),this.coordinates.splice(0),this.location.coordinates&&this.location.coordinates.length)for(a=0;a<this.location.coordinates.length;a++)this.location.coordinates[a]&&this.coordinates.push(this.location.coordinates[a]);for(this.availablePOIs.splice(0),this.locales.splice(0),a=0;a<this.universe.indexes.location.listing.length;a++)((r=this.universe.indexes.location.listing[a]).location===this.location.id||(s=this.universe.indexes.location.index[r.location])&&s.location===this.location.id&&s.has_path)&&(this.availablePOIs.push(r),r.has_path&&this.locales.push(r));for(a=0;a<this.universe.indexes.entity.listing.length;a++)(r=this.universe.indexes.entity.listing[a]).location===this.location.id&&this.availablePOIs.push(r);for(this.parties.splice(0),a=0;a<this.universe.indexes.party.listing.length;a++)(r=this.universe.indexes.party.listing[a]).active&&(this.parties.push(r),r.location===this.location.id&&this.availablePOIs.push(r));n?(Vue.set(this,"ready",!1),n.linked?Vue.set(this,"sourceImage",n.url):Vue.set(this,"sourceImage",n.data),this.getDimensions(this.sourceImage)):this.location.viewed!==this.sourceImage&&(Vue.set(this,"ready",!1),Vue.set(this,"sourceImage",this.location.viewed),this.getDimensions(this.location.viewed)),e&&(e.linked?Vue.set(this,"backgroundImage",e.url):Vue.set(this,"backgroundImage",e.data)),this.state.follow&&this.location.showing&&this.location.shown_at&&this.state.viewed_at<this.location.shown_at&&(Vue.set(this.state,"viewed_at",this.location.shown_at),Object.assign(this.image,this.location.showing),this.apply(this.image)),this.determinePOIs(),this.$forceUpdate(),this.redrawPaths()}Vue.set(i,"text","All "+this.coordinates.length+" Marks")}},beforeDestroy:function(){rsSystem.EventBus.$off("measure-point",this.receiveMeasurementPoint),rsSystem.EventBus.$off("info:closed",this.clearSearch),rsSystem.EventBus.$off("copied-id",this.setMenuID),this.universe.$off("universe:modified",this.update),this.universe.$off("model:modified",this.update),this.location&&this.location.$off("modified",this.update)},template:Vue.templified("components/viewer.html")})}(),rsSystem.component("rsWidgetConfigure",{inherit:!0,props:{universe:{required:!0,type:Object},settings:{type:Object},contents:{type:Object},state:{required:!1,type:Object}},mounted:function(){rsSystem.register(this)},data:function(){return{}},methods:{},template:Vue.templified("components/widget/configure.html")}),rsSystem.component("rsContainer",{inherit:!0,mixins:[rsSystem.components.StorageManager],props:{universe:{required:!0,type:Object},entity:{required:!1,type:Object},user:{required:!1,type:Object},contents:{required:!0,type:Object},index:{type:Number}},data:function(){var t={};return t.storageID="_rs_containerComponentKey"+(this.contents.sid||this.contents.id||this.contents._sourced),this.entity&&(t.storageID+=this.entity.id),t.state=this.loadStorage(t.storageID,{closed:!1}),t},watch:{state:{deep:!0,handler:function(t){this.saveStorage(this.storageID,this.state)}}},mounted:function(){rsSystem.register(this),this.$el?this.state.configuring&&(this.state.closed?this.$el.classList.add("configuring"):Vue.set(this.state,"configuring",!1)):console.error("no el")},methods:{showName:function(){return this.entity&&0===this.index},getClasses:function(){var t="";return this.borderColor&&(t+=" rs-border one rsbd-"+this.borderColor),t.trim()},toggle:function(){this.$el?(this.state.closed?(Vue.set(this.state,"configuring",!1),this.$el.classList.remove("configuring"),this.$el.classList.remove("collapsed")):(this.$el.classList.add("collapsed"),Vue.set(this.state,"configuring",!1)),Vue.set(this.state,"closed",!this.state.closed)):console.error("Can't Find Container")},config:function(){this.$el?(this.state.configuring?this.$el.classList.remove("configuring"):this.$el.classList.add("configuring"),Vue.set(this.state,"configuring",!this.state.configuring)):console.error("Can't Find Container")},editSettings:function(){},closeSettings:function(){}},render:function(t){var e,n,i,r,s=[],a={};if(this.contents.enabled&&this.contents.declaration&&rsSystem.components[this.contents.declaration]){if(this.contents.state)for(i=Object.keys(this.contents.state),r=0;r<i.length;r++)Vue.set(this.state,i[r],this.contents.state[i[r]]);if(this.state&&this.state.filter&&(null===this.state.filter.null||void 0===this.state.filter.null)&&(this.state.filter.null=""),this.contents&&this.contents.defaults)for(i=Object.keys(this.contents.defaults),r=0;r<i.length;r++)void 0===this.state[i[r]]&&Vue.set(this.state,i[r],this.contents.defaults[i[r]]);(n={}).props={},n.props.settings=this.contents.settings,n.props.universe=this.universe,n.props.contents=this.contents,n.props.entity=this.entity,n.props.index=this.index,n.props.state=this.state,s.push(t("rs-widget-configure",n)),n.on={},n.on.toggle=this.toggle,n.on.config=this.config,s.push(t("rs-widget-control",n)),(n={}).props={},n.props.storage_id=this.storageID,n.props.universe=this.universe,n.props.character=this.entity,n.props.entity=this.entity,n.props.sid=this.storageID,n.props.index=this.index,n.props.state=this.state,n.props.user=this.user,n.class={},n.class["rs-containment"]=!0,s.push(t(this.contents.declaration,n))}else s.push(t("div"));return a["rs-component rs-container"]=!0,a[this.getClasses()]=!0,e=[t("div",{class:a},s)],t("div",{class:{"rs-component rs-widget":!0,sticky:!!this.state.sticky_widget,collapsed:this.state.closed}},[e])}}),rsSystem.component("rsWidgetControl",{inherit:!0,props:{universe:{required:!0,type:Object},settings:{type:Object},index:{type:Number},record:{type:Object},entity:{type:Object},contents:{type:Object},state:{required:!1,type:Object}},mounted:function(){rsSystem.register(this)},data:function(){return{}},methods:{showHeader:function(){return this.state.showHeader},showName:function(){return this.state.showName||0===this.index&&(this.entity||this.record)},shownName:function(){return this.entity?this.entity.name:this.record?this.record.name:void 0},getClasses:function(){var t="";return this.borderColor&&(t+=" rs-border one rsbd-"+this.borderColor),t.trim()},toggle:function(){this.$emit("toggle")},config:function(){this.$emit("config")}},template:Vue.templified("components/widget.html")}),rsSystem.component("RSCorePage",{inherit:!0,mixins:[rsSystem.components.StorageManager],props:{universe:{required:!0,type:Object},user:{required:!0,type:Object}},computed:{player:function(){return this.universe.nouns.player[this.user.id]}},watch:{},methods:{}}),rsSystem.component("RSAbout",{inherit:!0,mixins:[],mounted:function(){rsSystem.register(this)},data:function(){return{}},methods:{},template:Vue.templified("pages/about.html")}),rsSystem.component("RSAccount",{inherit:!0,mixins:[rsSystem.components.RSShowdown],props:["universe","user"],data:function(){var t={};return t.player=this.universe.indexes.player.index[this.user.id],t.linked_discord=null,t.mdDescription=null,t.description=null,t.username=null,t.entity=null,t.email=null,t.name=null,t.editting={},t.labeling={},t.modeling={},t.labeling.linked_discord="Discord",t.labeling.email="E-mail",t.fields=["name","passcode","email","linked_discord"],t.toggles=["allow_scripting"],t.title={hide_contributed:"Hide Contribution Toggle in Record Information",allow_scripting:"Allow Scripted HTML"},t},mounted:function(){rsSystem.register(this),this.player.$on("modified",this.update),this.update()},methods:{getFieldValue:function(t){return"passcode"===t?"[ Edit to set new passcode ]":this.modeling[t]},editField:function(t){Vue.set(this.editting,t,!0),"..."===this.modeling[t]&&Vue.set(this.modeling,t,this.player[t]),setTimeout(function(){(t=document.getElementById("fieldinput-"+t))&&t.focus()},0)},toggle:function(t){Vue.set(this.modeling,t,null);var e={};e[t]=!this.player[t],this.player.commit(e)},sendField:function(t,e){var n;e=e||this.modeling[t],Vue.set(this.editting,t,!1),Vue.set(this.modeling,t,null),this.player[t]!=e&&("passcode"===t&&e?(Vue.set(this.modeling,t,""),e=e.sha256(),(n=localStorage.getItem("_rs_connectComponentKey"))&&((n=JSON.parse(n)).passcode=e,localStorage.setItem("_rs_connectComponentKey",JSON.stringify(n)))):Vue.set(this.modeling,t,"..."),(n={})[t]=e,this.player.commit(n))},update:function(){Vue.set(this.modeling,"entity",this.universe.indexes.entity.index[this.player.entity]),Vue.set(this.modeling,"mdDescription",this.rsshowdown(this.player.description,this.modeling.entity)),Vue.set(this.modeling,"linked_discord",this.player.linked_discord),Vue.set(this.modeling,"description",this.player.description),Vue.set(this.modeling,"username",this.player.username),Vue.set(this.modeling,"email",this.player.email),Vue.set(this.modeling,"name",this.player.name),Vue.set(this.modeling,"allow_scripting",this.player.allow_scripting)}},beforeDestroy:function(){this.player.$off("modified",this.update)},template:Vue.templified("pages/account.html")}),rsSystem.component("RSHome",{inherit:!0,mixins:[],props:{activeUniverse:{type:Object}},data:function(){var t={messageHeading:"",messageClass:"",messageIcon:"",message:"",state:0,universe:null,user:null};return t},mounted:function(){rsSystem.register(this)},methods:{receiveMessage:function(t){t?(Vue.set(this,"messageClass",t.classes||""),Vue.set(this,"messageIcon",t.icon),Vue.set(this,"messageHeading",t.heading),Vue.set(this,"message",t.text||t)):Vue.set(this,"message",null)},connect:function(t){""!==this.$route.hash&&this.universe&&this.universe.loggedOut?this.universe.loggedOut=!1:(Vue.set(this,"universe",new RSUniverse({})),Vue.set(this,"user",t.user),Vue.set(this,"state",1),this.universe.$on("disconnected",()=>{Vue.set(this,"messageClass",""),Vue.set(this,"messageIcon","fas fa-info-circle rs-light-blue"),Vue.set(this,"messageHeading","Disconnected"),Vue.set(this,"message","Disconnected from the server"),Vue.set(this,"state",0)}),this.universe.$on("badlogin",()=>{this.universe.loggedOut=!0,Vue.set(this,"messageClass",""),Vue.set(this,"messageIcon","fas fa-exclamation-triangle rs-light-red"),Vue.set(this,"messageHeading","Login Failed"),Vue.set(this,"message","Bad Username or Passcode"),Vue.set(this,"state",0)}),this.universe.$on("initializing",()=>{Vue.set(this,"state",2)}),this.universe.$on("initialized",()=>{Vue.set(this,"state",10)}),this.universe.connect(t.user,t.address))}},template:Vue.templified("pages/home.html")}),rsSystem.component("RSNounControls",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSCorePage,rsSystem.components.RSShowdown],data:function(){var t={infoOptions:{}};return t.infoOptions.noMaster=!0,t.modeling=null,t.description="",t.built={},t},watch:{},mounted:function(){rsSystem.register(this),this.$el.onclick=(t=>{var e=t.srcElement.attributes.getNamedItem("data-id");e&&(e=this.universe.index.index[e.value])&&this.isOwner(e)&&(rsSystem.EventBus.$emit("display-info",e),t.stopPropagation(),t.preventDefault())})},methods:{changeModel:function(t){Vue.set(this,"modeling",t)},rerender:function(){this.$forceUpdate()}},template:Vue.templified("pages/noun/controls.html")}),rsSystem.component("RSSWBase",{inherit:!0,mixins:[rsSystem.components.RSCore],data:function(){var t={entity:null,widgets:[]};return t},watch:{"$route.params.oid":function(t){this.entity.$off("modified",this.update),Vue.set(this,"entity",this.universe.nouns.entity[this.$route.params.oid]),this.entity.$on("modified",this.update),this.update()}},mounted:function(){this.$route.params.oid&&(Vue.set(this,"entity",this.universe.nouns.entity[this.$route.params.oid]),this.entity.$on("modified",this.update)),rsSystem.register(this),this.update()},methods:{update:function(){if(console.warn("Base Update: ",this.entity,this.widgets),this.widgets.splice(0),this.entity){switch(this.entity.widgets&&this.widgets.push.apply(this.widgets,this.entity.widgets),this.entity.classification){case"base":case"building":case"ship":this.widgets.push({declaration:"rsswEntityInside",sid:"entity:inside:"+this.entity.id,enabled:!0})}this.widgets.push({declaration:"rsswEntityHistory",sid:"entity:history:"+this.entity.id,enabled:!0})}console.warn("Updated: ",this.entity,this.widgets)}},beforeDestroy:function(){this.entity.$off("modified",this.update)},template:Vue.templified("pages/rssw/base.html")}),function(){var storageKey="_rs_characterBuilderComponentKey",spaces=/\\s/g,nameSort=function(t,e){return t.name<e.name?-1:t.name>e.name?1:t.id<e.id?-1:t.id>e.id?1:0};rsSystem.component("RSSWCharacterBuilder",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSCorePage],data:function(){var t,e={};for(e.storageKeyID=storageKey,this.cid&&(e.storageKeyID+=":"+this.cid),e.state=this.loadStorage(e.storageKeyID,{}),e.racialNaming=null,e.base={},e.base.species=[],e.base.careers=[],e.base.specializations=[],e.race=null,e.career=null,e.specialization=null,e.choices=[],e.summary={},e.fields={},e.rankSpecializationOptions=[],e.rankedSpecialization=[],e.rankCareerOptions=[],e.rankedCareer=[],e.rankRaceOptions=[],e.rankedRace=[],e.state.species={raw:!0},e.fields.species=["wounds_start","strain_start","xp_start","brawn","agility","intellect","cunning","willpower","pressence"],e.summary.species={wounds_start:"Starting Wounds",strain_start:"Starting Strain",xp_start:"Starting XP",brawn:" Brawn",agility:"Agility",intellect:"Intellect",cunning:"Cunning",willpower:"Willpower",pressence:"Pressence"},e.state.careers={panel_descriptions:!0,raw:!0},e.fields.careers=[],e.summary.careers={},e.building={},e.building.id="character:"+this.user.id+":"+Date.now(),e.checking=!1,e.stage=0,e.base.species.splice(0),t=0;t<this.universe.indexes.race.listing.length;t++)this.universe.indexes.race.listing[t].playable&&e.base.species.push(this.universe.indexes.race.listing[t]);for(e.base.careers.splice(0),t=0;t<this.universe.indexes.archetype.listing.length;t++)"primary"===this.universe.indexes.archetype.listing[t].classification&&this.universe.indexes.archetype.listing[t].playable&&e.base.careers.push(this.universe.indexes.archetype.listing[t]);return e.base.species.sort(nameSort),e.base.careers.sort(nameSort),e},mounted:function(){rsSystem.register(this),this.universe.$on("universe:modified",this.update),this.update()},methods:{back:function(t){void 0===t&&(t=this.stage-1),Vue.set(this,"stage",t)},selected:function(record){var response,skill,keys,x;switch(this.stage){case 0:Vue.set(this,"race",record),Vue.set(this.building,record._type,record.id),this.forward();break;case 1:Vue.set(this,"career",record),this.building[record._class]||Vue.set(this.building,record._class,[]),this.building[record._class].splice(0),this.building[record._class].push(record.id),this.forward();break;case 2:for(Vue.set(this,"specialization",record),this.building.archetype.splice(1),this.building.archetype.push(record.id),this.rankSpecializationOptions.splice(0),this.rankedSpecialization.splice(0),this.rankCareerOptions.splice(0),this.rankedCareer.splice(0),this.rankRaceOptions.splice(0),this.rankedRace.splice(0),keys=Object.keys(this.career),x=0;x<keys.length;x++)keys[x].startsWith("skill_enhanced_")&&(skill=this.universe.indexes.skill.lookup["skill:"+keys[x].substring(15)],skill&&this.rankCareerOptions.push(skill));for(keys=Object.keys(this.specialization),x=0;x<keys.length;x++)keys[x].startsWith("skill_enhanced_")&&(skill=this.universe.indexes.skill.lookup["skill:"+keys[x].substring(15)],skill&&this.rankSpecializationOptions.push(skill));this.race.skills_starting&&this.rankRaceOptions.push.apply(this.rankRaceOptions,this.universe.indexes.skill.translate(this.race.skills_starting)),this.forward();break;case 3:if(1!==this.rankedSpecialization.length||4!==this.rankedCareer.length||this.race.skills_starting_count&&this.rankedRace.length!==this.race.skills_starting_count)return!1;if(skill=[],this.rankedRace.length)for(skill.push("Race"),x=0;x<this.rankedRace.length;x++)skill.push('<li><a class="linked-value" data-id="'+this.rankedRace[x].id+'">'+this.rankedRace[x].name+"</a></li>");for(skill.push("Career"),x=0;x<this.rankedCareer.length;x++)skill.push('<li><a class="linked-value" data-id="'+this.rankedCareer[x].id+'">'+this.rankedCareer[x].name+"</a></li>");for(skill.push("Specialization"),x=0;x<this.rankedSpecialization.length;x++)skill.push('<li><a class="linked-value" data-id="'+this.rankedSpecialization[x].id+'">'+this.rankedSpecialization[x].name+"</a></li>");skill="<ul>"+skill.join("")+"</ul>",this.choices.splice(0),this.choices.push(this.race),this.choices.push({name:"Description",description:this.building.description}),this.choices.push(this.career),this.choices.push(this.specialization),this.choices.push({name:"Starting Ranked Skills",description:skill}),this.choices.push({name:"Motivations",description:this.building.motivations}),this.choices.push({name:"Obligations",description:this.building.obligations}),this.forward();break;case 4:if(this.race.xp_start?this.building.xp=parseInt(this.race.xp_start):this.race.xp_start=0,this.race.wounds_start){switch(typeof this.race.wounds_start){case"string":this.building.wounds_max=parseInt(eval(this.race.wounds_start.replace("starting.brawn",this.race.brawn)));break;case"number":this.building.wounds_max=this.race.wounds_start}this.building.wounds=this.building.wounds_max}else console.error("No Wounds Calculation?");if(this.race.strain_start){switch(typeof this.race.strain_start){case"string":this.building.strain_max=parseInt(eval(this.race.strain_start.replace("starting.willpower",this.race.willpower)));break;case"number":this.building.strain_max=this.race.strain_start}this.building.strain=this.building.strain_max}else console.error("No Strain Calculation?");for(this.building.defense_melee=0,this.building.defense_range=0,this.building.soak=0,x=0;x<this.rankedRace.length;x++)this.building[this.rankedRace[x].propertyKey]||(this.building[this.rankedRace[x].propertyKey]=0),this.building[this.rankedRace[x].propertyKey]+=1;for(x=0;x<this.rankedCareer.length;x++)this.building[this.rankedCareer[x].propertyKey]||(this.building[this.rankedCareer[x].propertyKey]=0),this.building[this.rankedCareer[x].propertyKey]+=1;for(x=0;x<this.rankedSpecialization.length;x++)this.building[this.rankedSpecialization[x].propertyKey]||(this.building[this.rankedSpecialization[x].propertyKey]=0),this.building[this.rankedSpecialization[x].propertyKey]+=1;response=(()=>{setTimeout(()=>{5===this.stage&&this.universe.nouns.entity[this.building.id]&&(this.universe.nouns.entity[this.building.id].recalculateProperties(),this.universe.nouns.entity[this.building.id].recalculateProperties(),Vue.set(this,"building",this.universe.nouns.entity[this.building.id]),this.building.$on("modified",this.recalculateStart),this.universe.$off("universe:modified",response),this.forward())},0)}),this.universe.$on("universe:modified",response),this.universe.send("create:self",this.building),this.forward();break;case 6:this.building.$off("modified",this.recalculateStart),this.$router.push("/dashboard/character/"+this.building.id)}return!0},forward:function(){switch(this.stage){case 2:this.user.master&&(this.building.id="entity:npc:"+this.idFromName(this.building.name)+":"+Date.now())}Vue.set(this,"stage",this.stage+1),this.update()},reduceName:function(t){return t.toLowerCase().replace(spaces,"")},randomName:function(){this.racialNaming&&Vue.set(this.building,"name",this.racialNaming.corpus[Random.integer(this.racialNaming.corpus.length)].capitalize()+" "+this.racialNaming.corpus[Random.integer(this.racialNaming.corpus.length)].capitalize())},generateName:function(){this.racialNaming&&Vue.set(this.building,"name",this.racialNaming.create().capitalize()+" "+this.racialNaming.create().capitalize())},update:function(){var t;for(this.base.species.splice(0),t=0;t<this.universe.indexes.race.listing.length;t++)this.universe.indexes.race.listing[t].playable&&this.base.species.push(this.universe.indexes.race.listing[t]);for(this.base.careers.splice(0),t=0;t<this.universe.indexes.archetype.listing.length;t++)"primary"===this.universe.indexes.archetype.listing[t].classification&&this.universe.indexes.archetype.listing[t].playable&&this.base.careers.push(this.universe.indexes.archetype.listing[t]);if(this.stage>1&&this.stage<5){for(this.base.specializations.splice(0),t=0;t<this.universe.indexes.archetype.listing.length;t++)"secondary"===this.universe.indexes.archetype.listing[t].classification&&this.universe.indexes.archetype.listing[t].parent===this.building.archetype[0]&&this.base.specializations.push(this.universe.indexes.archetype.listing[t]);Vue.set(this,"racialNaming",this.getRacialNameGenerator(this.building.race))}this.base.species.sort(nameSort),this.base.careers.sort(nameSort),this.base.specializations.sort(nameSort),this.$forceUpdate()},recalculateStart:function(spark){var modifier={},push=!1,buffer;if(6===this.stage&&!this.checking){if(Vue.set(this,"checking",!0),this.building.recalculateProperties(),this.building.wounds_start){switch(typeof this.building.wounds_start){case"string":buffer=Math.floor(eval(this.building.wounds_start.replace("brawn",this.building.brawn)));break;case"number":buffer=this.building.wounds_start}this.building.wounds_max!==buffer&&(modifier.wounds_max=buffer,modifier.wounds=buffer,push=!0)}else console.error("No Wounds Calculation?");if(this.building.strain_start){switch(typeof this.building.strain_start){case"string":buffer=Math.floor(eval(this.building.strain_start.replace("willpower",this.building.willpower)));break;case"number":buffer=this.building.strain_start}this.building.strain_max!==buffer&&(modifier.strain_max=buffer,modifier.strain=buffer,push=!0)}else console.error("No Strain Calculation?")}push&&this.building.commit(modifier),Vue.set(this,"checking",!1)}},beforeDestroy:function(){this.universe.$off("universe:modified",this.update)},template:Vue.templified("pages/rssw/character/builder.html")})}(),rsSystem.component("RSSWCharacter",{inherit:!0,mixins:[rsSystem.components.RSCore],data:function(){var t={additional_characters:[],entity:null,widgets:[]};return t},watch:{"$route.params.oid":function(t){this.entity.$off("modified",this.update),Vue.set(this,"entity",this.universe.nouns.entity[this.$route.params.oid]),this.entity.$on("modified",this.update)}},mounted:function(){this.$route.params.oid&&(Vue.set(this,"entity",this.universe.nouns.entity[this.$route.params.oid]),this.entity.$on("modified",this.update)),rsSystem.register(this),this.update()},methods:{update:function(){var t,e,n,i=[];if(this.$route.query.characters)for(t=this.$route.query.characters.split(","),n=0;n<t.length;n++)(e=this.universe.indexes.entity.lookup[t[n]])&&"character"===e.classification&&this.isOwner(e)&&i.push(e);if(i.length!==this.additional_characters.length)for(this.additional_characters.splice(0),n=0;n<i.length;n++)this.additional_characters.push(i[n]);if(this.widgets.splice(0),this.entity){switch(this.entity.widgets&&this.widgets.push.apply(this.widgets,this.entity.widgets),this.entity.classification){case"base":case"building":case"ship":this.widgets.push({declaration:"rsswEntityInside",sid:"entity:inside:"+this.entity.id,enabled:!0})}this.widgets.push({title:"Character",declaration:"rsswCharacterInfo",sid:"entity:info:"+this.entity.id,enabled:!0}),this.widgets.push({title:"Description",declaration:"rsswEntityDescription",sid:"entity:description:"+this.entity.id,enabled:!0}),this.widgets.push({title:"Journal",declaration:"rsswEntityJournal",sid:"entity:journal:"+this.entity.id,enabled:!0}),this.widgets.push({title:"Vitals",declaration:"rsswCharacterBoard",sid:"entity:board:"+this.entity.id,enabled:!0}),this.widgets.push({title:"Stats",declaration:"rsswCharacterStats",sid:"entity:stats:"+this.entity.id,enabled:!0}),this.widgets.push({title:"Dice",declaration:"rsswDiceBin",sid:"entity:dice:"+this.entity.id,enabled:!0,defaults:{entityRollListener:!0,test:!0},configurations:[{label:"Show Name",property:"showName",type:"checkbox"},{label:"Hide Lables",property:"hideLabels",type:"checkbox"},{label:"Hide Expression",property:"hideExpressions",type:"checkbox"},{label:"Sticky",property:"sticky_widget",type:"checkbox"},{label:"Entity Roller",property:"entityRollListener",type:"checkbox"}]}),this.widgets.push({title:"Weapons",declaration:"rsswEntityWeapons",sid:"entity:weapons:"+this.entity.id,enabled:!0}),this.widgets.push({title:"Equipment",declaration:"rsswEntityEquipment",sid:"entity:equip:"+this.entity.id,enabled:!0,state:{mode:"long"}}),this.widgets.push({title:"Skills",declaration:"rsswCharacterSkills",sid:"entity:skills:"+this.entity.id,enabled:!0,defaults:{emitSkillRoll:!0,infoSkill:!0},configurations:[{label:"Hide Filter",property:"hideFilter",type:"checkbox"},{label:"Hide Names",property:"hideNames",type:"checkbox"},{label:"Hide Leveling",property:"hideLeveling",type:"checkbox"},{label:"Open Info",property:"infoSkill",type:"checkbox"},{label:"Roll on Click",property:"rollSkill",type:"checkbox"},{label:"Send Roll",property:"emitSkillRoll",type:"checkbox"}]}),this.widgets.push({title:"Knowledge",declaration:"rsswEntityKnowledge",sid:"entity:knowledge:"+this.entity.id,enabled:!0}),this.widgets.push({title:"History",declaration:"rsswEntityHistory",sid:"entity:history:"+this.entity.id,enabled:!0})}}},beforeDestroy:function(){this.entity.$off("modified",this.update)},template:Vue.templified("pages/rssw/character.html")}),rsSystem.component("RSSWMasterCombatPage",{inherit:!0,mixins:[rsSystem.components.RSCore],watch:{"$route.params.oid":function(){console.log("New Event?"),Vue.set(this,"event",this.universe.indexes.event.index[this.$route.params.oid])}},data:function(){var t={storageKeyID:"_rssw_combatscreenComponentKey"};return t.state=this.loadStorage(t.storageKeyID,{}),t.state.searching||(t.state.searching={}),t.event=this.universe.indexes.event.index[this.$route.params.oid],t.events=[],t},mounted:function(){rsSystem.register(this),this.universe.$on("universe:modified",this.update),this.update()},methods:{openEvent:function(t){var e="#/combat/"+t.id;location.hash!==e&&(window.location=location.pathname.replace("?","")+e)},isVisible:function(t,e){},update:function(){var t;for(this.events.splice(0),t=0;t<this.universe.indexes.event.listing.length;t++)this.universe.indexes.event.listing[t].active&&"combat"===this.universe.indexes.event.listing[t].category&&this.events.push(this.universe.indexes.event.listing[t]);this.events.sort(this.sortData)}},beforeDestroy:function(){this.universe.$off("universe:modified",this.update)},template:Vue.templified("pages/rssw/combat.html")}),rsSystem.component("RSSWDashboard",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSCore],data:function(){var t={};return t.self=this.universe.nouns.entity[this.universe.nouns.player[this.user.id].entity],t.selectedEntities=[],t.owned=[],t},mounted:function(){this.universe.$on("universe:modified",this.updateEntities),this.universe.$on("model:modified",this.updateEntities),rsSystem.register(this),this.updateEntities()},methods:{canOpenDashboard:function(){return!!this.selectedEntities.length},toggleSelect:function(t){var e=this.selectedEntities.indexOf(t);-1===e?this.selectedEntities.push(t):this.selectedEntities.splice(e,1)},isSelected:function(t){return-1!==this.selectedEntities.indexOf(t)},openDashboard:function(t,e){var n,i=[].concat(this.selectedEntities),r=null;switch(t){case"ship":for(n=0;!r&&n<this.selectedEntities.length;n++)this.selectedEntities[n].entity===this.self.id&&(r=this.selectedEntities[n].id,i.splice(n,1));for(r||(r=this.selectedEntities[0].id,i.splice(0,1)),n=0;n<i.length;n++)i[n]=i[n].id;e?window.open(location.pathname+"#/dashboard/ship/"+r+"?ships="+i.join(","),"dashboard"):window.location=location.pathname+"#/dashboard/ship/"+r+"?ships="+i.join(",");break;case"character":for(n=0;!r&&n<this.selectedEntities.length;n++)this.selectedEntities[n].entity===this.self.id&&(r=this.selectedEntities[n].id,i.splice(n,1));for(r||(r=this.selectedEntities[0].id,i.splice(0,1)),n=0;n<i.length;n++)i[n]=i[n].id;e?window.open(location.pathname+"#/dashboard/character/"+r+"?characters="+i.join(","),"dashboard"):window.location=location.pathname+"#/dashboard/character/"+r+"?characters="+i.join(",")}},updateEntities:function(){var t,e,n,i;for(i=0;i<this.owned.length;i++)this.owned[i].$off("modified",this.updateDisplay);for(t=Object.keys(this.universe.nouns.entity),n=[],i=0;i<t.length;i++)(e=this.universe.nouns.entity[t[i]])&&e.owners&&-1!==e.owners.indexOf(this.player.id)&&n.push(e);Vue.set(this,"self",this.universe.nouns.entity[this.universe.nouns.player[this.user.id].entity]),this.owned.splice(0),this.owned.push.apply(this.owned,n),this.owned.sort(this.sortData)}},beforeDestroy:function(){this.universe.$off("universe:modified",this.updateEntities),this.universe.$off("model:modified",this.updateEntities)},template:Vue.templified("pages/rssw/dashboard.html")}),rsSystem.component("RSSWHangar",{inherit:!0,mixins:[rsSystem.components.RSCore],mounted:function(){rsSystem.register(this)},data:function(){return{}},methods:{},template:Vue.templified("pages/rssw/hangar.html")}),rsSystem.component("RSSWJournal",{inherit:!0,mixins:[rsSystem.components.RSCore],data:function(){return{}},computed:{},mounted:function(){rsSystem.register(this)},methods:{update:function(){}},template:Vue.templified("pages/rssw/journal.html")}),rsSystem.component("RSSWLocality",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSCore],data:function(){var t={currentlyInside:null,activeLocation:null,activeEntity:null,entities:[],events:[],nearBy:[]};return t},mounted:function(){rsSystem.register(this),this.universe.$on("universe:modified:complete",this.update),this.update()},methods:{focusEntity:function(t){Vue.set(this,"activeEntity",t),Vue.set(this,"activeLocation",this.universe.indexes.location.index[this.activeEntity.location]),Vue.set(this,"currentlyInside",this.universe.indexes.entity.index[this.activeEntity.inside]),this.update()},update:function(){var t,e,n,i;for(this.events.splice(0),n=0;n<this.universe.indexes.event.listing.length;n++)if((e=this.universe.indexes.event.listing[n]).active&&"combat"===e.category)for(i=0;i<e.involved.length;i++)if((t=this.universe.indexes.entity.index[e.involved[i]])&&t.owners&&-1!==t.owners.indexOf(this.player.id)){this.events.push(e);break}for(this.nearBy.splice(0),this.activeEntity&&this.activeLocation&&this.activeLocation.locals&&this.activeLocation.locals.length&&this.universe.indexes.entity.translate(this.activeLocation.locals,this.nearBy),this.entities.splice(0),n=0;n<this.universe.indexes.entity.listing.length;n++)(t=this.universe.indexes.entity.listing[n])&&(t.owners&&-1!==t.owners.indexOf(this.player.id)&&this.entities.push(t),t.obscured||this.activeEntity&&t.id===this.activeEntity.id||(this.activeLocation&&this.activeLocation.auto_nearby&&t.location===this.activeLocation.id?this.nearBy.push(t):this.currentlyInside&&this.currentlyInside.id===t.inside&&this.nearBy.push(t)));this.entities.sort(this.sortData)}},beforeDestroy:function(){this.universe.$off("universe:modified:complete",this.update)},template:Vue.templified("pages/rssw/locality.html")}),rsSystem.component("RSSWMap",{inherit:!0,mixins:[rsSystem.components.RSCorePage],props:{},computed:{location:function(){return this.universe.nouns.location[this.$route.params.oid]||this.universe.nouns.location["location:universe"]}},data:function(){return{}},mounted:function(){rsSystem.register(this)},methods:{},template:Vue.templified("pages/rssw/map.html")}),function(){var t=[{icon:"ra ra-bomb-explosion",property:"success",label:"Success"},{icon:"fad fa-jedi",property:"advantage",label:"Advantage"},{icon:"xwm xwing-miniatures-font-epic",property:"triumph",label:"Triumph"},{icon:"fal fa-triangle rot180",property:"failure",label:"Failure"},{icon:"rsswx rsswx-threat",property:"threat",label:"Threat"},{icon:"rsswx rsswx-despair",property:"despair",label:"Despair"},{icon:"fad fa-circle rs-white rs-secondary-black",property:"light",label:"Light"},{icon:"fad fa-circle rs-black rs-secondary-white",property:"dark",label:"Dark"}],e=function(t,e){return t.id<e.id?1:t.id>e.id?-1:0};rsSystem.component("RSSWMasterPage",{inherit:!0,mixins:[rsSystem.components.RSMasterControls,rsSystem.components.RSCore],data:function(){var e,n={};for(n.storageKeyID="_rssw_masterscreenComponentKey",n.state=this.loadStorage(n.storageKeyID,{historyLength:10,search:""}),n.state.searching||(n.state.searching={}),void 0===n.state.constrained&&(n.state.constrained=!0),n.lockMakeNew=!1,n.active_events=[],n.knowledges=[],n.sessions=[],n.events=[],n.skills=[],n.items=[],n.currentSession=null,n.trackSession=null,n.nextSession=null,n.rollProperties=t,n.rollReceiveFlag=!1,n.universeEntities=[],n.eventCategory="",n.maxLength=20,n.history=[],n.rolling={},n.updated="",n.difficulty={},n.difficulty.Blank={difficulty:0},n.difficulty.Easy={difficulty:1},n.difficulty.Average={difficulty:2},n.difficulty.Hard={difficulty:3},n.difficulty.Daunting={difficulty:4},n.difficulty.Formidable={difficulty:5},n.difficulty.Challenge={challenge:1},n.difficulty.Setback={setback:1},n.difficulties=Object.keys(n.difficulty),n.count={},e=0;e<n.difficulties.length;e++)n.count[n.difficulties[e]]=0;return n},mounted:function(){rsSystem.register(this),this.universe.$on("universe:modified",this.update),this.update()},methods:{toggleConstrained:function(){Vue.set(this.state,"constrained",!this.state.constrained)},filteredEntity:function(t){return!this.state.search||t._search&&-1!==t._search.indexOf(this.state.search)||-1!==t.id.indexOf(this.state.search)||-1!==t.name.indexOf(this.state.search)||t.description&&-1!==t.description.indexOf(this.state.search)},filteredSkill:function(t){return!this.state.skill_search||t._search&&t._search.indexOf(-1!==this.state.skill_search.toLowerCase())},setSession:function(t){this.universe.indexes.setting.index["setting:current:session"]&&this.universe.indexes.setting.index["setting:current:session"].commit({value:t})},makeNextSession:function(){for(var t={_type:"session",name:""+this.nextSession,id:""+this.nextSession,date:Date.now()};t.id.length<5;)t.id="0"+t.id;t.id="session:"+t.id,this.universe.send("modify:session",t),Vue.set(this,"lockMakeNew",!0),setTimeout(()=>{this.universe.indexes.setting.index["setting:current:session"]&&this.universe.indexes.setting.index["setting:current:session"].commit({value:t.id}),Vue.set(this,"lockMakeNew",!1)},1e3)},createEvent:function(t){Vue.set(this,"eventCategory",""),this.generateEvent(t)},receiveRoll:function(t){console.log("Receiving Roll: ",t);var e,n=Object.keys(t);for(Vue.set(this,"rollReceiveFlag",!0),this.clearRolling(this.rolling),e=0;e<this.difficulties.length;e++)Vue.set(this.count,this.difficulties[e],0);for(e=0;e<n.length;e++)t[n[e]]&&Vue.set(this.rolling,n[e],t[n[e]])},clearRolling:function(t){var e,n=Object.keys(t);for(this.history.unshift(JSON.parse(JSON.stringify(t))),this.state.historyLength<this.history.length&&this.history.splice(this.state.historyLength),e=0;e<n.length;e++)Vue.delete(t,n[e])},dismissRolled:function(t){var e=this.history.indexOf(t);-1!==e&&this.history.splice(e,1)},clearRolls:function(t){t&&this.clearRolling(),this.history.splice(0)},clearRolls:function(){this.history.splice(0)},rollDifficulty:function(t){var e,n,i,r=this.difficulty[t];if(!isNaN(r.difficulty)&&!this.rollReceiveFlag)for(this.clearRolling(this.rolling),i=0;i<this.difficulties.length;i++)Vue.set(this.count,this.difficulties[i],0);for(this.rollReceiveFlag&&Vue.set(this,"rollReceiveFlag",!1),Vue.set(this.count,t,this.count[t]+1),e=Dice.calculateDiceRoll(r),n=Object.keys(e),i=0;i<n.length;i++)e[n[i]]&&(this.rolling[n[i]]?Vue.set(this.rolling,n[i],this.rolling[n[i]]+e[n[i]]):Vue.set(this.rolling,n[i],e[n[i]]))},isVisible:function(t,e){return!e||!!t._search&&(e=e.toLowerCase(),-1!==t._search.indexOf(e))},update:function(){var t,n,i,r=0;for(this.universe.indexes.setting.index["setting:current:session"]&&(Vue.set(this,"currentSession",this.universe.indexes.session.index[this.universe.indexes.setting.index["setting:current:session"].value]),this.currentSession&&Vue.set(this,"trackSession",this.currentSession.id)),this.sessions.splice(0),i=0;i<this.universe.indexes.session.listing.length;i++)(t=this.universe.indexes.session.listing[i])&&(this.sessions.push(t),t._coreData.name&&t._coreData.name==(n=parseInt(t._coreData.name))&&n>r&&(r=n));for(this.sessions.sort(e),this.skills.splice(0),i=0;i<this.universe.indexes.skill.listing.length;i++)!(n=this.universe.indexes.skill.listing[i])||n.hidden||n.obscured||this.skills.push(n);for(this.skills.sort(this.sortData),this.items.splice(0),i=0;i<this.universe.indexes.item.listing.length;i++)(n=this.universe.indexes.item.listing[i])&&(n.template||n.screen)&&this.items.push(n);for(this.items.sort(this.sortData),this.universeEntities.splice(0),i=0;i<this.universe.indexes.entity.listing.length;i++)(n=this.universe.indexes.entity.listing[i])&&(n.owner||n.owners&&n.owners.length||n.screen)&&this.universeEntities.push(n);for(this.universeEntities.sort(this.sortData),this.knowledges.splice(0),i=0;i<this.universe.indexes.knowledge.listing.length;i++)(n=this.universe.indexes.knowledge.listing[i])&&n.screen&&this.knowledges.push(n);for(this.knowledges.sort(this.sortData),this.active_events.splice(0),this.events.splice(0),i=0;i<this.universe.indexes.event.listing.length;i++)this.universe.indexes.event.listing[i].active?this.active_events.push(this.universe.indexes.event.listing[i]):this.universe.indexes.event.listing[i].screen&&this.events.push(this.universe.indexes.event.listing[i]);Vue.set(this,"nextSession",r+1)}},beforeDestroy:function(){this.universe.$off("universe:modified",this.update)},template:Vue.templified("pages/rssw/master.html")})}(),rsSystem.component("RSSWPartyPage",{inherit:!0,mixins:[rsSystem.components.RSCore],data:function(){var t={linked:null,parties:[]};return t},computed:{record:function(){return this.universe.nouns.entity[this.$route.params.oid]}},watch:{record:function(t){console.warn("Party record Changed"),!this.linked||t&&t.id===this.linked.id||this.linked.$off(this.update),t&&(t.$on("modified",this.update),Vue.set(this,"linked",t))}},mounted:function(){rsSystem.register(this),this.record&&!this.linked&&(this.record.$on("modified",this.update),Vue.set(this,"linked",this.record)),this.update()},methods:{update:function(t){var e,n;for(n=0;n<this.parties.length;n++)this.parties[n].$off("modified",this.update);for(this.parties.splice(0),n=0;n<this.universe.indexes.party.listing.length;n++)(e=this.universe.indexes.party.listing[n]).$on("modified",this.update),this.parties.push(e);this.parties.sort(this.sortData)}},beforeDestroy:function(){for(var t=0;t<this.parties.length;t++)this.parties[t].$off("modified",this.update);this.linked&&this.linked.$off("modified",this.update)},template:Vue.templified("pages/rssw/party.html")}),rsSystem.component("RSSWShip",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSCore],data:function(){var t={additional_ships:[],entity:null};return t},watch:{$route:{deep:!0,handler:function(){this.update()}}},mounted:function(){rsSystem.register(this),this.universe.$on("model:modified:complete",this.update),this.update()},methods:{update:function(){var t,e,n,i=[];if((this.entity&&this.entity.id!==this.$route.params.oid||!this.entity&&this.$route.params.oid)&&((e=this.universe.nouns.entity[this.$route.params.oid])&&this.isOwner(e)?Vue.set(this,"entity",e):console.warn("? ",this.isOwner(e),e)),this.$route.query.ships)for(t=this.$route.query.ships.split(","),n=0;n<t.length;n++)(e=this.universe.indexes.entity.lookup[t[n]])&&"ship"===e.classification&&this.isOwner(e)&&i.push(e);if(i.length!==this.additional_ships.length)for(this.additional_ships.splice(0),n=0;n<i.length;n++)this.additional_ships.push(i[n])}},beforeDestroy:function(){this.universe.$off("model:modified:complete",this.update)},template:Vue.templified("pages/rssw/ship.html")}),rsSystem.component("RSSWShop",{inherit:!0,mixins:[rsSystem.components.RSCore],data:function(){return{}},computed:{entity:function(){return this.universe.nouns.entity[this.$route.params.oid]},customer:function(){return this.universe.nouns.entity[this.$route.params.cid]}},watch:{$route:{deep:!0,handler:function(){this.update()}}},mounted:function(){rsSystem.register(this),this.universe.$on("model:modified:complete",this.update),this.update()},methods:{update:function(){}},beforeDestroy:function(){this.universe.$off("model:modified:complete",this.update)},template:Vue.templified("pages/rssw/shop.html")}),rsSystem.component("RSSWStorage",{inherit:!0,mixins:[rsSystem.components.RSCore],mounted:function(){rsSystem.register(this)},data:function(){return{}},methods:{},template:Vue.templified("pages/rssw/storage.html")}),function(){var t={icon:function(t){return"<span class='"+t+"'></span>"},template:function(t){return t?"<span class='fas fa-check'></span>":""},__info:function(t,e){return'<span class="fas fa-info-circle"></span>'},__edit:function(t,e){return'<span class="fas fa-edit"></span>'},__copy:function(t,e){return'<span class="fas fa-copy"></span>'},__view:function(t,e){if(e.classification&&"entity"===e._type)return'<span class="fas fa-external-link"></span>'}},e={__info:function(t){rsSystem.EventBus.$emit("display-info",t)},__edit:function(t){this.$router.push("/nouns/"+t._type+"/"+t.id)},__copy:function(t){this.$router.push("/nouns/"+t._type+"/"+t.id+"?copy=true")},__view:function(t){t.classification&&"entity"===t._type&&this.$router.push("/universe/"+t.classification+"/"+t.id)}},n={},i={__view:function(t,e){return"entity"===t._type&&"entity"!==e._type?1:"entity"===e._type&&"entity"!==t._type?-1:0}},r={shown:void 0,only:!0,out:!1},s=[{icon:"ra ra-bomb-explosion",property:"success",label:"Success"},{icon:"fad fa-jedi",property:"advantage",label:"Advantage"},{icon:"xwm xwing-miniatures-font-epic",property:"triumph",label:"Triumph"},{icon:"fal fa-triangle rot180",property:"failure",label:"Failure"},{icon:"rsswx rsswx-threat",property:"threat",label:"Threat"},{icon:"rsswx rsswx-despair",property:"despair",label:"Despair"},{icon:"fad fa-circle rs-white rs-secondary-black",property:"light",label:"Light"},{icon:"fad fa-circle rs-black rs-secondary-white",property:"dark",label:"Dark"}];rsSystem.component("RSSWUniverse",{inherit:!0,mixins:[rsSystem.components.RSComponentUtility,rsSystem.components.RSCorePage],data:function(){var r,a={};for(a.storageKeyID="_rssw_universeComponentKey",a.state=this.loadStorage(a.storageKeyID,{search:""}),void 0===a.state.filter&&(a.state.filter={},a.state.filter.null=a.state.filter.null||""),void 0===a.state.headers&&(a.state.headers=[{title:"",field:"icon",formatter:t.icon},{title:"Name",field:"name"},{title:"ID",field:"id"},{field:"__info",formatter:t.__info,recordAction:e.__info.bind(this),hideBlock:!0,nosort:!0},{field:"__edit",formatter:t.__edit,recordAction:e.__edit.bind(this),hideBlock:!0,nosort:!0},{field:"__copy",formatter:t.__copy,recordAction:e.__copy.bind(this),hideBlock:!0,nosort:!0},{field:"__view",formatter:t.__view,recordAction:e.__view.bind(this),hideBlock:!0,nosort:!0}]),void 0===a.state.paging&&(a.state.paging={},a.state.paging.per=20,a.state.paging.current=0,a.state.paging.pages=0,a.state.paging.spread=3),void 0===a.state.filterTemplate&&(a.state.filterTemplate="shown"),void 0===a.state.activeIndex&&(a.state.activeIndex=""),a.availableIndexes=Object.keys(this.universe.indexes),a.availableIndexes.sort(),a.listing={},a.listing.entity=[],a.listing.player=[],a.listing.item=[],a.listing.room=[],a.listingKeys=Object.keys(a.listing),a.command="",a.target="",a.corpus=[],a.rollProperties=s,a.universeEntities=[],a.maxLength=20,a.history=[],a.rolling={},a.updated="",a.difficulty={},a.difficulty.Blank={difficulty:0},a.difficulty.Easy={difficulty:1},a.difficulty.Average={difficulty:2},a.difficulty.Hard={difficulty:3},a.difficulty.Daunting={difficulty:4},a.difficulty.Formidable={difficulty:5},a.difficulty.Challenge={challenge:1},a.difficulty.Setback={setback:1},a.difficulties=Object.keys(a.difficulty),a.count={},r=0;r<a.difficulties.length;r++)a.count[a.difficulties[r]]=0;for(r=0;r<a.state.headers.length;r++)t[a.state.headers[r].field]&&(a.state.headers[r].formatter=t[a.state.headers[r].field]),e[a.state.headers[r].field]&&(a.state.headers[r].recordAction=e[a.state.headers[r].field].bind(this)),n[a.state.headers[r].field]&&(a.state.headers[r].action=n[a.state.headers[r].field].bind(this)),i[a.state.headers[r].field]&&(a.state.headers[r].sorter=i[a.state.headers[r].field].bind(this),a.state.sortKey===a.state.headers[r].field&&(a.state.sorter=a.state.headers[r].sorter));return a.state.filter.template=!1,a.state.historyLength||(a.state.historyLength=5),a},watch:{state:{deep:!0,handler:function(t,e){void 0!==r[this.state.filterTemplate]?Vue.set(this.state.filter,"template",r[this.state.filterTemplate]):Vue.delete(this.state.filter,"template"),this.saveStorage(this.storageKeyID,t)}}},mounted:function(){rsSystem.register(this),void 0!==r[this.state.filterTemplate]?Vue.set(this.state.filter,"template",r[this.state.filterTemplate]):Vue.delete(this.state.filter,"template"),this.universe.$on("universe:modified",this.updateListings),this.updateListings()},methods:{getActiveIndex:function(){return this.state.activeIndex?this.universe.indexes[this.state.activeIndex]:this.universe.index},exportUniverse:function(t){var e,n,i,r=$(this.$el).find("#anchors")[0],s=document.createElement("a");if(e={},t)for(n=this.getActiveIndex(),i=0;i<n.selection.length;i++)e[n.selected[n.selection[i]]._class]||(e[n.selected[n.selection[i]]._class]=[]),e[n.selected[n.selection[i]]._class].push(n.selected[n.selection[i]]);else for(i=0;i<rsSystem.listingNouns.length;i++)this.universe.indexes[rsSystem.listingNouns[i]]&&this.universe.indexes[rsSystem.listingNouns[i]].listing.length&&(e[rsSystem.listingNouns[i]]=this.universe.indexes[rsSystem.listingNouns[i]].listing);r.appendChild(s),s.href=URL.createObjectURL(new Blob([JSON.stringify(e,null,"\t")])),s.download=t?"universe_filtered."+Date.now()+".json":"universe_complete."+Date.now()+".json",s.click(),URL.revokeObjectURL(s.href),r.removeChild(s)},clearRolling:function(t){var e,n=Object.keys(t);for(this.history.unshift(JSON.parse(JSON.stringify(t))),this.state.historyLength<this.history.length&&this.history.splice(this.state.historyLength),e=0;e<n.length;e++)Vue.delete(t,n[e])},dismissRolled:function(t){var e=this.history.indexOf(t);-1!==e&&this.history.splice(e,1)},clearRolls:function(t){t&&this.clearRolling(),this.history.splice(0)},clearRolls:function(){this.history.splice(0)},rollDifficulty:function(t){var e,n,i,r=this.difficulty[t];if(!isNaN(r.difficulty))for(this.clearRolling(this.rolling),i=0;i<this.difficulties.length;i++)Vue.set(this.count,this.difficulties[i],0);for(Vue.set(this.count,t,this.count[t]+1),e=Dice.calculateDiceRoll(r),n=Object.keys(e),i=0;i<n.length;i++)e[n[i]]&&(this.rolling[n[i]]?Vue.set(this.rolling,n[i],this.rolling[n[i]]+e[n[i]]):Vue.set(this.rolling,n[i],e[n[i]]))},updateListings:function(t){var e,n,i,r={};for(this.universeEntities.splice(0),n=0;n<this.listingKeys.length;n++){for(this.listing[this.listingKeys[n]].splice(0),i=0;i<this.universe.indexes[this.listingKeys[n]].listing.length;i++)if(e=this.universe.indexes[this.listingKeys[n]].listing[i])switch(this.listing[this.listingKeys[n]].push(e),this.listingKeys[n]){case"entity":r[e.id]||e.hidden||e.inactive||(r[e.id]=!0,this.universeEntities.push(e))}this.listing[this.listingKeys[n]].sort(this.sortData)}this.universeEntities.sort(this.sortData)},showCommands:function(){return!!(this.state.activeIndex?this.universe.indexes[this.state.activeIndex]:this.universe.index).selection.length},resetHeaders:function(){Vue.set(this.state,"headers",[{title:"",field:"icon",formatter:t.icon},{title:"Name",field:"name",tag:"id"},{title:"Location",field:"location"},{title:"T",field:"template",formatter:t.template},{field:"__info",formatter:t.__info,recordAction:e.__info.bind(this),hideBlock:!0,nosort:!0},{field:"__edit",formatter:t.__edit,recordAction:e.__edit.bind(this),hideBlock:!0,nosort:!0},{field:"__copy",formatter:t.__copy,recordAction:e.__copy.bind(this),hideBlock:!0,nosort:!0},{field:"__view",formatter:t.__view,recordAction:e.__view.bind(this),sorter:i.__view}])},getSpread:function(){var t,e=[],n=Math.max(this.state.paging.spread-5,2),i=this.state.paging.spread+5;for(t=n;t<i;t++)e.push(t);return n>100&&e.unshift(100),n>50&&e.unshift(50),n>20&&e.unshift(20),n>10&&e.unshift(10),n>2&&e.unshift(2),i<10&&e.push(10),i<20&&e.push(20),i<50&&e.push(50),i<100&&e.push(100),e},processCommand:function(t){var e,n,i,r,s=this.state.activeIndex?this.universe.indexes[this.state.activeIndex]:this.universe.index,a=this.universe.index.lookup[this.target];switch(t){case"give":if(this.target)for(r=0;r<s.selection.length;r++)this.universe.nouns.item[s.selection[r]]?((n={}).item=s.selection[r],n.target=this.target,this.universe.send("give:item",n)):this.universe.nouns.room[s.selection[r]]?((n={}).room=s.selection[r],n.target=this.target,this.universe.send("give:room",n)):console.warn("Can only give item & room objects");break;case"take":if(this.target)for(r=0;r<s.selection.length;r++)this.universe.nouns.item[s.selection[r]]?((n={}).item=s.selection[r],n.target=this.target,this.universe.send("take:item",n)):this.universe.nouns.room[s.selection[r]]?((n={}).room=s.selection[r],n.target=this.target,this.universe.send("take:room",n)):console.warn("Can only take item & room objects");break;case"effect":if(this.target&&(i=this.universe.indexes.entity.index[this.target])){for(e={effect:[]},r=0;r<s.selection.length;r++)this.universe.nouns.effect[s.selection[r]]&&e.effect.push(s.selection[r]);i.commitAdditions(e)}break;case"uneffect":if(this.target&&(i=this.universe.indexes.entity.index[this.target])){for(e={effect:[]},r=0;r<s.selection.length;r++)this.universe.nouns.effect[s.selection[r]]&&e.effect.push(s.selection[r]);i.commitSubtractions(e)}break;case"obscure":for(r=0;r<s.selection.length;r++)this.universe.index.index[s.selection[r]]&&this.universe.index.index[s.selection[r]].commit({obscured:!0});break;case"unobscure":for(r=0;r<s.selection.length;r++)this.universe.index.index[s.selection[r]]&&this.universe.index.index[s.selection[r]].commit({obscured:!1});break;case"drop":for(e=s.selection.concat([]),r=0;r<e.length;r++)s.selected[e[r]]._drop?((n={})._type=s.selected[e[r]]._type,n.id=s.selected[e[r]].id,n.time=Date.now(),this.universe.send("delete:"+s.selected[e[r]]._type,n),s.unselect(s.selected[e[r]])):s.selected[e[r]]._drop=!0;break;case"spawn":for(r=0;r<s.selection.length;r++)(e=s.selected[s.selection[r]]).template&&"entity"===e._class?(Object.keys(e),(n={}).parent=e.id,n.name=e.name+" (New)",n.id+=":"+Date.now(),n.template=!1,n._type="entity",this.target&&this.universe.indexes.player.index[this.target]&&(n.owners=[this.target]),this.target&&this.universe.indexes.entity.index[this.target]&&(n.inside=this.target),this.universe.send("modify:entity",n)):console.warn("Skipping Selection: ",e);break;case"dashboard-ships":var o=s.selection[0],l=s.selection.slice(1);window.open(location.pathname+"#/dashboard/ship/"+o+"?ships="+l.join(","),"dashboard");break;case"export":this.exportUniverse(!0);break;case"grant-knowledge":if(a){for(n=[],i=[],r=0;r<s.selection.length;r++)this.universe.indexes.knowledge.lookup[s.selection[r]]?n.push(s.selection[r]):i.push(s.selection[r]);console.log("Granting: ",n,i),n.length&&a.learnKnowledge(n),i.length&&a.learnOfObjects(i)}break;case"forget-knowledge":if(a){for(n=[],i=[],r=0;r<s.selection.length;r++)this.universe.indexes.knowledge.lookup[s.selection[r]]?n.push(s.selection[r]):i.push(s.selection[r]);n.length&&a.forgetKnowledge(n),i.length&&a.unlearnOfObjects(i)}}Vue.set(this,"command","")},processAction:function(t){console.warn("Table Action: ",t)},filtered:function(t){return!t.template&&!t.inactive&&(!this.state.search||t._search&&-1!==t._search.indexOf(this.state.search)||-1!==t.id.indexOf(this.state.search)||-1!==t.name.indexOf(this.state.search)||t.description&&-1!==t.description.indexOf(this.state.search))}},beforeDestroy:function(){this.universe.$off("universe:modified",this.updateEntities)},template:Vue.templified("pages/rssw/universe.html")})}(),function(){var t=new RegExp("/([a-zA-Z0-9.:_-]+)/");rsSystem.component("RSSystem",{inherit:!0,mixins:[rsSystem.components.DataManager],props:["universe","user"],data:function(){var t={};return t.player=this.universe.indexes.player.index[this.user.id],t.navigator=rsSystem.getBrowserName(),t.system=rsSystem,t.knownErrors={},t.importOverwrites=!1,t.importSelection=!1,t.importMessageType="",t.importMessage=null,t.importIcon=null,t.importing=!1,t.toImport=0,t.imported=0,t.skipped=0,t.failed=0,t.connectedPlayers=[],t.importedIDs=[],t.skippedIDs=[],t.failedIDs=[],t},mounted:function(){rsSystem.register(this),this.universe.$on("universe:modified",this.update),this.universe.$on("model:modified",this.update),this.universe.$on("connected",this.update),this.universe.$on("error",this.update),this.update()},methods:{showInfo:function(t){rsSystem.EventBus.$emit("display-info",t)},toggleLocalDebug:function(){Vue.set(this.universe,"debugConnection",!this.universe.debugConnection)},uncachedRefresh:function(){caches.delete("rsswx_0.0.1").then(function(){location.reload(!0)})},showFailures:function(){console.log("Failures: ",this.universe.importing.failed)},checkImportSelection:function(){var t=$(this.$el).find("#importFileSelection");Vue.set(this,"importSelection",t&&t.length&&t[0].files.length)},exportUniverse:function(t){var e,n,i,r=$(this.$el).find("#anchors")[0],s=document.createElement("a");if(e={},t)for(n=this.getActiveIndex(),i=0;i<n.selection.length;i++)e[n.selected[n.selection[i]]._class]||(e[n.selected[n.selection[i]]._class]=[]),e[n.selected[n.selection[i]]._class].push(n.selected[n.selection[i]]);else for(i=0;i<rsSystem.listingNouns.length;i++)this.universe.indexes[rsSystem.listingNouns[i]]&&this.universe.indexes[rsSystem.listingNouns[i]].listing.length&&(e[rsSystem.listingNouns[i]]=this.universe.indexes[rsSystem.listingNouns[i]].listing);r.appendChild(s),s.href=URL.createObjectURL(new Blob([JSON.stringify(e,null,"\t")])),s.download=t?"universe_filtered."+Date.now()+".json":"universe_complete."+Date.now()+".json",s.click(),URL.revokeObjectURL(s.href),r.removeChild(s)},importOverwriteToggle:function(){Vue.set(this,"importOverwrites",!this.importOverwrites)},importUniverse:function(){var t=$(this.$el).find("#importFileSelection");!this.universe.importing.active&&t&&t.length&&t[0].files.length&&this.readFile(t[0].files[0]).then(t=>{this.universe.importData(JSON.parse(t.data),this.importOverwrites)}).catch(t=>{console.error("Import to Universe Error: ",t)})},stopUniverse:function(){this.universe.send("stop")},makeIssue:function(){var t={};t.id=navigator.userAgent.sha256(),t.name="Problems: "+this.navigator.name+" "+this.navigator.version,t.icon="rs-dark-red fas fa-exclamation-triangle",t.description="There are known issues with this browser version",t._type="note",this.universe.send("modify:note",t)},getServerAddress:function(){return t.exec(this.universe.connection.address)[1]},getDate:function(t){var e=new Date(t);return e.toLocaleDateString()+" "+e.toLocaleTimeString()},update:function(){var t;for(Vue.set(this.knownErrors,"navigator",this.universe.indexes.note.index[navigator.userAgent.sha256()]||this.universe.indexes.note.index[navigator.userAgent.toLowerCase().sha256()]),this.connectedPlayers.splice(0),t=0;t<this.universe.indexes.player.listing.length;t++)this.universe.indexes.player.listing[t]&&this.universe.indexes.player.listing[t].connections>0&&this.connectedPlayers.push(this.universe.indexes.player.listing[t]);this.$forceUpdate()}},beforeDestroy:function(){this.universe.$off("universe:modified",this.update),this.universe.$off("model:modified",this.update),this.universe.$off("connected",this.update),this.universe.$off("error",this.update)},template:Vue.templified("pages/system.html")})}(),rsSystem.component("RSTest",{inherit:!0,mixins:[],mounted:function(){rsSystem.register(this)},data:function(){return{}},methods:{},template:Vue.templified("pages/test.html")}),rsSystem.component("RSWindow",{inherit:!0,mixins:[rsSystem.components.RSCorePage],template:Vue.templified("pages/window.html")}),rsSystem.device={touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},rsSystem.math=rsSystem.math||{},rsSystem.math.distance=rsSystem.math.distance||{},rsSystem.math.distance.pi2=2*Math.PI,rsSystem.math.distance.points2D=function(t,e,n,i){return n?Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2)):Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},rsSystem.math.distance.points3D=function(t,e){},rsSystem.math.distance.reduceMeters=function(t){var e,n={};for(e=0;e<rsSystem.math.distance.order.length;e++)n[rsSystem.math.distance.order[e]]=Math.floor(t/rsSystem.math.distance.convert[rsSystem.math.distance.order[e]]),t%=rsSystem.math.distance.convert[rsSystem.math.distance.order[e]];return n},rsSystem.math.distance.display=function(t,e,n){var i;if(n=n||rsSystem.math.distance.order,e=e||"")for(i=0;i<n.length;i++)e=e.replace("$"+n[i],t[n[i]]||0);else for(i=0;i<n.length;i++)t[n[i]]&&(e+=t[n[i]]+n[i]+" ");return e.trim()},rsSystem.math.distance.order=["pc","ly","au","km","m"],rsSystem.math.distance.lengths=[{symbol:"nm",value:1e-9},{symbol:"mm",value:.001},{symbol:"cm",value:.01},{symbol:"in",value:.0254},{symbol:"ft",value:.3048},{symbol:"yd",value:.9144},{symbol:"m",value:1},{symbol:"km",value:1e3},{symbol:"mi",value:1609},{symbol:"au",value:1495979e5},{symbol:"ly",value:946073e10},{symbol:"pc",value:3085678e10}],rsSystem.math.distance.convert={},function(){var t;for(t=0;t<rsSystem.math.distance.lengths.length;t++)rsSystem.math.distance.convert[rsSystem.math.distance.lengths[t].symbol]=rsSystem.math.distance.lengths[t].value}(),rsSystem.math=rsSystem.math||{},rsSystem.math.time=rsSystem.math.time||{},rsSystem.math.time.reference={s:1,m:60,h:3600,d:86400,w:432e3,M:3024e3,Y:31795200},rsSystem.math.time.order=["Y","M","w","d","h","m","s"],rsSystem.math.time.reduceSeconds=function(t){var e,n={};for(e=0;e<rsSystem.math.time.order.length;e++)n[rsSystem.math.time.order[e]]=Math.floor(t/rsSystem.math.time.reference[rsSystem.math.time.order[e]]),t%=rsSystem.math.time.reference[rsSystem.math.time.order[e]];return n},rsSystem.math.time.display=function(t,e){var n,i;if(e)for(i=0;i<rsSystem.math.time.order.length;i++)n=t[rsSystem.math.time.order[i]]||0,e=e.replace("$"+rsSystem.math.time.order[i],n),n<10&&(n="0"+n),e=e.replace("#"+rsSystem.math.time.order[i],n);else e="",1===t.Y?e+=t.Y+"year ":t.Y&&(e+=t.Y+"years "),1===t.M?e+=t.M+"month ":t.M&&(e+=t.M+"months "),1===t.w?e+=t.w+"week ":t.w&&(e+=t.w+"weeks "),e+=t.h+":",t.m<10?e+="0"+t.m:e+=t.m,t.s<10?e+=":0"+t.s:e+=":"+t.s;return e.trim()},rsSystem.registerNoun(RSAbility,"ability"),rsSystem.registerNoun(RSArchetype,"archetype"),rsSystem.registerNoun(RSCondition,"condition"),rsSystem.registerNoun(RSDataset,"dataset"),rsSystem.registerNoun(RSEffect,"effect"),rsSystem.registerNoun(RSEntity,"entity"),rsSystem.registerNoun(RSAction,"action"),rsSystem.registerNoun(RSEvent,"event"),rsSystem.registerNoun(RSImage,"image"),rsSystem.registerNoun(RSItem,"item"),rsSystem.registerNoun(RSItemType,"itemtype"),rsSystem.registerNoun(RSManeuver,"maneuver"),rsSystem.registerNoun(RSJournal,"journal"),rsSystem.registerNoun(RSKnowledge,"knowledge"),rsSystem.registerNoun(RSLocation,"location"),rsSystem.registerNoun(RSModifierAttributes,"modifierattrs"),rsSystem.registerNoun(RSModifierStats,"modifierstats"),rsSystem.registerNoun(RSDatapoint,"datapoint"),rsSystem.registerNoun(RSDatausage,"datausage"),rsSystem.registerNoun(RSType,"type"),rsSystem.registerNoun(RSNote,"note"),rsSystem.registerNoun(RSParty,"party"),rsSystem.registerNoun(RSPlayer,"player"),rsSystem.registerNoun(RSPlaylist,"playlist"),rsSystem.registerNoun(RSRace,"race"),rsSystem.registerNoun(RSRoom,"room"),rsSystem.registerNoun(RSSession,"session"),rsSystem.registerNoun(RSSetting,"setting"),rsSystem.registerNoun(RSSex,"sex"),rsSystem.registerNoun(RSSlot,"slot"),rsSystem.registerNoun(RSSkill,"skill"),rsSystem.registerNoun(RSStreamURL,"streamurl"),rsSystem.registerNoun(RSMinigame,"minigame"),rsSystem.registerNoun(RSWidgetConfiguration,"widgetconfiguration"),rsSystem.registerNoun(RSWidget,"widget");var _p=function(t){return void 0===t?void 0:null===t?null:"object"==typeof t?JSON.parse(JSON.stringify(t)):t};rsSystem.App=new Vue({el:"#game",data:function(){return{settings:{}}},mounted:function(){rsSystem.Router.addRoutes([{path:"/",component:rsSystem.components.RSHome,children:[{path:"dashboard",component:rsSystem.components.RSSWDashboard,children:[{path:"character",component:rsSystem.components.RSSWCharacter,children:[{path:":oid",component:rsSystem.components.RSSWCharacter}]},{path:"base",component:rsSystem.components.RSSWBase,children:[{path:":oid",component:rsSystem.components.RSSWBase}]},{path:"ship",component:rsSystem.components.RSSWShip,children:[{path:":oid",component:rsSystem.components.RSSWShip}]},{path:"item",component:rsSystem.components.RSSWItem,children:[{path:":oid",component:rsSystem.components.RSSWItem}]}]},{path:"construct",component:rsSystem.components.RSWindow,children:[{path:"character",component:rsSystem.components.RSSWCharacterBuilder}]},{path:"base",component:rsSystem.components.RSSWBase,children:[{path:":oid",component:rsSystem.components.RSSWBase}]},{path:"shop/:oid/:cid?",component:rsSystem.components.RSSWShop},{path:"hangar",component:rsSystem.components.RSSWHangar,children:[{path:":oid",component:rsSystem.components.RSSWHangar}]},{path:"locality",component:rsSystem.components.RSSWLocality,children:[{path:":oid",component:rsSystem.components.RSSWLocality}]},{path:"storage",component:rsSystem.components.RSSWStorage,children:[{path:":oid",component:rsSystem.components.RSSWStorage}]},{path:"journal",component:rsSystem.components.RSSWJournal,children:[{path:":oid",component:rsSystem.components.RSSWJournal}]},{path:"map",component:rsSystem.components.RSSWMap,children:[{path:":oid",component:rsSystem.components.RSSWMap}]},{path:"galaxy",component:rsSystem.components.RSSWUniverse,children:[{path:"character",component:rsSystem.components.RSSWCharacter,children:[{path:":oid",component:rsSystem.components.RSSWCharacter}]},{path:"base",component:rsSystem.components.RSSWBase,children:[{path:":oid",component:rsSystem.components.RSSWBase}]},{path:"ship",component:rsSystem.components.RSSWShip,children:[{path:":oid",component:rsSystem.components.RSSWShip}]},{path:"item",component:rsSystem.components.RSSWItem,children:[{path:":oid",component:rsSystem.components.RSSWItem}]}]},{path:"universe",component:rsSystem.components.RSSWUniverse,children:[{path:"character",component:rsSystem.components.RSSWCharacter,children:[{path:":oid",component:rsSystem.components.RSSWCharacter}]},{path:"base",component:rsSystem.components.RSSWBase,children:[{path:":oid",component:rsSystem.components.RSSWBase}]},{path:"ship",component:rsSystem.components.RSSWShip,children:[{path:":oid",component:rsSystem.components.RSSWShip}]},{path:"item",component:rsSystem.components.RSSWItem,children:[{path:":oid",component:rsSystem.components.RSSWItem}]}]},{path:"master",component:rsSystem.components.RSSWMasterPage},{path:"combat",component:rsSystem.components.RSSWMasterCombatPage,children:[{path:":oid",component:rsSystem.components.RSSWMasterCombatPage}]},{path:"party/:oid?",component:rsSystem.components.RSSWPartyPage},{path:"nouns/:type?/:oid?",component:rsSystem.components.RSNounControls},{path:"ship",component:rsSystem.components.RSSWShip},{path:"about",component:rsSystem.components.RSAbout},{path:"account",component:rsSystem.components.RSAccount},{path:"system",component:rsSystem.components.RSSystem},{path:"test",component:rsSystem.components.RSTest}]}])},router:rsSystem.Router,props:{},created:function(){}});
//# sourceMappingURL=main.js.map
rsSystem.version = "0.28.03"